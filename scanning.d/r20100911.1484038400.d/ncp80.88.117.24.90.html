HTTP/1.0 200 OK
Content-type: text/html
Cache-Control: no-cache

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<script language="JavaScript">
  self.name = "mxHome10__0__113__29";
	var hostname;
	var url_regexpr= /(\w+):\/\/([^\/]+)\/(\S*)/;
	var result = document.URL.match(url_regexpr);
	if (result != null)
		hostname = result[2];
	else
		hostname = "";
	document.write('<TITLE>' + hostname + "  <\/TITLE>");
</script>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="publisher" content="MOBOTIX AG, Germany">
<meta name="copyright" content="MOBOTIX AG, Germany">
<meta name="author" content="Daniel Kabs, MOBOTIX AG, Kaiserslautern, Germany.">
<link rel="owner" href="mailto:info@mobotix.com">
<link rel="copyright" href="/about.html" title="Copyright">
<style type="text/css">
td,th{font-family:Helvetica,Arial,sans-serif;}
pre,textarea{font-family:monospace;}
.headtablesmall{font-family:Helvetica,Arial,sans-serif;font-size:100%;}
.standard {font-size:80%}
.inherit {font-size:100%}
.smallcomment{font-size:95%}
.smallercomment{font-size:80%}
p,table,td,th{font-family:Helvetica,Arial;} 
form{margin-bottom:0px;margin-top:0px;}
.kleinerknopf{font-size:80%};
</style>

<script type="text/javascript">
	var filesystem__version="V1.9.4.8";
	var homepage__language="de";
	var windowname_home="mxHome10__0__113__29";
	var windowname_ext ="mxExtern10__0__113__29";
	var windowname_help="mxHelp10__0__113__29";
	var windowname_info="mxInfo10__0__113__29";
	function openExtNoDeko(path,winname) {
		if ( path.search(/^!/) >= 0 ) {
			path=path.replace(/^!/,"");
			path=path+"?cachedummy="+Math.floor(Math.random()*1000000);
		}
		return window.open(path,winname,"scrollbars=yes,resizable=yes,width=722");
	}

	function goUserlevel()
	{
		if (self.name == windowname_ext)
		{
			if (window.opener==null || window.opener.closed)
			// Kein Opener oder bereits geschlossen
		  	window.open("/control/userimage.html",windowname_home);
			else
				window.opener.focus();
	   	self.window.close();
			return;
		}
		location.href="/control/userimage.html";
	}
	function getTextFensterX(breite) {
		var wString=",width="+breite;
		if (window.screenLeft)
			wString+=",left="+parseInt(screenLeft+document.body.offsetWidth/2-breite/2);
		else if (window.screenX)
			wString+=",screenX="+parseInt(screenX+outerWidth/2-breite/2);
		return wString;
	}
	function getTextFensterY(hoehe) {
		var wString=",height="+hoehe;
		if (window.screenTop)
			wString+=",top="+parseInt(screenTop+document.body.offsetHeight/2-hoehe/2);
		else if (window.screenY)
			wString+=",screenY="+parseInt(screenY+innerHeight/2-hoehe/2);
		return wString;
	}

	function open_camerainfo(prefix) {
		if (typeof prefix == "undefined")
			var prefix="";
		var wdh=window.open(prefix+"/control/camerainfo?rand="+Math.random(), windowname_info,
			"width=370,height=320,scrollbars=yes,resizable=yes");
		if (wdh) wdh.focus();
	}
function debugmsg(k) {};

</script>
</head>

<body bgcolor="#FFFFFF" background="/decor/Cam_Kachel_grau.gif" onload="if (document.all && document.all.CamPic) document.all.CamPic.style.width='auto';animation_init();"> 

<TABLE width="100%" border="0" cellspacing="0" cellpadding="4" bgcolor="#000088">
	<TR>		<TD class=headtablesmall valign="middle"> 		<font face="Helvetica,Arial" color="#CCCCCC">
		 		<b>MOBOTIX M1</b> azzurra  
			</font>
		</TD><TD class=headtablesmall align=right><nobr>
		<a href="/help/help?homepage" onclick="openExtNoDeko('/help/help?homepage','mxHelp10__0__113__29');return false;"><img alt="Hilfeseite zum Thema 'homepage' öffnen" title="Hilfeseite zum Thema 'homepage' öffnen" border=0 src="/decor/help.gif" height=12 width=12></a>
		<a target="mxExtern10__0__113__29" href="/control/camerainfo" onclick="open_camerainfo();return false;"
		><img alt="Kamerainformationen anzeigen" title="Kamerainformationen anzeigen" border=0 src="/decor/info.gif" width=12 height=12></a>
		</nobr></TD>	</TR></TABLE>
<noscript>
	<center>
		<img name="CamPic" src="/record/current.jpg" 
			BORDER=1 ALT="Shift-Reload to Refresh Image">
		<BR>
		<A HREF="/control/userimage.html" target="mxHome10__0__113__29">
			<font face="Helvetica,Arial" size="-1">Open Menu.</font></A>
		<br><br>
		<font face="Helvetica,Arial" size="+3" color=red>
			 Press Shift-Reload to refresh the image. 
		 	<br>
		 	Enable JavaScript / Active Scripting to see more details.
		</font>
	</center>	
</noscript>
<br><div align=center>
<form name="dkdk">
<TABLE width=320 cellpadding=0 border=0 cellspacing=0>
<TR  valign=baseline>
<td colspan=2 align=center>
<a href="javascript:void 0;" ><img name="CamPic" src="/record/current.jpg?rand=3822253" BORDER=0 ALT="Camera Live Image" ></a></td>
</tr>
<tr>
<td>
		<A onclick="goUserlevel();return false;" HREF="/control/userimage.html">
    	<font face="Helvetica,Arial" size="-1">Menu</font></A>
</td>
<td>
<font face="Helvetica,Arial" size="-1">
	<SELECT style="font-size:xx-small;" name="recordmult" size=1 onchange="setframerate();">
	<option  value="-99">off</option>
<option  value="0.25">4 fps</option>
<option  value="0.333">3 fps</option>
<option  value="0.5">2 fps</option>
<option  value="1">1 fps</option>
<option  value="2">2 sec.</option>
<option  value="3">3 sec.</option>
<option  value="4">4 sec.</option>
<option  value="5">5 sec.</option>
<option  value="10">10 sec.</option>
<option  selected  value="30">30 sec.</option>
<option  value="60">1 min.</option>
</SELECT></font>
<script language="JavaScript" type="text/javascript">
	var current_refresh_method_nr=0;
	var refreshmethods_type=new Array(0,0,0,1);
	function refreshMethod(new_value) {
		if (refreshmethods_type[new_value]!=refreshmethods_type[current_refresh_method_nr]) {
			var url=location.href.split("?");
			location.href=url[0]+"?REFRESHMETHOD="+new_value;
		} else {
			current_refresh_method_nr=new_value;
			setframerate();
		}
	}
</script></td>
</TR>
</TABLE>
</form></div>
<script language="JavaScript">
			var pic_url="/record/current.jpg";
			var noframepath="/decor/m1m-error.jpg";
			var n=Math.floor(Math.random()*1000000);
			var session_id=Math.floor(Math.random()*1000000);
			var startn=n;
			var GetItOn=1;
			var recordmult=1;
			var framestep=recordmult*12;
			var buffer= new Image();
			var aktiv=null;
			var db_enabled=0;
			var passiv=null;

  function DoComplete()
  {
		//debugmsg("DoComplete() buffer.src="+buffer.src);
		if (db_enabled != 0) {
			if (db_enabled<0) {
				//document.CamPic.style.filter="";
				//buffer.style.filter="alpha(opacity=70,style=0)";
				document.CamPic.style.display="";
				buffer.style.display="none";
			} else {
				//document.CamPic.style.filter="alpha(opacity=70,style=0)";
				//buffer.style.filter="";
				buffer.style.display="";
				document.CamPic.style.display="none";
			}
			db_enabled*=-1;
		} else {
	  	document.CamPic.src = buffer.src;
		}
 		GetItOn = 1;
		if (current_refresh_method_nr == 1 && framestep>0) {// Sync onload implementieren
			if (passiv==null)
				Animation();
			else 
				// Moz. ruft manchmal LoadError und DoComplete kurz hintereinander auf
				debugmsg("timer for Animation() already started...");
		}
  }
	function LoadError()
	{
		debugmsg("LoadError:#"+(n-1)+"  db:"+db_enabled);
		if (db_enabled != 0) {
			db_enabled*=-1;			
		} else {
			document.CamPic.src=noframepath;
		}
		GetItOn = 1;
		if (current_refresh_method_nr == 1 && framestep>0) // Sync onload Fehlerbehandlung
			passiv=setTimeout("passiv=null;Animation();",1000);
	}

  function setframerate() {
		recordmult=window.document.dkdk.recordmult.options[window.document.dkdk.recordmult.selectedIndex].value;
		framestep=Math.round(recordmult*12);
		debugmsg("setframerate: aktiv="+aktiv+" rm="+current_refresh_method_nr+" mult:"+recordmult+" fs="+framestep);
 		if (aktiv) {
			window.clearInterval(aktiv);
			aktiv = null;
		}
		document.CamPic.onerror=null;
		buffer.onerror=null;
		if (recordmult<0) {
			if (current_refresh_method_nr == 2) { //  Stream ausschalten
				GetItOn=1; Animation();
			}
			return;
		}
		// Refresh Typen
		if (current_refresh_method_nr == 2) { //  Stream anschalten
			buffer.onload = null;
			buffer.onerror= null;
			document.CamPic.onload=null;
			// wg. Mozilla Bug # 42224 "Spontaner Abbruch des Streams"
			document.CamPic.onerror= function () {setTimeout("setframerate();",500) } ;
			document.CamPic.src = "/cgi-bin/faststream.jpg?framestep="+framestep+"&rand=" + String(n++);
			return;
		} else if (current_refresh_method_nr == 1) { // OnLoad synced
			session_id++;
			Animation();
			return;
		}
		aktiv=window.setInterval("Animation()",1000*recordmult);
		GetItOn=1;	// auf alle Faelle anzeigen!
		Animation(); // und go...
	}
  function Animation()
  {
		var my_rm_nr=current_refresh_method_nr;
		var my_fr_step=framestep;
		var my_session=session_id;
		
	  if (GetItOn == 1 || (my_rm_nr == 1 && my_fr_step>0))
		 	// Bild ist geladen und das naechste kann 
	  {	// angefordert werden.
			GetItOn = 0;
			//debugmsg("Animate:#"+n+" aktiv="+aktiv+" db:"+db_enabled);
			if (db_enabled<0) {
				buffer.onerror=buffer.onload=null;
				document.CamPic.onerror= LoadError;
				document.CamPic.onload = DoComplete;
				if (my_rm_nr == 0)
					document.CamPic.src = pic_url + "?rand=" + String(n++);
				else					
					document.CamPic.src = pic_url + "?sync="+my_fr_step+"&session="+my_session+"&rand="+String(n++);
			} else {
				document.CamPic.onerror=document.CamPic.onload=null
				buffer.onerror= LoadError;
				buffer.onload = DoComplete;
				if (my_rm_nr == 0)
					buffer.src = pic_url + "?rand=" + String(n++);
				else
					buffer.src = pic_url + "?sync="+my_fr_step+"&session="+my_session+"&rand="+String(n++);
			}
		}
  }
  function animation_init() {
		if ( document.all && (navigator.platform.substr(0,3) != "Mac") ) {
			document.CamPic.insertAdjacentHTML("AfterEnd","<img border=0 style=\"display:none;\" name=dbbuffer></b>");
			buffer=document.dbbuffer;
			db_enabled=1;
		}
		setframerate();
	}
</script><hr>
<font face="Helvetica,Arial" size="-2">	&copy;2001-2003 <a href="/about.html">MOBOTIX AG</a>, Germany  &middot; <a href="http://www.mobotix.com/">http://www.mobotix.com/</a>
</font>
<script type='text/javascript' language='JavaScript'>self.focus();</script></body>
</html>

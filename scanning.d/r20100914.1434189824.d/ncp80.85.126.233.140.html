HTTP/1.1 200 OK
Date: Tue, 14 Sep 2010 19:49:03 GMT
Server: Apache/2.2.3 (Scientific Linux)
Last-Modified: Wed, 21 May 2008 03:22:05 GMT
ETag: "29b02a2-39d022-44db519da5140"
Accept-Ranges: bytes
Content-Length: 3788834
Connection: close
Content-Type: text/html; charset=UTF-8

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Red Hat Enterprise Linux</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="description" content="This Deployment Guide documents relevant information regarding the deployment, configuration and administration of Red Hat Enterprise Linux 5.2." />
  </head>
  <body class="desktop">
    <div class="book" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="index"></a>Red Hat Enterprise Linux</h1>
          </div>
          <div>
            <h2 class="subtitle">Deployment Guide</h2>
          </div>
          <div>
            <h3 class="corpauthor">
		<span class="inlinemediaobject"><object data="Common_Content/images/redhat-logo.svg" type="image/svg+xml"></object></span>
	</h3>
          </div>
          <div>
            <p class="copyright">Copyright © 2008 Red Hat, Inc.</p>
          </div>
          <div>
            <div class="legalnotice">
              <a id="id2908495"></a>
              <p>
		Copyright <span class="trademark"></span>© 2008 Red Hat, Inc. This material may only be distributed subject to the terms and conditions set forth in the Open Publication License, V1.0 or later with the restrictions noted below (the latest version of the OPL is presently available at <a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>).
	</p>
              <p>
		Distribution of substantively modified versions of this document is prohibited without the explicit permission of the copyright holder.
	</p>
              <p>
		Distribution of the work or derivative of the work in any standard (paper) book form for commercial purposes is prohibited unless prior permission is obtained from the copyright holder.
	</p>
              <p>
		Red Hat and the Red Hat "Shadow Man" logo are registered trademarks of Red Hat, Inc. in the United States and other countries.
	</p>
              <p>
		All other trademarks referenced herein are the property of their respective owners.
	</p>
              <p>
		The GPG fingerprint of the security@redhat.com key is:
	</p>
              <p>
		CA 20 86 86 2B D6 9D FC 65 F6 EC C4 21 91 80 CD DB 42 A6 0E
	</p>
              <p>
</p>
              <div class="address">
                <p><span class="street">1801 Varsity Drive</span><br />
<span class="city">Raleigh</span>, <span class="state">NC</span> <span class="postcode">27606-2072</span><br />
<span class="country">USA</span><br />
<span class="phone">Phone: +1 919 754 3700</span><br />
<span class="phone">Phone: 888 733 4281</span><br />
<span class="fax">Fax: +1 919 754 3701</span><br />
<span class="pob">PO Box 13588</span><br />
<span class="city">Research Triangle Park</span>, <span class="state">NC</span> <span class="postcode">27709</span><br />
<span class="country">USA</span></p>
              </div>
              <p>
	</p>
            </div>
          </div>
          <div>
            <p class="pubdate">January 2008</p>
          </div>
          <div>
            <div class="revhistory">
              <table border="1" width="100%" summary="Revision history">
                <tr>
                  <th align="left" valign="top" colspan="3">
                    <b>Revision History</b>
                  </th>
                </tr>
                <tr>
                  <td align="left">Revision 5.2-11</td>
                  <td align="left">Wed May 21 2008</td>
                  <td align="left">
                    <span class="firstname">Michael Hideo<br /></span>
                    <span class="surname">Smith<br /></span>
                    <code class="email">&lt;<a href="mailto:mhideo@redhat.com">mhideo@redhat.com</a>&gt;</code>
                  </td>
                </tr>
                <tr>
                  <td align="left" colspan="3">
				<table class="simplelist" border="0" summary="Simple list"><tr><td>Resolves: #232215</td></tr><tr><td>Changing from XML to HTML Single with floating Table of Contents and viewable by browser</td></tr></table>
			</td>
                </tr>
              </table>
            </div>
          </div>
          <div>
            <div class="abstract">
              <h6>Abstract</h6>
              <p>This Deployment Guide documents relevant information regarding the
deployment, configuration and administration of Red Hat Enterprise Linux
5.2.</p>
            </div>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <dl>
          <dt>
            <span class="preface">
              <a href="#ch-intro">Introduction</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-intro-conventions">1. Document Conventions</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s2-intro-feedback">2. Send in Your Feedback</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-filesystems">I. File Systems</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-filesystem">1. File System Structure</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-why">1.1. Why Share a Common Structure?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-fhs">1.2. Overview of File System Hierarchy Standard (FHS)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-filesystem-fsstnd">1.2.1. FHS Organization</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-special-file">1.3. Special File Locations Under Red Hat Enterprise Linux</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-ext3">2. The ext3 File System</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext3">2.1. Features of ext3</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext3-create">2.2. Creating an ext3 File System</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext3-convert">2.3. Converting to an ext3 File System</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext2-revert">2.4. Reverting to an ext2 File System</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-proc">3. The <code class="filename">proc</code> File System</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-virtual">3.1. A Virtual File System</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-viewing">3.1.1. Viewing Virtual Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-change">3.1.2. Changing Virtual Files</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-topfiles">3.2. Top-level Files within the <code class="filename">proc</code> File System</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-apm">3.2.1. <code class="filename">/proc/apm</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-buddyinfo">3.2.2. <code class="filename">/proc/buddyinfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-cmdline">3.2.3. <code class="filename">/proc/cmdline</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-cpuinfo">3.2.4. <code class="filename">/proc/cpuinfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-crypto">3.2.5. <code class="filename">/proc/crypto</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-devices">3.2.6. <code class="filename">/proc/devices</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dma">3.2.7. <code class="filename">/proc/dma</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-execdomains">3.2.8. <code class="filename">/proc/execdomains</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-fb">3.2.9. <code class="filename">/proc/fb</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-filesystems">3.2.10. <code class="filename">/proc/filesystems</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-interrupts">3.2.11. <code class="filename">/proc/interrupts</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-iomem">3.2.12. <code class="filename">/proc/iomem</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-ioports">3.2.13. <code class="filename">/proc/ioports</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-kcore">3.2.14. <code class="filename">/proc/kcore</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-kmsg">3.2.15. <code class="filename">/proc/kmsg</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-loadavg">3.2.16. <code class="filename">/proc/loadavg</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-locks">3.2.17. <code class="filename">/proc/locks</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-mdstat">3.2.18. <code class="filename">/proc/mdstat</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-meminfo">3.2.19. <code class="filename">/proc/meminfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-misc">3.2.20. <code class="filename">/proc/misc</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-modules">3.2.21. <code class="filename">/proc/modules</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-mounts">3.2.22. <code class="filename">/proc/mounts</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-mtrr">3.2.23. <code class="filename">/proc/mtrr</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-partitions">3.2.24. <code class="filename">/proc/partitions</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-pci">3.2.25. <code class="filename">/proc/pci</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-slabinfo">3.2.26. <code class="filename">/proc/slabinfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-stat">3.2.27. <code class="filename">/proc/stat</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-swaps">3.2.28. <code class="filename">/proc/swaps</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-sysrq-trigger">3.2.29. <code class="filename">/proc/sysrq-trigger</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-uptime">3.2.30. <code class="filename">/proc/uptime</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-version">3.2.31. <code class="filename">/proc/version</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-directories">3.3. Directories within <code class="filename">/proc/</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-processdirs">3.3.1. Process Directories</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-bus">3.3.2. <code class="filename">/proc/bus/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-driver">3.3.3. <code class="filename">/proc/driver/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-fs">3.3.4. <code class="filename">/proc/fs</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-ide">3.3.5. <code class="filename">/proc/ide/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-irq">3.3.6. <code class="filename">/proc/irq/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-net">3.3.7. <code class="filename">/proc/net/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-scsi">3.3.8. <code class="filename">/proc/scsi/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-sys">3.3.9. <code class="filename">/proc/sys/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-sysvipc">3.3.10. <code class="filename">/proc/sysvipc/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-tty">3.3.11. <code class="filename">/proc/tty/</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-sysctl">3.4. Using the <code class="command">sysctl</code> Command</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-additional-resources">3.5. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-installed-documentation">3.5.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-useful-websites">3.5.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-raid">4. Redundant Array of Independent Disks (RAID)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-what-is">4.1. What is RAID?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-why-use">4.2. Who Should Use RAID?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-approaches">4.3. Hardware RAID versus Software RAID</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-raid-hardware-raid">4.3.1. Hardware RAID</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-raid-software-raid">4.3.2. Software RAID</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-levels">4.4. RAID Levels and Linear Support</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-config">4.5. Configuring Software RAID</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-raid-diskdruid-manual-part">4.5.1. Creating the RAID Partitions</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-raid-diskdruid-manual-devmnt">4.5.2. Creating the RAID Devices and Mount Points</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-swapspace">5. Swap Space</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-what-is">5.1. What is Swap Space?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-adding">5.2. Adding Swap Space</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-extending-lvm2">5.2.1. Extending Swap on an LVM2 Logical Volume</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-creating-lvm2">5.2.2. Creating an LVM2 Logical Volume for Swap</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-creating-file">5.2.3. Creating a Swap File</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-removing">5.3. Removing Swap Space</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-reducing-lvm2">5.3.1. Reducing Swap on an LVM2 Logical Volume</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-removing-lvm2">5.3.2. Removing an LVM2 Logical Volume for Swap</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-removing-file">5.3.3. Removing a Swap File</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-moving">5.4. Moving Swap Space</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-disk-storage">6. Managing Disk Storage</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-storage-parted">6.1. Standard Partitions using <code class="command">parted</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-view-part-table">6.1.1. Viewing the Partition Table</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-create-part">6.1.2. Creating a Partition</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-remove-part">6.1.3. Removing a Partition</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-resize-part">6.1.4. Resizing a Partition</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-storage-lvm">6.2. LVM Partition Management</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-disk-quotas">7. Implementing Disk Quotas</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-quotas-configuring">7.1. Configuring Disk Quotas</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-enabling">7.1.1. Enabling Quotas</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-remounting">7.1.2. Remounting the File Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-create-files">7.1.3. Creating the Quota Database Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-assigning-user">7.1.4. Assigning Quotas per User</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-assigning-group">7.1.5. Assigning Quotas per Group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-assigning-file-system">7.1.6. Setting the Grace Period for Soft Limits</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-quotas-managing">7.2. Managing Disk Quotas</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quota-enabling">7.2.1. Enabling and Disabling</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-managing-rpt">7.2.2. Reporting on Disk Quotas</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-managing-accurate">7.2.3. Keeping Quotas Accurate</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-quotas-additional-resources">7.3. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-install-docs">7.3.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-related-book">7.3.2. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-acls">8. Access Control Lists</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-mounting">8.1. Mounting File Systems</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-acls-mounting-nfs">8.1.1. NFS</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-setting">8.2. Setting Access ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-setting-default">8.3. Setting Default ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-retrieving">8.4. Retrieving ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-archiving">8.5. Archiving File Systems With ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-compat-older">8.6. Compatibility with Older Systems</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-additional-resources">8.7. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-acls-installed-docs">8.7.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-acls-useful-websites">8.7.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-lvm">9. LVM (Logical Volume Manager)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-intro-whatis">9.1. What is LVM?</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-lvm2-intro-whatis">9.1.1. What is LVM2?</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s-lvm-config">9.2. LVM Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-diskdruid-auto">9.3. Automatic Partitioning</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-diskdruid-manual">9.4. Manual LVM Partitioning</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-boot">9.4.1. Creating the <code class="command">/boot/</code> Partition</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-pv">9.4.2. Creating the LVM Physical Volumes</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-vg">9.4.3. Creating the LVM Volume Groups</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-lv">9.4.4. Creating the LVM Logical Volumes</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm">9.5. Using the LVM utility <code class="filename">system-config-lvm</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-uninitialized">9.5.1. Utilizing uninitialized entities</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-add-unallocated">9.5.2. Adding Unallocated Volumes to a volume group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-migrate-extents">9.5.3. Migrating extents</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-new-hdd">9.5.4. Adding a new hard disk using LVM</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-new-volumegrp">9.5.5. Adding a new volume group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-ext-volumegrp">9.5.6. Extending a volume group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-editing-lv">9.5.7. Editing a Logical Volume</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-additional-resources">9.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-installed-docs">9.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-useful-websites">9.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-pkg-management">II. Package Management</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-rpm">10. Package Management with RPM</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-design">10.1. RPM Design Goals</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-using">10.2. Using RPM</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-finding">10.2.1. Finding RPM Packages</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-installing">10.2.2. Installing</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-uninstalling">10.2.3. Uninstalling</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-upgrading">10.2.4. Upgrading</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-freshening">10.2.5. Freshening</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-querying">10.2.6. Querying</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-verifying">10.2.7. Verifying</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-check-rpm-sig">10.3. Checking a Package's Signature</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-keys-importing">10.3.1. Importing Keys</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-keys-checking">10.3.2. Verifying Signature of Packages</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-impressing">10.4. Practical and Common Examples of RPM Usage</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-additional-resources">10.5. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-installed-docs">10.5.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-useful-websites">10.5.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-related-books">10.5.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-graphical-rpm">11. <span><strong class="application">Package Management Tool</strong></span></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-graphical-rpm-analyzing">11.1. Listing and Analyzing Packages</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-graphical-rpm-installing">11.2. Installing and Removing Packages</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#c1-yum">12. YUM (Yellowdog Updater Modified)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-repo-setup">12.1. Setting Up a <code class="command">yum</code> Repository</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-useful-commands">12.2. <code class="command">yum</code> Commands</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-common-options">12.3. <code class="command">yum</code> Options</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-yumconf">12.4. Configuring <code class="command">yum</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-yum-yumconf-main">12.4.1. <code class="command">[main]</code> Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-yum-yumconf-repository">12.4.2. <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> Options</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-useful-variables">12.5. Useful <code class="command">yum</code> Variables</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-rhnetwork">13. Red Hat Network</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-network-related-config">III. Network-Related Configuration</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-networkscripts">14. Network Interfaces</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-files">14.1. Network Configuration Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-interfaces">14.2. Interface Configuration Files</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-eth0">14.2.1. Ethernet Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-ipsec">14.2.2. IPsec Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-chan">14.2.3. Channel Bonding Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-alias">14.2.4. Alias and Clone Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-ppp0">14.2.5. Dialup Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-other">14.2.6. Other Interfaces</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-control">14.3. Interface Control Scripts</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-static-routes">14.4. Configuring Static Routes</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-functions">14.5. Network Function Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-resources">14.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-docs-inst">14.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-network-config">15. Network Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-overview">15.1. Overview</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-ethernet">15.2. Establishing an Ethernet Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-isdn">15.3. Establishing an ISDN Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-modem">15.4. Establishing a Modem Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-xdsl">15.5. Establishing an xDSL Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-tokenring">15.6. Establishing a Token Ring Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-wireless">15.7. Establishing a Wireless Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-dns">15.8. Managing DNS Settings</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-hosts">15.9. Managing Hosts</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-profiles">15.10. Working with Profiles</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-aliases">15.11. Device Aliases</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-save-config">15.12. Saving and Restoring the Network Configuration</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-services">16. Controlling Access to Services</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-runlevels">16.1. Runlevels</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-tcp-wrappers">16.2. TCP Wrappers</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-services-xinetd">16.2.1. <code class="command">xinetd</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-serviceconf">16.3. <span><strong class="application">Services Configuration Tool</strong></span></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-ntsysv">16.4. <span><strong class="application">ntsysv</strong></span></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-chkconfig">16.5. <code class="command">chkconfig</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-additional-resources">16.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#services-installed-docs">16.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#services-useful-websites">16.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-bind">17. Berkeley Internet Name Domain (BIND)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-introduction">17.1. Introduction to DNS</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-introduction-zones">17.1.1. Nameserver Zones</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-introduction-nameservers">17.1.2. Nameserver Types</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-introduction-bind">17.1.3. BIND as a Nameserver</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-namedconf">17.2. <code class="filename">/etc/named.conf</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-namedconf-state">17.2.1. Common Statement Types</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-namedconf-state-other">17.2.2. Other Statement Types</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-namedconf-comm">17.2.3. Comment Tags</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-zone">17.3. Zone Files</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-zone-directives">17.3.1. Zone File Directives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s3-bind-zone-rr">17.3.2. Zone File Resource Records</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-zone-examples">17.3.3. Example Zone File</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-configuration-zone-reverse">17.3.4. Reverse Name Resolution Zone Files</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-rndc">17.4. Using <code class="command">rndc</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-rndc-configuration-namedconf">17.4.1. Configuring <code class="filename">/etc/named.conf</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-rndc-configuration-rndcconf">17.4.2. Configuring <code class="filename">/etc/rndc.conf</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-rndc-options">17.4.3. Command Line Options</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-features">17.5. Advanced Features of BIND</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-protocol">17.5.1. DNS Protocol Enhancements</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-views">17.5.2. Multiple Views</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-security">17.5.3. Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-ipv6">17.5.4. IP version 6</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-mistakes">17.6. Common Mistakes to Avoid</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-additional-resources">17.7. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-installed-docs">17.7.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-useful-websites">17.7.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-related-books">17.7.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-openssh">18. OpenSSH</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-intro">18.1. Features of SSH</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-intro-why">18.1.1. Why Use SSH?</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-version">18.2. SSH Protocol Versions</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-conn">18.3. Event Sequence of an SSH Connection</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-protocol-conn-transport">18.3.1. Transport Layer</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-protocol-authentication">18.3.2. Authentication</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-protocol-connection">18.3.3. Channels</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-openssh-server-config">18.4. Configuring an OpenSSH Server</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-requiring">18.4.1. Requiring SSH for Remote Connections</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-configfiles">18.5. OpenSSH Configuration Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-openssh-client-config">18.6. Configuring an OpenSSH Client</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-using-ssh">18.6.1. Using the <code class="command">ssh</code> Command</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-using-scp">18.6.2. Using the <code class="command">scp</code> Command</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-using-sftp">18.6.3. Using the <code class="command">sftp</code> Command</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-beyondshell">18.7. More Than a Secure Shell</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-beyondshell-x11">18.7.1. X11 Forwarding</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-beyondshell-tcpip">18.7.2. Port Forwarding</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-generate-keypairs">18.7.3. Generating Key Pairs</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-openssh-additional-resources">18.8. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-installed-docs">18.8.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-useful-websites">18.8.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-nfs">19. Network File System (NFS)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-how">19.1. How It Works</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-how-daemons">19.1.1. Required Services</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-client-config">19.2. NFS Client Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-fstab">19.2.1. Mounting NFS File Systems using <code class="filename">/etc/fstab</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-client-config-autofs">19.3. <code class="command">autofs</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-config-autofs-new">19.3.1. What's new in <code class="command">autofs</code> version 5?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-config-autofs">19.3.2. <code class="command">autofs</code> Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-config-autofs-commontasks">19.3.3. <code class="command">autofs</code> Common Tasks</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-client-config-options">19.4. Common NFS Mount Options</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-start">19.5. Starting and Stopping NFS</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-server-export">19.6. NFS Server Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-export">19.6.1. Exporting or Sharing NFS File Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-command-line">19.6.2. Command Line Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-hostname-formats">19.6.3. Hostname Formats</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-server-config-exports">19.7. The <code class="filename">/etc/exports</code> Configuration File</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-nfs-server-config-exportfs">19.7.1. The <code class="command">exportfs</code> Command</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-security">19.8. Securing NFS</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-security-hosts">19.8.1. Host Access</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-security-files">19.8.2. File Permissions</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-methodology-portmap">19.9. NFS and <code class="command">portmap</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s3-nfs-methodology-portmap-rpcinfo">19.9.1. Troubleshooting NFS and <code class="command">portmap</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-tcp">19.10. Using NFS over TCP</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-additional-resources">19.11. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-installed-documentation">19.11.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-useful-websites">19.11.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-related-books">19.11.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-samba">20. Samba</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#samba-rgs-overview">20.1. Introduction to Samba</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-abilities">20.1.1. Samba Features</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-daemons">20.2. Samba Daemons and Related Services</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-services">20.2.1. Samba Daemons</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-connect-share">20.3. Connecting to a Samba Share</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-connect-share-cmdline">20.3.1. Command Line</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-samba-mounting">20.3.2. Mounting the Share</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-configuring">20.4. Configuring a Samba Server</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-configuring-gui">20.4.1. Graphical Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-configuring-cmdline">20.4.2. Command Line Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-encrypted-passwords">20.4.3. Encrypted Passwords</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-startstop">20.5. Starting and Stopping Samba</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-servers">20.6. Samba Server Types and the <code class="command">smb.conf</code> File</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-standalone">20.6.1. Stand-alone Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-domain-member">20.6.2. Domain Member Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-domain-controller">20.6.3. Domain Controller</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-security-modes">20.7. Samba Security Modes</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-user-level">20.7.1. User-Level Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-share-level">20.7.2. Share-Level Security</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-account-info-dbs">20.8. Samba Account Information Databases</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-network-browsing">20.9. Samba Network Browsing</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-domain-browsing">20.9.1. Domain Browsing</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-wins">20.9.2. WINS (Windows Internetworking Name Server)</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-cups">20.10. Samba with CUPS Printing Support</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-cups-smb.conf">20.10.1. Simple <code class="filename">smb.conf</code> Settings</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-programs">20.11. Samba Distribution Programs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-resources">20.12. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-resources-installed">20.12.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-resources-published">20.12.2. Related Books</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-resources-community">20.12.3. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-dhcp">21. Dynamic Host Configuration Protocol (DHCP)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-why">21.1. Why Use DHCP?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-configuring-server">21.2. Configuring a DHCP Server</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#config-file">21.2.1. Configuration File</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#lease-database">21.2.2. Lease Database</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2953977">21.2.3. Starting and Stopping the Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#dhcp-relay-agent">21.2.4. DHCP Relay Agent</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-configuring-client">21.3. Configuring a DHCP Client</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-additional-resources">21.4. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-dhcp-installed-docs">21.4.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-httpd">22. Apache HTTP Server</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-httpd-v2">22.1. Apache HTTP Server 2.2</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-httpd-v2-features">22.1.1. Features of Apache HTTP Server 2.2</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-httpd-mig">22.2. Migrating Apache HTTP Server Configuration Files</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-httpd-v22-mig">22.2.1. Migrating Apache HTTP Server 2.0 Configuration Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s3-httpd-v2-mig">22.2.2. Migrating Apache HTTP Server 1.3 Configuration Files to 2.0</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-startstop">22.3. Starting and Stopping <code class="command">httpd</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-config-ui">22.4. Apache HTTP Server Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-httpd-basic-settings">22.4.1. Basic Settings</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-httpd-default-settings">22.4.2. Default Settings</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-config">22.5. Configuration Directives in <code class="filename">httpd.conf</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-tips">22.5.1. General Configuration Tips</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-sslcommands">22.5.2. Configuration Directives for SSL</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-mpm-containers">22.5.3. MPM Specific Server-Pool Directives</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-addmods">22.6. Adding Modules</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-virtualhosts">22.7. Virtual Hosts</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-settingupvhosts">22.7.1. Setting Up Virtual Hosts</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-httpd-secure-server">22.8. Apache HTTP Secure Server Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-optionalpackages">22.8.1. An Overview of Security-Related Packages</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-overview-certs">22.8.2. An Overview of Certificates and Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-secureserver-oldcert">22.8.3. Using Pre-Existing Keys and Certificates</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-certs">22.8.4. Types of Certificates</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-generatingkey">22.8.5. Generating a Key</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-use-new-key">22.8.6. How to configure the server to use the new key</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-additional-resources">22.9. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-additional-resources-web">22.9.1. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-ftp">23. FTP</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-protocol">23.1. The File Transport Protocol</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-protocol-multiport">23.1.1. Multiple Ports, Multiple Modes</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-servers">23.2. FTP Servers</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-servers-vsftpd">23.2.1. <code class="command">vsftpd</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s2-ftp-vsftpd-conf">23.3. Files Installed with <code class="command">vsftpd</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-vsftpd-start">23.4. Starting and Stopping <code class="command">vsftpd</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-start-multi">23.4.1. Starting Multiple Copies of <code class="command">vsftpd</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-vsftpd-conf">23.5. <code class="command">vsftpd</code> Configuration Options</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-daemon">23.5.1. Daemon Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-login">23.5.2. Log In Options and Access Controls</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-anon">23.5.3. Anonymous User Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-usr">23.5.4. Local User Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-dir">23.5.5. Directory Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-file">23.5.6. File Transfer Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-log">23.5.7. Logging Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-net">23.5.8. Network Options</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-resources">23.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-installed-documentation">23.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-useful-websites">23.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-email">24. Email</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-protocols">24.1. Email Protocols</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-protocols-send">24.1.1. Mail Transport Protocols</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-protocols-client">24.1.2. Mail Access Protocols</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-types">24.2. Email Program Classifications</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-types-mta">24.2.1. Mail Transport Agent</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-types-mda">24.2.2. Mail Delivery Agent</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-types-mua">24.2.3. Mail User Agent</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-mta">24.3. Mail Transport Agents</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-mta-sendmail">24.3.1. Sendmail</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-mta-postfix">24.3.2. Postfix</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-mta-fetchmail">24.3.3. Fetchmail</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-switchmail">24.4. Mail Transport Agent (MTA) Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-mda">24.5. Mail Delivery Agents</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-procmail-configuration">24.5.1. Procmail Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-procmail-recipes">24.5.2. Procmail Recipes</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-mua">24.6. Mail User Agents</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-security">24.6.1. Securing Communication</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-additional-resources">24.7. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-installed-docs">24.7.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-useful-websites">24.7.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-related-books">24.7.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-ldap">25. Lightweight Directory Access Protocol (LDAP)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-adv">25.1. Why Use LDAP?</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-ldap-v3">25.1.1. OpenLDAP Features</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-terminology">25.2. LDAP Terminology</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-daemonsutils">25.3. OpenLDAP Daemons and Utilities</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-pam-nss">25.3.1. NSS, PAM, and LDAP</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-other-apps">25.3.2. PHP4, LDAP, and the Apache HTTP Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-applications">25.3.3. LDAP Client Applications</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-files">25.4. OpenLDAP Configuration Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-files-schemas">25.5. The <code class="filename">/etc/openldap/schema/</code> Directory</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-quickstart">25.6. OpenLDAP Setup Overview</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-files-slapd-conf">25.6.1. Editing <code class="filename">/etc/openldap/slapd.conf</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-pam">25.7. Configuring a System to Authenticate Using OpenLDAP</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-pamd">25.7.1. PAM and LDAP</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-migrate">25.7.2. Migrating Old Authentication Information to LDAP Format</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-migrate">25.8. Migrating Directories from Earlier Releases</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-additional-resources">25.9. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-installed-docs">25.9.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-additional-resources-web">25.9.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-related-books">25.9.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-authconfig">26. Authentication Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-authconfig-user-info">26.1. User Information</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-authconfig-auth">26.2. Authentication</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#authconfig-options">26.3. Options</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-authconfig-command-line">26.4. Command Line Version</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-sysconfig">IV. System Configuration</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-console-access">27. Console Access</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-access-console-ctrlaltdel">27.1. Disabling Shutdown Via <span><strong class="keycap">Ctrl</strong></span>-<span><strong class="keycap">Alt</strong></span>-<span><strong class="keycap">Del</strong></span></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-access-console-program">27.2. Disabling Console Program Access</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-access-console-define">27.3. Defining the Console</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-access-console-files">27.4. Making Files Accessible From the Console</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-access-console-enable">27.5. Enabling Console Access for Other Applications</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-access-floppy">27.6. The <code class="filename">floppy</code> Group</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-sysconfig">28. The <code class="filename">sysconfig</code> Directory</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysconfig-files">28.1. Files in the <code class="filename">/etc/sysconfig/</code> Directory</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-files-amd">28.1.1. <code class="filename">/etc/sysconfig/amd</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-apmd">28.1.2. <code class="filename">/etc/sysconfig/apmd</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-arpwatch">28.1.3. <code class="filename">/etc/sysconfig/arpwatch</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-authconfig">28.1.4. <code class="filename">/etc/sysconfig/authconfig</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-autofs">28.1.5. <code class="filename">/etc/sysconfig/autofs</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-clock">28.1.6. <code class="filename">/etc/sysconfig/clock</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-desktop">28.1.7. <code class="filename">/etc/sysconfig/desktop</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-dhcpd">28.1.8. <code class="filename">/etc/sysconfig/dhcpd</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-exim">28.1.9. <code class="filename">/etc/sysconfig/exim</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-firewall">28.1.10. <code class="filename">/etc/sysconfig/firstboot</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-gpm">28.1.11. <code class="filename">/etc/sysconfig/gpm</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-hwconf">28.1.12. <code class="filename">/etc/sysconfig/hwconf</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-i18n">28.1.13. <code class="filename">/etc/sysconfig/i18n</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-init">28.1.14. <code class="filename">/etc/sysconfig/init</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-ip6tables">28.1.15. <code class="filename">/etc/sysconfig/ip6tables-config</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-iptables">28.1.16. <code class="filename">/etc/sysconfig/iptables-config</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-irda">28.1.17. <code class="filename">/etc/sysconfig/irda</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-kybd">28.1.18. <code class="filename">/etc/sysconfig/keyboard</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-kudzu">28.1.19. <code class="filename">/etc/sysconfig/kudzu</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-named">28.1.20. <code class="filename">/etc/sysconfig/named</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-network">28.1.21. <code class="filename">/etc/sysconfig/network</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-nfs">28.1.22. <code class="filename">/etc/sysconfig/nfs</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-ntpd">28.1.23. <code class="filename">/etc/sysconfig/ntpd</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-radvd">28.1.24. <code class="filename">/etc/sysconfig/radvd</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-samba">28.1.25. <code class="filename">/etc/sysconfig/samba</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-selinux">28.1.26. <code class="filename">/etc/sysconfig/selinux</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-sendmail">28.1.27. <code class="filename">/etc/sysconfig/sendmail</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-spamd">28.1.28. <code class="filename">/etc/sysconfig/spamassassin</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-squid">28.1.29. <code class="filename">/etc/sysconfig/squid</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-sec-level">28.1.30. <code class="filename">/etc/sysconfig/system-config-securitylevel</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-selinuxtool">28.1.31. <code class="filename">/etc/sysconfig/system-config-selinux</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-rcu">28.1.32. <code class="filename">/etc/sysconfig/system-config-users</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-rlv">28.1.33. <code class="filename">/etc/sysconfig/system-logviewer</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-tux">28.1.34. <code class="filename">/etc/sysconfig/tux</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-vncservers">28.1.35. <code class="filename">/etc/sysconfig/vncservers</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-xinetd">28.1.36. <code class="filename">/etc/sysconfig/xinetd</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysconfig-etcsysconf-dir">28.2. Directories in the <code class="filename">/etc/sysconfig/</code> Directory</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysconfig-additional-resources">28.3. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysconfig-installed-documentation">28.3.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-dateconfig">29. Date and Time Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-dateconfig-time-date">29.1. Time and Date Properties</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-dateconfig-ntp">29.2. Network Time Protocol (NTP) Properties</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-dateconfig-time-zone">29.3. Time Zone Configuration</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-keyboardconfig">30. Keyboard Configuration</a>
                </span>
              </dt>
              <dt>
                <span class="chapter">
                  <a href="#ch-x">31. The X Window System</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-x-server">31.1. The X11R7.1 Release</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-x-clients">31.2. Desktop Environments and Window Managers</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-clients-desktop">31.2.1. Desktop Environments</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-clients-winmanagers">31.2.2. Window Managers</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-x-server-configuration">31.3. X Server Configuration Files</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-server-config-xorg.conf">31.3.1. <code class="filename">xorg.conf</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-x-fonts">31.4. Fonts</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-fonts-fontconfig">31.4.1. Fontconfig</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-fonts-core">31.4.2. Core X Font System</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-x-runlevels">31.5. Runlevels and X</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-runlevels-3">31.5.1. Runlevel 3</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-runlevels-5">31.5.2. Runlevel 5</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-x-additional-resources">31.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-installed-documentation">31.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-x-useful-websites">31.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-xconfig">32. X Window System Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-xconfig-display">32.1. Display Settings</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-xconfig-advanced">32.2. Display Hardware Settings</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-xconfig-dualhead">32.3. Dual Head Display Settings</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-users-groups">33. Users and Groups</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-users-configui">33.1. User and Group Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-redhat-config-users-user-new">33.1.1. Adding a New User</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-redhat-config-users-user-properties">33.1.2. Modifying User Properties</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-redhat-config-users-group-new">33.1.3. Adding a New Group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-redhat-config-users-group-properties">33.1.4. Modifying Group Properties</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-users-tools">33.2. User and Group Management Tools</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-users-cmd-line">33.2.1. Command Line Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-users-add">33.2.2. Adding a User</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-groups-add">33.2.3. Adding a Group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-redhat-config-users-passwd-aging">33.2.4. Password Aging</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-redhat-config-users-process">33.2.5. Explaining the Process</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-users-groups-standard-users">33.3. Standard Users</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-users-groups-standard-groups">33.4. Standard Groups</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-users-groups-private-groups">33.5. User Private Groups</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-users-groups-rationale">33.5.1. Group Directories</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-users-groups-shadow-utilities">33.6. Shadow Passwords</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-users-groups-additional-resources">33.7. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-users-groups-documentation">33.7.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-printing">34. Printer Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-local-printer">34.1. Adding a Local Printer</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-ipp-printer">34.2. Adding an IPP Printer</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-smb-printer">34.3. Adding a Samba (SMB) Printer</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-jetdirect-printer">34.4. Adding a JetDirect Printer</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-select-model">34.5. Selecting the Printer Model and Finishing</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-printing-confirm">34.5.1. Confirming Printer Configuration</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-test-page">34.6. Printing a Test Page</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-edit">34.7. Modifying Existing Printers</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3050102">34.7.1. The <span><strong class="guilabel">Settings</strong></span> Tab</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3050172">34.7.2. The <span><strong class="guilabel">Policies</strong></span> Tab</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2998925">34.7.3. The <span><strong class="guilabel">Access Control</strong></span> Tab</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2998995">34.7.4. The <span><strong class="guilabel">Printer</strong></span> and <span><strong class="guilabel">Job Options</strong></span>Tab</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-managing">34.8. Managing Print Jobs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-printing-additional-resources">34.9. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-printing-installed-docs">34.9.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-printing-useful-websites">34.9.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-autotasks">35. Automated Tasks</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-autotasks-cron">35.1. Cron</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-cron-configuring">35.1.1. Configuring Cron Tasks</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-cron-access">35.1.2. Controlling Access to Cron</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-cron-service">35.1.3. Starting and Stopping the Service</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-autotasks-at-batch">35.2. At and Batch</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-at-configuring">35.2.1. Configuring At Jobs</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-batch-configuring">35.2.2. Configuring Batch Jobs</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-at-batch-viewing">35.2.3. Viewing Pending Jobs</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-commandline-options">35.2.4. Additional Command Line Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-at-batch-controlling-access">35.2.5. Controlling Access to At and Batch</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-at-batch-service">35.2.6. Starting and Stopping the Service</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-autotasks-additional-resources">35.3. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-autotasks-installed-docs">35.3.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-logfiles">36. Log Files</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-logfiles-locating">36.1. Locating Log Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-logfiles-viewing">36.2. Viewing Log Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-logfiles-adding">36.3. Adding a Log File</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-logfiles-examining">36.4. Monitoring Log Files</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-system-monitoring">V. System Monitoring</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-systemtap">37. SystemTap</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-systemtap-intro">37.1. Introduction</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-systemtap-implementation">37.2. Implementation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s3-systemtap-usingsystemtap">37.3. Using SystemTap</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s3.1-systemtap-tracing">37.3.1.  Tracing </a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-sysinfo">38. Gathering System Information</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysinfo-system-processes">38.1. System Processes</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysinfo-memory-usage">38.2. Memory Usage</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysinfo-filesystems">38.3. File Systems</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysinfo-hardware">38.4. Hardware</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-sysinfo-additional-resources">38.5. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-sysinfo-installed-docs">38.5.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-oprofile">39. OProfile</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-overview-tools">39.1. Overview of Tools</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-configuring">39.2. Configuring OProfile</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-kernel">39.2.1. Specifying the Kernel</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-events">39.2.2. Setting Events to Monitor</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-starting-separate">39.2.3. Separating Kernel and User-space Profiles</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-starting">39.3. Starting and Stopping OProfile</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-saving-data">39.4. Saving Data</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-analyzing-data">39.5. Analyzing the Data</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-reading-opreport">39.5.1. Using <code class="command">opreport</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-reading-opreport-single">39.5.2. Using <code class="command">opreport</code> on a Single Executable</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-module-output">39.5.3. Getting more detailed output on the modules</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-reading-opannotate">39.5.4. Using <code class="command">opannotate</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-dev-oprofile">39.6. Understanding <code class="filename">/dev/oprofile/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-example-usage">39.7. Example Usage</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-gui">39.8. Graphical Interface</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-oprofile-additional-resources">39.9. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-oprofile-installed-docs">39.9.1. Installed Docs</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-oprofile-useful-websites">39.9.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-kernel-configuration">VI. Kernel and Driver Configuration</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-kernel">40. Manually Upgrading the Kernel</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-packages">40.1. Overview of Kernel Packages</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-preparing">40.2. Preparing to Upgrade</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-download">40.3. Downloading the Upgraded Kernel</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-perform-upgrade">40.4. Performing the Upgrade</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-initrd">40.5. Verifying the Initial RAM Disk Image</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-boot-loader">40.6. Verifying the Boot Loader</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-kernel-boot-loader-x86">40.6.1. x86 Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-kernel-boot-loader-itanium">40.6.2. Itanium Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-kernel-boot-loader-s390">40.6.3. IBM S/390 and IBM System z Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-kernel-boot-loader-iseries">40.6.4. IBM eServer iSeries Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-kernel-boot-loader-pseries">40.6.5. IBM eServer pSeries Systems</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-modules">41. General Parameters and Modules</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-module-utils">41.1. Kernel Module Utilities</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-modules-persistant">41.2. Persistent Module Loading</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-modules-parameters-specifying">41.3. Specifying Module Parameters</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-modules-scsi">41.4. Storage parameters</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-modules-ethernet">41.5. Ethernet Parameters</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-modules-multiple-eth">41.5.1. Using Multiple Ethernet Cards</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-modules-bonding">41.5.2. The Channel Bonding Module</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-kernel-modules-additional-resources">41.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-kernel-modules-installed-docs">41.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-kernel-modules-useful-websites">41.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-security">VII. Security And Authentication</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-sgs-ov">42. Security Overview</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#ch-sgs-intro">42.1. Introduction to Security</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-sgs-ov-cs">42.1.1. What is Computer Security?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-sgs-ov-controls">42.1.2. Security Controls</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-sgs-ov-concl">42.1.3. Conclusion</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-sec-access">42.2. Vulnerability Assessment</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-vuln-think">42.2.1. Thinking Like the Enemy</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-vuln-defn">42.2.2. Defining Assessment and Testing</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-vuln-tools">42.2.3. Evaluating the Tools</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-risk">42.3. Attackers and Vulnerabilities</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-risk-hackcrack">42.3.1. A Quick History of Hackers</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-risk-net">42.3.2. Threats to Network Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-risk-serv">42.3.3. Threats to Server Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-risk-wspc">42.3.4. Threats to Workstation and Home PC Security</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-exploits">42.4. Common Exploits and Attacks</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#ch-security-updates">42.5. Security Updates</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-security-updates">42.5.1. Updating Packages</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-sec-network">43. Securing Your Network</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#ch-wstation">43.1. Workstation Security</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-wstation-eval">43.1.1. Evaluating Workstation Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-wstation-boot-sec">43.1.2. BIOS and Boot Loader Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-wstation-pass">43.1.3. Password Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-wstation-privileges">43.1.4. Administrative Controls</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-wstation-service">43.1.5. Available Network Services</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-wstation-firewall">43.1.6. Personal Firewalls</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-wstation-sec-tools">43.1.7. Security Enhanced Communication Tools</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-server">43.2. Server Security</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-tcpw-xinetd">43.2.1. Securing Services With TCP Wrappers and xinetd</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-port">43.2.2. Securing Portmap</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-nis">43.2.3. Securing NIS</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-nfs">43.2.4. Securing NFS</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-http">43.2.5. Securing the Apache HTTP Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-ftp">43.2.6. Securing FTP</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-mail">43.2.7. Securing Sendmail</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-server-ports">43.2.8. Verifying Which Ports Are Listening</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#sso-ov">43.3. Single Sign-on (SSO)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sso-intro">43.3.1. Introduction</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sso-sc-config">43.3.2. Getting Started with your new Smart Card</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sso-sc-enrol-concept">43.3.3. How Smart Card Enrollment Works</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sso-sc-login-concept">43.3.4. How Smart Card Login Works</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sso-config-firefox">43.3.5. Configuring Firefox to use Kerberos for SSO</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-pam">43.4. Pluggable Authentication Modules (PAM)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-advantages">43.4.1. Advantages of PAM</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-config-files">43.4.2. PAM Configuration Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-format">43.4.3. PAM Configuration File Format</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-sample-simple">43.4.4. Sample PAM Configuration Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-modules-add">43.4.5. Creating PAM Modules</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-timestamp">43.4.6. PAM and Administrative Credential Caching</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-console">43.4.7. PAM and Device Ownership</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-pam-additional-resources">43.4.8. Additional Resources</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-tcpwrappers">43.5. TCP Wrappers and xinetd</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-tcpwrappers-purpose">43.5.1. TCP Wrappers</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-tcpwrappers-access">43.5.2. TCP Wrappers Configuration Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-tcpwrappers-xinetd">43.5.3. xinetd</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-tcpwrappers-xinetd-config">43.5.4. xinetd Configuration Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-tcpwrappers-additional-resources">43.5.5. Additional Resources</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-kerberos">43.6. Kerberos</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-kerberos-definition">43.6.1. What is Kerberos?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-kerberos-terminology">43.6.2. Kerberos Terminology</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-kerberos-works">43.6.3. How Kerberos Works</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-kerberos-pam">43.6.4. Kerberos and PAM</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-kerberos-server">43.6.5. Configuring a Kerberos 5 Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-kerberos-clients">43.6.6. Configuring a Kerberos 5 Client</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-kerberos-client2">43.6.7. Domain-to-Realm Mapping</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-kerberos-server2">43.6.8. Setting Up Secondary KDCs</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-kerberos-crossrealm">43.6.9. Setting Up Cross Realm Authentication</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-kerberos-additional-resources">43.6.10. Additional Resources</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-vpn">43.7. Virtual Private Networks (VPNs)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#vpn-how-it-works">43.7.1. How Does a VPN Work?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-vpn-rhl">43.7.2. VPNs and Red Hat Enterprise Linux</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-vpn-ipsec">43.7.3. IPsec</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#vpn-create-ipsec-connection">43.7.4. Creating an <abbr class="abbrev">IPsec</abbr> Connection</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-ipsec-generalconf">43.7.5. IPsec Installation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-ipsec-host2host">43.7.6. IPsec Host-to-Host Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-ipsec-net2net">43.7.7. IPsec Network-to-Network Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-network-config-ipsec-start">43.7.8. Starting and Stopping an <abbr class="abbrev">IPsec</abbr> Connection</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-fw">43.8. Firewalls</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-firewall-ipt">43.8.1. Netfilter and IPTables</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-basic-firewall">43.8.2. Basic Firewall Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-fireall-ipt-act">43.8.3. Using IPTables</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-firewall-ipt-basic">43.8.4. Common IPTables Filtering</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-firewall-ipt-fwd">43.8.5. <code class="computeroutput">FORWARD</code> and <acronym class="acronym">NAT</acronym> Rules</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-firewall-ipt-rule">43.8.6. Malicious Software and Spoofed IP Addresses</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-firewall-state">43.8.7. IPTables and Connection Tracking</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-firewall-ip6t">43.8.8. IPv6</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-firewall-moreinfo">43.8.9. Additional Resources</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-iptables">43.9. IPTables</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-iptables-packetfiltering">43.9.1. Packet Filtering</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-iptables-differences">43.9.2. Differences Between IPTables and IPChains</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-iptables-options">43.9.3. Command Options for IPTables</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-iptables-saving">43.9.4. Saving IPTables Rules</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-iptables-init">43.9.5. IPTables Control Scripts</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-ip6tables">43.9.6. IPTables and IPv6</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-iptables-additional-resources">43.9.7. Additional Resources</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#selg-overview">44. Security and SELinux</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#sec-acm-ov">44.1. Access Control Mechanisms (ACMs)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-dac-intro1">44.1.1. Discretionary Access Control (DAC)</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-acl-intro1">44.1.2. Access Control Lists (ACLs)</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mac-intro1">44.1.3. Mandatory Access Control (MAC)</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-rbac-intro1">44.1.4. Role-based Access Control (RBAC)</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mls-intro1">44.1.5. Multi-Level Security (MLS)</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-intro1">44.1.6. Multi-Category Security (MCS)</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#ch-selinux">44.2. Introduction to SELinux</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-SELinux-overview">44.2.1. SELinux Overview</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-SELinux-files">44.2.2. Files Related to SELinux</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-SELinux-resources">44.2.3. Additional Resources</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#rhlcommon-appendix-0005">44.3. Brief Background and History of SELinux</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#sec-mcs-ov">44.4. Multi-Category Security (MCS)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-intro">44.4.1. Introduction</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-apps">44.4.2. Applications for Multi-Category Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-selinux-security-contexts">44.4.3. SELinux Security Contexts</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#sec-mcs-getstarted">44.5. Getting Started with Multi-Category Security (MCS)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-getstarted-intro">44.5.1. Introduction</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-comp-userid">44.5.2. Comparing SELinux and Standard Linux User Identities</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-config-categories">44.5.3. Configuring Categories</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-assign-cat2users">44.5.4. Assigning Categories to Users</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mcs-assign-cat2files">44.5.5. Assigning Categories to Files</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#sec-mls-ov">44.6. Multi-Level Security (MLS)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-mls-multilevel">44.6.1. Why Multi-Level?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mls-seclevels">44.6.2. Security Levels, Objects and Subjects</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mls-policy">44.6.3. MLS Policy</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-mls-lspp-cert">44.6.4. LSPP Certification</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#rhlcommon-chapter-0001">44.7. SELinux Policy Overview</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0056">44.7.1. What is the SELinux Policy?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0091">44.7.2. Where is the Policy?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0016">44.7.3. The Role of Policy in the Boot Process</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0049">44.7.4. Object Classes and Permissions</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#sec-sel-policy-targeted-oview">44.8. Targeted Policy Overview</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0003">44.8.1. What is the Targeted Policy?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0010">44.8.2. Files and Directories of the Targeted Policy</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-selinux-policy-targeted-rolesandusers">44.8.3. Understanding the Users and Roles in the Targeted Policy</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#rhlcommon-chapter-0017">45. Working With SELinux</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#sec-sel-usercontrol">45.1. End User Control of SELinux</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-selinux-files-moving">45.1.1. Moving and Copying Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-context-checking-processanduser">45.1.2. Checking the Security Context of a Process, User, or File Object</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-file-relabel">45.1.3. Relabeling a File or Directory</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-backup-maintain-context">45.1.4. Creating Archives That Retain Security Contexts</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#sec-sel-admincontrol">45.2. Administrator Control of SELinux</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-selinux-status-viewing">45.2.1. Viewing the Status of SELinux</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-fsrelabel">45.2.2. Relabeling a File System</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2854981">45.2.3. Managing NFS Home Directories</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-grant-dir-access">45.2.4. Granting Access to a Directory or a Tree</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-backup-restore-system">45.2.5. Backing Up and Restoring the System</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-enable-disable-enforcement">45.2.6. Enabling or Disabling Enforcement</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-enable-disable">45.2.7. Enable or Disable SELinux</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-policy-changing">45.2.8. Changing the Policy</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0097">45.2.9. Specifying the Security Context of Entire File Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-category-changing">45.2.10. Changing the Security Category of a File or User</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0085">45.2.11. Running a Command in a Specific Security Context</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0086">45.2.12. Useful Commands for Scripts</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0087">45.2.13. Changing to a Different Role</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0088">45.2.14. When to Reboot</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#sec-sel-analystcontrol">45.3. Analyst Control of SELinux</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0081">45.3.1. Enabling Kernel Auditing</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#rhlcommon-section-0092">45.3.2. Dumping and Viewing Logs</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#sec-sel-policy-customizing">46. Customizing SELinux Policy</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#sec-sel-policy-customizing-intro">46.1. Introduction</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-policy-customizing-modpolicy">46.1.1. Modular Policy</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#sec-sel-building-policy-module">46.2. Building a Local Policy Module</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-use-audit2allow">46.2.1. Using audit2allow to Build a Local Policy Module</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-analyze-te">46.2.2. Analyzing the Type Enforcement (TE) File</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#sec-sel-load-policy-package">46.2.3. Loading the Policy Package</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#selg-chapter-0054">47. References</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="part">
              <a href="#pt-gls">VIII. Red Hat Training And Certification</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#id2842353">48. Red Hat Training and Certification </a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3004514">48.1. Three Ways to Train</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#id3063905">48.2. Microsoft Certified Professional Resource Center</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3128690">49. Certification Tracks</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3132452">49.1. Free Pre-assessment tests</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id2904394">50. RH033: Red Hat Linux Essentials</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3102670">50.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3093052">50.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2821263">50.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2962846">50.1.3. Audience</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2860023">50.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2871295">50.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3115899">51. RH035: Red Hat Linux Essentials for Windows Professionals</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id2873203">51.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3073952">51.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3091701">51.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3064093">51.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3085270">51.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2868446">51.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3074809">52. RH133: Red Hat Linux System Administration and Red Hat Certified Technician (RHCT) Certification</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3074886">52.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2900889">52.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3064459">52.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2916834">52.1.3. Audience</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3088179">52.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2939804">52.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id2919405">53. RH202 RHCT EXAM - The fastest growing credential in all of Linux.</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3085028">53.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2906594">53.1.1. Prerequisites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3051790">54. RH253 Red Hat Linux Networking and Security Administration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id2816760">54.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3004365">54.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3045240">54.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2846879">54.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2995568">54.1.4. Course Objectives </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3072867">54.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id2860022">55. RH300: RHCE Rapid track course (and RHCE exam)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id2937276">55.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3090900">55.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3018092">55.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3077251">55.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2849844">55.1.4. Course Objectives </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3094317">55.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id2896724">56. RH302 RHCE EXAM</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id2828052">56.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2834595">56.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2851640">56.1.2. Content</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3012474">57. RHS333: RED HAT enterprise security: network services</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3064281">57.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3095121">57.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2833827">57.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2948424">57.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2923801">57.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2820197">57.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3098582">58. RH401: Red Hat Enterprise Deployment and systems management</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3051578">58.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3052688">58.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3099989">58.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2846613">58.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2882220">58.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2992644">58.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3004414">59. RH423: Red Hat Enterprise Directory services and authentication</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3074135">59.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2870099">59.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2980808">59.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2936795">59.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3087382">59.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2941048">59.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3080759">60. SE Linux Courses</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id2905001">60.1. RHS427: Introduction to SELinux and Red Hat Targeted Policy</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2983867">60.1.1. Audience</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3005826">60.1.2. Course Summary</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id3002259">60.2. RHS429: Red Hat Enterprise SE Linux Policy Administration </a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3063634">61. RH436: Red Hat Enterprise storage management</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3136822">61.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2914748">61.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3044590">61.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2859528">61.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3079363">61.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3047618">61.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3089328">62. RH442: Red Hat Enterprise system monitoring and performance tuning</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3080933">62.1. Course Description</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3090041">62.1.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2903176">62.1.2. Goal</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3104989">62.1.3. Audience </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2956852">62.1.4. Course Objectives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2861144">62.1.5. Follow-on Courses</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id3105288">63. Red Hat Enterprise Linux Developer Courses</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id2814418">63.1. RHD143: Red Hat Linux Programming Essentials </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#id2971734">63.2. RHD221 Red Hat Linux Device Drivers </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#id3101669">63.3. RHD236 Red Hat Linux Kernel Internals </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#id3083254">63.4. RHD256 Red Hat Linux Application Development and Porting</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#id2868723">64. JBoss Courses</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id3126119">64.1. RHD161 JBoss and EJB3 for Java</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3044846">64.1.1. Prerequisites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id3082623">64.2. RHD163 JBoss for Web Developers </a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3074307">64.2.1. Prerequisites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id3124280">64.3. RHD167: JBOSS - HIBERNATE ESSENTIALS</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2893476">64.3.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3086878">64.3.2. Course Summary</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id2857960">64.4. RHD267: JBOSS - ADVANCED HIBERNATE</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3092908">64.4.1. Prerequisites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id3099396">64.5. RHD261:JBOSS for advanced J2EE developers</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3090115">64.5.1. Prerequisites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id3072458">64.6. RH336: JBOSS for Administrators</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id2866301">64.6.1. Prerequisites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3059370">64.6.2. Course Summary</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id3124485">64.7. RHD439: JBoss Clustering</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3095412">64.7.1. Prerequisites </a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id2870742">64.8. RHD449: JBoss jBPM </a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3018166">64.8.1. Description </a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id3144609">64.8.2. Prerequisites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#id2899499">64.9. RHD451 JBoss Rules</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#id3137023">64.9.1. Prerequisites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
            </dl>
          </dd>
        </dl>
      </div>
      <div class="preface" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ch-intro"></a>Introduction</h2>
            </div>
          </div>
        </div>
        <a id="id2933488" class="indexterm"></a>
        <p>
		Welcome to the <em class="citetitle">Red Hat Enterprise Linux Deployment Guide</em>.
	</p>
        <p>
		The Red Hat Enterprise Linux Deployment Guide contains information on how to customize your Red Hat Enterprise Linux system to fit your needs. If you are looking for a comprehensive, task-oriented guide for configuring and customizing your system, this is the manual for you.
	</p>
        <p>
		This manual discusses many intermediate topics such as the following:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				Setting up a network interface card (NIC)
			</p>
            </li>
            <li>
              <p>
				Configuring a Virtual Private Network (VPN)
			</p>
            </li>
            <li>
              <p>
				Configuring Samba shares
			</p>
            </li>
            <li>
              <p>
				Managing your software with RPM
			</p>
            </li>
            <li>
              <p>
				Determining information about your system
			</p>
            </li>
            <li>
              <p>
				Upgrading your kernel
			</p>
            </li>
          </ul>
        </div>
        <p>
		This manual is divided into the following main categories:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				File systems
			</p>
            </li>
            <li>
              <p>
				Package management
			</p>
            </li>
            <li>
              <p>
				Network-related configuration
			</p>
            </li>
            <li>
              <p>
				System configuration
			</p>
            </li>
            <li>
              <p>
				System monitoring
			</p>
            </li>
            <li>
              <p>
				Kernel and Driver Configuration
			</p>
            </li>
            <li>
              <p>
				Security and Authentication
			</p>
            </li>
            <li>
              <p>
				Red Hat Training and Certification
			</p>
            </li>
          </ul>
        </div>
        <p>
		This guide assumes you have a basic understanding of your Red Hat Enterprise Linux system. If you need help installing Red Hat Enterprise Linux, refer to the <em class="citetitle">Red Hat Enterprise Linux Installation Guide</em>.
	</p>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s1-intro-conventions"></a>1. Document Conventions</h2>
              </div>
            </div>
          </div>
          <a id="id2870674" class="indexterm"></a>
          <p>
		In this manual, certain words are represented in different fonts, typefaces, sizes, and weights. This highlighting is systematic; different words are represented in the same style to indicate their inclusion in a specific category. The types of words that are represented this way include the following:
	</p>
          <div class="variablelist">
            <dl>
              <dt>
                <span class="term">
                  <code class="command">command</code>
                </span>
              </dt>
              <dd>
                <p>
					Linux commands (and other operating system commands, when used) are represented this way. This style should indicate to you that you can type the word or phrase on the command line and press <span><strong class="keycap">Enter</strong></span> to invoke a command. Sometimes a command contains words that would be displayed in a different style on their own (such as file names). In these cases, they are considered to be part of the command, so the entire phrase is displayed as a command. For example:
				</p>
                <p>
					Use the <code class="command">cat testfile</code> command to view the contents of a file, named <code class="filename">testfile</code>, in the current working directory.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <code class="filename">file name</code>
                </span>
              </dt>
              <dd>
                <p>
					File names, directory names, paths, and RPM package names are represented this way. This style indicates that a particular file or directory exists with that name on your system. Examples:
				</p>
                <p>
					The <code class="filename">.bashrc</code> file in your home directory contains bash shell definitions and aliases for your own use.
				</p>
                <p>
					The <code class="filename">/etc/fstab</code> file contains information about different system devices and file systems.
				</p>
                <p>
					Install the <code class="filename">webalizer</code> RPM if you want to use a Web server log file analysis program.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="application">application</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					This style indicates that the program is an end-user application (as opposed to system software). For example:
				</p>
                <p>
					Use <span><strong class="application">Mozilla</strong></span> to browse the Web.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="keycap">key</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					A key on the keyboard is shown in this style. For example:
				</p>
                <p>
					To use <span><strong class="keycap">Tab</strong></span> completion to list particular files in a directory, type <code class="command">ls</code>, then a character, and finally the <span><strong class="keycap">Tab</strong></span> key. Your terminal displays the list of files in the working directory that begin with that character.
				</p>
              </dd>
              <dt>
                <span class="term"><span><strong class="keycap">key</strong></span>-<span><strong class="keycap">combination</strong></span></span>
              </dt>
              <dd>
                <p>
					A combination of keystrokes is represented in this way. For example:
				</p>
                <p>
					The <span><strong class="keycap">Ctrl</strong></span>-<span><strong class="keycap">Alt</strong></span>-<span><strong class="keycap">Backspace</strong></span> key combination exits your graphical session and returns you to the graphical login screen or the console.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="guilabel">text found on a GUI interface</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					A title, word, or phrase found on a GUI interface screen or window is shown in this style. Text shown in this style indicates a particular GUI screen or an element on a GUI screen (such as text associated with a checkbox or field). Example:
				</p>
                <p>
					Select the <span><strong class="guilabel">Require Password</strong></span> checkbox if you would like your screensaver to require a password before stopping.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="guimenu">top level of a menu on a GUI screen or window</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					A word in this style indicates that the word is the top level of a pulldown menu. If you click on the word on the GUI screen, the rest of the menu should appear. For example:
				</p>
                <p>
					Under <span><strong class="guimenu">File</strong></span> on a GNOME terminal, the <span><strong class="guimenuitem">New Tab</strong></span> option allows you to open multiple shell prompts in the same window.
				</p>
                <p>
					Instructions to type in a sequence of commands from a GUI menu look like the following example:
				</p>
                <p>
					Go to <span><strong class="guimenu">Applications</strong></span> (the main menu on the panel) =&gt; <span><strong class="guimenu">Programming</strong></span> =&gt; <span><strong class="guimenuitem">Emacs Text Editor</strong></span> to start the <span><strong class="application">Emacs</strong></span> text editor.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="guibutton">button on a GUI screen or window</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					This style indicates that the text can be found on a clickable button on a GUI screen. For example:
				</p>
                <p>
					Click on the <span><strong class="guibutton">Back</strong></span> button to return to the webpage you last viewed.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <code class="computeroutput">computer output</code>
                </span>
              </dt>
              <dd>
                <p>
					Text in this style indicates text displayed to a shell prompt such as error messages and responses to commands. For example:
				</p>
                <p>
					The <code class="command">ls</code> command displays the contents of a directory. For example:
				</p>
                <pre class="screen">
Desktop    about.html    logs     paulwesterberg.png
Mail    backupfiles    mail     reports
</pre>
                <p>
					The output returned in response to the command (in this case, the contents of the directory) is shown in this style.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <code class="prompt">prompt</code>
                </span>
              </dt>
              <dd>
                <p>
					A prompt, which is a computer's way of signifying that it is ready for you to input something, is shown in this style. Examples:
				</p>
                <p>
					<code class="prompt">$</code>
				</p>
                <p>
					<code class="prompt">#</code>
				</p>
                <p>
					<code class="prompt">[stephen@maturin stephen]$</code>
				</p>
                <p>
					<code class="prompt">leopard login:</code>
				</p>
              </dd>
              <dt>
                <span class="term">
                  <strong class="userinput">
                    <code>user input</code>
                  </strong>
                </span>
              </dt>
              <dd>
                <p>
					Text that the user types, either on the command line or into a text box on a GUI screen, is displayed in this style. In the following example, <strong class="userinput"><code>text</code></strong> is displayed in this style:
				</p>
                <p>
					To boot your system into the text based installation program, you must type in the <strong class="userinput"><code>text</code></strong> command at the <code class="prompt">boot:</code> prompt.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <em class="replaceable">
                    <code>&lt;replaceable&gt;</code>
                  </em>
                </span>
              </dt>
              <dd>
                <p>
					Text used in examples that is meant to be replaced with data provided by the user is displayed in this style. In the following example, <em class="replaceable"><code>&lt;version-number&gt;</code></em> is displayed in this style:
				</p>
                <p>
					The directory for the kernel source is <code class="filename">/usr/src/kernels/<em class="replaceable"><code>&lt;version-number&gt;</code></em>/</code>, where <em class="replaceable"><code>&lt;version-number&gt;</code></em> is the version and type of kernel installed on this system.
				</p>
              </dd>
            </dl>
          </div>
          <p>
		Additionally, we use several different strategies to draw your attention to certain pieces of information. In order of urgency, these items are marked as a note, tip, important, caution, or warning. For example:
	</p>
          <div class="note">
            <h2>Note</h2>
            <p>
			Remember that Linux is case sensitive. In other words, a rose is not a ROSE is not a rOsE.
		</p>
          </div>
          <div class="tip">
            <h2>Tip</h2>
            <p>
			The directory <code class="filename">/usr/share/doc/</code> contains additional documentation for packages installed on your system.
		</p>
          </div>
          <div class="important">
            <h2>Important</h2>
            <p>
			If you modify the DHCP configuration file, the changes do not take effect until you restart the DHCP daemon.
		</p>
          </div>
          <div class="caution">
            <h2>Caution</h2>
            <p>
			Do not perform routine tasks as root — use a regular user account unless you need to use the root account for system administration tasks.
		</p>
          </div>
          <div class="warning">
            <h2>Warning</h2>
            <p>
			Be careful to remove only the necessary partitions. Removing other partitions could result in data loss or a corrupted system environment.
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="s2-intro-feedback"></a>2. Send in Your Feedback</h2>
              </div>
            </div>
          </div>
          <p>
			If you find an error in the <em class="citetitle">Red Hat Enterprise Linux Deployment Guide</em>, or if you have thought of a way to make this manual better, we would like to hear from you! Submit a report in Bugzilla (<a href="http://bugzilla.redhat.com/bugzilla/"><code class="filename">http://bugzilla.redhat.com/bugzilla/</code></a>) against the component <code class="computeroutput">Deployment_Guide</code>.
		</p>
          <p>
			If you have a suggestion for improving the documentation, try to be as specific as possible. If you have found an error, include the section number and some of the surrounding text so we can find it easily.
		</p>
        </div>
      </div>
      <div class="part" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title"><a id="pt-filesystems"></a>Part I. File Systems</h1>
            </div>
          </div>
        </div>
        <div class="partintro" lang="en-US" xml:lang="en-US">
          <div></div>
          <p>
				<em class="firstterm">File system</em> refers to the files and directories stored on a computer. A file system can have different formats called <em class="firstterm">file system types</em>. These formats determine how the information is stored as files and directories. Some file system types store redundant copies of the data, while some file system types make hard drive access faster. This part discusses the ext3, swap, RAID, and LVM file system types. It also discusses the <code class="command">parted</code> utility to manage partitions and access control lists (ACLs) to customize file permissions.
			</p>
          <div class="toc">
            <p>
              <b>Table of Contents</b>
            </p>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-filesystem">1. File System Structure</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-why">1.1. Why Share a Common Structure?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-fhs">1.2. Overview of File System Hierarchy Standard (FHS)</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-filesystem-fsstnd">1.2.1. FHS Organization</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-special-file">1.3. Special File Locations Under Red Hat Enterprise Linux</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-ext3">2. The ext3 File System</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext3">2.1. Features of ext3</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext3-create">2.2. Creating an ext3 File System</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext3-convert">2.3. Converting to an ext3 File System</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-filesystem-ext2-revert">2.4. Reverting to an ext2 File System</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-proc">3. The <code class="filename">proc</code> File System</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-virtual">3.1. A Virtual File System</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-viewing">3.1.1. Viewing Virtual Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-change">3.1.2. Changing Virtual Files</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-topfiles">3.2. Top-level Files within the <code class="filename">proc</code> File System</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-apm">3.2.1. <code class="filename">/proc/apm</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-buddyinfo">3.2.2. <code class="filename">/proc/buddyinfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-cmdline">3.2.3. <code class="filename">/proc/cmdline</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-cpuinfo">3.2.4. <code class="filename">/proc/cpuinfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-crypto">3.2.5. <code class="filename">/proc/crypto</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-devices">3.2.6. <code class="filename">/proc/devices</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dma">3.2.7. <code class="filename">/proc/dma</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-execdomains">3.2.8. <code class="filename">/proc/execdomains</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-fb">3.2.9. <code class="filename">/proc/fb</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-filesystems">3.2.10. <code class="filename">/proc/filesystems</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-interrupts">3.2.11. <code class="filename">/proc/interrupts</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-iomem">3.2.12. <code class="filename">/proc/iomem</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-ioports">3.2.13. <code class="filename">/proc/ioports</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-kcore">3.2.14. <code class="filename">/proc/kcore</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-kmsg">3.2.15. <code class="filename">/proc/kmsg</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-loadavg">3.2.16. <code class="filename">/proc/loadavg</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-locks">3.2.17. <code class="filename">/proc/locks</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-mdstat">3.2.18. <code class="filename">/proc/mdstat</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-meminfo">3.2.19. <code class="filename">/proc/meminfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-misc">3.2.20. <code class="filename">/proc/misc</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-modules">3.2.21. <code class="filename">/proc/modules</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-mounts">3.2.22. <code class="filename">/proc/mounts</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-mtrr">3.2.23. <code class="filename">/proc/mtrr</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-partitions">3.2.24. <code class="filename">/proc/partitions</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-pci">3.2.25. <code class="filename">/proc/pci</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-slabinfo">3.2.26. <code class="filename">/proc/slabinfo</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-stat">3.2.27. <code class="filename">/proc/stat</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-swaps">3.2.28. <code class="filename">/proc/swaps</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-sysrq-trigger">3.2.29. <code class="filename">/proc/sysrq-trigger</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-uptime">3.2.30. <code class="filename">/proc/uptime</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-version">3.2.31. <code class="filename">/proc/version</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-directories">3.3. Directories within <code class="filename">/proc/</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-processdirs">3.3.1. Process Directories</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-bus">3.3.2. <code class="filename">/proc/bus/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-driver">3.3.3. <code class="filename">/proc/driver/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-fs">3.3.4. <code class="filename">/proc/fs</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-ide">3.3.5. <code class="filename">/proc/ide/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-irq">3.3.6. <code class="filename">/proc/irq/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-net">3.3.7. <code class="filename">/proc/net/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-scsi">3.3.8. <code class="filename">/proc/scsi/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-sys">3.3.9. <code class="filename">/proc/sys/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-dir-sysvipc">3.3.10. <code class="filename">/proc/sysvipc/</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-tty">3.3.11. <code class="filename">/proc/tty/</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-sysctl">3.4. Using the <code class="command">sysctl</code> Command</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-proc-additional-resources">3.5. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-installed-documentation">3.5.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-proc-useful-websites">3.5.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-raid">4. Redundant Array of Independent Disks (RAID)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-what-is">4.1. What is RAID?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-why-use">4.2. Who Should Use RAID?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-approaches">4.3. Hardware RAID versus Software RAID</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-raid-hardware-raid">4.3.1. Hardware RAID</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-raid-software-raid">4.3.2. Software RAID</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-levels">4.4. RAID Levels and Linear Support</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-config">4.5. Configuring Software RAID</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-raid-diskdruid-manual-part">4.5.1. Creating the RAID Partitions</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-raid-diskdruid-manual-devmnt">4.5.2. Creating the RAID Devices and Mount Points</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-swapspace">5. Swap Space</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-what-is">5.1. What is Swap Space?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-adding">5.2. Adding Swap Space</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-extending-lvm2">5.2.1. Extending Swap on an LVM2 Logical Volume</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-creating-lvm2">5.2.2. Creating an LVM2 Logical Volume for Swap</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-creating-file">5.2.3. Creating a Swap File</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-removing">5.3. Removing Swap Space</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-reducing-lvm2">5.3.1. Reducing Swap on an LVM2 Logical Volume</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-removing-lvm2">5.3.2. Removing an LVM2 Logical Volume for Swap</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-swap-removing-file">5.3.3. Removing a Swap File</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-swap-moving">5.4. Moving Swap Space</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-disk-storage">6. Managing Disk Storage</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-storage-parted">6.1. Standard Partitions using <code class="command">parted</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-view-part-table">6.1.1. Viewing the Partition Table</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-create-part">6.1.2. Creating a Partition</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-remove-part">6.1.3. Removing a Partition</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-storage-parted-resize-part">6.1.4. Resizing a Partition</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-storage-lvm">6.2. LVM Partition Management</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-disk-quotas">7. Implementing Disk Quotas</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-quotas-configuring">7.1. Configuring Disk Quotas</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-enabling">7.1.1. Enabling Quotas</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-remounting">7.1.2. Remounting the File Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-create-files">7.1.3. Creating the Quota Database Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-assigning-user">7.1.4. Assigning Quotas per User</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-assigning-group">7.1.5. Assigning Quotas per Group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-assigning-file-system">7.1.6. Setting the Grace Period for Soft Limits</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-quotas-managing">7.2. Managing Disk Quotas</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quota-enabling">7.2.1. Enabling and Disabling</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-managing-rpt">7.2.2. Reporting on Disk Quotas</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-managing-accurate">7.2.3. Keeping Quotas Accurate</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-disk-quotas-additional-resources">7.3. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-install-docs">7.3.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-disk-quotas-related-book">7.3.2. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-acls">8. Access Control Lists</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-mounting">8.1. Mounting File Systems</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-acls-mounting-nfs">8.1.1. NFS</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-setting">8.2. Setting Access ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-setting-default">8.3. Setting Default ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-retrieving">8.4. Retrieving ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-archiving">8.5. Archiving File Systems With ACLs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-compat-older">8.6. Compatibility with Older Systems</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-acls-additional-resources">8.7. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-acls-installed-docs">8.7.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-acls-useful-websites">8.7.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-lvm">9. LVM (Logical Volume Manager)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-intro-whatis">9.1. What is LVM?</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-lvm2-intro-whatis">9.1.1. What is LVM2?</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s-lvm-config">9.2. LVM Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-diskdruid-auto">9.3. Automatic Partitioning</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-diskdruid-manual">9.4. Manual LVM Partitioning</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-boot">9.4.1. Creating the <code class="command">/boot/</code> Partition</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-pv">9.4.2. Creating the LVM Physical Volumes</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-vg">9.4.3. Creating the LVM Volume Groups</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-diskdruid-manual-lv">9.4.4. Creating the LVM Logical Volumes</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm">9.5. Using the LVM utility <code class="filename">system-config-lvm</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-uninitialized">9.5.1. Utilizing uninitialized entities</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-add-unallocated">9.5.2. Adding Unallocated Volumes to a volume group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-migrate-extents">9.5.3. Migrating extents</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-new-hdd">9.5.4. Adding a new hard disk using LVM</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-new-volumegrp">9.5.5. Adding a new volume group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-ext-volumegrp">9.5.6. Extending a volume group</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-system-config-lvm-editing-lv">9.5.7. Editing a Logical Volume</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm-additional-resources">9.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-installed-docs">9.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-lvm-useful-websites">9.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
            </dl>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-filesystem"></a>Chapter 1. File System Structure</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-filesystem-why">1.1. Why Share a Common Structure?</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-filesystem-fhs">1.2. Overview of File System Hierarchy Standard (FHS)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-filesystem-fsstnd">1.2.1. FHS Organization</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-filesystem-special-file">1.3. Special File Locations Under Red Hat Enterprise Linux</a>
                </span>
              </dt>
            </dl>
          </div>
          <a id="id2859733" class="indexterm"></a>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-filesystem-why"></a>1.1. Why Share a Common Structure?</h2>
                </div>
              </div>
            </div>
            <p>
			The file system structure is the most basic level of organization in an operating system. Almost all of the ways an operating system interacts with its users, applications, and security model are dependent upon the way it organizes files on storage devices. Providing a common file system structure ensures users and programs are able to access and write files.
		</p>
            <p>
			File systems break files down into two logical categories:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Shareable vs. unsharable files
				</p>
                </li>
                <li>
                  <p>
					Variable vs. static files
				</p>
                </li>
              </ul>
            </div>
            <p>
			<em class="firstterm">Shareable</em> files are those that can be accessed locally and by remote hosts; <em class="firstterm">unsharable</em> files are only available locally. <em class="firstterm">Variable</em> files, such as documents, can be changed at any time; <em class="firstterm">static</em> files, such as binaries, do not change without an action from the system administrator.
		</p>
            <p>
			The reason for looking at files in this manner is to help correlate the function of the file with the permissions assigned to the directories which hold them. The way in which the operating system and its users interact with a given file determines the directory in which it is placed, whether that directory is mounted with read-only or read/write permissions, and the level of access each user has to that file. The top level of this organization is crucial. Access to the underlying directories can be restricted or security problems could manifest themselves if, from the top level down, it does not adhere to a rigid structure.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-filesystem-fhs"></a>1.2. Overview of File System Hierarchy Standard (FHS)</h2>
                </div>
              </div>
            </div>
            <a id="id2939832" class="indexterm"></a>
            <a id="id2925616" class="indexterm"></a>
            <a id="id2856574" class="indexterm"></a>
            <p>
			Red Hat Enterprise Linux uses the <em class="firstterm">Filesystem Hierarchy Standard</em> (<em class="firstterm">FHS</em>) file system structure, which defines the names, locations, and permissions for many file types and directories.
		</p>
            <p>
			The FHS document is the authoritative reference to any FHS-compliant file system, but the standard leaves many areas undefined or extensible. This section is an overview of the standard and a description of the parts of the file system not covered by the standard.
		</p>
            <p>
			Compliance with the standard means many things, but the two most important are compatibility with other compliant systems and the ability to mount a <code class="filename">/usr/</code> partition as read-only. This second point is important because the directory contains common executables and should not be changed by users. Also, since the <code class="filename">/usr/</code> directory is mounted as read-only, it can be mounted from the CD-ROM or from another machine via a read-only NFS mount.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-filesystem-fsstnd"></a>1.2.1. FHS Organization</h3>
                  </div>
                </div>
              </div>
              <a id="id2904772" class="indexterm"></a>
              <a id="id2939921" class="indexterm"></a>
              <a id="id2870510" class="indexterm"></a>
              <p>
				The directories and files noted here are a small subset of those specified by the FHS document. Refer to the latest FHS document for the most complete information.
			</p>
              <p>
				The complete standard is available online at <a href="http://www.pathname.com/fhs">http://www.pathname.com/fhs/</a>.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-boot"></a>1.2.1.1. The <code class="filename">/boot/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2937038" class="indexterm"></a>
                <a id="id2917874" class="indexterm"></a>
                <p>
					The <code class="filename">/boot/</code> directory contains static files required to boot the system, such as the Linux kernel. These files are essential for the system to boot properly.
				</p>
                <div class="warning">
                  <h2>Warning</h2>
                  <p>
						Do not remove the <code class="filename">/boot/</code> directory. Doing so renders the system unbootable.
					</p>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-dev"></a>1.2.1.2. The <code class="filename">/dev/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2915940" class="indexterm"></a>
                <a id="id2947725" class="indexterm"></a>
                <p>
					The <code class="filename">/dev/</code> directory contains device nodes that either represent devices that are attached to the system or virtual devices that are provided by the kernel. These device nodes are essential for the system to function properly. The <code class="command">udev</code> demon takes care of creating and removing all these device nodes in <code class="filename">/dev/</code>.
				</p>
                <p>
					Devices in the <code class="filename">/dev</code> directory and subdirectories are either character (providing only a serial stream of input/output) or block (accessible randomly). Character devices include mouse, keyboard, modem while block devices include hard disk, floppy drive etc. If you have GNOME or KDE installed in your system, devices such as external drives or cds are automatically detected when connected (e.g via usb) or inserted (e.g via CD or DVD drive) and a popup window displaying the contents is automatically displayed. Files in the <code class="filename">/dev</code> directory are essential for the system to function properly. Examples of common files in the <code class="filename">/dev</code> include:
				</p>
                <pre class="screen"><code class="filename">/dev/hda</code> - the master device on primary IDE channel.<code class="filename">/dev/hdb</code> - the slave device on primary IDE channel.<code class="filename">/dev/tty0</code> - first virtual console.<code class="filename">/dev/tty1</code> - second virtual console.<code class="filename">/dev/sda</code> - first device on primary SCSI or SATA channel.<code class="filename">/dev/lp0</code> - first parallel port.
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-etc"></a>1.2.1.3. The <code class="filename">/etc/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2870408" class="indexterm"></a>
                <a id="id2850636" class="indexterm"></a>
                <p>
					The <code class="filename">/etc/</code> directory is reserved for configuration files that are local to the machine. No binaries are to be placed in <code class="filename">/etc/</code>. Any binaries that were once located in <code class="filename">/etc/</code> should be placed into <code class="filename">/sbin/</code> or <code class="filename">/bin/</code>.
				</p>
                <p>
					Examples of directories in <code class="filename">/etc</code> are the <code class="filename">X11/</code> and <code class="filename">skel/</code>:
				</p>
                <pre class="screen"><code class="computeroutput"> /etc |- X11/ |- skel/</code>
</pre>
                <p>
					The <code class="filename">/etc/X11/</code> directory is for X Window System configuration files, such as <code class="filename">xorg.conf</code>. The <code class="filename">/etc/skel/</code> directory is for "skeleton" user files, which are used to populate a home directory when a user is first created. Applications also store their configuration files in this directory and may reference them when they are executed.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-lib"></a>1.2.1.4. The <code class="filename">/lib/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2905794" class="indexterm"></a>
                <a id="id2906804" class="indexterm"></a>
                <p>
					The <code class="filename">/lib/</code> directory should contain only those libraries needed to execute the binaries in <code class="filename">/bin/</code> and <code class="filename">/sbin/</code>. These shared library images are particularly important for booting the system and executing commands within the root file system.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-media"></a>1.2.1.5. The <code class="filename">/media/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2859204" class="indexterm"></a>
                <a id="id2859334" class="indexterm"></a>
                <p>
					The <code class="filename">/media/</code> directory contains subdirectories used as mount points for removeable media such as usb storage media, DVDs, CD-ROMs, and Zip disks.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-mnt"></a>1.2.1.6. The <code class="filename">/mnt/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2937987" class="indexterm"></a>
                <a id="id2938002" class="indexterm"></a>
                <p>
					The <code class="filename">/mnt/</code> directory is reserved for temporarily mounted file systems, such as NFS file system mounts. For all removeable media, please use the <code class="filename">/media/</code> directory. Automatically detected removeable media will be mounted in the <code class="filename">/media</code> directory.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						The <code class="filename">/mnt</code> directory must not be used by installation programs.
					</p>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-opt"></a>1.2.1.7. The <code class="filename">/opt/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2904138" class="indexterm"></a>
                <a id="id2922711" class="indexterm"></a>
                <p>
					The <code class="filename">/opt/</code> directory provides storage for most application software packages.
				</p>
                <p>
					A package placing files in the <code class="filename">/opt/</code> directory creates a directory bearing the same name as the package. This directory, in turn, holds files that otherwise would be scattered throughout the file system, giving the system administrator an easy way to determine the role of each file within a particular package.
				</p>
                <p>
					For example, if <code class="filename">sample</code> is the name of a particular software package located within the <code class="filename">/opt/</code> directory, then all of its files are placed in directories inside the <code class="filename">/opt/sample/</code> directory, such as <code class="filename">/opt/sample/bin/</code> for binaries and <code class="filename">/opt/sample/man/</code> for manual pages.
				</p>
                <p>
					Packages that encompass many different sub-packages, data files, extra fonts, clipart etc are also located in the <code class="filename">/opt/</code> directory, giving that large package a way to organize itself. In this way, our <code class="filename">sample</code> package may have different tools that each go in their own sub-directories, such as <code class="filename">/opt/sample/tool1/</code> and <code class="filename">/opt/sample/tool2/</code>, each of which can have their own <code class="filename">bin/</code>, <code class="filename">man/</code>, and other similar directories.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-proc"></a>1.2.1.8. The <code class="filename">/proc/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2915518" class="indexterm"></a>
                <a id="id2915532" class="indexterm"></a>
                <p>
					The <code class="filename">/proc/</code> directory contains special files that either extract information from or send information to the kernel. Examples include system memory, cpu information, hardware configuration etc.
				</p>
                <p>
					Due to the great variety of data available within <code class="filename">/proc/</code> and the many ways this directory can be used to communicate with the kernel, an entire chapter has been devoted to the subject. For more information, refer to <a href="#ch-proc" title="Chapter 3. The proc File System">Chapter 3, <i>The <code class="filename">proc</code> File System</i></a>.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-sbin"></a>1.2.1.9. The <code class="filename">/sbin/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2940383" class="indexterm"></a>
                <a id="id2929198" class="indexterm"></a>
                <p>
					The <code class="filename">/sbin/</code> directory stores executables used by the root user. The executables in <code class="filename">/sbin/</code> are used at boot time, for system administration and to perform system recovery operations. Of this directory, the FHS says: 
					</p>
                <div class="blockquote">
                  <blockquote class="blockquote">
                    <p>
							<code class="filename">/sbin</code> contains binaries essential for booting, restoring, recovering, and/or repairing the system in addition to the binaries in <code class="filename">/bin</code>. Programs executed after <code class="filename">/usr/</code> is known to be mounted (when there are no problems) are generally placed into <code class="filename">/usr/sbin</code>. Locally-installed system administration programs should be placed into <code class="filename">/usr/local/sbin</code>.
						</p>
                  </blockquote>
                </div>
                <p>
				</p>
                <p>
					At a minimum, the following programs should be in <code class="filename">/sbin/</code>:
				</p>
                <pre class="screen"><code class="computeroutput"><code class="filename">arp</code>, <code class="filename">clock</code>, <code class="filename">halt</code>, <code class="filename">init</code>, <code class="filename">fsck.*</code>, <code class="filename">grub</code>, <code class="filename">ifconfig</code>, <code class="filename">mingetty</code>, <code class="filename">mkfs.*</code>, <code class="filename">mkswap</code>, <code class="filename">reboot</code>, <code class="filename">route</code>, <code class="filename">shutdown</code>, <code class="filename">swapoff</code>, <code class="filename">swapon</code></code>
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-srv"></a>1.2.1.10. The <code class="filename">/srv/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2854063" class="indexterm"></a>
                <a id="id2854077" class="indexterm"></a>
                <p>
					The <code class="filename">/srv/</code> directory contains site-specific data served by your system running Red Hat Enterprise Linux. This directory gives users the location of data files for a particular service, such as FTP, WWW, or CVS. Data that only pertains to a specific user should go in the <code class="filename">/home/</code> directory.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-sys"></a>1.2.1.11. The <code class="filename">/sys/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2854131" class="indexterm"></a>
                <a id="id2916319" class="indexterm"></a>
                <p>
					The <code class="filename">/sys/</code> directory utilizes the new <code class="filename">sysfs</code> virtual file system specific to the 2.6 kernel. With the increased support for hot plug hardware devices in the 2.6 kernel, the <code class="filename">/sys/</code> directory contains information similarly held in <code class="filename">/proc/</code>, but displays a hierarchical view of specific device information in regards to hot plug devices.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-usr"></a>1.2.1.12. The <code class="filename">/usr/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2916384" class="indexterm"></a>
                <a id="id2916398" class="indexterm"></a>
                <p>
					The <code class="filename">/usr/</code> directory is for files that can be shared across multiple machines. The <code class="filename">/usr/</code> directory is often on its own partition and is mounted read-only. At a minimum, the following directories should be subdirectories of <code class="filename">/usr/</code>:
				</p>
                <pre class="screen"><code class="computeroutput"> /usr |- bin/ |- etc/ |- games/ |- include/ |- kerberos/ |- lib/ |- libexec/ |- local/ |- sbin/ |- share/ |- src/ |- tmp -&gt; ../var/tmp/</code>
</pre>
                <p>
					Under the <code class="filename">/usr/</code> directory, the <code class="filename">bin/</code> subdirectory contains executables, <code class="filename">etc/</code> contains system-wide configuration files, <code class="filename">games</code> is for games, <code class="filename">include/</code> contains C header files, <code class="filename">kerberos/</code> contains binaries and other Kerberos-related files, and <code class="filename">lib/</code> contains object files and libraries that are not designed to be directly utilized by users or shell scripts. The <code class="filename">libexec/</code> directory contains small helper programs called by other programs, <code class="filename">sbin/</code> is for system administration binaries (those that do not belong in the <code class="filename">/sbin/</code> directory), <code class="filename">share/</code> contains files that are not architecture-specific, <code class="filename">src/</code> is for source code.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-usr-local"></a>1.2.1.13. The <code class="filename">/usr/local/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2919080" class="indexterm"></a>
                <a id="id2919095" class="indexterm"></a>
                <p>
					The FHS says: 
					</p>
                <div class="blockquote">
                  <blockquote class="blockquote">
                    <p>
							The <code class="filename">/usr/local</code> hierarchy is for use by the system administrator when installing software locally. It needs to be safe from being overwritten when the system software is updated. It may be used for programs and data that are shareable among a group of hosts, but not found in <code class="filename">/usr</code>.
						</p>
                  </blockquote>
                </div>
                <p>
				</p>
                <p>
					The <code class="filename">/usr/local/</code> directory is similar in structure to the <code class="filename">/usr/</code> directory. It has the following subdirectories, which are similar in purpose to those in the <code class="filename">/usr/</code> directory:
				</p>
                <pre class="screen"><code class="computeroutput"> /usr/local |- bin/ |- etc/ |- games/ |- include/ |- lib/ |- libexec/ |- sbin/ |- share/ |- src/</code>
</pre>
                <p>
					In Red Hat Enterprise Linux, the intended use for the <code class="filename">/usr/local/</code> directory is slightly different from that specified by the FHS. The FHS says that <code class="filename">/usr/local/</code> should be where software that is to remain safe from system software upgrades is stored. Since software upgrades can be performed safely with <em class="firstterm">RPM Package Manager</em> (<em class="firstterm">RPM</em>), it is not necessary to protect files by putting them in <code class="filename">/usr/local/</code>. Instead, the <code class="filename">/usr/local/</code> directory is used for software that is local to the machine.
				</p>
                <p>
					For instance, if the <code class="filename">/usr/</code> directory is mounted as a read-only NFS share from a remote host, it is still possible to install a package or program under the <code class="filename">/usr/local/</code> directory.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-filesystem-var"></a>1.2.1.14. The <code class="filename">/var/</code> Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id2919250" class="indexterm"></a>
                <a id="id2919264" class="indexterm"></a>
                <p>
					Since the FHS requires Linux to mount <code class="filename">/usr/</code> as read-only, any programs that write log files or need <code class="filename">spool/</code> or <code class="filename">lock/</code> directories should write them to the <code class="filename">/var/</code> directory. The FHS states <code class="filename">/var/</code> is for:
					</p>
                <div class="blockquote">
                  <blockquote class="blockquote">
                    <p>
							...variable data files. This includes spool directories and files, administrative and logging data, and transient and temporary files.
						</p>
                  </blockquote>
                </div>
                <p>
				</p>
                <p>
					Below are some of the directories found within the <code class="filename">/var/</code> directory:
				</p>
                <pre class="screen"><code class="computeroutput"> /var |- account/ |- arpwatch/ |- cache/ |- crash/ |- db/ |- empty/ |- ftp/ |- gdm/ |- kerberos/ |- lib/ |- local/ |- lock/ |- log/ |- mail -&gt; spool/mail/ |- mailman/ |- named/ |- nis/ |- opt/ |- preserve/ |- run/ +- spool/ |- at/ |- clientmqueue/ |- cron/ |- cups/ |- exim/ |- lpd/ |- mail/ |- mailman/ |- mqueue/ |- news/ |- postfix/ |- repackage/ |- rwho/ |- samba/ |- squid/ |- squirrelmail/ |- up2date/ |- uucp |- uucppublic/ |- vbox/ |- tmp/ |- tux/ |- www/ |- yp/</code>
</pre>
                <p>
					System log files, such as <code class="filename">messages</code> and <code class="filename">lastlog</code>, go in the <code class="filename">/var/log/</code> directory. The <code class="filename">/var/lib/rpm/</code> directory contains RPM system databases. Lock files go in the <code class="filename">/var/lock/</code> directory, usually in directories for the program using the file. The <code class="filename">/var/spool/</code> directory has subdirectories for programs in which data files are stored.
				</p>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-filesystem-special-file"></a>1.3. Special File Locations Under Red Hat Enterprise Linux</h2>
                </div>
              </div>
            </div>
            <a id="id2929364" class="indexterm"></a>
            <a id="id2929381" class="indexterm"></a>
            <a id="id2929407" class="indexterm"></a>
            <a id="id2929425" class="indexterm"></a>
            <a id="id2929439" class="indexterm"></a>
            <a id="id2929454" class="indexterm"></a>
            <p>
			Red Hat Enterprise Linux extends the FHS structure slightly to accommodate special files.
		</p>
            <p>
			Most files pertaining to RPM are kept in the <code class="filename">/var/lib/rpm/</code> directory. For more information on RPM, refer to the chapter <a href="#ch-rpm" title="Chapter 10. Package Management with RPM">Chapter 10, <i>Package Management with RPM</i></a>.
		</p>
            <p>
			The <code class="filename">/var/cache/yum/</code> directory contains files used by the <span><strong class="application">Package Updater</strong></span>, including RPM header information for the system. This location may also be used to temporarily store RPMs downloaded while updating the system. For more information about Red Hat Network, refer to the documentation online at <a href="https://rhn.redhat.com/">https://rhn.redhat.com/</a>.
		</p>
            <p>
			Another location specific to Red Hat Enterprise Linux is the <code class="filename">/etc/sysconfig/</code> directory. This directory stores a variety of configuration information. Many scripts that run at boot time use the files in this directory. Refer to <a href="#ch-sysconfig" title="Chapter 28. The sysconfig Directory">Chapter 28, <i>The <code class="filename">sysconfig</code> Directory</i></a> for more information about what is within this directory and the role these files play in the boot process.
		</p>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-ext3"></a>Chapter 2. The ext3 File System</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-filesystem-ext3">2.1. Features of ext3</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-filesystem-ext3-create">2.2. Creating an ext3 File System</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-filesystem-ext3-convert">2.3. Converting to an ext3 File System</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-filesystem-ext2-revert">2.4. Reverting to an ext2 File System</a>
                </span>
              </dt>
            </dl>
          </div>
          <a id="id2867332" class="indexterm"></a>
          <p>
		The default file system is the journaling <em class="firstterm">ext3</em> file system.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-filesystem-ext3"></a>2.1. Features of ext3</h2>
                </div>
              </div>
            </div>
            <a id="id2912945" class="indexterm"></a>
            <p>
			The ext3 file system is essentially an enhanced version of the ext2 file system. These improvements provide the following advantages:
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">Availability</span>
                </dt>
                <dd>
                  <p>
						After an unexpected power failure or system crash (also called an <em class="firstterm">unclean system shutdown</em>), each mounted ext2 file system on the machine must be checked for consistency by the <code class="command">e2fsck</code> program. This is a time-consuming process that can delay system boot time significantly, especially with large volumes containing a large number of files. During this time, any data on the volumes is unreachable.
					</p>
                  <p>
						The journaling provided by the ext3 file system means that this sort of file system check is no longer necessary after an unclean system shutdown. The only time a consistency check occurs using ext3 is in certain rare hardware failure cases, such as hard drive failures. The time to recover an ext3 file system after an unclean system shutdown does not depend on the size of the file system or the number of files; rather, it depends on the size of the <em class="firstterm">journal</em> used to maintain consistency. The default journal size takes about a second to recover, depending on the speed of the hardware.
					</p>
                </dd>
                <dt>
                  <span class="term">Data Integrity</span>
                </dt>
                <dd>
                  <p>
						The ext3 file system prevents loss of data integrity in the event that an unclean system shutdown occurs. The ext3 file system allows you to choose the type and level of protection that your data receives. By default, the ext3 volumes are configured to keep a high level of data consistency with regard to the state of the file system.
					</p>
                </dd>
                <dt>
                  <span class="term">Speed</span>
                </dt>
                <dd>
                  <p>
						Despite writing some data more than once, ext3 has a higher throughput in most cases than ext2 because ext3's journaling optimizes hard drive head motion. You can choose from three journaling modes to optimize speed, but doing so means trade-offs in regards to data integrity if the system was to fail.
					</p>
                </dd>
                <dt>
                  <span class="term">Easy Transition</span>
                </dt>
                <dd>
                  <p>
						It is easy to migrate from ext2 to ext3 and gain the benefits of a robust journaling file system without reformatting. Refer to <a href="#s1-filesystem-ext3-convert" title="2.3. Converting to an ext3 File System">Section 2.3, “Converting to an ext3 File System”</a> for more on how to perform this task.
					</p>
                </dd>
              </dl>
            </div>
            <p>
			The following sections walk you through the steps for creating and tuning ext3 partitions. For ext2 partitions, skip the partitioning and formating sections below and go directly to <a href="#s1-filesystem-ext3-convert" title="2.3. Converting to an ext3 File System">Section 2.3, “Converting to an ext3 File System”</a>.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-filesystem-ext3-create"></a>2.2. Creating an ext3 File System</h2>
                </div>
              </div>
            </div>
            <a id="id2905914" class="indexterm"></a>
            <p>
			After installation, it is sometimes necessary to create a new ext3 file system. For example, if you add a new disk drive to the system, you may want to partition the drive and use the ext3 file system.
		</p>
            <p>
			The steps for creating an ext3 file system are as follows:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Format the partition with the ext3 file system using <code class="command">mkfs</code>.
				</p>
                </li>
                <li>
                  <p>
					Label the partition using <code class="command">e2label</code>.
				</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-filesystem-ext3-convert"></a>2.3. Converting to an ext3 File System</h2>
                </div>
              </div>
            </div>
            <a id="id2947765" class="indexterm"></a>
            <a id="id2883508" class="indexterm"></a>
            <p>
			The <code class="command">tune2fs</code> allows you to convert an <code class="filename">ext2</code> filesystem to <code class="filename">ext3</code>.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				Always use the <code class="command">e2fsck</code> utility to check your filesystem before and after using <code class="command">tune2fs</code>. A default installation of Red Hat Enterprise Linux uses ext3 for all file systems.
			</p>
            </div>
            <p>
			To convert an <code class="filename">ext2</code> filesystem to <code class="filename">ext3</code>, log in as root and type the following command in a terminal:
		</p>
            <pre class="screen"><code class="command">/sbin/tune2fs -j <em class="replaceable"><code>&lt;block_device&gt;</code></em></code>
</pre>
            <p>
			where <em class="replaceable"><code>&lt;block_device&gt;</code></em> contains the ext2 filesystem you wish to convert.
		</p>
            <p>
			A valid block device could be one of two types of entries:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					A mapped device — A logical volume in a volume group, for example, <code class="command">/dev/mapper/VolGroup00-LogVol02</code>.
				</p>
                </li>
                <li>
                  <p>
					A static device — A traditional storage volume, for example, <code class="command">/dev/<em class="replaceable"><code>hdb</code></em><em class="replaceable"><code>X</code></em></code>, where <em class="replaceable"><code>hdb</code></em> is a storage device name and <em class="replaceable"><code>X</code></em> is the partition number.
				</p>
                </li>
              </ul>
            </div>
            <p>
			Issue the <code class="command">df</code> command to display mounted file systems.
		</p>
            <p>
			For the remainder of this section, the sample commands use the following value for the block device:
		</p>
            <pre class="screen"><code class="command">/dev/mapper/VolGroup00-LogVol02</code>
</pre>
            <a id="id2917110" class="indexterm"></a>
            <p>
			You must recreate the initrd image so that it will contain the ext3 kernel module. To create this, run the <code class="command">mkinitrd</code> program. For information on using the <code class="command">mkinitrd</code> command, type <code class="command">man mkinitrd</code>. Also, make sure your GRUB configuration loads the <code class="filename">initrd</code>.
		</p>
            <p>
			If you fail to make this change, the system still boots, but the file system is mounted as ext2 instead of ext3.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-filesystem-ext2-revert"></a>2.4. Reverting to an ext2 File System</h2>
                </div>
              </div>
            </div>
            <a id="id2803891" class="indexterm"></a>
            <a id="id2927805" class="indexterm"></a>
            <a id="id2908851" class="indexterm"></a>
            <a id="id2923384" class="indexterm"></a>
            <a id="id2932991" class="indexterm"></a>
            <p>
			If you wish to revert a partition from ext3 to ext2 for any reason, you must first unmount the partition by logging in as root and typing,
		</p>
            <pre class="screen"><code class="command">umount <em class="replaceable"><code>/dev/mapper/VolGroup00-LogVol02</code></em></code>
</pre>
            <p>
			Next, change the file system type to ext2 by typing the following command as root:
		</p>
            <pre class="screen"><code class="command">/sbin/tune2fs -O ^has_journal <em class="replaceable"><code>/dev/mapper/VolGroup00-LogVol02</code></em></code>
</pre>
            <p>
			Check the partition for errors by typing the following command as root:
		</p>
            <pre class="screen"><code class="command">/sbin/e2fsck -y <em class="replaceable"><code>/dev/mapper/VolGroup00-LogVol02</code></em></code>
</pre>
            <p>
			Then mount the partition again as ext2 file system by typing:
		</p>
            <pre class="screen"><code class="command">mount -t ext2 <em class="replaceable"><code>/dev/mapper/VolGroup00-LogVol02</code></em><em class="replaceable"><code>/mount/point</code></em></code>
</pre>
            <p>
			In the above command, replace <em class="replaceable"><code>/mount/point</code></em> with the mount point of the partition.
		</p>
            <p>
			Next, remove the <code class="filename">.journal</code> file at the root level of the partition by changing to the directory where it is mounted and typing:
		</p>
            <pre class="screen"><code class="command">rm -f .journal</code>
</pre>
            <p>
			You now have an ext2 partition.
		</p>
            <p>
			If you want to permanently change the partition to ext2, remember to update the <code class="filename">/etc/fstab</code> file.
		</p>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-proc"></a>Chapter 3. The <code class="filename">proc</code> File System</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-proc-virtual">3.1. A Virtual File System</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-viewing">3.1.1. Viewing Virtual Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-change">3.1.2. Changing Virtual Files</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-proc-topfiles">3.2. Top-level Files within the <code class="filename">proc</code> File System</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-apm">3.2.1. <code class="filename">/proc/apm</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-buddyinfo">3.2.2. <code class="filename">/proc/buddyinfo</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-cmdline">3.2.3. <code class="filename">/proc/cmdline</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-cpuinfo">3.2.4. <code class="filename">/proc/cpuinfo</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-crypto">3.2.5. <code class="filename">/proc/crypto</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-devices">3.2.6. <code class="filename">/proc/devices</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dma">3.2.7. <code class="filename">/proc/dma</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-execdomains">3.2.8. <code class="filename">/proc/execdomains</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-fb">3.2.9. <code class="filename">/proc/fb</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-filesystems">3.2.10. <code class="filename">/proc/filesystems</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-interrupts">3.2.11. <code class="filename">/proc/interrupts</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-iomem">3.2.12. <code class="filename">/proc/iomem</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-ioports">3.2.13. <code class="filename">/proc/ioports</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-kcore">3.2.14. <code class="filename">/proc/kcore</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-kmsg">3.2.15. <code class="filename">/proc/kmsg</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-loadavg">3.2.16. <code class="filename">/proc/loadavg</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-locks">3.2.17. <code class="filename">/proc/locks</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-mdstat">3.2.18. <code class="filename">/proc/mdstat</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-meminfo">3.2.19. <code class="filename">/proc/meminfo</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-misc">3.2.20. <code class="filename">/proc/misc</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-modules">3.2.21. <code class="filename">/proc/modules</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-mounts">3.2.22. <code class="filename">/proc/mounts</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-mtrr">3.2.23. <code class="filename">/proc/mtrr</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-partitions">3.2.24. <code class="filename">/proc/partitions</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-pci">3.2.25. <code class="filename">/proc/pci</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-slabinfo">3.2.26. <code class="filename">/proc/slabinfo</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-stat">3.2.27. <code class="filename">/proc/stat</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-swaps">3.2.28. <code class="filename">/proc/swaps</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-sysrq-trigger">3.2.29. <code class="filename">/proc/sysrq-trigger</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-uptime">3.2.30. <code class="filename">/proc/uptime</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-version">3.2.31. <code class="filename">/proc/version</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-proc-directories">3.3. Directories within <code class="filename">/proc/</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-processdirs">3.3.1. Process Directories</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-bus">3.3.2. <code class="filename">/proc/bus/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-driver">3.3.3. <code class="filename">/proc/driver/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-fs">3.3.4. <code class="filename">/proc/fs</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-ide">3.3.5. <code class="filename">/proc/ide/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-irq">3.3.6. <code class="filename">/proc/irq/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-net">3.3.7. <code class="filename">/proc/net/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-scsi">3.3.8. <code class="filename">/proc/scsi/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-sys">3.3.9. <code class="filename">/proc/sys/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-dir-sysvipc">3.3.10. <code class="filename">/proc/sysvipc/</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-tty">3.3.11. <code class="filename">/proc/tty/</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-proc-sysctl">3.4. Using the <code class="command">sysctl</code> Command</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-proc-additional-resources">3.5. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-installed-documentation">3.5.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-proc-useful-websites">3.5.2. Useful Websites</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2868452" class="indexterm"></a>
          <a id="id2911439" class="indexterm"></a>
          <p>
		The Linux kernel has two primary functions: to control access to physical devices on the computer and to schedule when and how processes interact with these devices. The <code class="filename">/proc/</code> directory — also called the <code class="filename">proc</code> file system — contains a hierarchy of special files which represent the current state of the kernel — allowing applications and users to peer into the kernel's view of the system.
	</p>
          <p>
		Within the <code class="filename">/proc/</code> directory, one can find a wealth of information detailing the system hardware and any processes currently running. In addition, some of the files within the <code class="filename">/proc/</code> directory tree can be manipulated by users and applications to communicate configuration changes to the kernel.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-proc-virtual"></a>3.1. A Virtual File System</h2>
                </div>
              </div>
            </div>
            <a id="id2902876" class="indexterm"></a>
            <a id="id2932454" class="indexterm"></a>
            <a id="id2843578" class="indexterm"></a>
            <p>
			Under Linux, all data are stored as files. Most users are familiar with the two primary types of files: text and binary. But the <code class="filename">/proc/</code> directory contains another type of file called a <em class="firstterm">virtual file</em>. It is for this reason that <code class="filename">/proc/</code> is often referred to as a <em class="firstterm">virtual file system</em>.
		</p>
            <p>
			These virtual files have unique qualities. Most of them are listed as zero bytes in size and yet when one is viewed, it can contain a large amount of information. In addition, most of the time and date settings on virtual files reflect the current time and date, indicative of the fact they are constantly updated.
		</p>
            <p>
			Virtual files such as <code class="filename">/proc/interrupts</code>, <code class="filename">/proc/meminfo</code>, <code class="filename">/proc/mounts</code>, and <code class="filename">/proc/partitions</code> provide an up-to-the-moment glimpse of the system's hardware. Others, like the <code class="filename">/proc/filesystems</code> file and the <code class="filename">/proc/sys/</code> directory provide system configuration information and interfaces.
		</p>
            <p>
			For organizational purposes, files containing information on a similar topic are grouped into virtual directories and sub-directories. For instance, <code class="filename">/proc/ide/</code> contains information for all physical IDE devices. Likewise, process directories contain information about each running process on the system.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-viewing"></a>3.1.1. Viewing Virtual Files</h3>
                  </div>
                </div>
              </div>
              <a id="id2920781" class="indexterm"></a>
              <a id="id2931417" class="indexterm"></a>
              <p>
				By using the <code class="command">cat</code>, <code class="command">more</code>, or <code class="command">less</code> commands on files within the <code class="filename">/proc/</code> directory, users can immediately access enormous amounts of information about the system. For example, to display the type of CPU a computer has, type <code class="command">cat /proc/cpuinfo</code> to receive output similar to the following:
			</p>
              <pre class="screen"><code class="computeroutput">processor : 0 vendor_id : AuthenticAMD cpu family : 5 model : 9 model name : AMD-K6(tm) 3D+ Processor stepping : 1 cpu MHz : 400.919 cache size : 256 KB fdiv_bug : no hlt_bug : no f00f_bug : no coma_bug : no fpu : yes fpu_exception : yes cpuid level : 1 wp : yes flags : fpu vme de pse tsc msr mce cx8 pge mmx syscall 3dnow k6_mtrr bogomips : 799.53</code>
</pre>
              <p>
				When viewing different virtual files in the <code class="filename">/proc/</code> file system, some of the information is easily understandable while some is not human-readable. This is in part why utilities exist to pull data from virtual files and display it in a useful way. Examples of these utilities include <code class="command">lspci</code>, <code class="command">apm</code>, <code class="command">free</code>, and <code class="command">top</code>.
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					Some of the virtual files in the <code class="filename">/proc/</code> directory are readable only by the root user.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-change"></a>3.1.2. Changing Virtual Files</h3>
                  </div>
                </div>
              </div>
              <a id="id2933304" class="indexterm"></a>
              <a id="id2786808" class="indexterm"></a>
              <p>
				As a general rule, most virtual files within the <code class="filename">/proc/</code> directory are read-only. However, some can be used to adjust settings in the kernel. This is especially true for files in the <code class="filename">/proc/sys/</code> subdirectory.
			</p>
              <p>
				To change the value of a virtual file, use the <code class="command">echo</code> command and a greater than symbol (<code class="command">&gt;</code>) to redirect the new value to the file. For example, to change the hostname on the fly, type:
			</p>
              <pre class="screen"><code class="command">echo <em class="replaceable"><code>www.example.com</code></em> &gt; /proc/sys/kernel/hostname </code>
</pre>
              <p>
				Other files act as binary or Boolean switches. Typing <code class="command">cat /proc/sys/net/ipv4/ip_forward</code> returns either a <code class="computeroutput">0</code> or a <code class="computeroutput">1</code>. A <code class="computeroutput">0</code> indicates that the kernel is not forwarding network packets. Using the <code class="command">echo</code> command to change the value of the <code class="filename">ip_forward</code> file to <code class="computeroutput">1</code> immediately turns packet forwarding on.
			</p>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					Another command used to alter settings in the <code class="filename">/proc/sys/</code> subdirectory is <code class="command">/sbin/sysctl</code>. For more information on this command, refer to <a href="#s1-proc-sysctl" title="3.4. Using the sysctl Command">Section 3.4, “Using the <code class="command">sysctl</code> Command”</a>
				</p>
              </div>
              <p>
				For a listing of some of the kernel configuration files available in the <code class="filename">/proc/sys/</code> subdirectory, refer to <a href="#s2-proc-dir-sys" title="3.3.9. /proc/sys/">Section 3.3.9, “<code class="filename">/proc/sys/</code>”</a>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-proc-topfiles"></a>3.2. Top-level Files within the <code class="filename">proc</code> File System</h2>
                </div>
              </div>
            </div>
            <a id="id2897034" class="indexterm"></a>
            <p>
			Below is a list of some of the more useful virtual files in the top-level of the <code class="filename">/proc/</code> directory.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				In most cases, the content of the files listed in this section are not the same as those installed on your machine. This is because much of the information is specific to the hardware on which Red Hat Enterprise Linux is running for this documentation effort.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-apm"></a>3.2.1. <code class="filename">/proc/apm</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2861856" class="indexterm"></a>
              <p>
				This file provides information about the state of the <em class="firstterm">Advanced Power Management (APM)</em> system and is used by the <code class="command">apm</code> command. If a system with no battery is connected to an AC power source, this virtual file would look similar to the following:
			</p>
              <pre class="screen">
1.16 1.2 0x07 0x01 0xff 0x80 -1% -1 ?
</pre>
              <p>
				Running the <code class="command">apm -v</code> command on such a system results in output similar to the following:
			</p>
              <pre class="screen">
APM BIOS 1.2 (kernel driver 1.16ac) AC on-line, no system battery
</pre>
              <p>
				For systems which do not use a battery as a power source, <code class="command">apm</code> is able do little more than put the machine in standby mode. The <code class="command">apm</code> command is much more useful on laptops. For example, the following output is from the command <code class="command">cat /proc/apm</code> on a laptop while plugged into a power outlet:
			</p>
              <pre class="screen">
1.16 1.2 0x03 0x01 0x03 0x09 100% -1 ?
</pre>
              <p>
				When the same laptop is unplugged from its power source for a few minutes, the content of the <code class="filename">apm</code> file changes to something like the following:
			</p>
              <pre class="screen">
1.16 1.2 0x03 0x00 0x00 0x01 99% 1792 min
</pre>
              <p>
				The <code class="command">apm -v</code> command now yields more useful data, such as the following:
			</p>
              <pre class="screen">
APM BIOS 1.2 (kernel driver 1.16) AC off-line, battery status high: 99% (1 day, 5:52)
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-buddyinfo"></a>3.2.2. <code class="filename">/proc/buddyinfo</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2803870" class="indexterm"></a>
              <p>
				This file is used primarily for diagnosing memory fragmentation issues. Using the buddy algorithm, each column represents the number of pages of a certain order (a certain size) that are available at any given time. For example, for zone DMA (direct memory access), there are 90 of 2^(0*PAGE_SIZE) chunks of memory. Similarly, there are 6 of 2^(1*PAGE_SIZE) chunks, and 2 of 2^(2*PAGE_SIZE) chunks of memory available.
			</p>
              <p>
				The <code class="filename">DMA</code> row references the first 16 MB on a system, the <code class="filename">HighMem</code> row references all memory greater than 4 GB on a system, and the <code class="filename">Normal</code> row references all memory in between.
			</p>
              <p>
				The following is an example of the output typical of <code class="filename">/proc/buddyinfo</code>:
			</p>
              <pre class="screen">
Node 0, zone      DMA     90      6      2      1      1      ... 
Node 0, zone   Normal   1650    310      5      0      0      ... 
Node 0, zone  HighMem      2      0      0      1      1      ...
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-cmdline"></a>3.2.3. <code class="filename">/proc/cmdline</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2786940" class="indexterm"></a>
              <p>
				This file shows the parameters passed to the kernel at the time it is started. A sample <code class="filename">/proc/cmdline</code> file looks like the following:
			</p>
              <pre class="screen">
ro root=/dev/VolGroup00/LogVol00 rhgb quiet 3
</pre>
              <p>
				This tells us that the kernel is mounted read-only (signified by <code class="computeroutput">(ro)</code>), located on the first logical volume (<code class="computeroutput">LogVol00</code>) of the first volume group (<code class="computeroutput">/dev/VolGroup00</code>). <code class="computeroutput">LogVol00</code> is the equivalent of a disk partition in a non-LVM system (Logical Volume Management), just as <code class="computeroutput">/dev/VolGroup00</code> is similar in concept to <code class="filename">/dev/hda1</code>, but much more extensible.
			</p>
              <p>
				For more information on LVM used in Red Hat Enterprise Linux, refer to <a href="http://www.tldp.org/HOWTO/LVM-HOWTO/index.html">http://www.tldp.org/HOWTO/LVM-HOWTO/index.html</a>.
			</p>
              <p>
				Next, <code class="computeroutput">rhgb</code> signals that the <code class="filename">rhgb</code> package has been installed, and graphical booting is supported, assuming <code class="filename">/etc/inittab</code> shows a default runlevel set to <code class="command">id:5:initdefault:</code>.
			</p>
              <p>
				Finally, <code class="computeroutput">quiet</code> indicates all verbose kernel messages are suppressed at boot time.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-cpuinfo"></a>3.2.4. <code class="filename">/proc/cpuinfo</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2914707" class="indexterm"></a>
              <p>
				This virtual file identifies the type of processor used by your system. The following is an example of the output typical of <code class="filename">/proc/cpuinfo</code>:
			</p>
              <pre class="screen">
processor	: 0 
vendor_id	: GenuineIntel 
cpu family	: 15 
model		: 2 
model name	: Intel(R) Xeon(TM) CPU 2.40GHz 
stepping	: 7 cpu 
MHz		: 2392.371 
cache size	: 512 KB 
physical id	: 0 
siblings	: 2 
runqueue	: 0 
fdiv_bug	: no 
hlt_bug		: no 
f00f_bug	: no 
coma_bug	: no 
fpu		: yes 
fpu_exception	: yes 
cpuid level	: 2 
wp		: yes 
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca  cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm 
bogomips	: 4771.02
</pre>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">processor</code> — Provides each processor with an identifying number. On systems that have one processor, only a <code class="computeroutput">0</code> is present.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">cpu family</code> — Authoritatively identifies the type of processor in the system. For an Intel-based system, place the number in front of "86" to determine the value. This is particularly helpful for those attempting to identify the architecture of an older system such as a 586, 486, or 386. Because some RPM packages are compiled for each of these particular architectures, this value also helps users determine which packages to install.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">model name</code> — Displays the common name of the processor, including its project name.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">cpu MHz</code> — Shows the precise speed in megahertz for the processor to the thousandths decimal place.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">cache size</code> — Displays the amount of level 2 memory cache available to the processor.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">siblings</code> — Displays the number of sibling CPUs on the same physical CPU for architectures which use hyper-threading.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">flags</code> — Defines a number of different qualities about the processor, such as the presence of a floating point unit (FPU) and the ability to process MMX instructions.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-crypto"></a>3.2.5. <code class="filename">/proc/crypto</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2890040" class="indexterm"></a>
              <p>
				This file lists all installed cryptographic ciphers used by the Linux kernel, including additional details for each. A sample <code class="filename">/proc/crypto</code> file looks like the following:
			</p>
              <pre class="screen">
name         : sha1 
module       : kernel 
type         : digest 
blocksize    : 64 
digestsize   : 20   
name         : md5 
module       : md5 
type         : digest 
blocksize    : 64 
digestsize   : 16
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-devices"></a>3.2.6. <code class="filename">/proc/devices</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2890097" class="indexterm"></a>
              <a id="id2940757" class="indexterm"></a>
              <a id="id2940782" class="indexterm"></a>
              <a id="id2940796" class="indexterm"></a>
              <a id="id2940813" class="indexterm"></a>
              <a id="id2940830" class="indexterm"></a>
              <p>
				This file displays the various character and block devices currently configured (not including devices whose modules are not loaded). Below is a sample output from this file:
			</p>
              <pre class="screen">
Character devices:  
  1 mem   
  4 /dev/vc/0   
  4 tty   
  4 ttyS   
  5 /dev/tty   
  5 /dev/console   
  5 /dev/ptmx   
  7 vcs  
  10 misc  
  13 input  
  29 fb  
  36 netlink 
  128 ptm 
  136 pts 
  180 usb   
  
Block devices:   
  1 ramdisk   
  3 ide0   
  9 md  
  22 ide1 
  253 device-mapper 
  254 mdp
</pre>
              <p>
				The output from <code class="filename">/proc/devices</code> includes the major number and name of the device, and is broken into two major sections: <code class="computeroutput">Character devices</code> and <code class="computeroutput">Block devices</code>.
			</p>
              <p>
				<em class="firstterm">Character devices</em> are similar to <em class="firstterm">block devices</em>, except for two basic differences:
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Character devices do not require buffering. Block devices have a buffer available, allowing them to order requests before addressing them. This is important for devices designed to store information — such as hard drives — because the ability to order the information before writing it to the device allows it to be placed in a more efficient order.
					</p>
                  </li>
                  <li>
                    <p>
						Character devices send data with no preconfigured size. Block devices can send and receive information in blocks of a size configured per device.
					</p>
                  </li>
                </ol>
              </div>
              <p>
				For more information about devices refer to the following installed documentation:
			</p>
              <pre class="screen">
/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/devices.txt
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dma"></a>3.2.7. <code class="filename">/proc/dma</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2940956" class="indexterm"></a>
              <p>
				This file contains a list of the registered ISA DMA channels in use. A sample <code class="filename">/proc/dma</code> files looks like the following:
			</p>
              <pre class="screen">
4: cascade
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-execdomains"></a>3.2.8. <code class="filename">/proc/execdomains</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2941008" class="indexterm"></a>
              <a id="id2787172" class="indexterm"></a>
              <a id="id2787189" class="indexterm"></a>
              <p>
				This file lists the <em class="firstterm">execution domains</em> currently supported by the Linux kernel, along with the range of personalities they support.
			</p>
              <pre class="screen">
0-0   Linux           [kernel]
</pre>
              <p>
				Think of execution domains as the "personality" for an operating system. Because other binary formats, such as Solaris, UnixWare, and FreeBSD, can be used with Linux, programmers can change the way the operating system treats system calls from these binaries by changing the personality of the task. Except for the <code class="computeroutput">PER_LINUX</code> execution domain, different personalities can be implemented as dynamically loadable modules.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-fb"></a>3.2.9. <code class="filename">/proc/fb</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2787247" class="indexterm"></a>
              <a id="id2787269" class="indexterm"></a>
              <p>
				This file contains a list of frame buffer devices, with the frame buffer device number and the driver that controls it. Typical output of <code class="filename">/proc/fb</code> for systems which contain frame buffer devices looks similar to the following:
			</p>
              <pre class="screen">
0 VESA VGA
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-filesystems"></a>3.2.10. <code class="filename">/proc/filesystems</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2787319" class="indexterm"></a>
              <p>
				This file displays a list of the file system types currently supported by the kernel. Sample output from a generic <code class="filename">/proc/filesystems</code> file looks similar to the following:
			</p>
              <pre class="screen">
nodev   sysfs 
nodev   rootfs 
nodev   bdev 
nodev   proc 
nodev   sockfs 
nodev   binfmt_misc 
nodev   usbfs 
nodev   usbdevfs 
nodev   futexfs 
nodev   tmpfs 
nodev   pipefs 
nodev   eventpollfs 
nodev   devpts         
	ext2 
nodev   ramfs 
nodev   hugetlbfs         
	iso9660 
nodev   mqueue         
	ext3 
nodev   rpc_pipefs 
nodev   autofs
</pre>
              <p>
				The first column signifies whether the file system is mounted on a block device. Those beginning with <code class="computeroutput">nodev</code> are not mounted on a device. The second column lists the names of the file systems supported.
			</p>
              <p>
				The <code class="command">mount</code> command cycles through the file systems listed here when one is not specified as an argument.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-interrupts"></a>3.2.11. <code class="filename">/proc/interrupts</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2787402" class="indexterm"></a>
              <p>
				This file records the number of interrupts per IRQ on the x86 architecture. A standard <code class="filename">/proc/interrupts</code> looks similar to the following:
			</p>
              <pre class="screen">
  CPU0          
  0:   80448940          XT-PIC  timer   
  1:     174412          XT-PIC  keyboard   
  2:          0          XT-PIC  cascade   
  8:          1          XT-PIC  rtc  
 10:     410964          XT-PIC  eth0  
 12:      60330          XT-PIC  PS/2 Mouse  
 14:    1314121          XT-PIC  ide0  
 15:    5195422          XT-PIC  ide1 
NMI:          0  
ERR:          0
</pre>
              <p>
				For a multi-processor machine, this file may look slightly different:
			</p>
              <pre class="screen">
	   CPU0       CPU1          
  0: 1366814704          0          XT-PIC  timer   
  1:        128        340    IO-APIC-edge  keyboard   
  2:          0          0          XT-PIC  cascade   
  8:          0          1    IO-APIC-edge  rtc  
 12:       5323       5793    IO-APIC-edge  PS/2 Mouse  
 13:          1          0          XT-PIC  fpu  
 16:   11184294   15940594   IO-APIC-level  Intel EtherExpress Pro 10/100 Ethernet  
 20:    8450043   11120093   IO-APIC-level  megaraid  
 30:      10432      10722   IO-APIC-level  aic7xxx  
 31:         23         22   IO-APIC-level  aic7xxx 
NMI:          0 
ERR:          0
</pre>
              <p>
				The first column refers to the IRQ number. Each CPU in the system has its own column and its own number of interrupts per IRQ. The next column reports the type of interrupt, and the last column contains the name of the device that is located at that IRQ.
			</p>
              <p>
				Each of the types of interrupts seen in this file, which are architecture-specific, mean something different. For x86 machines, the following values are common:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">XT-PIC</code> — This is the old AT computer interrupts.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">IO-APIC-edge</code> — The voltage signal on this interrupt transitions from low to high, creating an <span class="emphasis"><em>edge</em></span>, where the interrupt occurs and is only signaled once. This kind of interrupt, as well as the <code class="computeroutput">IO-APIC-level</code> interrupt, are only seen on systems with processors from the 586 family and higher.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">IO-APIC-level</code> — Generates interrupts when its voltage signal is high until the signal is low again.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-iomem"></a>3.2.12. <code class="filename">/proc/iomem</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2871000" class="indexterm"></a>
              <p>
				This file shows you the current map of the system's memory for each physical device:
			</p>
              <pre class="screen">
00000000-0009fbff : System RAM
0009fc00-0009ffff : reserved 
000a0000-000bffff : Video RAM area
000c0000-000c7fff : Video ROM 
000f0000-000fffff : System ROM
00100000-07ffffff : System RAM   
00100000-00291ba8 : Kernel code
00291ba9-002e09cb : Kernel data 
e0000000-e3ffffff : VIA Technologies, Inc. VT82C597 [Apollo VP3] e4000000-e7ffffff : PCI Bus #01   
e4000000-e4003fff : Matrox Graphics, Inc. MGA G200 AGP   
e5000000-e57fffff : Matrox Graphics, Inc. MGA G200 AGP 
e8000000-e8ffffff : PCI Bus #01   
e8000000-e8ffffff : Matrox Graphics, Inc. MGA G200 AGP 
ea000000-ea00007f : Digital Equipment Corporation DECchip 21140 [FasterNet]
ea000000-ea00007f : tulip ffff0000-ffffffff : reserved
</pre>
              <p>
				The first column displays the memory registers used by each of the different types of memory. The second column lists the kind of memory located within those registers and displays which memory registers are used by the kernel within the system RAM or, if the network interface card has multiple Ethernet ports, the memory registers assigned for each port.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-ioports"></a>3.2.13. <code class="filename">/proc/ioports</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2871068" class="indexterm"></a>
              <p>
				The output of <code class="filename">/proc/ioports</code> provides a list of currently registered port regions used for input or output communication with a device. This file can be quite long. The following is a partial listing:
			</p>
              <pre class="screen">
0000-001f : dma1 
0020-003f : pic1 
0040-005f : timer 
0060-006f : keyboard 
0070-007f : rtc 
0080-008f : dma page reg 
00a0-00bf : pic2 
00c0-00df : dma2 
00f0-00ff : fpu 
0170-0177 : ide1 
01f0-01f7 : ide0 
02f8-02ff : serial(auto) 
0376-0376 : ide1 
03c0-03df : vga+ 
03f6-03f6 : ide0 
03f8-03ff : serial(auto) 
0cf8-0cff : PCI conf1 
d000-dfff : PCI Bus #01 
e000-e00f : VIA Technologies, Inc. Bus Master IDE   
e000-e007 : ide0   
e008-e00f : ide1 
e800-e87f : Digital Equipment Corporation DECchip 21140 [FasterNet]   
e800-e87f : tulip
</pre>
              <p>
				The first column gives the I/O port address range reserved for the device listed in the second column.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-kcore"></a>3.2.14. <code class="filename">/proc/kcore</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2871137" class="indexterm"></a>
              <p>
				This file represents the physical memory of the system and is stored in the core file format. Unlike most <code class="filename">/proc/</code> files, <code class="filename">kcore</code> displays a size. This value is given in bytes and is equal to the size of the physical memory (RAM) used plus 4 KB.
			</p>
              <p>
				The contents of this file are designed to be examined by a debugger, such as <code class="command">gdb</code>, and is not human readable.
			</p>
              <div class="caution">
                <h2>Caution</h2>
                <p>
					Do not view the <code class="filename">/proc/kcore</code> virtual file. The contents of the file scramble text output on the terminal. If this file is accidentally viewed, press <span><strong class="keycap">Ctrl</strong></span>-<span><strong class="keycap">C</strong></span> to stop the process and then type <code class="command">reset</code> to bring back the command line prompt.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-kmsg"></a>3.2.15. <code class="filename">/proc/kmsg</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2935250" class="indexterm"></a>
              <p>
				This file is used to hold messages generated by the kernel. These messages are then picked up by other programs, such as <code class="command">/sbin/klogd</code> or <code class="command">/bin/dmesg</code>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-loadavg"></a>3.2.16. <code class="filename">/proc/loadavg</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2935303" class="indexterm"></a>
              <p>
				This file provides a look at the load average in regard to both the CPU and IO over time, as well as additional data used by <code class="command">uptime</code> and other commands. A sample <code class="filename">/proc/loadavg</code> file looks similar to the following:
			</p>
              <pre class="screen">
0.20 0.18 0.12 1/80 11206
</pre>
              <p>
				The first three columns measure CPU and IO utilization of the last one, five, and 15 minute periods. The fourth column shows the number of currently running processes and the total number of processes. The last column displays the last process ID used.
			</p>
              <p>
				In addition, load average also refers to the number of processes ready to run (i.e. in the run queue, waiting for a CPU share.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-locks"></a>3.2.17. <code class="filename">/proc/locks</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2935376" class="indexterm"></a>
              <p>
				This file displays the files currently locked by the kernel. The contents of this file contain internal kernel debugging data and can vary tremendously, depending on the use of the system. A sample <code class="filename">/proc/locks</code> file for a lightly loaded system looks similar to the following:
			</p>
              <pre class="screen">
1: POSIX  ADVISORY  WRITE 3568 fd:00:2531452 0 EOF 
2: FLOCK  ADVISORY  WRITE 3517 fd:00:2531448 0 EOF 
3: POSIX  ADVISORY  WRITE 3452 fd:00:2531442 0 EOF 
4: POSIX  ADVISORY  WRITE 3443 fd:00:2531440 0 EOF 
5: POSIX  ADVISORY  WRITE 3326 fd:00:2531430 0 EOF 
6: POSIX  ADVISORY  WRITE 3175 fd:00:2531425 0 EOF 
7: POSIX  ADVISORY  WRITE 3056 fd:00:2548663 0 EOF
</pre>
              <p>
				Each lock has its own line which starts with a unique number. The second column refers to the class of lock used, with <code class="computeroutput">FLOCK</code> signifying the older-style UNIX file locks from a <code class="command">flock</code> system call and <code class="computeroutput">POSIX</code> representing the newer POSIX locks from the <code class="command">lockf</code> system call.
			</p>
              <p>
				The third column can have two values: <code class="computeroutput">ADVISORY</code> or <code class="computeroutput">MANDATORY</code>. <code class="computeroutput">ADVISORY</code> means that the lock does not prevent other people from accessing the data; it only prevents other attempts to lock it. <code class="computeroutput">MANDATORY</code> means that no other access to the data is permitted while the lock is held. The fourth column reveals whether the lock is allowing the holder <code class="computeroutput">READ</code> or <code class="computeroutput">WRITE</code> access to the file. The fifth column shows the ID of the process holding the lock. The sixth column shows the ID of the file being locked, in the format of <code class="computeroutput"><em class="replaceable"><code>MAJOR-DEVICE</code></em>:<em class="replaceable"><code>MINOR-DEVICE</code></em>:<em class="replaceable"><code>INODE-NUMBER</code></em></code>. The seventh and eighth column shows the start and end of the file's locked region.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-mdstat"></a>3.2.18. <code class="filename">/proc/mdstat</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2921298" class="indexterm"></a>
              <p>
				This file contains the current information for multiple-disk, RAID configurations. If the system does not contain such a configuration, then <code class="filename">/proc/mdstat</code> looks similar to the following:
			</p>
              <pre class="screen">
Personalities :  read_ahead not set unused devices: &lt;none&gt;
</pre>
              <p>
				This file remains in the same state as seen above unless a software RAID or <code class="filename">md</code> device is present. In that case, view <code class="filename">/proc/mdstat</code> to find the current status of <code class="filename">md<em class="replaceable"><code>X</code></em></code> RAID devices.
			</p>
              <p>
				The <code class="filename">/proc/mdstat</code> file below shows a system with its <code class="filename">md0</code> configured as a RAID 1 device, while it is currently re-syncing the disks:
			</p>
              <pre class="screen">
Personalities : [linear] [raid1] read_ahead 1024 sectors 
md0: active raid1 sda2[1] sdb2[0] 9940 blocks [2/2] [UU] resync=1% finish=12.3min algorithm 2 [3/3] [UUU] 
unused devices: &lt;none&gt;
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-meminfo"></a>3.2.19. <code class="filename">/proc/meminfo</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2921406" class="indexterm"></a>
              <p>
				This is one of the more commonly used files in the <code class="filename">/proc/</code> directory, as it reports a large amount of valuable information about the systems RAM usage.
			</p>
              <p>
				The following sample <code class="filename">/proc/meminfo</code> virtual file is from a system with 256 MB of RAM and 512 MB of swap space:
			</p>
              <pre class="screen">
MemTotal:       255908 kB 
MemFree:         69936 kB 
Buffers:         15812 kB 
Cached:         115124 kB 
SwapCached:          0 kB 
Active:          92700 kB 
Inactive:        63792 kB 
HighTotal:           0 kB 
HighFree:            0 kB 
LowTotal:       255908 kB 
LowFree:         69936 kB 
SwapTotal:      524280 kB 
SwapFree:       524280 kB 
Dirty:               4 kB 
Writeback:           0 kB 
Mapped:          42236 kB 
Slab:            25912 kB 
Committed_AS:   118680 kB 
PageTables:       1236 kB 
VmallocTotal:  3874808 kB 
VmallocUsed:      1416 kB 
VmallocChunk:  3872908 kB 
HugePages_Total:     0 
HugePages_Free:      0 
Hugepagesize:     4096 kB
</pre>
              <p>
				Much of the information here is used by the <code class="command">free</code>, <code class="command">top</code>, and <code class="command">ps</code> commands. In fact, the output of the <code class="command">free</code> command is similar in appearance to the contents and structure of <code class="filename">/proc/meminfo</code>. But by looking directly at <code class="filename">/proc/meminfo</code>, more details are revealed:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">MemTotal</code> — Total amount of physical RAM, in kilobytes.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">MemFree</code> — The amount of physical RAM, in kilobytes, left unused by the system.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Buffers</code> — The amount of physical RAM, in kilobytes, used for file buffers.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Cached</code> — The amount of physical RAM, in kilobytes, used as cache memory.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">SwapCached</code> — The amount of swap, in kilobytes, used as cache memory.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Active</code> — The total amount of buffer or page cache memory, in kilobytes, that is in active use. This is memory that has been recently used and is usually not reclaimed for other purposes.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Inactive</code> — The total amount of buffer or page cache memory, in kilobytes, that are free and available. This is memory that has not been recently used and can be reclaimed for other purposes.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">HighTotal</code> and <code class="computeroutput">HighFree</code> — The total and free amount of memory, in kilobytes, that is not directly mapped into kernel space. The <code class="computeroutput">HighTotal</code> value can vary based on the type of kernel used.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">LowTotal</code> and <code class="computeroutput">LowFree</code> — The total and free amount of memory, in kilobytes, that is directly mapped into kernel space. The <code class="computeroutput">LowTotal</code> value can vary based on the type of kernel used.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">SwapTotal</code> — The total amount of swap available, in kilobytes.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">SwapFree</code> — The total amount of swap free, in kilobytes.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Dirty</code> — The total amount of memory, in kilobytes, waiting to be written back to the disk.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Writeback</code> — The total amount of memory, in kilobytes, actively being written back to the disk.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Mapped</code> — The total amount of memory, in kilobytes, which have been used to map devices, files, or libraries using the <code class="command">mmap</code> command.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Slab</code> — The total amount of memory, in kilobytes, used by the kernel to cache data structures for its own use.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Committed_AS</code> — The total amount of memory, in kilobytes, estimated to complete the workload. This value represents the worst case scenario value, and also includes swap memory.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">PageTables</code> — The total amount of memory, in kilobytes, dedicated to the lowest page table level.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">VMallocTotal</code> — The total amount of memory, in kilobytes, of total allocated virtual address space.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">VMallocUsed</code> — The total amount of memory, in kilobytes, of used virtual address space.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">VMallocChunk</code> — The largest contiguous block of memory, in kilobytes, of available virtual address space.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">HugePages_Total</code> — The total number of hugepages for the system. The number is derived by dividing <code class="computeroutput">Hugepagesize</code> by the megabytes set aside for hugepages specified in <code class="filename">/proc/sys/vm/hugetlb_pool</code>. <span class="emphasis"><em>This statistic only appears on the x86, Itanium, and AMD64 architectures.</em></span>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">HugePages_Free</code> — The total number of hugepages available for the system. <span class="emphasis"><em>This statistic only appears on the x86, Itanium, and AMD64 architectures.</em></span>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">Hugepagesize</code> — The size for each hugepages unit in kilobytes. By default, the value is 4096 KB on uniprocessor kernels for 32 bit architectures. For SMP, hugemem kernels, and AMD64, the default is 2048 KB. For Itanium architectures, the default is 262144 KB. <span class="emphasis"><em>This statistic only appears on the x86, Itanium, and AMD64 architectures.</em></span>
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-misc"></a>3.2.20. <code class="filename">/proc/misc</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2881965" class="indexterm"></a>
              <p>
				This file lists miscellaneous drivers registered on the miscellaneous major device, which is device number 10:
			</p>
              <pre class="screen">
63 device-mapper 175 agpgart 135 rtc 134 apm_bios
</pre>
              <p>
				The first column is the minor number of each device, while the second column shows the driver in use.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-modules"></a>3.2.21. <code class="filename">/proc/modules</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2882018" class="indexterm"></a>
              <p>
				This file displays a list of all modules loaded into the kernel. Its contents vary based on the configuration and use of your system, but it should be organized in a similar manner to this sample <code class="filename">/proc/modules</code> file output:
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					This example has been reformatted into a readable format. Most of this information can also be viewed via the <code class="command">/sbin/lsmod</code> command.
				</p>
              </div>
              <pre class="screen">
nfs      170109  0 -          Live 0x129b0000 
lockd    51593   1 nfs,       Live 0x128b0000 
nls_utf8 1729    0 -          Live 0x12830000 
vfat     12097   0 -          Live 0x12823000 
fat      38881   1 vfat,      Live 0x1287b000 
autofs4  20293   2 -          Live 0x1284f000 
sunrpc   140453  3 nfs,lockd, Live 0x12954000 
3c59x    33257   0 -          Live 0x12871000 
uhci_hcd 28377   0 -          Live 0x12869000 
md5      3777    1 -          Live 0x1282c000 
ipv6     211845 16 -          Live 0x128de000 
ext3     92585   2 -          Live 0x12886000 
jbd      65625   1 ext3,      Live 0x12857000 
dm_mod   46677   3 -          Live 0x12833000
</pre>
              <p>
				The first column contains the name of the module.
			</p>
              <p>
				The second column refers to the memory size of the module, in bytes.
			</p>
              <p>
				The third column lists how many instances of the module are currently loaded. A value of zero represents an unloaded module.
			</p>
              <p>
				The fourth column states if the module depends upon another module to be present in order to function, and lists those other modules.
			</p>
              <p>
				The fifth column lists what load state the module is in: <code class="command">Live</code>, <code class="command">Loading</code>, or <code class="command">Unloading</code> are the only possible values.
			</p>
              <p>
				The sixth column lists the current kernel memory offset for the loaded module. This information can be useful for debugging purposes, or for profiling tools such as <code class="filename">oprofile</code>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-mounts"></a>3.2.22. <code class="filename">/proc/mounts</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2924623" class="indexterm"></a>
              <p>
				This file provides a list of all mounts in use by the system:
			</p>
              <pre class="screen">
rootfs / rootfs rw 0 0 
/proc /proc proc rw,nodiratime 0 0 none 
/dev ramfs rw 0 0 
/dev/mapper/VolGroup00-LogVol00 / ext3 rw 0 0 
none /dev ramfs rw 0 0 
/proc /proc proc rw,nodiratime 0 0 
/sys /sys sysfs rw 0 0 
none /dev/pts devpts rw 0 0 
usbdevfs /proc/bus/usb usbdevfs rw 0 0 
/dev/hda1 /boot ext3 rw 0 0 
none /dev/shm tmpfs rw 0 0 
none /proc/sys/fs/binfmt_misc binfmt_misc rw 0 0 
sunrpc /var/lib/nfs/rpc_pipefs rpc_pipefs rw 0 0
</pre>
              <p>
				The output found here is similar to the contents of <code class="filename">/etc/mtab</code>, except that <code class="filename">/proc/mount</code> is more up-to-date.
			</p>
              <p>
				The first column specifies the device that is mounted, the second column reveals the mount point, and the third column tells the file system type, and the fourth column tells you if it is mounted read-only (<code class="computeroutput">ro</code>) or read-write (<code class="computeroutput">rw</code>). The fifth and sixth columns are dummy values designed to match the format used in <code class="filename">/etc/mtab</code>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-mtrr"></a>3.2.23. <code class="filename">/proc/mtrr</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2924720" class="indexterm"></a>
              <p>
				This file refers to the current Memory Type Range Registers (MTRRs) in use with the system. If the system architecture supports MTRRs, then the <code class="filename">/proc/mtrr</code> file may look similar to the following:
			</p>
              <pre class="screen">
reg00: base=0x00000000 (   0MB), size= 256MB: write-back, count=1 
reg01: base=0xe8000000 (3712MB), size=  32MB: write-combining, count=1
</pre>
              <p>
				MTRRs are used with the Intel P6 family of processors (Pentium II and higher) and control processor access to memory ranges. When using a video card on a PCI or AGP bus, a properly configured <code class="filename">/proc/mtrr</code> file can increase performance more than 150%.
			</p>
              <p>
				Most of the time, this value is properly configured by default. More information on manually configuring this file can be found locally at the following location:
			</p>
              <pre class="screen">
/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/mtrr.txt
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-partitions"></a>3.2.24. <code class="filename">/proc/partitions</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2924805" class="indexterm"></a>
              <p>
				This file contains partition block allocation information. A sampling of this file from a basic system looks similar to the following:
			</p>
              <pre class="screen">
major minor  #blocks  name      
  3     0   19531250 hda    
  3     1     104391 hda1    
  3     2   19422585 hda2  
253     0   22708224 dm-0  
253     1     524288 dm-1
</pre>
              <p>
				Most of the information here is of little importance to the user, except for the following columns:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">major</code> — The major number of the device with this partition. The major number in the <code class="filename">/proc/partitions</code>, (<code class="computeroutput">3</code>), corresponds with the block device <code class="computeroutput">ide0</code>, in <code class="filename">/proc/devices</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">minor</code> — The minor number of the device with this partition. This serves to separate the partitions into different physical devices and relates to the number at the end of the name of the partition.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">#blocks</code> — Lists the number of physical disk blocks contained in a particular partition.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">name</code> — The name of the partition.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-pci"></a>3.2.25. <code class="filename">/proc/pci</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2876420" class="indexterm"></a>
              <a id="id2876450" class="indexterm"></a>
              <p>
				This file contains a full listing of every PCI device on the system. Depending on the number of PCI devices, <code class="filename">/proc/pci</code> can be rather long. A sampling of this file from a basic system looks similar to the following:
			</p>
              <pre class="screen">
Bus  0, device 0, function 0: Host bridge: Intel Corporation 440BX/ZX - 82443BX/ZX Host bridge (rev 3). Master Capable. Latency=64. Prefetchable 32 bit memory at 0xe4000000 [0xe7ffffff].   
Bus  0, device 1, function 0: PCI bridge: Intel Corporation 440BX/ZX - 82443BX/ZX AGP bridge (rev 3).   Master Capable. Latency=64. Min Gnt=128.   
Bus  0, device 4, function 0: ISA bridge: Intel Corporation 82371AB PIIX4 ISA (rev 2).   
Bus  0, device 4, function 1: IDE interface: Intel Corporation 82371AB PIIX4 IDE (rev 1). Master Capable. Latency=32. I/O at 0xd800 [0xd80f].   
Bus  0, device 4, function 2: USB Controller: Intel Corporation 82371AB PIIX4 USB (rev 1). IRQ 5. Master Capable. Latency=32. I/O at 0xd400 [0xd41f].   
Bus  0, device 4, function 3: Bridge: Intel Corporation 82371AB PIIX4 ACPI (rev 2). IRQ 9.  
Bus  0, device 9, function 0: Ethernet controller: Lite-On Communications Inc LNE100TX (rev 33). IRQ 5. Master Capable. Latency=32. I/O at 0xd000 [0xd0ff].   
Bus  0, device 12, function  0: VGA compatible controller: S3 Inc. ViRGE/DX or /GX (rev 1). IRQ 11. Master Capable. Latency=32. Min Gnt=4.Max Lat=255.
</pre>
              <p>
				This output shows a list of all PCI devices, sorted in the order of bus, device, and function. Beyond providing the name and version of the device, this list also gives detailed IRQ information so an administrator can quickly look for conflicts.
			</p>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					To get a more readable version of this information, type:
				</p>
                <pre class="screen">
/sbin/lspci -vb
</pre>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-slabinfo"></a>3.2.26. <code class="filename">/proc/slabinfo</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2876541" class="indexterm"></a>
              <a id="id2876563" class="indexterm"></a>
              <p>
				This file gives full information about memory usage on the <em class="firstterm">slab</em> level. Linux kernels greater than version 2.2 use <em class="firstterm">slab pools</em> to manage memory above the page level. Commonly used objects have their own slab pools.
			</p>
              <p>
				Instead of parsing the highly verbose <code class="filename">/proc/slabinfo</code> file manually, the <code class="filename">/usr/bin/slabtop</code> program displays kernel slab cache information in real time. This program allows for custom configurations, including column sorting and screen refreshing.
			</p>
              <p>
				A sample screen shot of <code class="filename">/usr/bin/slabtop</code> usually looks like the following example:
			</p>
              <pre class="screen">
Active / Total Objects (% used)    : 133629 / 147300 (90.7%)  
Active / Total Slabs (% used)      : 11492 / 11493 (100.0%)  
Active / Total Caches (% used)     : 77 / 121 (63.6%)  
Active / Total Size (% used)       : 41739.83K / 44081.89K (94.7%)  
Minimum / Average / Maximum Object : 0.01K / 0.30K / 128.00K
OBJS   ACTIVE USE      OBJ   SIZE     SLABS OBJ/SLAB CACHE SIZE NAME  
44814  43159  96%    0.62K   7469      6     29876K ext3_inode_cache
36900  34614  93%    0.05K    492     75      1968K buffer_head  
35213  33124  94%    0.16K   1531     23      6124K dentry_cache   
7364   6463  87%    0.27K    526      14      2104K radix_tree_node   
2585   1781  68%    0.08K     55      47       220K vm_area_struct   
2263   2116  93%    0.12K     73      31       292K size-128   
1904   1125  59%    0.03K     16      119        64K size-32   
1666    768  46%    0.03K     14      119        56K anon_vma   
1512   1482  98%    0.44K    168       9       672K inode_cache   
1464   1040  71%    0.06K     24      61        96K size-64   
1320    820  62%    0.19K     66      20       264K filp    
678    587  86%    0.02K      3      226        12K dm_io   
678    587  86%    0.02K      3      226        12K dm_tio    
576    574  99%    0.47K     72        8       288K proc_inode_cache    
528    514  97%    0.50K     66        8       264K size-512    
492    372  75%    0.09K     12       41        48K bio    
465    314  67%    0.25K     31       15       124K size-256    
452    331  73%    0.02K      2      226         8K biovec-1    
420    420 100%    0.19K     21       20        84K skbuff_head_cache    
305    256  83%    0.06K      5       61        20K biovec-4    
290      4   1%    0.01K      1      290         4K revoke_table    
264    264 100%    4.00K    264        1      1056K size-4096    
260    256  98%    0.19K     13       20        52K biovec-16    
260    256  98%    0.75K     52        5       208K biovec-64
</pre>
              <p>
				Some of the more commonly used statistics in <code class="filename">/proc/slabinfo</code> that are included into <code class="filename">/usr/bin/slabtop</code> include:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">OBJS</code> — The total number of objects (memory blocks), including those in use (allocated), and some spares not in use.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">ACTIVE</code> — The number of objects (memory blocks) that are in use (allocated).
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">USE</code> — Percentage of total objects that are active. ((ACTIVE/OBJS)(100))
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">OBJ SIZE</code> — The size of the objects.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">SLABS</code> — The total number of slabs.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">OBJ/SLAB</code> — The number of objects that fit into a slab.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">CACHE SIZE</code> — The cache size of the slab.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">NAME</code> — The name of the slab.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				For more information on the <code class="filename">/usr/bin/slabtop</code> program, refer to the <code class="filename">slabtop</code> man page.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-stat"></a>3.2.27. <code class="filename">/proc/stat</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2877929" class="indexterm"></a>
              <a id="id2877950" class="indexterm"></a>
              <a id="id2877964" class="indexterm"></a>
              <p>
				This file keeps track of a variety of different statistics about the system since it was last restarted. The contents of <code class="filename">/proc/stat</code>, which can be quite long, usually begins like the following example:
			</p>
              <pre class="screen">
cpu  259246 7001 60190 34250993 137517 772 0 
cpu0 259246 7001 60190 34250993 137517 772 0 
intr 354133732 347209999 2272 0 4 4 0 0 3 1 1249247 0 0 80143 0 422626 5169433 
ctxt 12547729 
btime 1093631447 
processes 130523 
procs_running 1 
procs_blocked 0 
preempt 5651840  
cpu  209841 1554 21720 118519346 72939 154 27168 
cpu0 42536 798 4841 14790880 14778 124 3117 
cpu1 24184 569 3875 14794524 30209 29 3130 
cpu2 28616 11 2182 14818198 4020 1 3493 
cpu3 35350 6 2942 14811519 3045 0 3659 
cpu4 18209 135 2263 14820076 12465 0 3373 
cpu5 20795 35 1866 14825701 4508 0 3615 
cpu6 21607 0 2201 14827053 2325 0 3334 
cpu7 18544 0 1550 14831395 1589 0 3447 
intr 15239682 14857833 6 0 6 6 0 5 0 1 0 0 0 29 0 2 0 0 0 0 0 0 0 94982 0 286812 
ctxt 4209609 
btime 1078711415 
processes 21905 
procs_running 1 
procs_blocked 0
</pre>
              <p>
				Some of the more commonly used statistics include:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">cpu</code> — Measures the number of <em class="firstterm">jiffies</em> (1/100 of a second for x86 systems) that the system has been in user mode, user mode with low priority (nice), system mode, idle task, I/O wait, IRQ (hardirq), and softirq respectively. The IRQ (hardirq) is the direct response to a hardware event. The IRQ takes minimal work for queuing the "heavy" work up for the softirq to execute. The softirq runs at a lower priority than the IRQ and therefore may be interrupted more frequently. The total for all CPUs is given at the top, while each individual CPU is listed below with its own statistics. The following example is a 4-way Intel Pentium Xeon configuration with multi-threading enabled, therefore showing four physical processors and four virtual processors totaling eight processors.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">page</code> — The number of memory pages the system has written in and out to disk.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">swap</code> — The number of swap pages the system has brought in and out.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">intr</code> — The number of interrupts the system has experienced.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">btime</code> — The boot time, measured in the number of seconds since January 1, 1970, otherwise known as the <em class="firstterm">epoch</em>.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-swaps"></a>3.2.28. <code class="filename">/proc/swaps</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2940493" class="indexterm"></a>
              <p>
				This file measures swap space and its utilization. For a system with only one swap partition, the output of <code class="filename">/proc/swaps</code> may look similar to the following:
			</p>
              <pre class="screen">
Filename                          Type        Size     Used    Priority 
/dev/mapper/VolGroup00-LogVol01   partition   524280   0       -1
</pre>
              <p>
				While some of this information can be found in other files in the <code class="filename">/proc/</code> directory, <code class="filename">/proc/swap</code> provides a snapshot of every swap file name, the type of swap space, the total size, and the amount of space in use (in kilobytes). The priority column is useful when multiple swap files are in use. The lower the priority, the more likely the swap file is to be used.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-sysrq-trigger"></a>3.2.29. <code class="filename">/proc/sysrq-trigger</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2940569" class="indexterm"></a>
              <p>
				Using the <code class="command">echo</code> command to write to this file, a remote root user can execute most System Request Key commands remotely as if at the local terminal. To <code class="command">echo</code> values to this file, the <code class="filename">/proc/sys/kernel/sysrq</code> must be set to a value other than <code class="computeroutput">0</code>. For more information about the System Request Key, refer to <a href="#s3-proc-sys-kernel" title="3.3.9.3. /proc/sys/kernel/">Section 3.3.9.3, “<code class="filename">/proc/sys/kernel/</code>”</a>.
			</p>
              <p>
				Although it is possible to write to this file, it cannot be read, even by the root user.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-uptime"></a>3.2.30. <code class="filename">/proc/uptime</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2940644" class="indexterm"></a>
              <p>
				This file contains information detailing how long the system has been on since its last restart. The output of <code class="filename">/proc/uptime</code> is quite minimal:
			</p>
              <pre class="screen">
350735.47 234388.90
</pre>
              <p>
				The first number is the total number of seconds the system has been up. The second number is how much of that time the machine has spent idle, in seconds.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-version"></a>3.2.31. <code class="filename">/proc/version</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2940703" class="indexterm"></a>
              <p>
				This file specifies the version of the Linux kernel and <code class="filename">gcc</code> in use, as well as the version of Red Hat Enterprise Linux installed on the system:
			</p>
              <pre class="screen">
Linux version 2.6.8-1.523 (user@foo.redhat.com) (gcc version 3.4.1 20040714 \  (Red Hat Enterprise Linux 3.4.1-7)) #1 Mon Aug 16 13:27:03 EDT 2004
</pre>
              <p>
				This information is used for a variety of purposes, including the version data presented when a user logs in.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-proc-directories"></a>3.3. Directories within <code class="filename">/proc/</code></h2>
                </div>
              </div>
            </div>
            <a id="id2887574" class="indexterm"></a>
            <p>
			Common groups of information concerning the kernel are grouped into directories and subdirectories within the <code class="filename">/proc/</code> directory.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-processdirs"></a>3.3.1. Process Directories</h3>
                  </div>
                </div>
              </div>
              <a id="id2887613" class="indexterm"></a>
              <p>
				Every <code class="filename">/proc/</code> directory contains a number of directories with numerical names. A listing of them may be similar to the following:
			</p>
              <pre class="screen">
dr-xr-xr-x    3 root     root            0 Feb 13 01:28 1 
dr-xr-xr-x    3 root     root            0 Feb 13 01:28 1010
dr-xr-xr-x    3 xfs      xfs             0 Feb 13 01:28 1087
dr-xr-xr-x    3 daemon   daemon          0 Feb 13 01:28 1123
dr-xr-xr-x    3 root     root            0 Feb 13 01:28 11307
dr-xr-xr-x    3 apache   apache          0 Feb 13 01:28 13660
dr-xr-xr-x    3 rpc      rpc             0 Feb 13 01:28 637
dr-xr-xr-x    3 rpcuser  rpcuser         0 Feb 13 01:28 666
</pre>
              <p>
				These directories are called <em class="firstterm">process directories</em>, as they are named after a program's process ID and contain information specific to that process. The owner and group of each process directory is set to the user running the process. When the process is terminated, its <code class="filename">/proc/</code> process directory vanishes.
			</p>
              <p>
				Each process directory contains the following files:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">cmdline</code> — Contains the command issued when starting the process.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">cwd</code> — A symbolic link to the current working directory for the process.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">environ</code> — A list of the environment variables for the process. The environment variable is given in all upper-case characters, and the value is in lower-case characters.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">exe</code> — A symbolic link to the executable of this process.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">fd</code> — A directory containing all of the file descriptors for a particular process. These are given in numbered links:
					</p>
                    <pre class="screen">
total 0 
lrwx------    1 root     root           64 May  8 11:31 0 -&gt; /dev/null
lrwx------    1 root     root           64 May  8 11:31 1 -&gt; /dev/null
lrwx------    1 root     root           64 May  8 11:31 2 -&gt; /dev/null
lrwx------    1 root     root           64 May  8 11:31 3 -&gt; /dev/ptmx
lrwx------    1 root     root           64 May  8 11:31 4 -&gt; socket:[7774817] 
lrwx------    1 root     root           64 May  8 11:31 5 -&gt; /dev/ptmx
lrwx------    1 root     root           64 May  8 11:31 6 -&gt; socket:[7774829] 
lrwx------    1 root     root           64 May  8 11:31 7 -&gt; /dev/ptmx
</pre>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">maps</code> — A list of memory maps to the various executables and library files associated with this process. This file can be rather long, depending upon the complexity of the process, but sample output from the <code class="command">sshd</code> process begins like the following:
					</p>
                    <pre class="screen">
08048000-08086000 r-xp 00000000 03:03 391479     /usr/sbin/sshd
08086000-08088000 rw-p 0003e000 03:03 391479	/usr/sbin/sshd
08088000-08095000 rwxp 00000000 00:00 0
40000000-40013000 r-xp 0000000 03:03 293205	/lib/ld-2.2.5.so
40013000-40014000 rw-p 00013000 03:03 293205	/lib/ld-2.2.5.so 
40031000-40038000 r-xp 00000000 03:03 293282	/lib/libpam.so.0.75
40038000-40039000 rw-p 00006000 03:03 293282	/lib/libpam.so.0.75
40039000-4003a000 rw-p 00000000 00:00 0
4003a000-4003c000 r-xp 00000000 03:03 293218	/lib/libdl-2.2.5.so 
4003c000-4003d000 rw-p 00001000 03:03 293218	/lib/libdl-2.2.5.so
</pre>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">mem</code> — The memory held by the process. This file cannot be read by the user.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">root</code> — A link to the root directory of the process.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">stat</code> — The status of the process.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">statm</code> — The status of the memory in use by the process. Below is a sample <code class="filename">/proc/statm</code> file:
					</p>
                    <pre class="screen">
263 210 210 5 0 205 0
</pre>
                    <p>
						The seven columns relate to different memory statistics for the process. From left to right, they report the following aspects of the memory used:
					</p>
                    <div class="orderedlist">
                      <ol>
                        <li>
                          <p>
								Total program size, in kilobytes.
							</p>
                        </li>
                        <li>
                          <p>
								Size of memory portions, in kilobytes.
							</p>
                        </li>
                        <li>
                          <p>
								Number of pages that are shared.
							</p>
                        </li>
                        <li>
                          <p>
								Number of pages that are code.
							</p>
                        </li>
                        <li>
                          <p>
								Number of pages of data/stack.
							</p>
                        </li>
                        <li>
                          <p>
								Number of library pages.
							</p>
                        </li>
                        <li>
                          <p>
								Number of dirty pages.
							</p>
                        </li>
                      </ol>
                    </div>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">status</code> — The status of the process in a more readable form than <code class="filename">stat</code> or <code class="filename">statm</code>. Sample output for <code class="command">sshd</code> looks similar to the following:
					</p>
                    <pre class="screen">
Name:	sshd 
State:	S (sleeping) 
Tgid:	797 
Pid:	797 
PPid:	1 
TracerPid:	0 
Uid:	0	0	0	0 
Gid:	0	0	0	0 
FDSize:	32 
Groups:	 
VmSize:	    3072 kB 
VmLck:	       0 kB 
VmRSS:	     840 kB 
VmData:	     104 kB 
VmStk:	      12 kB 
VmExe:	     300 kB 
VmLib:	    2528 kB 
SigPnd:	0000000000000000 
SigBlk:	0000000000000000 
SigIgn:	8000000000001000 
SigCgt:	0000000000014005 
CapInh:	0000000000000000 
CapPrm:	00000000fffffeff 
CapEff:	00000000fffffeff
</pre>
                    <p>
						The information in this output includes the process name and ID, the state (such as <code class="computeroutput">S (sleeping)</code> or <code class="computeroutput">R (running)</code>), user/group ID running the process, and detailed data regarding memory usage.
					</p>
                  </li>
                </ul>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-proc-self"></a>3.3.1.1. <code class="filename">/proc/self/</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2928843" class="indexterm"></a>
                <p>
					The <code class="filename">/proc/self/</code> directory is a link to the currently running process. This allows a process to look at itself without having to know its process ID.
				</p>
                <p>
					Within a shell environment, a listing of the <code class="filename">/proc/self/</code> directory produces the same contents as listing the process directory for that process.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-bus"></a>3.3.2. <code class="filename">/proc/bus/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2928905" class="indexterm"></a>
              <p>
				This directory contains information specific to the various buses available on the system. For example, on a standard system containing PCI and USB buses, current data on each of these buses is available within a subdirectory within <code class="filename">/proc/bus/</code> by the same name, such as <code class="filename">/proc/bus/pci/</code>.
			</p>
              <p>
				The subdirectories and files available within <code class="filename">/proc/bus/</code> vary depending on the devices connected to the system. However, each bus type has at least one directory. Within these bus directories are normally at least one subdirectory with a numerical name, such as <code class="filename">001</code>, which contain binary files.
			</p>
              <p>
				For example, the <code class="filename">/proc/bus/usb/</code> subdirectory contains files that track the various devices on any USB buses, as well as the drivers required for them. The following is a sample listing of a <code class="filename">/proc/bus/usb/</code> directory:
			</p>
              <pre class="screen">
total 0 dr-xr-xr-x    1 root     root            0 May  3 16:25 001 
-r--r--r--    1 root     root            0 May  3 16:25 devices 
-r--r--r--    1 root     root            0 May  3 16:25 drivers
</pre>
              <p>
				The <code class="filename">/proc/bus/usb/001/</code> directory contains all devices on the first USB bus and the <code class="filename">devices</code> file identifies the USB root hub on the motherboard.
			</p>
              <p>
				The following is a example of a <code class="filename">/proc/bus/usb/devices</code> file:
			</p>
              <pre class="screen">
T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=12  MxCh= 2 
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0 
D:  Ver= 1.00 Cls=09(hub  ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1 
P:  Vendor=0000 ProdID=0000 Rev= 0.00 
S:  Product=USB UHCI Root Hub 
S:  SerialNumber=d400 
C:* #Ifs= 1 Cfg#= 1 Atr=40 MxPwr=  0mA 
I:  If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub 
E:  Ad=81(I) Atr=03(Int.) MxPS=   8 Ivl=255ms
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-driver"></a>3.3.3. <code class="filename">/proc/driver/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2946830" class="indexterm"></a>
              <p>
				This directory contains information for specific drivers in use by the kernel.
			</p>
              <p>
				A common file found here is <code class="filename">rtc</code> which provides output from the driver for the system's <em class="firstterm">Real Time Clock (RTC)</em>, the device that keeps the time while the system is switched off. Sample output from <code class="filename">/proc/driver/rtc</code> looks like the following:
			</p>
              <pre class="screen">
rtc_time        : 16:21:00 
rtc_date        : 2004-08-31 
rtc_epoch       : 1900 
alarm           : 21:16:27 
DST_enable      : no 
BCD             : yes 
24hr            : yes 
square_wave     : no 
alarm_IRQ       : no 
update_IRQ      : no 
periodic_IRQ    : no 
periodic_freq   : 1024 
batt_status     : okay
</pre>
              <p>
				For more information about the RTC, refer to the following installed documentation:
			</p>
              <p>
				<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/rtc.txt</code>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-fs"></a>3.3.4. <code class="filename">/proc/fs</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2946923" class="indexterm"></a>
              <p>
				This directory shows which file systems are exported. If running an NFS server, typing <code class="command">cat /proc/fs/nfsd/exports</code> displays the file systems being shared and the permissions granted for those file systems. For more on file system sharing with NFS, refer to <a href="#ch-nfs" title="Chapter 19. Network File System (NFS)">Chapter 19, <i>Network File System (NFS)</i></a>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-ide"></a>3.3.5. <code class="filename">/proc/ide/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2946977" class="indexterm"></a>
              <p>
				This directory contains information about IDE devices on the system. Each IDE channel is represented as a separate directory, such as <code class="filename">/proc/ide/ide0</code> and <code class="filename">/proc/ide/ide1</code>. In addition, a <code class="filename">drivers</code> file is available, providing the version number of the various drivers used on the IDE channels:
			</p>
              <pre class="screen">
ide-floppy version 0.99.
newide ide-cdrom version 4.61 
ide-disk version 1.18
</pre>
              <p>
				Many chipsets also provide a file in this directory with additional data concerning the drives connected through the channels. For example, a generic Intel PIIX4 Ultra 33 chipset produces the <code class="filename">/proc/ide/piix</code> file which reveals whether DMA or UDMA is enabled for the devices on the IDE channels:
			</p>
              <pre class="screen">
Intel PIIX4 Ultra 33 Chipset. 
------------- Primary Channel ---------------- Secondary Channel -------------                  
		enabled                          enabled 
		
------------- drive0 --------- drive1 -------- drive0 ---------- drive1 ------ 
DMA enabled:    yes              no              yes               no  
UDMA enabled:   yes              no              no                no  
UDMA enabled:   2                X               X                 X 
UDMA DMA PIO
</pre>
              <p>
				Navigating into the directory for an IDE channel, such as <code class="filename">ide0</code>, provides additional information. The <code class="filename">channel</code> file provides the channel number, while the <code class="filename">model</code> identifies the bus type for the channel (such as <code class="computeroutput">pci</code>).
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-proc-dir-ide-device"></a>3.3.5.1. Device Directories</h4>
                    </div>
                  </div>
                </div>
                <a id="id2862999" class="indexterm"></a>
                <p>
					Within each IDE channel directory is a device directory. The name of the device directory corresponds to the drive letter in the <code class="filename">/dev/</code> directory. For instance, the first IDE drive on <code class="filename">ide0</code> would be <code class="filename">hda</code>.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						There is a symbolic link to each of these device directories in the <code class="filename">/proc/ide/</code> directory.
					</p>
                </div>
                <p>
					Each device directory contains a collection of information and statistics. The contents of these directories vary according to the type of device connected. Some of the more useful files common to many devices include:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<code class="filename">cache</code> — The device cache.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">capacity</code> — The capacity of the device, in 512 byte blocks.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">driver</code> — The driver and version used to control the device.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">geometry</code> — The physical and logical geometry of the device.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">media</code> — The type of device, such as a <code class="computeroutput">disk</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">model</code> — The model name or number of the device.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">settings</code> — A collection of current device parameters. This file usually contains quite a bit of useful, technical information. A sample <code class="filename">settings</code> file for a standard IDE hard disk looks similar to the following:
						</p>
                      <pre class="screen">
name                value          min          max          mode 
----                -----          ---          ---          ---- 
acoustic            0              0            254          rw 
address             0              0            2            rw 
bios_cyl            38752          0            65535        rw 
bios_head           16             0            255          rw 
bios_sect           63             0            63           rw 
bswap               0              0            1            r 
current_speed       68             0            70           rw 
failures            0              0            65535        rw 
init_speed          68             0            70           rw 
io_32bit            0              0            3            rw 
keepsettings        0              0            1            rw 
lun                 0              0            7            rw 
max_failures        1              0            65535        rw 
multcount           16             0            16           rw 
nice1               1              0            1            rw 
nowerr              0              0            1            rw 
number              0              0            3            rw 
pio_mode            write-only     0            255          w 
unmaskirq           0              0            1            rw 
using_dma           1              0            1            rw 
wcache              1              0            1            rw
</pre>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-irq"></a>3.3.6. <code class="filename">/proc/irq/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2863238" class="indexterm"></a>
              <p>
				This directory is used to set IRQ to CPU affinity, which allows the system to connect a particular IRQ to only one CPU. Alternatively, it can exclude a CPU from handling any IRQs.
			</p>
              <p>
				Each IRQ has its own directory, allowing for the individual configuration of each IRQ. The <code class="filename">/proc/irq/prof_cpu_mask</code> file is a bitmask that contains the default values for the <code class="filename">smp_affinity</code> file in the IRQ directory. The values in <code class="filename">smp_affinity</code> specify which CPUs handle that particular IRQ.
			</p>
              <p>
				For more information about the <code class="filename">/proc/irq/</code> directory, refer to the following installed documentation:
			</p>
              <pre class="screen">
/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/filesystems/proc.txt
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-net"></a>3.3.7. <code class="filename">/proc/net/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2874911" class="indexterm"></a>
              <p>
				This directory provides a comprehensive look at various networking parameters and statistics. Each directory and virtual file within this directory describes aspects of the system's network configuration. Below is a partial list of the <code class="filename">/proc/net/</code> directory:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="filename">arp</code> — Lists the kernel's ARP table. This file is particularly useful for connecting a hardware address to an IP address on a system.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">atm/</code> directory — The files within this directory contain <em class="firstterm">Asynchronous Transfer Mode (ATM)</em> settings and statistics. This directory is primarily used with ATM networking and ADSL cards.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">dev</code> — Lists the various network devices configured on the system, complete with transmit and receive statistics. This file displays the number of bytes each interface has sent and received, the number of packets inbound and outbound, the number of errors seen, the number of packets dropped, and more.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">dev_mcast</code> — Lists Layer2 multicast groups on which each device is listening.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">igmp</code> — Lists the IP multicast addresses which this system joined.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">ip_conntrack</code> — Lists tracked network connections for machines that are forwarding IP connections.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">ip_tables_names</code> — Lists the types of <code class="command">iptables</code> in use. This file is only present if <code class="command">iptables</code> is active on the system and contains one or more of the following values: <code class="filename">filter</code>, <code class="filename">mangle</code>, or <code class="filename">nat</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">ip_mr_cache</code> — Lists the multicast routing cache.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">ip_mr_vif</code> — Lists multicast virtual interfaces.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">netstat</code> — Contains a broad yet detailed collection of networking statistics, including TCP timeouts, SYN cookies sent and received, and much more.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">psched</code> — Lists global packet scheduler parameters.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">raw</code> — Lists raw device statistics.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">route</code> — Lists the kernel's routing table.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">rt_cache</code> — Contains the current routing cache.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">snmp</code> — List of Simple Network Management Protocol (SNMP) data for various networking protocols in use.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">sockstat</code> — Provides socket statistics.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">tcp</code> — Contains detailed TCP socket information.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">tr_rif</code> — Lists the token ring RIF routing table.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">udp</code> — Contains detailed UDP socket information.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">unix</code> — Lists UNIX domain sockets currently in use.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">wireless</code> — Lists wireless interface data.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-scsi"></a>3.3.8. <code class="filename">/proc/scsi/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2944808" class="indexterm"></a>
              <p>
				This directory is analogous to the <code class="filename">/proc/ide/</code> directory, but it is for connected SCSI devices.
			</p>
              <p>
				The primary file in this directory is <code class="filename">/proc/scsi/scsi</code>, which contains a list of every recognized SCSI device. From this listing, the type of device, as well as the model name, vendor, SCSI channel and ID data is available.
			</p>
              <p>
				For example, if a system contains a SCSI CD-ROM, a tape drive, a hard drive, and a RAID controller, this file looks similar to the following:
			</p>
              <pre class="screen">
Attached devices:  
Host: scsi1 
Channel: 00 
Id: 05 
Lun: 00   
Vendor: NEC      
Model: CD-ROM DRIVE:466 
Rev: 1.06   
Type:   CD-ROM                          
ANSI SCSI revision: 02 
Host: scsi1 
Channel: 00 
Id: 06 
Lun: 00   
Vendor: ARCHIVE  
Model: Python 04106-XXX 
Rev: 7350   
Type:   Sequential-Access                
ANSI SCSI revision: 02 
Host: scsi2 
Channel: 00 
Id: 06 
Lun: 00   
Vendor: DELL     
Model: 1x6 U2W SCSI BP  
Rev: 5.35   
Type:   Processor                        
ANSI SCSI revision: 02 
Host: scsi2 
Channel: 02 
Id: 00 
Lun: 00   
Vendor: MegaRAID 
Model: LD0 RAID5 34556R 
Rev: 1.01   
Type:   Direct-Access                    
ANSI SCSI revision: 02
</pre>
              <p>
				Each SCSI driver used by the system has its own directory within <code class="filename">/proc/scsi/</code>, which contains files specific to each SCSI controller using that driver. From the previous example, <code class="filename">aic7xxx/</code> and <code class="filename">megaraid/</code> directories are present, since two drivers are in use. The files in each of the directories typically contain an I/O address range, IRQ information, and statistics for the SCSI controller using that driver. Each controller can report a different type and amount of information. The Adaptec AIC-7880 Ultra SCSI host adapter's file in this example system produces the following output:
			</p>
              <pre class="screen">
Adaptec AIC7xxx driver version: 5.1.20/3.2.4 
Compile Options:   
TCQ Enabled By Default : Disabled   
AIC7XXX_PROC_STATS     : Enabled   
AIC7XXX_RESET_DELAY    : 5  
Adapter Configuration:            
SCSI Adapter: Adaptec AIC-7880 Ultra SCSI host adapter                            
Ultra Narrow Controller     PCI MMAPed 
I/O Base: 0xfcffe000  
Adapter SEEPROM Config: SEEPROM found and used.       
Adaptec SCSI BIOS: Enabled                     
IRQ: 30                    
SCBs: Active 0, Max Active 1, Allocated 15, HW 16, Page 255              
Interrupts: 33726       
BIOS Control Word: 0x18a6    
Adapter Control Word: 0x1c5f   
Extended Translation: Enabled 
Disconnect Enable Flags: 0x00ff      
Ultra Enable Flags: 0x0020  
Tag Queue Enable Flags: 0x0000 
Ordered Queue Tag Flags: 0x0000 
Default Tag Queue Depth: 8     
Tagged Queue By Device array for aic7xxx 
host instance 1:       {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255}     
Actual queue depth per device for aic7xxx host instance 1:       {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
Statistics:   

(scsi1:0:5:0) Device using Narrow/Sync transfers at 20.0 MByte/sec, offset 15   
Transinfo settings: current(12/15/0/0), goal(12/15/0/0), user(12/15/0/0)   
Total transfers 0 (0 reads and 0 writes)              
		&lt; 2K      2K+     4K+     8K+    16K+    32K+    64K+   128K+    
Reads:        0       0       0       0       0       0       0       0   
Writes:       0       0       0       0       0       0       0       0   

(scsi1:0:6:0) Device using Narrow/Sync transfers at 10.0 MByte/sec, offset 15   
Transinfo settings: current(25/15/0/0), goal(12/15/0/0), user(12/15/0/0)   
Total transfers 132 (0 reads and 132 writes)              
		&lt; 2K      2K+     4K+     8K+    16K+    32K+    64K+   128K+    
Reads:        0       0       0       0       0       0       0       0   
Writes:       0       0       0       1     131       0       0       0
</pre>
              <p>
				This output reveals the transfer speed to the SCSI devices connected to the controller based on channel ID, as well as detailed statistics concerning the amount and sizes of files read or written by that device. For example, this controller is communicating with the CD-ROM at 20 megabytes per second, while the tape drive is only communicating at 10 megabytes per second.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-sys"></a>3.3.9. <code class="filename">/proc/sys/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2854610" class="indexterm"></a>
              <a id="id2854632" class="indexterm"></a>
              <a id="id2854646" class="indexterm"></a>
              <a id="id2854676" class="indexterm"></a>
              <a id="id2854694" class="indexterm"></a>
              <a id="id2854708" class="indexterm"></a>
              <p>
				The <code class="filename">/proc/sys/</code> directory is different from others in <code class="filename">/proc/</code> because it not only provides information about the system but also allows the system administrator to immediately enable and disable kernel features.
			</p>
              <div class="caution">
                <h2>Caution</h2>
                <p>
					Use caution when changing settings on a production system using the various files in the <code class="filename">/proc/sys/</code> directory. Changing the wrong setting may render the kernel unstable, requiring a system reboot.
				</p>
                <p>
					For this reason, be sure the options are valid for that file before attempting to change any value in <code class="filename">/proc/sys/</code>.
				</p>
              </div>
              <p>
				A good way to determine if a particular file can be configured, or if it is only designed to provide information, is to list it with the <code class="option">-l</code> option at the shell prompt. If the file is writable, it may be used to configure the kernel. For example, a partial listing of <code class="filename">/proc/sys/fs</code> looks like the following:
			</p>
              <pre class="screen">
-r--r--r--    1 root     root            0 May 10 16:14 dentry-state
-rw-r--r--    1 root     root            0 May 10 16:14 dir-notify-enable 
-r--r--r--    1 root     root            0 May 10 16:14 dquot-nr 
-rw-r--r--    1 root     root            0 May 10 16:14 file-max 
-r--r--r--    1 root     root            0 May 10 16:14 file-nr
</pre>
              <p>
				In this listing, the files <code class="filename">dir-notify-enable</code> and <code class="filename">file-max</code> can be written to and, therefore, can be used to configure the kernel. The other files only provide feedback on current settings.
			</p>
              <p>
				Changing a value within a <code class="filename">/proc/sys/</code> file is done by echoing the new value into the file. For example, to enable the System Request Key on a running kernel, type the command:
			</p>
              <pre class="screen">
echo 1 &gt; /proc/sys/kernel/sysrq
</pre>
              <p>
				This changes the value for <code class="filename">sysrq</code> from <code class="computeroutput">0</code> (off) to <code class="computeroutput">1</code> (on).
			</p>
              <p>
				A few <code class="filename">/proc/sys/</code> configuration files contain more than one value. To correctly send new values to them, place a space character between each value passed with the <code class="command">echo</code> command, such as is done in this example:
			</p>
              <pre class="screen">
echo 4 2 45 &gt; /proc/sys/kernel/acct
</pre>
              <div class="note">
                <h2>Note</h2>
                <p>
					Any configuration changes made using the <code class="command">echo</code> command disappear when the system is restarted. To make configuration changes take effect after the system is rebooted, refer to <a href="#s1-proc-sysctl" title="3.4. Using the sysctl Command">Section 3.4, “Using the <code class="command">sysctl</code> Command”</a>.
				</p>
              </div>
              <p>
				The <code class="filename">/proc/sys/</code> directory contains several subdirectories controlling different aspects of a running kernel.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-proc-sys-dev"></a>3.3.9.1. <code class="filename">/proc/sys/dev/</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2857612" class="indexterm"></a>
                <p>
					This directory provides parameters for particular devices on the system. Most systems have at least two directories, <code class="filename">cdrom/</code> and <code class="filename">raid/</code>. Customized kernels can have other directories, such as <code class="filename">parport/</code>, which provides the ability to share one parallel port between multiple device drivers.
				</p>
                <p>
					The <code class="filename">cdrom/</code> directory contains a file called <code class="filename">info</code>, which reveals a number of important CD-ROM parameters:
				</p>
                <pre class="screen">
CD-ROM information, Id: cdrom.c 3.20 2003/12/17   
drive name:             hdc 
drive speed:            48 
drive # of slots:       1 
Can close tray:         1 
Can open tray:          1 
Can lock tray:          1 
Can change speed:       1 
Can select disk:        0 
Can read multisession:  1 
Can read MCN:           1 
Reports media changed:  1 
Can play audio:         1 
Can write CD-R:         0 
Can write CD-RW:        0 
Can read DVD:           0 
Can write DVD-R:        0 
Can write DVD-RAM:      0 
Can read MRW:           0 
Can write MRW:          0 
Can write RAM:          0
</pre>
                <p>
					This file can be quickly scanned to discover the qualities of an unknown CD-ROM. If multiple CD-ROMs are available on a system, each device is given its own column of information.
				</p>
                <p>
					Various files in <code class="filename">/proc/sys/dev/cdrom</code>, such as <code class="filename">autoclose</code> and <code class="filename">checkmedia</code>, can be used to control the system's CD-ROM. Use the <code class="command">echo</code> command to enable or disable these features.
				</p>
                <p>
					If RAID support is compiled into the kernel, a <code class="filename">/proc/sys/dev/raid/</code> directory becomes available with at least two files in it: <code class="filename">speed_limit_min</code> and <code class="filename">speed_limit_max</code>. These settings determine the acceleration of RAID devices for I/O intensive tasks, such as resyncing the disks.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-proc-sys-fs"></a>3.3.9.2. <code class="filename">/proc/sys/fs/</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2857778" class="indexterm"></a>
                <p>
					This directory contains an array of options and information concerning various aspects of the file system, including quota, file handle, inode, and dentry information.
				</p>
                <p>
					The <code class="filename">binfmt_misc/</code> directory is used to provide kernel support for miscellaneous binary formats.
				</p>
                <p>
					The important files in <code class="filename">/proc/sys/fs/</code> include:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<code class="filename">dentry-state</code> — Provides the status of the directory cache. The file looks similar to the following:
						</p>
                      <pre class="screen">
57411	52939	45	0	0	0
</pre>
                      <p>
							The first number reveals the total number of directory cache entries, while the second number displays the number of unused entries. The third number tells the number of seconds between when a directory has been freed and when it can be reclaimed, and the fourth measures the pages currently requested by the system. The last two numbers are not used and display only zeros.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">dquot-nr</code> — Lists the maximum number of cached disk quota entries.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">file-max</code> — Lists the maximum number of file handles that the kernel allocates. Raising the value in this file can resolve errors caused by a lack of available file handles.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">file-nr</code> — Lists the number of allocated file handles, used file handles, and the maximum number of file handles.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">overflowgid</code> and <code class="filename">overflowuid</code> — Defines the fixed group ID and user ID, respectively, for use with file systems that only support 16-bit group and user IDs.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">super-max</code> — Controls the maximum number of superblocks available.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">super-nr</code> — Displays the current number of superblocks in use.
						</p>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-proc-sys-kernel"></a>3.3.9.3. <code class="filename">/proc/sys/kernel/</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2914918" class="indexterm"></a>
                <a id="id2914949" class="indexterm"></a>
                <a id="id2914963" class="indexterm"></a>
                <a id="id2914980" class="indexterm"></a>
                <a id="id2914997" class="indexterm"></a>
                <p>
					This directory contains a variety of different configuration files that directly affect the operation of the kernel. Some of the most important files include:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<code class="filename">acct</code> — Controls the suspension of process accounting based on the percentage of free space available on the file system containing the log. By default, the file looks like the following:
						</p>
                      <pre class="screen">
4	2	30
</pre>
                      <p>
							The first value dictates the percentage of free space required for logging to resume, while the second value sets the threshold percentage of free space when logging is suspended. The third value sets the interval, in seconds, that the kernel polls the file system to see if logging should be suspended or resumed.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">cap-bound</code> — Controls the <em class="firstterm">capability bounding</em> settings, which provides a list of capabilities for any process on the system. If a capability is not listed here, then no process, no matter how privileged, can do it. The idea is to make the system more secure by ensuring that certain things cannot happen, at least beyond a certain point in the boot process.
						</p>
                      <p>
							For a valid list of values for this virtual file, refer to the following installed documentation:
						</p>
                      <p>
							<code class="filename">/lib/modules/<em class="replaceable"><code>&lt;kernel-version&gt;</code></em>/build/include/linux/capability.h</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">ctrl-alt-del</code> — Controls whether <span><strong class="keycap">Ctrl</strong></span>-<span><strong class="keycap">Alt</strong></span>-<span><strong class="keycap">Delete</strong></span> gracefully restarts the computer using <code class="command">init</code> (<code class="computeroutput">0</code>) or forces an immediate reboot without syncing the dirty buffers to disk (<code class="computeroutput">1</code>).
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">domainname</code> — Configures the system domain name, such as <code class="computeroutput">example.com</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">exec-shield</code> — Configures the Exec Shield feature of the kernel. Exec Shield provides protection against certain types of buffer overflow attacks.
						</p>
                      <p>
							There are two possible values for this virtual file:
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<code class="command">0</code> — Disables Exec Shield.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">1</code> — Enables Exec Shield. This is the default value.
								</p>
                          </li>
                        </ul>
                      </div>
                      <div class="important">
                        <h2>Important</h2>
                        <p>
								If a system is running security-sensitive applications that were started while Exec Shield was disabled, these applications must be restarted when Exec Shield is enabled in order for Exec Shield to take effect.
							</p>
                      </div>
                    </li>
                    <li>
                      <p>
							<code class="filename">exec-shield-randomize</code> — Enables location randomization of various items in memory. This helps deter potential attackers from locating programs and daemons in memory. Each time a program or daemon starts, it is put into a different memory location each time, never in a static or absolute memory address.
						</p>
                      <p>
							There are two possible values for this virtual file:
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<code class="command">0</code> — Disables randomization of Exec Shield. This may be useful for application debugging purposes.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">1</code> — Enables randomization of Exec Shield. This is the default value. Note: The <code class="filename">exec-shield</code> file must also be set to <code class="command">1</code> for <code class="filename">exec-shield-randomize</code> to be effective.
								</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li>
                      <p>
							<code class="filename">hostname</code> — Configures the system hostname, such as <code class="computeroutput">www.example.com</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">hotplug</code> — Configures the utility to be used when a configuration change is detected by the system. This is primarily used with USB and Cardbus PCI. The default value of <code class="computeroutput">/sbin/hotplug</code> should not be changed unless testing a new program to fulfill this role.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">modprobe</code> — Sets the location of the program used to load kernel modules. The default value is <code class="computeroutput">/sbin/modprobe</code> which means <code class="command">kmod</code> calls it to load the module when a kernel thread calls <code class="command">kmod</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">msgmax</code> — Sets the maximum size of any message sent from one process to another and is set to <code class="computeroutput">8192</code> bytes by default. Be careful when raising this value, as queued messages between processes are stored in non-swappable kernel memory. Any increase in <code class="filename">msgmax</code> would increase RAM requirements for the system.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">msgmnb</code> — Sets the maximum number of bytes in a single message queue. The default is <code class="computeroutput">16384</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">msgmni</code> — Sets the maximum number of message queue identifiers. The default is <code class="computeroutput">16</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">osrelease</code> — Lists the Linux kernel release number. This file can only be altered by changing the kernel source and recompiling.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">ostype</code> — Displays the type of operating system. By default, this file is set to <code class="computeroutput">Linux</code>, and this value can only be changed by changing the kernel source and recompiling.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">overflowgid</code> and <code class="filename">overflowuid</code> — Defines the fixed group ID and user ID, respectively, for use with system calls on architectures that only support 16-bit group and user IDs.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">panic</code> — Defines the number of seconds the kernel postpones rebooting when the system experiences a kernel panic. By default, the value is set to <code class="computeroutput">0</code>, which disables automatic rebooting after a panic.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">printk</code> — This file controls a variety of settings related to printing or logging error messages. Each error message reported by the kernel has a <em class="firstterm">loglevel</em> associated with it that defines the importance of the message. The loglevel values break down in this order:
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<code class="computeroutput">0</code> — Kernel emergency. The system is unusable.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">1</code> — Kernel alert. Action must be taken immediately.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">2</code> — Condition of the kernel is considered critical.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">3</code> — General kernel error condition.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">4</code> — General kernel warning condition.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">5</code> — Kernel notice of a normal but significant condition.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">6</code> — Kernel informational message.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">7</code> — Kernel debug-level messages.
								</p>
                          </li>
                        </ul>
                      </div>
                      <p>
							Four values are found in the <code class="filename">printk</code> file:
						</p>
                      <pre class="screen">
6     4     1     7
</pre>
                      <p>
							Each of these values defines a different rule for dealing with error messages. The first value, called the <em class="firstterm">console loglevel</em>, defines the lowest priority of messages printed to the console. (Note that, the lower the priority, the higher the loglevel number.) The second value sets the default loglevel for messages without an explicit loglevel attached to them. The third value sets the lowest possible loglevel configuration for the console loglevel. The last value sets the default value for the console loglevel.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">random/</code> directory — Lists a number of values related to generating random numbers for the kernel.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">rtsig-max</code> — Configures the maximum number of POSIX real-time signals that the system may have queued at any one time. The default value is <code class="computeroutput">1024</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">rtsig-nr</code> — Lists the current number of POSIX real-time signals queued by the kernel.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">sem</code> — Configures <em class="firstterm">semaphore</em> settings within the kernel. A semaphore is a System V IPC object that is used to control utilization of a particular process.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">shmall</code> — Sets the total amount of shared memory that can be used at one time on the system, in bytes. By default, this value is <code class="computeroutput">2097152</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">shmmax</code> — Sets the largest shared memory segment size allowed by the kernel, in bytes. By default, this value is <code class="computeroutput">33554432</code>. However, the kernel supports much larger values than this.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">shmmni</code> — Sets the maximum number of shared memory segments for the whole system, in bytes. By default, this value is <code class="computeroutput">4096</code>
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">sysrq</code> — Activates the System Request Key, if this value is set to anything other than zero (<code class="computeroutput">0</code>), the default.
						</p>
                      <p>
							The System Request Key allows immediate input to the kernel through simple key combinations. For example, the System Request Key can be used to immediately shut down or restart a system, sync all mounted file systems, or dump important information to the console. To initiate a System Request Key, type <span><strong class="keycap">Alt</strong></span>-<span><strong class="keycap">SysRq</strong></span>-<span><strong class="keycap"><em class="replaceable"><code>&lt;system request code&gt;</code></em></strong></span> . Replace <em class="replaceable"><code>&lt;system request code&gt;</code></em> with one of the following system request codes:
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<code class="command">r</code> — Disables raw mode for the keyboard and sets it to XLATE (a limited keyboard mode which does not recognize modifiers such as <span><strong class="keycap">Alt</strong></span>, <span><strong class="keycap">Ctrl</strong></span>, or <span><strong class="keycap">Shift</strong></span> for all keys).
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">k</code> — Kills all processes active in a virtual console. Also called <em class="firstterm">Secure Access Key</em> (<em class="firstterm">SAK</em>), it is often used to verify that the login prompt is spawned from <code class="command">init</code> and not a trojan copy designed to capture usernames and passwords.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">b</code> — Reboots the kernel without first unmounting file systems or syncing disks attached to the system.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">c</code> — Crashes the system without first unmounting file systems or syncing disks attached to the system.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">o</code> — Shuts off the system.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">s</code> — Attempts to sync disks attached to the system.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">u</code> — Attempts to unmount and remount all file systems as read-only.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">p</code> — Outputs all flags and registers to the console.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">t</code> — Outputs a list of processes to the console.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">m</code> — Outputs memory statistics to the console.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">0</code> through <code class="command">9</code> — Sets the log level for the console.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">e</code> — Kills all processes except <code class="command">init</code> using SIGTERM.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">i</code> — Kills all processes except <code class="command">init</code> using SIGKILL.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">l</code> — Kills all processes using SIGKILL (including <code class="command">init</code>). <span class="emphasis"><em>The system is unusable after issuing this System Request Key code.</em></span>
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">h</code> — Displays help text.
								</p>
                          </li>
                        </ul>
                      </div>
                      <p>
							This feature is most beneficial when using a development kernel or when experiencing system freezes.
						</p>
                      <div class="caution">
                        <h2>Caution</h2>
                        <p>
								The System Request Key feature is considered a security risk because an unattended console provides an attacker with access to the system. For this reason, it is turned off by default.
							</p>
                      </div>
                      <p>
							Refer to <code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/sysrq.txt</code> for more information about the System Request Key.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">sysrq-key</code> — Defines the key code for the System Request Key (<code class="computeroutput">84</code> is the default).
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">sysrq-sticky</code> — Defines whether the System Request Key is a chorded key combination. The accepted values are as follows:
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<code class="computeroutput">0</code> — <span><strong class="keycap">Alt</strong></span>-<span><strong class="keycap">SysRq</strong></span> and the system request code must be pressed simultaneously. This is the default value.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">1</code> — <span><strong class="keycap">Alt</strong></span>-<span><strong class="keycap">SysRq</strong></span> must be pressed simultaneously, but the system request code can be pressed anytime before the number of seconds specified in <code class="filename">/proc/sys/kernel/sysrq-timer</code> elapses.
								</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li>
                      <p>
							<code class="filename">sysrq-timer</code> — Specifies the number of seconds allowed to pass before the system request code must be pressed. The default value is <code class="command">10</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">tainted</code> — Indicates whether a non-GPL module is loaded.
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<code class="computeroutput">0</code> — No non-GPL modules are loaded.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">1</code> — At least one module without a GPL license (including modules with no license) is loaded.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="computeroutput">2</code> — At least one module was force-loaded with the command <code class="command">insmod -f</code>.
								</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li>
                      <p>
							<code class="filename">threads-max</code> — Sets the maximum number of threads to be used by the kernel, with a default value of <code class="computeroutput">2048</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">version</code> — Displays the date and time the kernel was last compiled. The first field in this file, such as <code class="computeroutput">#3</code>, relates to the number of times a kernel was built from the source base.
						</p>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-proc-sys-net"></a>3.3.9.4. <code class="filename">/proc/sys/net/</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2913092" class="indexterm"></a>
                <a id="id2913124" class="indexterm"></a>
                <a id="id2913137" class="indexterm"></a>
                <a id="id2913150" class="indexterm"></a>
                <p>
					This directory contains subdirectories concerning various networking topics. Various configurations at the time of kernel compilation make different directories available here, such as <code class="filename">ethernet/</code>, <code class="filename">ipv4/</code>, <code class="filename">ipx/</code>, and <code class="filename">ipv6/</code>. By altering the files within these directories, system administrators are able to adjust the network configuration on a running system.
				</p>
                <p>
					Given the wide variety of possible networking options available with Linux, only the most common <code class="filename">/proc/sys/net/</code> directories are discussed.
				</p>
                <p>
					The <code class="filename">/proc/sys/net/core/</code> directory contains a variety of settings that control the interaction between the kernel and networking layers. The most important of these files are:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<code class="filename">message_burst</code> — Sets the amount of time in tenths of a second required to write a new warning message. This setting is used to mitigate <em class="firstterm">Denial of Service</em> (<em class="firstterm">DoS</em>) attacks. The default setting is <code class="computeroutput">50</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">message_cost</code> — Sets a cost on every warning message. The higher the value of this file (default of <code class="computeroutput">5</code>), the more likely the warning message is ignored. This setting is used to mitigate DoS attacks.
						</p>
                      <p>
							The idea of a DoS attack is to bombard the targeted system with requests that generate errors and fill up disk partitions with log files or require all of the system's resources to handle the error logging. The settings in <code class="filename">message_burst</code> and <code class="filename">message_cost</code> are designed to be modified based on the system's acceptable risk versus the need for comprehensive logging.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">netdev_max_backlog</code> — Sets the maximum number of packets allowed to queue when a particular interface receives packets faster than the kernel can process them. The default value for this file is <code class="computeroutput">300</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">optmem_max</code> — Configures the maximum ancillary buffer size allowed per socket.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">rmem_default</code> — Sets the receive socket buffer default size in bytes.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">rmem_max</code> — Sets the receive socket buffer maximum size in bytes.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">wmem_default</code> — Sets the send socket buffer default size in bytes.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">wmem_max</code> — Sets the send socket buffer maximum size in bytes.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					The <code class="filename">/proc/sys/net/ipv4/</code> directory contains additional networking settings. Many of these settings, used in conjunction with one another, are useful in preventing attacks on the system or when using the system to act as a router.
				</p>
                <div class="caution">
                  <h2>Caution</h2>
                  <p>
						An erroneous change to these files may affect remote connectivity to the system.
					</p>
                </div>
                <p>
					The following is a list of some of the more important files within the <code class="filename">/proc/sys/net/ipv4/</code> directory:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<code class="filename">icmp_destunreach_rate</code>, <code class="filename">icmp_echoreply_rate</code>, <code class="filename">icmp_paramprob_rate</code>, and <code class="filename">icmp_timeexeed_rate</code> — Set the maximum ICMP send packet rate, in 1/100 of a second, to hosts under certain conditions. A setting of <code class="computeroutput">0</code> removes any delay and is not a good idea.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">icmp_echo_ignore_all</code> and <code class="filename">icmp_echo_ignore_broadcasts</code> — Allows the kernel to ignore ICMP ECHO packets from every host or only those originating from broadcast and multicast addresses, respectively. A value of <code class="computeroutput">0</code> allows the kernel to respond, while a value of <code class="computeroutput">1</code> ignores the packets.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">ip_default_ttl</code> — Sets the default <em class="firstterm">Time To Live (TTL)</em>, which limits the number of hops a packet may make before reaching its destination. Increasing this value can diminish system performance.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">ip_forward</code> — Permits interfaces on the system to forward packets to one other. By default, this file is set to <code class="computeroutput">0</code>. Setting this file to <code class="computeroutput">1</code> enables network packet forwarding.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">ip_local_port_range</code> — Specifies the range of ports to be used by TCP or UDP when a local port is needed. The first number is the lowest port to be used and the second number specifies the highest port. Any systems that expect to require more ports than the default 1024 to 4999 should use a range from 32768 to 61000.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">tcp_syn_retries</code> — Provides a limit on the number of times the system re-transmits a SYN packet when attempting to make a connection.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">tcp_retries1</code> — Sets the number of permitted re-transmissions attempting to answer an incoming connection. Default of <code class="computeroutput">3</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">tcp_retries2</code> — Sets the number of permitted re-transmissions of TCP packets. Default of <code class="computeroutput">15</code>.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					The file called
				</p>
                <pre class="screen"><code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/networking/ ip-sysctl.txt</code>
</pre>
                <p>
					contains a complete list of files and options available in the <code class="filename">/proc/sys/net/ipv4/</code> directory.
				</p>
                <p>
					A number of other directories exist within the <code class="filename">/proc/sys/net/ipv4/</code> directory and each covers a different aspect of the network stack. The <code class="filename">/proc/sys/net/ipv4/conf/</code> directory allows each system interface to be configured in different ways, including the use of default settings for unconfigured devices (in the <code class="filename">/proc/sys/net/ipv4/conf/default/</code> subdirectory) and settings that override all special configurations (in the <code class="filename">/proc/sys/net/ipv4/conf/all/</code> subdirectory).
				</p>
                <p>
					The <code class="filename">/proc/sys/net/ipv4/neigh/</code> directory contains settings for communicating with a host directly connected to the system (called a network neighbor) and also contains different settings for systems more than one hop away.
				</p>
                <p>
					Routing over IPV4 also has its own directory, <code class="filename">/proc/sys/net/ipv4/route/</code>. Unlike <code class="filename">conf/</code> and <code class="filename">neigh/</code>, the <code class="filename">/proc/sys/net/ipv4/route/</code> directory contains specifications that apply to routing with any interfaces on the system. Many of these settings, such as <code class="filename">max_size</code>, <code class="filename">max_delay</code>, and <code class="filename">min_delay</code>, relate to controlling the size of the routing cache. To clear the routing cache, write any value to the <code class="filename">flush</code> file.
				</p>
                <p>
					Additional information about these directories and the possible values for their configuration files can be found in:
				</p>
                <pre class="screen">
/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/filesystems/proc.txt
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-proc-sys-vm"></a>3.3.9.5. <code class="filename">/proc/sys/vm/</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2883765" class="indexterm"></a>
                <a id="id2883797" class="indexterm"></a>
                <a id="id2883810" class="indexterm"></a>
                <p>
					This directory facilitates the configuration of the Linux kernel's virtual memory (VM) subsystem. The kernel makes extensive and intelligent use of virtual memory, which is commonly referred to as swap space.
				</p>
                <p>
					The following files are commonly found in the <code class="filename">/proc/sys/vm/</code> directory:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<code class="filename">block_dump</code> — Configures block I/O debugging when enabled. All read/write and block dirtying operations done to files are logged accordingly. This can be useful if diagnosing disk spin up and spin downs for laptop battery conservation. All output when <code class="filename">block_dump</code> is enabled can be retrieved via <code class="command">dmesg</code>. The default value is <code class="computeroutput">0</code>.
						</p>
                      <div class="tip">
                        <h2>Tip</h2>
                        <p>
								If <code class="filename">block_dump</code> is enabled at the same time as kernel debugging, it is prudent to stop the <code class="command">klogd</code> daemon, as it generates erroneous disk activity caused by <code class="filename">block_dump</code>.
							</p>
                      </div>
                    </li>
                    <li>
                      <p>
							<code class="filename">dirty_background_ratio</code> — Starts background writeback of dirty data at this percentage of total memory, via a pdflush daemon. The default value is <code class="command">10</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">dirty_expire_centisecs</code> — Defines when dirty in-memory data is old enough to be eligible for writeout. Data which has been dirty in-memory for longer than this interval is written out next time a pdflush daemon wakes up. The default value is <code class="command">3000</code>, expressed in hundredths of a second.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">dirty_ratio</code> — Starts active writeback of dirty data at this percentage of total memory for the generator of dirty data, via pdflush. The default value is <code class="command">40</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">dirty_writeback_centisecs</code> — Defines the interval between pdflush daemon wakeups, which periodically writes dirty in-memory data out to disk. The default value is <code class="command">500</code>, expressed in hundredths of a second.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">laptop_mode</code> — Minimizes the number of times that a hard disk needs to spin up by keeping the disk spun down for as long as possible, therefore conserving battery power on laptops. This increases efficiency by combining all future I/O processes together, reducing the frequency of spin ups. The default value is <code class="computeroutput">0</code>, but is automatically enabled in case a battery on a laptop is used.
						</p>
                      <p>
							This value is controlled automatically by the acpid daemon once a user is notified battery power is enabled. No user modifications or interactions are necessary if the laptop supports the ACPI (Advanced Configuration and Power Interface) specification.
						</p>
                      <p>
							For more information, refer to the following installed documentation:
						</p>
                      <p>
							<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/laptop-mode.txt</code>
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">lower_zone_protection</code> — Determines how aggressive the kernel is in defending lower memory allocation zones. This is effective when utilized with machines configured with <code class="filename">highmem</code> memory space enabled. The default value is <code class="computeroutput">0</code>, no protection at all. All other integer values are in megabytes, and <code class="filename">lowmem</code> memory is therefore protected from being allocated by users.
						</p>
                      <p>
							For more information, refer to the following installed documentation:
						</p>
                      <p>
							<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/filesystems/proc.txt</code>
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">max_map_count</code> — Configures the maximum number of memory map areas a process may have. In most cases, the default value of <code class="computeroutput">65536</code> is appropriate.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">min_free_kbytes</code> — Forces the Linux VM (virtual memory manager) to keep a minimum number of kilobytes free. The VM uses this number to compute a <code class="filename">pages_min</code> value for each <code class="filename">lowmem</code> zone in the system. The default value is in respect to the total memory on the machine.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">nr_hugepages</code> — Indicates the current number of configured <code class="filename">hugetlb</code> pages in the kernel.
						</p>
                      <p>
							For more information, refer to the following installed documentation:
						</p>
                      <p>
							<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/vm/hugetlbpage.txt</code>
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">nr_pdflush_threads</code> — Indicates the number of pdflush daemons that are currently running. This file is read-only, and should not be changed by the user. Under heavy I/O loads, the default value of two is increased by the kernel.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">overcommit_memory</code> — Configures the conditions under which a large memory request is accepted or denied. The following three modes are available:
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<code class="command">0</code> — The kernel performs heuristic memory over commit handling by estimating the amount of memory available and failing requests that are blatantly invalid. Unfortunately, since memory is allocated using a heuristic rather than a precise algorithm, this setting can sometimes allow available memory on the system to be overloaded. This is the default setting.
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">1</code> — The kernel performs no memory over commit handling. Under this setting, the potential for memory overload is increased, but so is performance for memory intensive tasks (such as those executed by some scientific software).
								</p>
                          </li>
                          <li>
                            <p>
									<code class="command">2</code> — The kernel fails requests for memory that add up to all of swap plus the percent of physical RAM specified in <code class="filename">/proc/sys/vm/overcommit_ratio</code>. This setting is best for those who desire less risk of memory overcommitment.
								</p>
                            <div class="note">
                              <h2>Note</h2>
                              <p>
										This setting is only recommended for systems with swap areas larger than physical memory.
									</p>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li>
                      <p>
							<code class="filename">overcommit_ratio</code> — Specifies the percentage of physical RAM considered when <code class="filename">/proc/sys/vm/overcommit_memory</code> is set to <code class="command">2</code>. The default value is <code class="command">50</code>.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">page-cluster</code> — Sets the number of pages read in a single attempt. The default value of <code class="computeroutput">3</code>, which actually relates to 16 pages, is appropriate for most systems.
						</p>
                    </li>
                    <li>
                      <p>
							<code class="filename">swappiness</code> — Determines how much a machine should swap. The higher the value, the more swapping occurs. The default value, as a percentage, is set to <code class="computeroutput">60</code>.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					All kernel-based documentation can be found in the following locally installed location:
				</p>
                <p>
					<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/</code>, which contains additional information.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-dir-sysvipc"></a>3.3.10. <code class="filename">/proc/sysvipc/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2922223" class="indexterm"></a>
              <p>
				This directory contains information about System V IPC resources. The files in this directory relate to System V IPC calls for messages (<code class="filename">msg</code>), semaphores (<code class="filename">sem</code>), and shared memory (<code class="filename">shm</code>).
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-tty"></a>3.3.11. <code class="filename">/proc/tty/</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2922283" class="indexterm"></a>
              <p>
				This directory contains information about the available and currently used <em class="firstterm">tty devices</em> on the system. Originally called <em class="firstterm">teletype devices</em>, any character-based data terminals are called tty devices.
			</p>
              <p>
				In Linux, there are three different kinds of tty devices. <em class="firstterm">Serial devices</em> are used with serial connections, such as over a modem or using a serial cable. <em class="firstterm">Virtual terminals</em> create the common console connection, such as the virtual consoles available when pressing <span><strong class="keycap">Alt</strong></span>-<span><strong class="keycap">&lt;F-key&gt;</strong></span> at the system console. <em class="firstterm">Pseudo terminals</em> create a two-way communication that is used by some higher level applications, such as XFree86. The <code class="filename">drivers</code> file is a list of the current tty devices in use, as in the following example:
			</p>
              <pre class="screen">
serial               /dev/cua        5  64-127 serial:callout 
serial               /dev/ttyS       4  64-127 serial 
pty_slave            /dev/pts      136   0-255 pty:slave 
pty_master           /dev/ptm      128   0-255 pty:master 
pty_slave            /dev/ttyp       3   0-255 pty:slave 
pty_master           /dev/pty        2   0-255 pty:master 
/dev/vc/0            /dev/vc/0       4       0 system:vtmaster 
/dev/ptmx            /dev/ptmx       5       2 system 
/dev/console         /dev/console    5       1 system:console 
/dev/tty             /dev/tty        5       0 system:/dev/tty 
unknown              /dev/vc/%d      4    1-63 console
</pre>
              <p>
				The <code class="filename">/proc/tty/driver/serial</code> file lists the usage statistics and status of each of the serial tty lines.
			</p>
              <p>
				In order for tty devices to be used as network devices, the Linux kernel enforces <em class="firstterm">line discipline</em> on the device. This allows the driver to place a specific type of header with every block of data transmitted over the device, making it possible for the remote end of the connection to a block of data as just one in a stream of data blocks. SLIP and PPP are common line disciplines, and each are commonly used to connect systems to one other over a serial link.
			</p>
              <p>
				Registered line disciplines are stored in the <code class="filename">ldiscs</code> file, and more detailed information is available within the <code class="filename">ldisc/</code> directory.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-proc-sysctl"></a>3.4. Using the <code class="command">sysctl</code> Command</h2>
                </div>
              </div>
            </div>
            <a id="id2922440" class="indexterm"></a>
            <a id="id2922453" class="indexterm"></a>
            <a id="id2922466" class="indexterm"></a>
            <a id="id2922487" class="indexterm"></a>
            <a id="id2922517" class="indexterm"></a>
            <a id="id2887852" class="indexterm"></a>
            <p>
			The <code class="command">/sbin/sysctl</code> command is used to view, set, and automate kernel settings in the <code class="filename">/proc/sys/</code> directory.
		</p>
            <p>
			For a quick overview of all settings configurable in the <code class="filename">/proc/sys/</code> directory, type the <code class="command">/sbin/sysctl -a</code> command as root. This creates a large, comprehensive list, a small portion of which looks something like the following:
		</p>
            <pre class="screen">
net.ipv4.route.min_delay = 2 kernel.sysrq = 0 kernel.sem = 250     32000     32     128
</pre>
            <p>
			This is the same information seen if each of the files were viewed individually. The only difference is the file location. For example, the <code class="filename">/proc/sys/net/ipv4/route/min_delay</code> file is listed as <code class="computeroutput">net.ipv4.route.min_delay</code>, with the directory slashes replaced by dots and the <code class="computeroutput">proc.sys</code> portion assumed.
		</p>
            <p>
			The <code class="command">sysctl</code> command can be used in place of <code class="command">echo</code> to assign values to writable files in the <code class="filename">/proc/sys/</code> directory. For example, instead of using the command
		</p>
            <pre class="screen">
echo 1 &gt; /proc/sys/kernel/sysrq
</pre>
            <p>
			use the equivalent <code class="command">sysctl</code> command as follows:
		</p>
            <pre class="screen">
sysctl -w kernel.sysrq="1"
kernel.sysrq = 1
</pre>
            <p>
			While quickly setting single values like this in <code class="filename">/proc/sys/</code> is helpful during testing, this method does not work as well on a production system as special settings within <code class="filename">/proc/sys/</code> are lost when the machine is rebooted. To preserve custom settings, add them to the <code class="filename">/etc/sysctl.conf</code> file.
		</p>
            <p>
			Each time the system boots, the <code class="command">init</code> program runs the <code class="filename">/etc/rc.d/rc.sysinit</code> script. This script contains a command to execute <code class="command">sysctl</code> using <code class="filename">/etc/sysctl.conf</code> to determine the values passed to the kernel. Any values added to <code class="filename">/etc/sysctl.conf</code> therefore take effect each time the system boots.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-proc-additional-resources"></a>3.5. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2888060" class="indexterm"></a>
            <p>
			Below are additional sources of information about <code class="filename">proc</code> file system.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-installed-documentation"></a>3.5.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <a id="id2888098" class="indexterm"></a>
              <p>
				Some of the best documentation about the <code class="filename">proc</code> file system is installed on the system by default.
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/filesystems/proc.txt</code> — Contains assorted, but limited, information about all aspects of the <code class="filename">/proc/</code> directory.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/sysrq.txt</code> — An overview of System Request Key options.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/sysctl/</code> — A directory containing a variety of <code class="command">sysctl</code> tips, including modifying values that concern the kernel (<code class="filename">kernel.txt</code>), accessing file systems (<code class="filename">fs.txt</code>), and virtual memory use (<code class="filename">vm.txt</code>).
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">/usr/share/doc/kernel-doc-<em class="replaceable"><code>&lt;version&gt;</code></em>/Documentation/networking/ip-sysctl.txt</code> — A detailed overview of IP networking options.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-proc-useful-websites"></a>3.5.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <a id="id2897210" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://www.linuxhq.com/">http://www.linuxhq.com/</a> — This website maintains a complete database of source, patches, and documentation for various versions of the Linux kernel.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-raid"></a>Chapter 4. Redundant Array of Independent Disks (RAID)</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-raid-what-is">4.1. What is RAID?</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-raid-why-use">4.2. Who Should Use RAID?</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-raid-approaches">4.3. Hardware RAID versus Software RAID</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-raid-hardware-raid">4.3.1. Hardware RAID</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-raid-software-raid">4.3.2. Software RAID</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-raid-levels">4.4. RAID Levels and Linear Support</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-raid-config">4.5. Configuring Software RAID</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-diskdruid-manual-part">4.5.1. Creating the RAID Partitions</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-raid-diskdruid-manual-devmnt">4.5.2. Creating the RAID Devices and Mount Points</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <p>
		The basic idea behind RAID is to combine multiple small, inexpensive disk drives into an array to accomplish performance or redundancy goals not attainable with one large and expensive drive. This array of drives appears to the computer as a single logical storage unit or drive.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-raid-what-is"></a>4.1. What is RAID?</h2>
                </div>
              </div>
            </div>
            <a id="id2920726" class="indexterm"></a>
            <p>
			RAID allows information to access several disks. RAID uses techniques such as <em class="firstterm">disk striping</em> (RAID Level 0), <em class="firstterm">disk mirroring</em> (RAID Level 1), and <em class="firstterm">disk striping with parity</em> (RAID Level 5) to achieve redundancy, lower latency, increased bandwidth, and maximized ability to recover from hard disk crashes.
		</p>
            <a id="id2875760" class="indexterm"></a>
            <p>
			RAID consistently distributes data across each drive in the array. RAID then breaks down the data into consistently-sized chunks (commonly 32K or 64k, although other values are acceptable). Each chunk is then written to a hard drive in the RAID array according to the RAID level employed. When the data is read, the process is reversed, giving the illusion that the multiple drives in the array are actually one large drive.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-raid-why-use"></a>4.2. Who Should Use RAID?</h2>
                </div>
              </div>
            </div>
            <p>
			System Administrators and others who manage large amounts of data would benefit from using RAID technology. Primary reasons to deploy RAID include:
		</p>
            <a id="id2843761" class="indexterm"></a>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Enhances speed
				</p>
                </li>
                <li>
                  <p>
					Increases storage capacity using a single virtual disk
				</p>
                </li>
                <li>
                  <p>
					Minimizes disk failure
				</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-raid-approaches"></a>4.3. Hardware RAID versus Software RAID</h2>
                </div>
              </div>
            </div>
            <a id="id2891147" class="indexterm"></a>
            <a id="id2862715" class="indexterm"></a>
            <a id="id2928225" class="indexterm"></a>
            <a id="id2913612" class="indexterm"></a>
            <p>
			There are two possible RAID approaches: Hardware RAID and Software RAID.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-raid-hardware-raid"></a>4.3.1. Hardware RAID</h3>
                  </div>
                </div>
              </div>
              <p>
				The hardware-based array manages the RAID subsystem independently from the host. It presents a single disk per RAID array to the host.
			</p>
              <p>
				A Hardware RAID device connects to the SCSI controller and presents the RAID arrays as a single SCSI drive. An external RAID system moves all RAID handling "intelligence" into a controller located in the external disk subsystem. The whole subsystem is connected to the host via a normal SCSI controller and appears to the host as a single disk.
			</p>
              <p>
				RAID controller cards function like a SCSI controller to the operating system, and handle all the actual drive communications. The user plugs the drives into the RAID controller (just like a normal SCSI controller) and then adds them to the RAID controllers configuration, and the operating system won't know the difference.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-raid-software-raid"></a>4.3.2. Software RAID</h3>
                  </div>
                </div>
              </div>
              <p>
				Software RAID implements the various RAID levels in the kernel disk (block device) code. It offers the cheapest possible solution, as expensive disk controller cards or hot-swap chassis <sup>[<a id="id2876751" href="#ftn.id2876751">1</a>]</sup> are not required. Software RAID also works with cheaper IDE disks as well as SCSI disks. With today's faster CPUs, Software RAID outperforms Hardware RAID.
			</p>
              <p>
				The Linux kernel contains an MD driver that allows the RAID solution to be completely hardware independent. The performance of a software-based array depends on the server CPU performance and load.
			</p>
              <p>
				To learn more about Software RAID, here are the key features:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Threaded rebuild process
					</p>
                  </li>
                  <li>
                    <p>
						Kernel-based configuration
					</p>
                  </li>
                  <li>
                    <p>
						Portability of arrays between Linux machines without reconstruction
					</p>
                  </li>
                  <li>
                    <p>
						Backgrounded array reconstruction using idle system resources
					</p>
                  </li>
                  <li>
                    <p>
						Hot-swappable drive support
					</p>
                  </li>
                  <li>
                    <p>
						Automatic CPU detection to take advantage of certain CPU optimizations
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-raid-levels"></a>4.4. RAID Levels and Linear Support</h2>
                </div>
              </div>
            </div>
            <p>
			RAID supports various configurations, including levels 0, 1, 4, 5, and linear. These RAID types are defined as follows:
		</p>
            <div class="itemizedlist">
              <a id="id2867301" class="indexterm"></a>
              <a id="id2898325" class="indexterm"></a>
              <a id="id2875531" class="indexterm"></a>
              <a id="id2871589" class="indexterm"></a>
              <a id="id2915671" class="indexterm"></a>
              <ul>
                <li>
                  <p>
					<span class="emphasis"><em>Level 0</em></span> — RAID level 0, often called "striping," is a performance-oriented striped data mapping technique. This means the data being written to the array is broken down into strips and written across the member disks of the array, allowing high I/O performance at low inherent cost but provides no redundancy. The storage capacity of a level 0 array is equal to the total capacity of the member disks in a Hardware RAID or the total capacity of member partitions in a Software RAID.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>Level 1</em></span> — RAID level 1, or "mirroring," has been used longer than any other form of RAID. Level 1 provides redundancy by writing identical data to each member disk of the array, leaving a "mirrored" copy on each disk. Mirroring remains popular due to its simplicity and high level of data availability. Level 1 operates with two or more disks that may use parallel access for high data-transfer rates when reading but more commonly operate independently to provide high I/O transaction rates. Level 1 provides very good data reliability and improves performance for read-intensive applications but at a relatively high cost. <sup>[<a id="id2929129" href="#ftn.id2929129">2</a>]</sup> The storage capacity of the level 1 array is equal to the capacity of one of the mirrored hard disks in a Hardware RAID or one of the mirrored partitions in a Software RAID.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>Level 4</em></span> — Level 4 uses parity <sup>[<a id="id2932266" href="#ftn.id2932266">3</a>]</sup> concentrated on a single disk drive to protect data. It is better suited to transaction I/O rather than large file transfers. Because the dedicated parity disk represents an inherent bottleneck, level 4 is seldom used without accompanying technologies such as write-back caching. Although RAID level 4 is an option in some RAID partitioning schemes, it is not an option allowed in Red Hat Enterprise Linux RAID installations. <sup>[<a id="id2859991" href="#ftn.id2859991">4</a>]</sup> The storage capacity of Hardware RAID level 4 is equal to the capacity of member disks, minus the capacity of one member disk. The storage capacity of Software RAID level 4 is equal to the capacity of the member partitions, minus the size of one of the partitions if they are of equal size.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>Level 5</em></span> — This is the most common type of RAID. By distributing parity across some or all of an array's member disk drives, RAID level 5 eliminates the write bottleneck inherent in level 4. The only performance bottleneck is the parity calculation process. With modern CPUs and Software RAID, that usually is not a very big problem. As with level 4, the result is asymmetrical performance, with reads substantially outperforming writes. Level 5 is often used with write-back caching to reduce the asymmetry. The storage capacity of Hardware RAID level 5 is equal to the capacity of member disks, minus the capacity of one member disk. The storage capacity of Software RAID level 5 is equal to the capacity of the member partitions, minus the size of one of the partitions if they are of equal size.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>Linear RAID</em></span> — Linear RAID is a simple grouping of drives to create a larger virtual drive. In linear RAID, the chunks are allocated sequentially from one member drive, going to the next drive only when the first is completely filled. This grouping provides no performance benefit, as it is unlikely that any I/O operations will be split between member drives. Linear RAID also offers no redundancy and, in fact, decreases reliability — if any one member drive fails, the entire array cannot be used. The capacity is the total of all member disks.
				</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-raid-config"></a>4.5. Configuring Software RAID</h2>
                </div>
              </div>
            </div>
            <a id="id2935591" class="indexterm"></a>
            <a id="id2868598" class="indexterm"></a>
            <p>
			Users can configure Software RAID during the graphical installation process (Disk Druid), the text-based installation process, or during a kickstart installation.This chapter covers Software RAID configuration during the installation process using the <span><strong class="application">Disk Druid</strong></span> application.
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Apply <em class="firstterm">software RAID partitions</em> to the physical hard drives.
				</p>
                  <p>
					To add a boot partition (<code class="filename">/boot/</code>) to a RAID partition, ensure it is on a RAID1 partiton.
				</p>
                </li>
                <li>
                  <p>
					Creating <em class="firstterm">RAID devices</em> from the software RAID partitions.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>Optional:</em></span> Configuring <em class="firstterm">LVM </em> from the RAID devices.
				</p>
                </li>
                <li>
                  <p>
					Creating <em class="firstterm">file systems</em> from the RAID devices.
				</p>
                </li>
              </ul>
            </div>
            <div class="note">
              <h2>Note</h2>
              <p>
				Although this procedure covers installating with a GUI application, system administrators can do the same with text-based installation.
			</p>
              <p>
				Configuration of software RAID must be done manually in <span><strong class="application">Disk Druid</strong></span> during the installation process.
			</p>
            </div>
            <p>
			These examples use two 9.1 GB SCSI drives (<code class="filename">/dev/sda</code> and <code class="filename">/dev/sdb</code>) to illustrate the creation of simple RAID1 configurations. They detail how to create a simple RAID 1 configuration by implementing multiple RAID devices.
		</p>
            <p>
			On the <span><strong class="guilabel">Disk Partitioning Setup</strong></span> screen, select <span><strong class="guibutton">Manually partition with Disk Druid</strong></span>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-raid-diskdruid-manual-part"></a>4.5.1. Creating the RAID Partitions</h3>
                  </div>
                </div>
              </div>
              <a id="id2907634" class="indexterm"></a>
              <a id="id2905016" class="indexterm"></a>
              <p>
				In a typical situation, the disk drives are new or are formatted. Both drives are shown as raw devices with no partition configuration in <a href="#fig-raid-manual-free" title="Figure 4.1. Two Blank Drives, Ready For Configuration">Figure 4.1, “Two Blank Drives, Ready For Configuration”</a>.
			</p>
              <div class="figure">
                <a id="fig-raid-manual-free"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/raid-manual-free.png" alt="Two Blank Drives, Ready For Configuration" />
                    <div class="longdesc">
                      <p>
							Two Blank Drives, Ready For Configuration
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 4.1. Two Blank Drives, Ready For Configuration</h6>
              </div>
              <br class="figure-break" />
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						In <span><strong class="application">Disk Druid</strong></span>, choose <span><strong class="guibutton">RAID</strong></span> to enter the software RAID creation screen.
					</p>
                  </li>
                  <li>
                    <p>
						Choose <span><strong class="guimenuitem">Create a software RAID partition</strong></span> to create a RAID partition as shown in <a href="#fig-raid-manual-part-opt" title="Figure 4.2. RAID Partition Options">Figure 4.2, “RAID Partition Options”</a>. Note that no other RAID options (such as entering a mount point) are available until RAID partitions, as well as RAID devices, are created.
					</p>
                    <div class="figure">
                      <a id="fig-raid-manual-part-opt"></a>
                      <div class="figure-contents">
                        <div class="mediaobject">
                          <img src="images/raid-manual-part-opt.png" alt="RAID Partition Options" />
                          <div class="longdesc">
                            <p>
									RAID Partition Options
								</p>
                          </div>
                        </div>
                      </div>
                      <h6>Figure 4.2. RAID Partition Options</h6>
                    </div>
                    <br class="figure-break" />
                  </li>
                  <li>
                    <p>
						A software RAID partition must be constrained to one drive. For <span><strong class="guimenuitem">Allowable Drives</strong></span>, select the drive to use for RAID. If you have multiple drives, by default all drives are selected and you must deselect the drives you do not want.
					</p>
                    <div class="figure">
                      <a id="fig-raid-manual-part-add"></a>
                      <div class="figure-contents">
                        <div class="mediaobject">
                          <img src="images/raid-manual-part-add.png" alt="Adding a RAID Partition" />
                          <div class="longdesc">
                            <p>
									Adding a RAID Partition
								</p>
                          </div>
                        </div>
                      </div>
                      <h6>Figure 4.3. Adding a RAID Partition</h6>
                    </div>
                    <br class="figure-break" />
                  </li>
                  <li>
                    <p>
						Enter the size that you want the partition to be.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">Fixed Size</strong></span> to specify partition size. Select <span><strong class="guilabel">Fill all space up to (MB)</strong></span> and enter a value (in MB) to specify partition size range. Select <span><strong class="guilabel">Fill to maximum allowable size</strong></span> to allow maximum available space of the hard disk. Note that if you make more than one space growable, they share the available free space on the disk.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">Force to be a primary partition</strong></span> if you want the partition to be a primary partition. A primary partition is one of the first four partitions on the hard drive. If unselected, the partition is created as a logical partition. If other operating systems are already on the system, unselecting this option should be considered. For more information on primary versus logical/extended partitions, refer to the appendix section of the <em class="citetitle">Red Hat Enterprise Linux Installation Guide</em>.
					</p>
                  </li>
                  <li>
                    <p>
						Repeat these steps to create as many partitions as you need for your partitions.
					</p>
                  </li>
                </ol>
              </div>
              <p>
				Repeat these steps to create as many partitions as needed for your RAID setup. Notice that all the partitions do not have to be RAID partitions. For example, you can configure only the <code class="filename">/boot/</code> partition as a software RAID device, leaving the root partition (<code class="command">/</code>), <code class="command">/home/</code>, and swap as regular file systems. <a href="#fig-raid-manual-part-bootready-add" title="Figure 4.4. RAID 1 Partitions Ready, Pre-Device and Mount Point Creation">Figure 4.4, “RAID 1 Partitions Ready, Pre-Device and Mount Point Creation”</a> shows successfully allocated space for the RAID 1 configuration (for <code class="command">/boot/</code>), which is now ready for RAID device and mount point creation:
			</p>
              <div class="figure">
                <a id="fig-raid-manual-part-bootready-add"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/raid-manual-part-bootready.png" alt="RAID 1 Partitions Ready, Pre-Device and Mount Point Creation" />
                    <div class="longdesc">
                      <p>
							RAID 1 Partitions Ready, Pre-Device and Mount Point Creation
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 4.4. RAID 1 Partitions Ready, Pre-Device and Mount Point Creation</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-raid-diskdruid-manual-devmnt"></a>4.5.2. Creating the RAID Devices and Mount Points</h3>
                  </div>
                </div>
              </div>
              <a id="id2886868" class="indexterm"></a>
              <a id="id2889507" class="indexterm"></a>
              <p>
				Once you create all of your partitions as Software RAID partitions, you must create the RAID device and mount point.
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Select the <span><strong class="guibutton">RAID</strong></span> button on the <span><strong class="application">Disk Druid</strong></span> main partitioning screen (refer to <a href="#fig-raid-manual-part-opt2" title="Figure 4.5. RAID Options">Figure 4.5, “RAID Options”</a>).
					</p>
                  </li>
                  <li>
                    <p>
						<a href="#fig-raid-manual-part-opt2" title="Figure 4.5. RAID Options">Figure 4.5, “RAID Options”</a> appears. Select <span><strong class="guilabel">Create a RAID device</strong></span>.
					</p>
                    <div class="figure">
                      <a id="fig-raid-manual-part-opt2"></a>
                      <div class="figure-contents">
                        <div class="mediaobject">
                          <img src="images/raid-manual-part-opt2.png" alt="RAID Options" />
                          <div class="longdesc">
                            <p>
									RAID Select Option
								</p>
                          </div>
                        </div>
                      </div>
                      <h6>Figure 4.5. RAID Options</h6>
                    </div>
                    <br class="figure-break" />
                  </li>
                  <li>
                    <p>
						Next, <a href="#fig-raid-manual-mntpt" title="Figure 4.6. Making a RAID Device and Assigning a Mount Point">Figure 4.6, “Making a RAID Device and Assigning a Mount Point”</a> appears, where you can make a RAID device and assign a mount point.
					</p>
                    <div class="figure">
                      <a id="fig-raid-manual-mntpt"></a>
                      <div class="figure-contents">
                        <div class="mediaobject">
                          <img src="images/raid-manual-mntpt.png" alt="Making a RAID Device and Assigning a Mount Point" />
                          <div class="longdesc">
                            <p>
									Making a RAID Device and Assigning a Mount Point
								</p>
                          </div>
                        </div>
                      </div>
                      <h6>Figure 4.6. Making a RAID Device and Assigning a Mount Point</h6>
                    </div>
                    <br class="figure-break" />
                  </li>
                  <li>
                    <p>
						Select a mount point.
					</p>
                  </li>
                  <li>
                    <p>
						Choose the file system type for the partition. At this point you can either configure a dynamic LVM file system or a traditional static ext2/ext3 file system. For more information on configuring LVM on a RAID device, select <span><strong class="guilabel">physical volume (LVM)</strong></span>. If LVM is not required, continue on with the following instructions.
					</p>
                  </li>
                  <li>
                    <p>
						Select a device name such as <span><strong class="guilabel">md0</strong></span> for the RAID device.
					</p>
                  </li>
                  <li>
                    <p>
						Choose your RAID level. You can choose from <span><strong class="guilabel">RAID 0</strong></span>,<span><strong class="guilabel"> RAID 1</strong></span>, and <span><strong class="guilabel">RAID 5</strong></span>.
					</p>
                    <div class="note">
                      <h2>Note</h2>
                      <p>
							If you are making a RAID partition of <code class="filename">/boot/</code>, you must choose RAID level 1, and it must use one of the first two drives (IDE first, SCSI second). If you are not creating a seperate RAID partition of <code class="filename">/boot/</code>, and you are making a RAID partition for the root file system (<code class="filename">/</code>), it must be RAID level 1 and must use one of the first two drives (IDE first, SCSI second).
						</p>
                      <div class="figure">
                        <a id="fig-raid-manual-boot-error"></a>
                        <div class="figure-contents">
                          <div class="mediaobject">
                            <img src="images/raid-manual-boot-error.png" alt="The /boot/ Mount Error" />
                            <div class="longdesc">
                              <p>
										The <code class="command">/boot/</code> Mount Error
									</p>
                            </div>
                          </div>
                        </div>
                        <h6>Figure 4.7. The <code class="command">/boot/</code> Mount Error</h6>
                      </div>
                      <br class="figure-break" />
                    </div>
                  </li>
                  <li>
                    <p>
						The RAID partitions created appear in the <span><strong class="guilabel">RAID Members</strong></span> list. Select which of these partitions should be used to create the RAID device.
					</p>
                  </li>
                  <li>
                    <p>
						If configuring RAID 1 or RAID 5, specify the number of spare partitions. If a software RAID partition fails, the spare is automatically used as a replacement. For each spare you want to specify, you must create an additional software RAID partition (in addition to the partitions for the RAID device). Select the partitions for the RAID device and the partition(s) for the spare(s).
					</p>
                  </li>
                  <li>
                    <p>
						After clicking <span><strong class="guibutton">OK</strong></span>, the RAID device appears in the <span><strong class="guilabel">Drive Summary</strong></span> list.
					</p>
                  </li>
                  <li>
                    <p>
						Repeat this chapter's entire process for configuring additional partitions, devices, and mount points, such as the root partition (<code class="command">/</code>), <code class="command">/home/</code>, or swap.
					</p>
                  </li>
                </ol>
              </div>
              <p>
				After completing the entire configuration, the figure as shown in <a href="#fig-raid-manual-final" title="Figure 4.8. Final Sample RAID Configuration">Figure 4.8, “Final Sample RAID Configuration”</a> resembles the default configuration, except for the use of RAID.
			</p>
              <div class="figure">
                <a id="fig-raid-manual-final"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/raid-manual-final.png" alt="Final Sample RAID Configuration" />
                    <div class="longdesc">
                      <p>
							Final Sample RAID Configuration
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 4.8. Final Sample RAID Configuration</h6>
              </div>
              <br class="figure-break" />
              <p>
				The figure as shown in <a href="#fig-raid-manual-lvm-final" title="Figure 4.9. Final Sample RAID With LVM Configuration">Figure 4.9, “Final Sample RAID With LVM Configuration”</a> is an example of a RAID and LVM configuration.
			</p>
              <div class="figure">
                <a id="fig-raid-manual-lvm-final"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/raid-manual-lvm-final.png" alt="Final Sample RAID With LVM Configuration" />
                    <div class="longdesc">
                      <p>
							Final Sample RAID With LVM Configuration
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 4.9. Final Sample RAID With LVM Configuration</h6>
              </div>
              <br class="figure-break" />
              <p>
				You can continue with your installation process. Refer to the <em class="citetitle">Red Hat Enterprise Linux Installation Guide</em> for further instructions.
			</p>
            </div>
          </div>
          <div class="footnotes">
            <br />
            <hr width="100" align="left" />
            <div class="footnote">
              <p><sup>[<a id="ftn.id2876751" href="#id2876751">1</a>] </sup>
					A hot-swap chassis allows you to remove a hard drive without having to power-down your system.
				</p>
            </div>
            <div class="footnote">
              <p><sup>[<a id="ftn.id2929129" href="#id2929129">2</a>] </sup>
						RAID level 1 comes at a high cost because you write the same information to all of the disks in the array, which wastes drive space. For example, if you have RAID level 1 set up so that your root (<code class="filename">/</code>) partition exists on two 40G drives, you have 80G total but are only able to access 40G of that 80G. The other 40G acts like a mirror of the first 40G.
					</p>
            </div>
            <div class="footnote">
              <p><sup>[<a id="ftn.id2932266" href="#id2932266">3</a>] </sup>
						Parity information is calculated based on the contents of the rest of the member disks in the array. This information can then be used to reconstruct data when one disk in the array fails. The reconstructed data can then be used to satisfy I/O requests to the failed disk before it is replaced and to repopulate the failed disk after it has been replaced.
					</p>
            </div>
            <div class="footnote">
              <p><sup>[<a id="ftn.id2859991" href="#id2859991">4</a>] </sup>
						RAID level 4 takes up the same amount of space as RAID level 5, but level 5 has more advantages. For this reason, level 4 is not supported.
					</p>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-swapspace"></a>Chapter 5. Swap Space</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-swap-what-is">5.1. What is Swap Space?</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-swap-adding">5.2. Adding Swap Space</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-swap-extending-lvm2">5.2.1. Extending Swap on an LVM2 Logical Volume</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-swap-creating-lvm2">5.2.2. Creating an LVM2 Logical Volume for Swap</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-swap-creating-file">5.2.3. Creating a Swap File</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-swap-removing">5.3. Removing Swap Space</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-swap-reducing-lvm2">5.3.1. Reducing Swap on an LVM2 Logical Volume</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-swap-removing-lvm2">5.3.2. Removing an LVM2 Logical Volume for Swap</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-swap-removing-file">5.3.3. Removing a Swap File</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-swap-moving">5.4. Moving Swap Space</a>
                </span>
              </dt>
            </dl>
          </div>
          <a id="id2918252" class="indexterm"></a>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-swap-what-is"></a>5.1. What is Swap Space?</h2>
                </div>
              </div>
            </div>
            <a id="id2876332" class="indexterm"></a>
            <p>
			<em class="firstterm">Swap space</em> in Linux is used when the amount of physical memory (RAM) is full. If the system needs more memory resources and the RAM is full, inactive pages in memory are moved to the swap space. While swap space can help machines with a small amount of RAM, it should not be considered a replacement for more RAM. Swap space is located on hard drives, which have a slower access time than physical memory.
		</p>
            <p>
			Swap space can be a dedicated swap partition (recommended), a swap file, or a combination of swap partitions and swap files.
		</p>
            <a id="id2891103" class="indexterm"></a>
            <p>
			Swap should equal 2x physical RAM for up to 2 GB of physical RAM, and then an additional 1x physical RAM for any amount above 2 GB, but never less than 32 MB.
		</p>
            <p>
			So, if:
		</p>
            <p>
			M = Amount of RAM in GB, and S = Amount of swap in GB, then
		</p>
            <pre class="screen">If M &lt; 2
	S = M *2
Else
	S = M + 2
</pre>
            <p>
			Using this formula, a system with 2 GB of physical RAM would have 4 GB of swap, while one with 3 GB of physical RAM would have 5 GB of swap. Creating a large swap space partition can be especially helpful if you plan to upgrade your RAM at a later time.
		</p>
            <p>
			For systems with really large amounts of RAM (more than 32 GB) you can likely get away with a smaller swap partition (around 1x, or less, of physical RAM).
		</p>
            <div class="important">
              <h2>Important</h2>
              <p>
				File systems and LVM2 volumes assigned as swap space <span class="emphasis"><em>cannot</em></span> be in use when being modified. For example, no system processes can be assigned the swap space, as well as no amount of swap should be allocated and used by the kernel. Use the <code class="command">free</code> and <code class="command">cat /proc/swaps</code> commands to verify how much and where swap is in use.
			</p>
              <p>
				The best way to achieve swap space modifications is to boot your system in rescue mode, and then follow the instructions (for each scenario) in the remainder of this chapter. Refer to the Red Hat Enterprise Linux Installation Guide for instructions on booting into rescue mode. When prompted to mount the file system, select <span><strong class="guibutton">Skip</strong></span>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-swap-adding"></a>5.2. Adding Swap Space</h2>
                </div>
              </div>
            </div>
            <a id="id2885987" class="indexterm"></a>
            <a id="id2903375" class="indexterm"></a>
            <p>
			Sometimes it is necessary to add more swap space after installation. For example, you may upgrade the amount of RAM in your system from 128 MB to 256 MB, but there is only 256 MB of swap space. It might be advantageous to increase the amount of swap space to 512 MB if you perform memory-intense operations or run applications that require a large amount of memory.
		</p>
            <p>
			You have three options: create a new swap partition, create a new swap file, or extend swap on an existing LVM2 logical volume. It is recommended that you extend an existing logical volume.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-swap-extending-lvm2"></a>5.2.1. Extending Swap on an LVM2 Logical Volume</h3>
                  </div>
                </div>
              </div>
              <a id="id2882598" class="indexterm"></a>
              <p>
				To extend an LVM2 swap logical volume (assuming <code class="filename">/dev/VolGroup00/LogVol01</code> is the volume you want to extend):
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Disable swapping for the associated logical volume:
					</p>
                    <pre class="screen"><code class="command"># swapoff -v /dev/VolGroup00/LogVol01</code>
</pre>
                  </li>
                  <li>
                    <p>
						Resize the LVM2 logical volume by 256 MB:
					</p>
                    <pre class="screen"><code class="command"># lvm lvresize /dev/VolGroup00/LogVol01 -L +256M</code>
</pre>
                  </li>
                  <li>
                    <p>
						Format the new swap space:
					</p>
                    <pre class="screen"><code class="command"># mkswap /dev/VolGroup00/LogVol01</code>
</pre>
                  </li>
                  <li>
                    <p>
						Enable the extended logical volume:
					</p>
                    <pre class="screen"><code class="command"># swapon -va</code>
</pre>
                  </li>
                  <li>
                    <p>
						Test that the logical volume has been extended properly:
					</p>
                    <pre class="screen"><code class="command"># cat /proc/swaps # free</code>
</pre>
                  </li>
                </ol>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-swap-creating-lvm2"></a>5.2.2. Creating an LVM2 Logical Volume for Swap</h3>
                  </div>
                </div>
              </div>
              <a id="id2871734" class="indexterm"></a>
              <p>
				To add a swap volume group (assuming <code class="filename">/dev/VolGroup00/LogVol02</code> is the swap volume you want to add):
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Create the LVM2 logical volume of size 256 MB:
					</p>
                    <pre class="screen"><code class="command"># lvm lvcreate VolGroup00 -n LogVol02 -L 256M</code>
</pre>
                  </li>
                  <li>
                    <p>
						Format the new swap space:
					</p>
                    <pre class="screen"><code class="command"># mkswap /dev/VolGroup00/LogVol02</code>
</pre>
                  </li>
                  <li>
                    <p>
						Add the following entry to the <code class="filename">/etc/fstab</code> file:
					</p>
                    <pre class="screen"><code class="command">/dev/VolGroup00/LogVol02 swap swap defaults 0 0</code>
</pre>
                  </li>
                  <li>
                    <p>
						Enable the extended logical volume:
					</p>
                    <pre class="screen"><code class="command"># swapon -va</code>
</pre>
                  </li>
                  <li>
                    <p>
						Test that the logical volume has been extended properly:
					</p>
                    <pre class="screen"><code class="command"># cat /proc/swaps # free</code>
</pre>
                  </li>
                </ol>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-swap-creating-file"></a>5.2.3. Creating a Swap File</h3>
                  </div>
                </div>
              </div>
              <a id="id2928358" class="indexterm"></a>
              <p>
				To add a swap file:
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Determine the size of the new swap file in megabytes and multiply by 1024 to determine the number of blocks. For example, the block size of a 64 MB swap file is 65536.
					</p>
                  </li>
                  <li>
                    <p>
						At a shell prompt as root, type the following command with <code class="command">count</code> being equal to the desired block size:
					</p>
                    <pre class="screen"><code class="command">dd if=/dev/zero of=/swapfile bs=1024 count=65536</code>
</pre>
                  </li>
                  <li>
                    <p>
						Setup the swap file with the command:
					</p>
                    <pre class="screen"><code class="command">mkswap /swapfile</code>
</pre>
                  </li>
                  <li>
                    <p>
						To enable the swap file immediately but not automatically at boot time:
					</p>
                    <pre class="screen"><code class="command">swapon /swapfile</code>
</pre>
                  </li>
                  <li>
                    <p>
						To enable it at boot time, edit <code class="filename">/etc/fstab</code> to include the following entry:
					</p>
                    <pre class="screen"><code class="computeroutput">/swapfile swap swap defaults 0 0</code>
</pre>
                    <p>
						The next time the system boots, it enables the new swap file.
					</p>
                  </li>
                  <li>
                    <p>
						After adding the new swap file and enabling it, verify it is enabled by viewing the output of the command <code class="command">cat /proc/swaps</code> or <code class="command">free</code>.
					</p>
                  </li>
                </ol>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-swap-removing"></a>5.3. Removing Swap Space</h2>
                </div>
              </div>
            </div>
            <a id="id2890641" class="indexterm"></a>
            <p>
			Sometimes it can be prudent to reduce swap space after installation. For example, say you downgraded the amount of RAM in your system from 1 GB to 512 MB, but there is 2 GB of swap space still assigned. It might be advantageous to reduce the amount of swap space to 1 GB, since the larger 2 GB could be wasting disk space.
		</p>
            <p>
			You have three options: remove an entire LVM2 logical volume used for swap, remove a swap file, or reduce swap space on an existing LVM2 logical volume.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-swap-reducing-lvm2"></a>5.3.1. Reducing Swap on an LVM2 Logical Volume</h3>
                  </div>
                </div>
              </div>
              <a id="id2861538" class="indexterm"></a>
              <p>
				To reduce an LVM2 swap logical volume (assuming <code class="filename">/dev/VolGroup00/LogVol01</code> is the volume you want to extend):
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Disable swapping for the associated logical volume:
					</p>
                    <pre class="screen"><code class="command"># swapoff -v /dev/VolGroup00/LogVol01</code>
</pre>
                  </li>
                  <li>
                    <p>
						Reduce the LVM2 logical volume by 512 MB:
					</p>
                    <pre class="screen"><code class="command"># lvm lvreduce /dev/VolGroup00/LogVol01 -L -512M</code>
</pre>
                  </li>
                  <li>
                    <p>
						Format the new swap space:
					</p>
                    <pre class="screen"><code class="command"># mkswap /dev/VolGroup00/LogVol01</code>
</pre>
                  </li>
                  <li>
                    <p>
						Enable the extended logical volume:
					</p>
                    <pre class="screen"><code class="command"># swapon -va</code>
</pre>
                  </li>
                  <li>
                    <p>
						Test that the logical volume has been reduced properly:
					</p>
                    <pre class="screen"><code class="command"># cat /proc/swaps # free</code>
</pre>
                  </li>
                </ol>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-swap-removing-lvm2"></a>5.3.2. Removing an LVM2 Logical Volume for Swap</h3>
                  </div>
                </div>
              </div>
              <a id="id2876259" class="indexterm"></a>
              <p>
				The swap logical volume cannot be in use (no system locks or processes on the volume). The easiest way to achieve this it to boot your system in rescue mode. Refer to for instructions on booting into rescue mode. When prompted to mount the file system, select <span><strong class="guibutton">Skip</strong></span>.
			</p>
              <p>
				To remove a swap volume group (assuming <code class="filename">/dev/VolGroup00/LogVol02</code> is the swap volume you want to remove):
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Disable swapping for the associated logical volume:
					</p>
                    <pre class="screen"><code class="command"># swapoff -v /dev/VolGroup00/LogVol02</code>
</pre>
                  </li>
                  <li>
                    <p>
						Remove the LVM2 logical volume of size 512 MB:
					</p>
                    <pre class="screen"><code class="command"># lvm lvremove /dev/VolGroup00/LogVol02</code>
</pre>
                  </li>
                  <li>
                    <p>
						Remove the following entry from the <code class="filename">/etc/fstab</code> file:
					</p>
                    <pre class="screen"><code class="command">/dev/VolGroup00/LogVol02 swap swap defaults 0 0</code>
</pre>
                  </li>
                  <li>
                    <p>
						Test that the logical volume has been extended properly:
					</p>
                    <pre class="screen"><code class="command"># cat /proc/swaps # free</code>
</pre>
                  </li>
                </ol>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-swap-removing-file"></a>5.3.3. Removing a Swap File</h3>
                  </div>
                </div>
              </div>
              <a id="id2931488" class="indexterm"></a>
              <p>
				To remove a swap file:
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						At a shell prompt as root, execute the following command to disable the swap file (where <code class="filename">/swapfile</code> is the swap file):
					</p>
                    <pre class="screen"><code class="command"># swapoff -v /swapfile</code>
</pre>
                  </li>
                  <li>
                    <p>
						Remove its entry from the <code class="filename">/etc/fstab</code> file.
					</p>
                  </li>
                  <li>
                    <p>
						Remove the actual file:
					</p>
                    <pre class="screen"><code class="command"># rm /swapfile</code>
</pre>
                  </li>
                </ol>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-swap-moving"></a>5.4. Moving Swap Space</h2>
                </div>
              </div>
            </div>
            <a id="id2881638" class="indexterm"></a>
            <p>
			To move swap space from one location to another, follow the steps for removing swap space, and then follow the steps for adding swap space.
		</p>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-disk-storage"></a>Chapter 6. Managing Disk Storage</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-disk-storage-parted">6.1. Standard Partitions using <code class="command">parted</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-storage-parted-view-part-table">6.1.1. Viewing the Partition Table</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-storage-parted-create-part">6.1.2. Creating a Partition</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-storage-parted-remove-part">6.1.3. Removing a Partition</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-storage-parted-resize-part">6.1.4. Resizing a Partition</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-disk-storage-lvm">6.2. LVM Partition Management</a>
                </span>
              </dt>
            </dl>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-disk-storage-parted"></a>6.1. Standard Partitions using <code class="command">parted</code></h2>
                </div>
              </div>
            </div>
            <a id="id2903680" class="indexterm"></a>
            <a id="id2872022" class="indexterm"></a>
            <p>
			The utility <code class="command">parted</code> allows users to: 
			</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
						View the existing partition table
					</p>
                </li>
                <li>
                  <p>
						Change the size of existing partitions
					</p>
                </li>
                <li>
                  <p>
						Add partitions from free space or additional hard drives
					</p>
                </li>
              </ul>
            </div>
            <p>
		</p>
            <p>
			If you want to view the system's disk space usage or monitor the disk space usage, refer to <a href="#s1-sysinfo-filesystems" title="38.3. File Systems">Section 38.3, “File Systems”</a>.
		</p>
            <a id="id2871308" class="indexterm"></a>
            <p>
			By default, the <code class="filename">parted</code> package is included when installing Red Hat Enterprise Linux. To start <code class="command">parted</code>, log in as root and type the command <code class="command">parted <em class="replaceable"><code>/dev/sda</code></em></code> at a shell prompt (where <code class="command"><em class="replaceable"><code>/dev/sda</code></em></code> is the device name for the drive you want to configure).
		</p>
            <p>
			A device containing a partition must not be in use if said partition is to be removed or resized. Similarly, when creating a new partition on a device, said device must not be in use.
		</p>
            <p>
			For a device to not be in use, none of the partitions on the device can be mounted, and any swap space on the device must not be enabled.
		</p>
            <p>
			As well, the partition table should not be modified while it is in use because the kernel may not properly recognize the changes. If the partition table does not match the actual state of the mounted partitions, information could be written to the wrong partition, resulting in lost and overwritten data.
		</p>
            <p>
			The easiest way to achieve this it to boot your system in rescue mode. When prompted to mount the file system, select <span><strong class="guibutton">Skip</strong></span>.
		</p>
            <p>
			Alternately, if the drive does not contain any partitions in use (system processes that use or lock the file system from being unmounted), you can unmount them with the <code class="command">umount</code> command and turn off all the swap space on the hard drive with the <code class="command">swapoff</code> command.
		</p>
            <p>
			<a href="#table-parted-commands" title="Table 6.1. parted commands">Table 6.1, “<code class="command">parted </code> commands”</a> contains a list of commonly used <code class="command">parted</code> commands. The sections that follow explain some of these commands and arguments in more detail.
		</p>
            <a id="id2868735" class="indexterm"></a>
            <div class="table">
              <a id="table-parted-commands"></a>
              <div class="table-contents">
                <table summary="parted  commands" border="1">
                  <colgroup>
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th>
							Command
						</th>
                      <th>
							Description
						</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
							<code class="command">check <em class="replaceable"><code>minor-num</code></em></code>
						</td>
                      <td>
							Perform a simple check of the file system
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">cp <em class="replaceable"><code>from</code></em><em class="replaceable"><code>to</code></em></code>
						</td>
                      <td>
							Copy file system from one partition to another; <em class="replaceable"><code>from</code></em> and <em class="replaceable"><code>to</code></em> are the minor numbers of the partitions
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">help</code>
						</td>
                      <td>
							Display list of available commands
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">mklabel <em class="replaceable"><code>label</code></em></code>
						</td>
                      <td>
							Create a disk label for the partition table
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">mkfs <em class="replaceable"><code>minor-num</code></em><em class="replaceable"><code>file-system-type</code></em></code>
						</td>
                      <td>
							Create a file system of type <em class="replaceable"><code>file-system-type</code></em>
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">mkpart <em class="replaceable"><code>part-type</code></em><em class="replaceable"><code>fs-type</code></em><em class="replaceable"><code>start-mb</code></em><em class="replaceable"><code>end-mb</code></em></code>
						</td>
                      <td>
							Make a partition without creating a new file system
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">mkpartfs <em class="replaceable"><code>part-type</code></em><em class="replaceable"><code>fs-type</code></em><em class="replaceable"><code>start-mb</code></em><em class="replaceable"><code>end-mb</code></em></code>
						</td>
                      <td>
							Make a partition and create the specified file system
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">move <em class="replaceable"><code>minor-num</code></em><em class="replaceable"><code>start-mb</code></em><em class="replaceable"><code>end-mb</code></em></code>
						</td>
                      <td>
							Move the partition
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">name <em class="replaceable"><code>minor-num</code></em><em class="replaceable"><code>name</code></em></code>
						</td>
                      <td>
							Name the partition for Mac and PC98 disklabels only
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">print</code>
						</td>
                      <td>
							Display the partition table
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">quit</code>
						</td>
                      <td>
							Quit <code class="command">parted</code>
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">rescue</code><em class="replaceable"><code>start-mb</code></em><em class="replaceable"><code>end-mb</code></em>
						</td>
                      <td>
							Rescue a lost partition from <em class="replaceable"><code>start-mb</code></em> to <em class="replaceable"><code>end-mb</code></em>
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">resize <em class="replaceable"><code>minor-num</code></em><em class="replaceable"><code>start-mb</code></em><em class="replaceable"><code>end-mb</code></em></code>
						</td>
                      <td>
							Resize the partition from <em class="replaceable"><code>start-mb</code></em> to <em class="replaceable"><code>end-mb</code></em>
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">rm <em class="replaceable"><code>minor-num</code></em></code>
						</td>
                      <td>
							Remove the partition
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">select <em class="replaceable"><code>device</code></em></code>
						</td>
                      <td>
							Select a different device to configure
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">set <em class="replaceable"><code>minor-num</code></em><em class="replaceable"><code>flag</code></em><em class="replaceable"><code>state</code></em></code>
						</td>
                      <td>
							Set the flag on a partition; <em class="replaceable"><code>state</code></em> is either on or off
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">toggle [<em class="replaceable"><code>NUMBER</code></em> [<em class="replaceable"><code>FLAG</code></em>]</code>
						</td>
                      <td>
							Toggle the state of <em class="replaceable"><code>FLAG</code></em> on partition <em class="replaceable"><code>NUMBER</code></em>
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">unit <em class="replaceable"><code>UNIT</code></em></code>
						</td>
                      <td>
							Set the default unit to <em class="replaceable"><code>UNIT</code></em>
						</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <h6>Table 6.1. <code class="command">parted </code> commands</h6>
            </div>
            <br class="table-break" />
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-storage-parted-view-part-table"></a>6.1.1. Viewing the Partition Table</h3>
                  </div>
                </div>
              </div>
              <a id="id2927835" class="indexterm"></a>
              <a id="id2888290" class="indexterm"></a>
              <a id="id2914352" class="indexterm"></a>
              <p>
				After starting <code class="command">parted</code>, use the command <code class="command">print</code> to view the partition table. A table similar to the following appears:
			</p>
              <pre class="screen">
Model: ATA ST3160812AS (scsi)
Disk /dev/sda: 160GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos

Number  Start   End    Size    Type      File system  Flags
 1      32.3kB  107MB  107MB   primary   ext3         boot
 2      107MB   105GB  105GB   primary   ext3
 3      105GB   107GB  2147MB  primary   linux-swap
 4      107GB   160GB  52.9GB  extended		      root
 5      107GB   133GB  26.2GB  logical   ext3
 6      133GB   133GB  107MB   logical   ext3
 7      133GB   160GB  26.6GB  logical                lvm
</pre>
              <p>
				The first line contains the disk type, manufacturer, model number and interface, and the second line displays the disk label type. The remaining output below the fourth line shows the partition table.
			</p>
              <p>
				In the partition table, the <em class="firstterm">Minor</em> number is the partition <code class="computeroutput">number</code>. For example, the partition with minor number 1 corresponds to <code class="filename">/dev/sda1</code>. The <code class="computeroutput">Start</code> and <code class="computeroutput">End</code> values are in megabytes. Valid <code class="computeroutput">Type</code> are metadata, free, primary, extended, or logical. The <code class="computeroutput">Filesystem</code> is the file system type, which can be any of the following:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						ext2
					</p>
                  </li>
                  <li>
                    <p>
						ext3
					</p>
                  </li>
                  <li>
                    <p>
						fat16
					</p>
                  </li>
                  <li>
                    <p>
						fat32
					</p>
                  </li>
                  <li>
                    <p>
						hfs
					</p>
                  </li>
                  <li>
                    <p>
						jfs
					</p>
                  </li>
                  <li>
                    <p>
						linux-swap
					</p>
                  </li>
                  <li>
                    <p>
						ntfs
					</p>
                  </li>
                  <li>
                    <p>
						reiserfs
					</p>
                  </li>
                  <li>
                    <p>
						hp-ufs
					</p>
                  </li>
                  <li>
                    <p>
						sun-ufs
					</p>
                  </li>
                  <li>
                    <p>
						xfs
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If a <code class="computeroutput">Filesystem</code> of a device shows no value, this means that its file system type is unknown.
			</p>
              <p>
				The <span><strong class="guilabel">Flags</strong></span> column lists the flags set for the partition. Available flags are boot, root, swap, hidden, raid, lvm, or lba.
			</p>
              <div class="tip">
                <h2>Tip</h2>
                <a id="id2909530" class="indexterm"></a>
                <p>
					To select a different device without having to restart <code class="command">parted</code>, use the <code class="command">select</code> command followed by the device name (for example, <code class="filename">/dev/sda</code>). Doing so allows you to view or configure the partition table of a device.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-storage-parted-create-part"></a>6.1.2. Creating a Partition</h3>
                  </div>
                </div>
              </div>
              <a id="id2904492" class="indexterm"></a>
              <a id="id2904509" class="indexterm"></a>
              <div class="warning">
                <h2>Warning</h2>
                <p>
					Do not attempt to create a partition on a device that is in use.
				</p>
              </div>
              <p>
				Before creating a partition, boot into rescue mode (or unmount any partitions on the device and turn off any swap space on the device).
			</p>
              <p>
				Start <code class="command">parted</code>, where /dev/<em class="replaceable"><code>sda</code></em> is the device on which to create the partition:
			</p>
              <pre class="screen"><code class="command">parted /dev/<em class="replaceable"><code>sda</code></em></code>
</pre>
              <p>
				View the current partition table to determine if there is enough free space:
			</p>
              <pre class="screen"><code class="command">print</code>
</pre>
              <p>
				If there is not enough free space, you can resize an existing partition. Refer to <a href="#s2-disk-storage-parted-resize-part" title="6.1.4. Resizing a Partition">Section 6.1.4, “Resizing a Partition”</a> for details.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-disk-storage-parted-create-part-mkpart"></a>6.1.2.1. Making the Partition</h4>
                    </div>
                  </div>
                </div>
                <a id="id2904602" class="indexterm"></a>
                <a id="id2904622" class="indexterm"></a>
                <p>
					From the partition table, determine the start and end points of the new partition and what partition type it should be. You can only have four primary partitions (with no extended partition) on a device. If you need more than four partitions, you can have three primary partitions, one extended partition, and multiple logical partitions within the extended. For an overview of disk partitions, refer to the appendix <em class="citetitle">An Introduction to Disk Partitions</em> in the <em class="citetitle">Red Hat Enterprise Linux Installation Guide</em>.
				</p>
                <p>
					For example, to create a primary partition with an ext3 file system from 1024 megabytes until 2048 megabytes on a hard drive type the following command:
				</p>
                <pre class="screen"><code class="command">mkpart primary ext3 1024 2048</code>
</pre>
                <div class="tip">
                  <h2>Tip</h2>
                  <p>
						If you use the <code class="command">mkpartfs</code> command instead, the file system is created after the partition is created. However, <code class="command">parted</code> does not support creating an ext3 file system. Thus, if you wish to create an ext3 file system, use <code class="command">mkpart</code> and create the file system with the <code class="command">mkfs</code> command as described later.
					</p>
                </div>
                <p>
					The changes start taking place as soon as you press <span><strong class="keycap">Enter</strong></span>, so review the command before executing to it.
				</p>
                <p>
					After creating the partition, use the <code class="command">print</code> command to confirm that it is in the partition table with the correct partition type, file system type, and size. Also remember the minor number of the new partition so that you can label it. You should also view the output of
				</p>
                <pre class="screen"><code class="command">cat /proc/partitions</code>
</pre>
                <p>
					to make sure the kernel recognizes the new partition.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-disk-storage-parted-create-part-mkfs"></a>6.1.2.2. Formating the Partition</h4>
                    </div>
                  </div>
                </div>
                <a id="id2858652" class="indexterm"></a>
                <a id="id2858673" class="indexterm"></a>
                <p>
					The partition still does not have a file system. Create the file system:
				</p>
                <pre class="screen"><code class="command">/sbin/mkfs -t ext3 /dev/<em class="replaceable"><code>sda6</code></em></code>
</pre>
                <div class="warning">
                  <h2>Warning</h2>
                  <p>
						Formatting the partition permanently destroys any data that currently exists on the partition.
					</p>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-disk-storage-parted-create-part-e2label"></a>6.1.2.3. Labeling the Partition</h4>
                    </div>
                  </div>
                </div>
                <a id="id2916631" class="indexterm"></a>
                <a id="id2916652" class="indexterm"></a>
                <p>
					Next, give the partition a label. For example, if the new partition is <code class="filename">/dev/sda6</code> and you want to label it <code class="computeroutput">/work</code>:
				</p>
                <pre class="screen"><code class="command">e2label /dev/sda6 /work</code>
</pre>
                <p>
					By default, the installation program uses the mount point of the partition as the label to make sure the label is unique. You can use any label you want.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-disk-storage-parted-create-part-mp"></a>6.1.2.4. Creating the Mount Point</h4>
                    </div>
                  </div>
                </div>
                <p>
					As root, create the mount point:
				</p>
                <pre class="screen"><code class="command">mkdir /work</code>
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-disk-storage-parted-create-part-fstab"></a>6.1.2.5. Add to <code class="filename">/etc/fstab</code></h4>
                    </div>
                  </div>
                </div>
                <p>
					As root, edit the <code class="filename">/etc/fstab</code> file to include the new partition. The new line should look similar to the following:
				</p>
                <pre class="screen"><code class="computeroutput">LABEL=/work /work ext3 defaults 1 2</code>
</pre>
                <p>
					The first column should contain <code class="computeroutput">LABEL=</code> followed by the label you gave the partition. The second column should contain the mount point for the new partition, and the next column should be the file system type (for example, ext3 or swap). If you need more information about the format, read the man page with the command <code class="command">man fstab</code>.
				</p>
                <p>
					If the fourth column is the word <code class="computeroutput">defaults</code>, the partition is mounted at boot time. To mount the partition without rebooting, as root, type the command:
				</p>
                <pre class="screen"><code class="command">mount /work</code>
</pre>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-storage-parted-remove-part"></a>6.1.3. Removing a Partition</h3>
                  </div>
                </div>
              </div>
              <a id="id2914610" class="indexterm"></a>
              <a id="id2914627" class="indexterm"></a>
              <div class="warning">
                <h2>Warning</h2>
                <p>
					Do not attempt to remove a partition on a device that is in use.
				</p>
              </div>
              <p>
				Before removing a partition, boot into rescue mode (or unmount any partitions on the device and turn off any swap space on the device).
			</p>
              <p>
				Start <code class="command">parted</code>, where /dev/<em class="replaceable"><code>sda</code></em> is the device on which to remove the partition:
			</p>
              <pre class="screen"><code class="command">parted /dev/<em class="replaceable"><code>sda</code></em></code>
</pre>
              <p>
				View the current partition table to determine the minor number of the partition to remove:
			</p>
              <pre class="screen"><code class="command">print</code>
</pre>
              <p>
				Remove the partition with the command <code class="command">rm</code>. For example, to remove the partition with minor number 3:
			</p>
              <pre class="screen"><code class="command">rm 3</code>
</pre>
              <p>
				The changes start taking place as soon as you press <span><strong class="keycap">Enter</strong></span>, so review the command before committing to it.
			</p>
              <p>
				After removing the partition, use the <code class="command">print</code> command to confirm that it is removed from the partition table. You should also view the output of
			</p>
              <pre class="screen"><code class="command">cat /proc/partitions</code>
</pre>
              <p>
				to make sure the kernel knows the partition is removed.
			</p>
              <p>
				The last step is to remove it from the <code class="filename">/etc/fstab</code> file. Find the line that declares the removed partition, and remove it from the file.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-storage-parted-resize-part"></a>6.1.4. Resizing a Partition</h3>
                  </div>
                </div>
              </div>
              <a id="id2925188" class="indexterm"></a>
              <a id="id2925205" class="indexterm"></a>
              <div class="warning">
                <h2>Warning</h2>
                <p>
					Do not attempt to resize a partition on a device that is in use.
				</p>
              </div>
              <p>
				Before resizing a partition, boot into rescue mode (or unmount any partitions on the device and turn off any swap space on the device).
			</p>
              <p>
				Start <code class="command">parted</code>, where /dev/<em class="replaceable"><code>sda</code></em> is the device on which to resize the partition:
			</p>
              <pre class="screen"><code class="command">parted /dev/<em class="replaceable"><code>sda</code></em></code>
</pre>
              <p>
				View the current partition table to determine the minor number of the partition to resize as well as the start and end points for the partition:
			</p>
              <pre class="screen"><code class="command">print</code>
</pre>
              <p>
				To resize the partition, use the <code class="command">resize</code> command followed by the minor number for the partition, the starting place in megabytes, and the end place in megabytes. For example:
			</p>
              <pre class="screen"><code class="command">resize 3 1024 2048</code>
</pre>
              <div class="warning">
                <h2>Warning</h2>
                <p>
					A partition cannot be made larger than the space available on the device
				</p>
              </div>
              <p>
				After resizing the partition, use the <code class="command">print</code> command to confirm that the partition has been resized correctly, is the correct partition type, and is the correct file system type.
			</p>
              <p>
				After rebooting the system into normal mode, use the command <code class="command">df</code> to make sure the partition was mounted and is recognized with the new size.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-disk-storage-lvm"></a>6.2. LVM Partition Management</h2>
                </div>
              </div>
            </div>
            <a id="id2934995" class="indexterm"></a>
            <p>
			The following commands can be found by issuing <code class="command">lvm help</code> at a command prompt.
		</p>
            <div class="table">
              <a id="table-lvm-commands"></a>
              <div class="table-contents">
                <table summary="LVM commands" border="1">
                  <colgroup>
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th>
							Command
						</th>
                      <th>
							Description
						</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
							<code class="command">dumpconfig</code>
						</td>
                      <td>
							Dump the active configuration
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">formats</code>
						</td>
                      <td>
							List the available metadata formats
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">help</code>
						</td>
                      <td>
							Display the help commands
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvchange</code>
						</td>
                      <td>
							Change the attributes of logical volume(s)
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvcreate</code>
						</td>
                      <td>
							Create a logical volume
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvdisplay</code>
						</td>
                      <td>
							Display information about a logical volume
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvextend</code>
						</td>
                      <td>
							Add space to a logical volume
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvmchange</code>
						</td>
                      <td>
							<span class="emphasis"><em>Due to use of the device mapper, this command has been deprecated</em></span>
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvmdiskscan</code>
						</td>
                      <td>
							List devices that may be used as physical volumes
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvmsadc</code>
						</td>
                      <td>
							Collect activity data
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvmsar</code>
						</td>
                      <td>
							Create activity report
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvreduce</code>
						</td>
                      <td>
							Reduce the size of a logical volume
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvremove</code>
						</td>
                      <td>
							Remove logical volume(s) from the system
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvrename</code>
						</td>
                      <td>
							Rename a logical volume
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvresize</code>
						</td>
                      <td>
							Resize a logical volume
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvs</code>
						</td>
                      <td>
							Display information about logical volumes
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">lvscan</code>
						</td>
                      <td>
							List all logical volumes in all volume groups
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvchange</code>
						</td>
                      <td>
							Change attributes of physical volume(s)
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvcreate</code>
						</td>
                      <td>
							Initialize physical volume(s) for use by LVM
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvdata</code>
						</td>
                      <td>
							Display the on-disk metadata for physical volume(s)
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvdisplay</code>
						</td>
                      <td>
							Display various attributes of physical volume(s)
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvmove</code>
						</td>
                      <td>
							Move extents from one physical volume to another
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvremove</code>
						</td>
                      <td>
							Remove LVM label(s) from physical volume(s)
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvresize</code>
						</td>
                      <td>
							Resize a physical volume in use by a volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvs</code>
						</td>
                      <td>
							Display information about physical volumes
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">pvscan</code>
						</td>
                      <td>
							List all physical volumes
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">segtypes</code>
						</td>
                      <td>
							List available segment types
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgcfgbackup</code>
						</td>
                      <td>
							Backup volume group configuration
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgcfgrestore</code>
						</td>
                      <td>
							Restore volume group configuration
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgchange</code>
						</td>
                      <td>
							Change volume group attributes
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgck</code>
						</td>
                      <td>
							Check the consistency of a volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgconvert</code>
						</td>
                      <td>
							Change volume group metadata format
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgcreate</code>
						</td>
                      <td>
							Create a volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgdisplay</code>
						</td>
                      <td>
							Display volume group information
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgexport</code>
						</td>
                      <td>
							Unregister a volume group from the system
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgextend</code>
						</td>
                      <td>
							Add physical volumes to a volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgimport</code>
						</td>
                      <td>
							Register exported volume group with system
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgmerge</code>
						</td>
                      <td>
							Merge volume groups
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgmknodes</code>
						</td>
                      <td>
							Create the special files for volume group devices in /dev/
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgreduce</code>
						</td>
                      <td>
							Remove a physical volume from a volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgremove</code>
						</td>
                      <td>
							Remove a volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgrename</code>
						</td>
                      <td>
							Rename a volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgs</code>
						</td>
                      <td>
							Display information about volume groups
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgscan</code>
						</td>
                      <td>
							Search for all volume groups
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">vgsplit</code>
						</td>
                      <td>
							Move physical volumes into a new volume group
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="command">version</code>
						</td>
                      <td>
							Display software and driver version information
						</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <h6>Table 6.2. <code class="command">LVM</code> commands</h6>
            </div>
            <br class="table-break" />
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-disk-quotas"></a>Chapter 7. Implementing Disk Quotas</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-disk-quotas-configuring">7.1. Configuring Disk Quotas</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-enabling">7.1.1. Enabling Quotas</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-remounting">7.1.2. Remounting the File Systems</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-create-files">7.1.3. Creating the Quota Database Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-assigning-user">7.1.4. Assigning Quotas per User</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-assigning-group">7.1.5. Assigning Quotas per Group</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-assigning-file-system">7.1.6. Setting the Grace Period for Soft Limits</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-disk-quotas-managing">7.2. Managing Disk Quotas</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quota-enabling">7.2.1. Enabling and Disabling</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-managing-rpt">7.2.2. Reporting on Disk Quotas</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-managing-accurate">7.2.3. Keeping Quotas Accurate</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-disk-quotas-additional-resources">7.3. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-install-docs">7.3.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-disk-quotas-related-book">7.3.2. Related Books</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2964460" class="indexterm"></a>
          <a id="id2914048" class="indexterm"></a>
          <p>
		Disk space can be restricted by implementing disk quotas which alert a system administrator before a user consumes too much disk space or a partition becomes full.
	</p>
          <p>
		Disk quotas can be configured for individual users as well as user groups. This makes it possible to manage the space allocated for user-specific files (such as email) separately from the space allocated to the projects a user works on (assuming the projects are given their own groups).
	</p>
          <p>
		In addition, quotas can be set not just to control the number of disk blocks consumed but to control the number of inodes (data structures that contain information about files in UNIX file systems). Because inodes are used to contain file-related information, this allows control over the number of files that can be created.
	</p>
          <p>
		The <code class="command">quota</code> RPM must be installed to implement disk quotas. </p>
          <div class="note">
            <h2>Note</h2>
            <p>
		For more information on installing RPM packages, refer to <a href="#pt-pkg-management" title="Part II. Package Management">Part II, “Package Management”</a>.
	</p>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-disk-quotas-configuring"></a>7.1. Configuring Disk Quotas</h2>
                </div>
              </div>
            </div>
            <a id="id2919607" class="indexterm"></a>
            <p>
			To implement disk quotas, use the following steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Enable quotas per file system by modifying the <code class="filename">/etc/fstab</code> file.
				</p>
                </li>
                <li>
                  <p>
					Remount the file system(s).
				</p>
                </li>
                <li>
                  <p>
					Create the quota database files and generate the disk usage table.
				</p>
                </li>
                <li>
                  <p>
					Assign quota policies.
				</p>
                </li>
              </ol>
            </div>
            <p>
			Each of these steps is discussed in detail in the following sections.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-enabling"></a>7.1.1. Enabling Quotas</h3>
                  </div>
                </div>
              </div>
              <a id="id2909234" class="indexterm"></a>
              <a id="id2930221" class="indexterm"></a>
              <p>
				As root, using a text editor, edit the <code class="filename">/etc/fstab</code> file. Add the <code class="command">usrquota</code> and/or <code class="command">grpquota</code> options to the file systems that require quotas:
			</p>
              <pre class="screen"><code class="computeroutput"> /dev/VolGroup00/LogVol00 / ext3 defaults 1 1 LABEL=/boot /boot ext3 defaults 1 2 none /dev/pts devpts gid=5,mode=620 0 0 none /dev/shm tmpfs defaults 0 0 none /proc proc defaults 0 0 none /sys sysfs defaults 0 0 /dev/VolGroup00/LogVol02 /home ext3 defaults,usrquota,grpquota 1 2 /dev/VolGroup00/LogVol01 swap swap defaults 0 0 . . . </code>
</pre>
              <p>
				In this example, the <code class="filename">/home</code> file system has both user and group quotas enabled.
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					The following examples assume that a separate <code class="command">/home</code> partition was created during the installation of Red Hat Enterprise Linux. The root (<code class="command">/</code>) partition can be used for setting quota policies in the <code class="filename">/etc/fstab</code> file.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-remounting"></a>7.1.2. Remounting the File Systems</h3>
                  </div>
                </div>
              </div>
              <p>
				After adding the <code class="command">usrquota</code> and/or <code class="command">grpquota</code> options, remount each file system whose <code class="filename">fstab</code> entry has been modified. If the file system is not in use by any process, use one of the following methods:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Issue the <code class="command">umount</code> command followed by the <code class="command">mount</code> command to remount the file system.(See the <code class="command">man</code> page for both <code class="command">umount</code> and <code class="command">mount</code> for the specific syntax for mounting and unmounting various filesystem types.)
					</p>
                  </li>
                  <li>
                    <p>
						Issue the <code class="command">mount -o remount <em class="replaceable"><code>&lt;file-system&gt;</code></em></code> command (where <code class="command"><em class="replaceable"><code>&lt;file-system&gt;</code></em></code> is the name of the file system) to remount the file system. For example, to remount the <code class="filename">/home</code> file system, the command to issue is <code class="command">mount -o remount /home</code>.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If the file system is currently in use, the easiest method for remounting the file system is to reboot the system.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-create-files"></a>7.1.3. Creating the Quota Database Files</h3>
                  </div>
                </div>
              </div>
              <a id="id2907633" class="indexterm"></a>
              <a id="id2939789" class="indexterm"></a>
              <a id="id2853010" class="indexterm"></a>
              <p>
				After each quota-enabled file system is remounted, the system is capable of working with disk quotas. However, the file system itself is not yet ready to support quotas. The next step is to run the <code class="command">quotacheck</code> command.
			</p>
              <p>
				The <code class="command">quotacheck</code> command examines quota-enabled file systems and builds a table of the current disk usage per file system. The table is then used to update the operating system's copy of disk usage. In addition, the file system's disk quota files are updated.
			</p>
              <p>
				To create the quota files (<code class="filename">aquota.user</code> and <code class="filename">aquota.group</code>) on the file system, use the <code class="option">-c</code> option of the <code class="command">quotacheck</code> command. For example, if user and group quotas are enabled for the <code class="filename">/home</code> file system, create the files in the <code class="filename">/home</code> directory:
			</p>
              <pre class="screen"><code class="command">quotacheck -cug /home</code>
</pre>
              <p>
				The <code class="option">-c</code> option specifies that the quota files should be created for each file system with quotas enabled, the <code class="option">-u</code> option specifies to check for user quotas, and the <code class="option">-g</code> option specifies to check for group quotas.
			</p>
              <p>
				If neither the <code class="option">-u</code> or <code class="option">-g</code> options are specified, only the user quota file is created. If only <code class="option">-g</code> is specified, only the group quota file is created.
			</p>
              <p>
				After the files are created, run the following command to generate the table of current disk usage per file system with quotas enabled:
			</p>
              <pre class="screen"><code class="command">quotacheck -avug</code>
</pre>
              <p>
				The options used are as follows:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="option">a</code> — Check all quota-enabled, locally-mounted file systems
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">v</code> — Display verbose status information as the quota check proceeds
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">u</code> — Check user disk quota information
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">g</code> — Check group disk quota information
					</p>
                  </li>
                </ul>
              </div>
              <p>
				After <code class="command">quotacheck</code> has finished running, the quota files corresponding to the enabled quotas (user and/or group) are populated with data for each quota-enabled locally-mounted file system such as <code class="filename">/home</code>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-assigning-user"></a>7.1.4. Assigning Quotas per User</h3>
                  </div>
                </div>
              </div>
              <a id="id2889130" class="indexterm"></a>
              <p>
				The last step is assigning the disk quotas with the <code class="command">edquota</code> command.
			</p>
              <p>
				To configure the quota for a user, as root in a shell prompt, execute the command:
			</p>
              <pre class="screen"><code class="command">edquota <em class="replaceable"><code>username</code></em></code>
</pre>
              <p>
				Perform this step for each user who needs a quota. For example, if a quota is enabled in <code class="filename">/etc/fstab</code> for the <code class="filename">/home</code> partition (<code class="filename">/dev/VolGroup00/LogVol02</code> in the example below) and the command <code class="command">edquota testuser</code> is executed, the following is shown in the editor configured as the default for the system:
			</p>
              <pre class="screen"><code class="computeroutput"> Disk quotas for user testuser (uid 501): Filesystem blocks soft hard inodes soft hard /dev/VolGroup00/LogVol02 440436 0 0 37418 0 0 </code>
</pre>
              <div class="note">
                <h2>Note</h2>
                <p>
					The text editor defined by the <code class="envar">EDITOR</code> environment variable is used by <code class="command">edquota</code>. To change the editor, set the <code class="envar">EDITOR</code> environment variable in your <code class="filename">~/.bash_profile</code> file to the full path of the editor of your choice.
				</p>
              </div>
              <p>
				The first column is the name of the file system that has a quota enabled for it. The second column shows how many blocks the user is currently using. The next two columns are used to set soft and hard block limits for the user on the file system. The <code class="computeroutput">inodes</code> column shows how many inodes the user is currently using. The last two columns are used to set the soft and hard inode limits for the user on the file system.
			</p>
              <a id="id2943178" class="indexterm"></a>
              <p>
				The hard block limit is the absolute maximum amount of disk space that a user or group can use. Once this limit is reached, no further disk space can be used.
			</p>
              <a id="id2883360" class="indexterm"></a>
              <a id="id2966852" class="indexterm"></a>
              <p>
				The soft block limit defines the maximum amount of disk space that can be used. However, unlike the hard limit, the soft limit can be exceeded for a certain amount of time. That time is known as the <em class="firstterm">grace period</em>. The grace period can be expressed in seconds, minutes, hours, days, weeks, or months.
			</p>
              <p>
				If any of the values are set to 0, that limit is not set. In the text editor, change the desired limits. For example:
			</p>
              <pre class="screen"><code class="computeroutput">Disk quotas for user testuser (uid 501): Filesystem blocks soft hard inodes soft hard /dev/VolGroup00/LogVol02 440436 500000 550000 37418 0 0</code>
</pre>
              <p>
				To verify that the quota for the user has been set, use the command:
			</p>
              <pre class="screen"><code class="command">quota testuser</code>
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-assigning-group"></a>7.1.5. Assigning Quotas per Group</h3>
                  </div>
                </div>
              </div>
              <a id="id2959004" class="indexterm"></a>
              <p>
				Quotas can also be assigned on a per-group basis. For example, to set a group quota for the <code class="computeroutput">devel</code> group (the group must exist prior to setting the group quota), use the command:
			</p>
              <pre class="screen"><code class="command">edquota -g devel</code>
</pre>
              <p>
				This command displays the existing quota for the group in the text editor:
			</p>
              <pre class="screen"><code class="computeroutput"> Disk quotas for group devel (gid 505): Filesystem blocks soft hard inodes soft hard /dev/VolGroup00/LogVol02 440400 0 0 37418 0 0 </code>
</pre>
              <p>
				Modify the limits, then save the file.
			</p>
              <p>
				To verify that the group quota has been set, use the command:
			</p>
              <pre class="screen"><code class="command">quota -g devel</code>
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-assigning-file-system"></a>7.1.6. Setting the Grace Period for Soft Limits</h3>
                  </div>
                </div>
              </div>
              <a id="id2952208" class="indexterm"></a>
              <p>
				If soft limits are set for a given quota (whether inode or block and for either users or groups) the grace period, or amount of time a soft limit can be exceeded, should be set with the command:
			</p>
              <pre class="screen"><code class="command">edquota -t</code>
</pre>
              <p>
				While other <code class="command">edquota</code> commands operate on a particular user's or group's quota, the <code class="command">-t</code> option operates on every filesystem with quotas enabled.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-disk-quotas-managing"></a>7.2. Managing Disk Quotas</h2>
                </div>
              </div>
            </div>
            <a id="id2957306" class="indexterm"></a>
            <p>
			If quotas are implemented, they need some maintenance — mostly in the form of watching to see if the quotas are exceeded and making sure the quotas are accurate.
		</p>
            <p>
			Of course, if users repeatedly exceed their quotas or consistently reach their soft limits, a system administrator has a few choices to make depending on what type of users they are and how much disk space impacts their work. The administrator can either help the user determine how to use less disk space or increase the user's disk quota.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quota-enabling"></a>7.2.1. Enabling and Disabling</h3>
                  </div>
                </div>
              </div>
              <a id="id2942817" class="indexterm"></a>
              <a id="id2889730" class="indexterm"></a>
              <p>
				It is possible to disable quotas without setting them to 0. To turn all user and group quotas off, use the following command:
			</p>
              <pre class="screen"><code class="command">quotaoff -vaug</code>
</pre>
              <p>
				If neither the <code class="option">-u</code> or <code class="option">-g</code> options are specified, only the user quotas are disabled. If only <code class="option">-g</code> is specified, only group quotas are disabled. The <code class="command">-v</code> switch causes verbose status information to display as the command executes.
			</p>
              <a id="id2948310" class="indexterm"></a>
              <a id="id2956770" class="indexterm"></a>
              <p>
				To enable quotas again, use the <code class="command">quotaon</code> command with the same options.
			</p>
              <p>
				For example, to enable user and group quotas for all file systems, use the following command:
			</p>
              <pre class="screen"><code class="command">quotaon -vaug</code>
</pre>
              <p>
				To enable quotas for a specific file system, such as <code class="filename">/home</code>, use the following command:
			</p>
              <pre class="screen"><code class="command">quotaon -vug /home</code>
</pre>
              <p>
				If neither the <code class="option">-u</code> or <code class="option">-g</code> options are specified, only the user quotas are enabled. If only <code class="option">-g</code> is specified, only group quotas are enabled.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-managing-rpt"></a>7.2.2. Reporting on Disk Quotas</h3>
                  </div>
                </div>
              </div>
              <a id="id2960534" class="indexterm"></a>
              <p>
				Creating a disk usage report entails running the <code class="command">repquota</code> utility. For example, the command <code class="command">repquota /home</code> produces this output:
			</p>
              <pre class="screen"><code class="computeroutput">*** Report for user quotas on device /dev/mapper/VolGroup00-LogVol02 Block grace time: 7days; Inode grace time: 7days Block limits File limits User used soft hard grace used soft hard grace ---------------------------------------------------------------------- root -- 36 0 0 4 0 0 kristin -- 540 0 0 125 0 0 testuser -- 440400 500000 550000 37418 0 0</code>
</pre>
              <p>
				To view the disk usage report for all (option <code class="option">-a</code>) quota-enabled file systems, use the command:
			</p>
              <pre class="screen"><code class="command">repquota -a</code>
</pre>
              <p>
				While the report is easy to read, a few points should be explained. The <code class="computeroutput">--</code> displayed after each user is a quick way to determine whether the block or inode limits have been exceeded. If either soft limit is exceeded, a <code class="computeroutput">+</code> appears in place of the corresponding <code class="computeroutput">-</code>; the first <code class="computeroutput">-</code> represents the block limit, and the second represents the inode limit.
			</p>
              <p>
				The <code class="computeroutput">grace</code> columns are normally blank. If a soft limit has been exceeded, the column contains a time specification equal to the amount of time remaining on the grace period. If the grace period has expired, <code class="computeroutput">none</code> appears in its place.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-managing-accurate"></a>7.2.3. Keeping Quotas Accurate</h3>
                  </div>
                </div>
              </div>
              <a id="id2959741" class="indexterm"></a>
              <a id="id2948921" class="indexterm"></a>
              <p>
				Whenever a file system is not unmounted cleanly (due to a system crash, for example), it is necessary to run <code class="command">quotacheck</code>. However, <code class="command">quotacheck</code> can be run on a regular basis, even if the system has not crashed. Running the following command periodically keeps the quotas more accurate (the options used have been described in <a href="#s2-disk-quotas-enabling" title="7.1.1. Enabling Quotas">Section 7.1.1, “Enabling Quotas”</a>):
			</p>
              <pre class="screen"><code class="command">quotacheck -avug</code>
</pre>
              <p>
				The easiest way to run it periodically is to use <code class="command">cron</code>. As root, either use the <code class="command">crontab -e</code> command to schedule a periodic <code class="command">quotacheck</code> or place a script that runs <code class="command">quotacheck</code> in any one of the following directories (using whichever interval best matches your needs):
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="filename">/etc/cron.hourly</code>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">/etc/cron.daily</code>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">/etc/cron.weekly</code>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">/etc/cron.monthly</code>
					</p>
                  </li>
                </ul>
              </div>
              <p>
				The most accurate quota statistics can be obtained when the file system(s) analyzed are not in active use. Thus, the cron task should be schedule during a time where the file system(s) are used the least. If this time is various for different file systems with quotas, run <code class="command">quotacheck</code> for each file system at different times with multiple cron tasks.
			</p>
              <p>
				Refer to <a href="#ch-autotasks" title="Chapter 35. Automated Tasks">Chapter 35, <i>Automated Tasks</i></a> for more information about configuring <code class="command">cron</code>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-disk-quotas-additional-resources"></a>7.3. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2888712" class="indexterm"></a>
            <p>
			For more information on disk quotas, refer to the following resources.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-install-docs"></a>7.3.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						The <code class="command">quotacheck</code>, <code class="command">edquota</code>, <code class="command">repquota</code>, <code class="command">quota</code>, <code class="command">quotaon</code>, and <code class="command">quotaoff</code> man pages
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-disk-quotas-related-book"></a>7.3.2. Related Books</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<em class="citetitle">Red Hat Enterprise Linux Introduction to System Administration</em>; Red Hat, Inc. — Available at <a href="http://www.redhat.com/docs/">http://www.redhat.com/docs/</a> and on the Documentation CD, this manual contains background information on storage management (including disk quotas) for new Red Hat Enterprise Linux system administrators.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-acls"></a>Chapter 8. Access Control Lists</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-acls-mounting">8.1. Mounting File Systems</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-acls-mounting-nfs">8.1.1. NFS</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-acls-setting">8.2. Setting Access ACLs</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-acls-setting-default">8.3. Setting Default ACLs</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-acls-retrieving">8.4. Retrieving ACLs</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-acls-archiving">8.5. Archiving File Systems With ACLs</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-acls-compat-older">8.6. Compatibility with Older Systems</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-acls-additional-resources">8.7. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-acls-installed-docs">8.7.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-acls-useful-websites">8.7.2. Useful Websites</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2959610" class="indexterm"></a>
          <p>
		Files and directories have permission sets for the owner of the file, the group associated with the file, and all other users for the system. However, these permission sets have limitations. For example, different permissions cannot be configured for different users. Thus, <em class="firstterm">Access Control Lists</em> (ACLs) were implemented.
	</p>
          <a id="id2873690" class="indexterm"></a>
          <a id="id2925359" class="indexterm"></a>
          <p>
		The Red Hat Enterprise Linux 5 kernel provides ACL support for the ext3 file system and NFS-exported file systems. ACLs are also recognized on ext3 file systems accessed via Samba.
	</p>
          <p>
		Along with support in the kernel, the <code class="filename">acl</code> package is required to implement ACLs. It contains the utilities used to add, modify, remove, and retrieve ACL information.
	</p>
          <p>
		The <code class="command">cp</code> and <code class="command">mv</code> commands copy or move any ACLs associated with files and directories.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-acls-mounting"></a>8.1. Mounting File Systems</h2>
                </div>
              </div>
            </div>
            <a id="id2872608" class="indexterm"></a>
            <p>
			Before using ACLs for a file or directory, the partition for the file or directory must be mounted with ACL support. If it is a local ext3 file system, it can mounted with the following command:
		</p>
            <pre class="screen"><code class="command">mount -t ext3 -o acl <em class="replaceable"><code>&lt;device-name&gt;</code></em><em class="replaceable"><code>&lt;partition&gt;</code></em></code>
</pre>
            <p>
			For example:
		</p>
            <pre class="screen"><code class="command">mount -t ext3 -o acl /dev/VolGroup00/LogVol02 /work</code>
</pre>
            <p>
			Alternatively, if the partition is listed in the <code class="filename">/etc/fstab</code> file, the entry for the partition can include the <code class="computeroutput">acl</code> option:
		</p>
            <pre class="screen"><code class="computeroutput">LABEL=/work /work ext3 acl 1 2</code>
</pre>
            <p>
			If an ext3 file system is accessed via Samba and ACLs have been enabled for it, the ACLs are recognized because Samba has been compiled with the <code class="option">--with-acl-support</code> option. No special flags are required when accessing or mounting a Samba share.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-acls-mounting-nfs"></a>8.1.1. NFS</h3>
                  </div>
                </div>
              </div>
              <a id="id2918506" class="indexterm"></a>
              <p>
				By default, if the file system being exported by an NFS server supports ACLs and the NFS client can read ACLs, ACLs are utilized by the client system.
			</p>
              <p>
				To disable ACLs on NFS shares when configuring the server, include the <code class="computeroutput">no_acl</code> option in the <code class="filename">/etc/exports</code> file. To disable ACLs on an NFS share when mounting it on a client, mount it with the <code class="computeroutput">no_acl</code> option via the command line or the <code class="filename">/etc/fstab</code> file.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-acls-setting"></a>8.2. Setting Access ACLs</h2>
                </div>
              </div>
            </div>
            <a id="id2907024" class="indexterm"></a>
            <a id="id2853496" class="indexterm"></a>
            <p>
			There are two types of ACLs: <em class="firstterm">access ACLs</em> and <em class="firstterm">default ACLs</em>. An access ACL is the access control list for a specific file or directory. A default ACL can only be associated with a directory; if a file within the directory does not have an access ACL, it uses the rules of the default ACL for the directory. Default ACLs are optional.
		</p>
            <p>
			ACLs can be configured:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Per user
				</p>
                </li>
                <li>
                  <p>
					Per group
				</p>
                </li>
                <li>
                  <p>
					Via the effective rights mask
				</p>
                </li>
                <li>
                  <p>
					For users not in the user group for the file
				</p>
                </li>
              </ol>
            </div>
            <a id="id2877253" class="indexterm"></a>
            <a id="id2914035" class="indexterm"></a>
            <p>
			The <code class="command">setfacl</code> utility sets ACLs for files and directories. Use the <code class="computeroutput">-m</code> option to add or modify the ACL of a file or directory:
		</p>
            <pre class="screen"><code class="command">setfacl -m <em class="replaceable"><code>&lt;rules&gt;</code></em><em class="replaceable"><code>&lt;files&gt;</code></em></code>
</pre>
            <p>
			Rules (<em class="replaceable"><code>&lt;rules&gt;</code></em>) must be specified in the following formats. Multiple rules can be specified in the same command if they are separated by commas.
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">
                    <code class="computeroutput">u:<em class="replaceable"><code>&lt;uid&gt;</code></em>:<em class="replaceable"><code>&lt;perms&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Sets the access ACL for a user. The user name or UID may be specified. The user may be any valid user on the system.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">g:<em class="replaceable"><code>&lt;gid&gt;</code></em>:<em class="replaceable"><code>&lt;perms&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Sets the access ACL for a group. The group name or GID may be specified. The group may be any valid group on the system.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">m:<em class="replaceable"><code>&lt;perms&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Sets the effective rights mask. The mask is the union of all permissions of the owning group and all of the user and group entries.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">o:<em class="replaceable"><code>&lt;perms&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Sets the access ACL for users other than the ones in the group for the file.
					</p>
                </dd>
              </dl>
            </div>
            <p>
			White space is ignored. Permissions (<em class="replaceable"><code>&lt;perms&gt;</code></em>) must be a combination of the characters <code class="computeroutput">r</code>, <code class="computeroutput">w</code>, and <code class="computeroutput">x</code> for read, write, and execute.
		</p>
            <p>
			If a file or directory already has an ACL, and the <code class="command">setfacl</code> command is used, the additional rules are added to the existing ACL or the existing rule is modified.
		</p>
            <p>
			For example, to give read and write permissions to user andrius:
		</p>
            <pre class="screen"><code class="command">setfacl -m u:andrius:rw /project/somefile</code>
</pre>
            <p>
			To remove all the permissions for a user, group, or others, use the <code class="computeroutput">-x</code> option and do not specify any permissions:
		</p>
            <pre class="screen"><code class="command">setfacl -x <em class="replaceable"><code>&lt;rules&gt;</code></em><em class="replaceable"><code>&lt;files&gt;</code></em></code>
</pre>
            <p>
			For example, to remove all permissions from the user with UID 500:
		</p>
            <pre class="screen"><code class="command">setfacl -x u:500 /project/somefile</code>
</pre>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-acls-setting-default"></a>8.3. Setting Default ACLs</h2>
                </div>
              </div>
            </div>
            <a id="id2932180" class="indexterm"></a>
            <p>
			To set a default ACL, add <code class="computeroutput">d:</code> before the rule and specify a directory instead of a file name.
		</p>
            <p>
			For example, to set the default ACL for the <code class="filename">/share/</code> directory to read and execute for users not in the user group (an access ACL for an individual file can override it):
		</p>
            <pre class="screen"><code class="command">setfacl -m d:o:rx /share</code>
</pre>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-acls-retrieving"></a>8.4. Retrieving ACLs</h2>
                </div>
              </div>
            </div>
            <a id="id2884370" class="indexterm"></a>
            <a id="id2917477" class="indexterm"></a>
            <a id="id2786590" class="indexterm"></a>
            <p>
			To determine the existing ACLs for a file or directory, use the <code class="command">getfacl</code> command. In the example below, the <code class="command">getfacl</code> is used to determine the existing ACLs for a file.
		</p>
            <pre class="screen"><code class="command">getfacl home/john/picture.png</code>
</pre>
            <p>
			The above command returns the following output:
		</p>
            <pre class="screen"><code class="computeroutput"># file: home/john/picture.png # owner: john # group: john user::rw- group::r-- other::r--</code>
</pre>
            <p>
		</p>
            <p>
			If a directory with a default ACL is specified, the default ACL is also displayed as illustrated below.
		</p>
            <pre class="screen"><code class="computeroutput">[john@main /]$</code><code class="command"> getfacl home/sales/</code><code class="computeroutput"># file: home/sales/ # owner: john # group: john user::rw- user:barryg:r-- group::r-- mask::r-- other::r-- default:user::rwx default:user:john:rwx default:group::r-x default:mask::rwx default:other::r-x</code>
</pre>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-acls-archiving"></a>8.5. Archiving File Systems With ACLs</h2>
                </div>
              </div>
            </div>
            <a id="id2851367" class="indexterm"></a>
            <a id="id2964955" class="indexterm"></a>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				The <code class="command">tar</code> and <code class="command">dump</code> commands do <span class="emphasis"><em>not</em></span> backup ACLs.
			</p>
            </div>
            <p>
			The <code class="command">star</code> utility is similar to the <code class="command">tar</code> utility in that it can be used to generate archives of files; however, some of its options are different. Refer to <a href="#tb-star-options" title="Table 8.1. Command Line Options for star">Table 8.1, “Command Line Options for <code class="command">star</code>”</a> for a listing of more commonly used options. For all available options, refer to the <code class="command">star</code> man page. The <code class="filename">star</code> package is required to use this utility.
		</p>
            <div class="table">
              <a id="tb-star-options"></a>
              <div class="table-contents">
                <table summary="Command Line Options for star" border="1">
                  <colgroup>
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th>
							Option
						</th>
                      <th>
							Description
						</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
							<code class="option">-c</code>
						</td>
                      <td>
							Creates an archive file.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-n</code>
						</td>
                      <td>
							Do not extract the files; use in conjunction with <code class="option">-x</code> to show what extracting the files does.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-r</code>
						</td>
                      <td>
							Replaces files in the archive. The files are written to the end of the archive file, replacing any files with the same path and file name.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-t</code>
						</td>
                      <td>
							Displays the contents of the archive file.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-u</code>
						</td>
                      <td>
							Updates the archive file. The files are written to the end of the archive if they do not exist in the archive or if the files are newer than the files of the same name in the archive. This option only work if the archive is a file or an unblocked tape that may backspace.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-x</code>
						</td>
                      <td>
							Extracts the files from the archive. If used with <code class="option">-U</code> and a file in the archive is older than the corresponding file on the file system, the file is not extracted.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-help</code>
						</td>
                      <td>
							Displays the most important options.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-xhelp</code>
						</td>
                      <td>
							Displays the least important options.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-/</code>
						</td>
                      <td>
							Do not strip leading slashes from file names when extracting the files from an archive. By default, they are striped when files are extracted.
						</td>
                    </tr>
                    <tr>
                      <td>
							<code class="option">-acl</code>
						</td>
                      <td>
							When creating or extracting, archive or restore any ACLs associated with the files and directories.
						</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <h6>Table 8.1. Command Line Options for <code class="command">star</code></h6>
            </div>
            <br class="table-break" />
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-acls-compat-older"></a>8.6. Compatibility with Older Systems</h2>
                </div>
              </div>
            </div>
            <p>
			If an ACL has been set on any file on a given file system, that file system has the <code class="command">ext_attr</code> attribute. This attribute can be seen using the following command:
		</p>
            <pre class="screen"><code class="command">tune2fs -l <em class="replaceable"><code>&lt;filesystem-device&gt;</code></em></code>
</pre>
            <p>
			A file system that has acquired the <code class="command">ext_attr</code> attribute can be mounted with older kernels, but those kernels do not enforce any ACLs which have been set.
		</p>
            <p>
			Versions of the <code class="command">e2fsck</code> utility included in version 1.22 and higher of the <code class="filename">e2fsprogs</code> package (including the versions in Red Hat Enterprise Linux 2.1 and 4) can check a file system with the <code class="command">ext_attr</code> attribute. Older versions refuse to check it.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-acls-additional-resources"></a>8.7. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2910505" class="indexterm"></a>
            <p>
			Refer to the follow resources for more information.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-acls-installed-docs"></a>8.7.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">acl</code> man page — Description of ACLs
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">getfacl</code> man page — Discusses how to get file access control lists
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">setfacl</code> man page — Explains how to set file access control lists
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">star</code> man page — Explains more about the <code class="command">star</code> utility and its many options
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-acls-useful-websites"></a>8.7.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://acl.bestbits.at/">http://acl.bestbits.at/</a> — Website for ACLs
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-lvm"></a>Chapter 9. LVM (Logical Volume Manager)</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-lvm-intro-whatis">9.1. What is LVM?</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-lvm2-intro-whatis">9.1.1. What is LVM2?</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s-lvm-config">9.2. LVM Configuration</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-lvm-diskdruid-auto">9.3. Automatic Partitioning</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-lvm-diskdruid-manual">9.4. Manual LVM Partitioning</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-lvm-diskdruid-manual-boot">9.4.1. Creating the <code class="command">/boot/</code> Partition</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-lvm-diskdruid-manual-pv">9.4.2. Creating the LVM Physical Volumes</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-lvm-diskdruid-manual-vg">9.4.3. Creating the LVM Volume Groups</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-lvm-diskdruid-manual-lv">9.4.4. Creating the LVM Logical Volumes</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-system-config-lvm">9.5. Using the LVM utility <code class="filename">system-config-lvm</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm-uninitialized">9.5.1. Utilizing uninitialized entities</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm-add-unallocated">9.5.2. Adding Unallocated Volumes to a volume group</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm-migrate-extents">9.5.3. Migrating extents</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm-new-hdd">9.5.4. Adding a new hard disk using LVM</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm-new-volumegrp">9.5.5. Adding a new volume group</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm-ext-volumegrp">9.5.6. Extending a volume group</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-system-config-lvm-editing-lv">9.5.7. Editing a Logical Volume</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-lvm-additional-resources">9.6. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-lvm-installed-docs">9.6.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-lvm-useful-websites">9.6.2. Useful Websites</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2931839" class="indexterm"></a>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-lvm-intro-whatis"></a>9.1. What is LVM?</h2>
                </div>
              </div>
            </div>
            <a id="id2887218" class="indexterm"></a>
            <p>
			LVM is a tool for logical volume management which includes allocating disks, striping, mirroring and resizing logical volumes.
		</p>
            <a id="id2941180" class="indexterm"></a>
            <a id="id2907999" class="indexterm"></a>
            <p>
			With LVM, a hard drive or set of hard drives is allocated to one or more <em class="firstterm">physical volumes</em>. LVM physical volumes can be placed on other block devices which might span two or more disks.
		</p>
            <p>
			The physical volumes are combined into <em class="firstterm">logical volumes</em>, with the exception of the <code class="filename">/boot/</code> partition. The <code class="filename">/boot/</code> partition cannot be on a logical volume group because the boot loader cannot read it. If the root (<code class="filename">/</code>) partition is on a logical volume, create a separate <code class="filename">/boot/</code> partition which is not a part of a volume group.
		</p>
            <p>
			Since a physical volume cannot span over multiple drives, to span over more than one drive, create one or more physical volumes per drive.
		</p>
            <a id="id2908524" class="indexterm"></a>
            <a id="id2874828" class="indexterm"></a>
            <a id="id2941659" class="indexterm"></a>
            <div class="figure">
              <a id="fig-lvm-group"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/lvg.png" alt="Logical Volumes" />
                  <div class="longdesc">
                    <p>
						LVM Group
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 9.1. Logical Volumes</h6>
            </div>
            <br class="figure-break" />
            <a id="id2916754" class="indexterm"></a>
            <a id="id2871567" class="indexterm"></a>
            <p>
			The volume groups can be divided into <em class="firstterm">logical volumes</em>, which are assigned mount points, such as <code class="filename">/home</code> and <code class="filename">/</code> and file system types, such as ext2 or ext3. When "partitions" reach their full capacity, free space from the volume group can be added to the logical volume to increase the size of the partition. When a new hard drive is added to the system, it can be added to the volume group, and partitions that are logical volumes can be increased in size.
		</p>
            <div class="figure">
              <a id="fig-lvm-volumes"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/lvols.png" alt="Logical Volumes" />
                  <div class="longdesc">
                    <p>
						Logical Volumes
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 9.2. Logical Volumes</h6>
            </div>
            <br class="figure-break" />
            <p>
			On the other hand, if a system is partitioned with the ext3 file system, the hard drive is divided into partitions of defined sizes. If a partition becomes full, it is not easy to expand the size of the partition. Even if the partition is moved to another hard drive, the original hard drive space has to be reallocated as a different partition or not used.
		</p>
            <p>
			To learn how to configure LVM during the installation process, refer to <a href="#s-lvm-config" title="9.2. LVM Configuration">Section 9.2, “LVM Configuration”</a>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-lvm2-intro-whatis"></a>9.1.1. What is LVM2?</h3>
                  </div>
                </div>
              </div>
              <a id="id2926096" class="indexterm"></a>
              <p>
				LVM version 2, or LVM2, is the default for Red Hat Enterprise Linux 5, which uses the device mapper driver contained in the 2.6 kernel. LVM2 can be upgraded from versions of Red Hat Enterprise Linux running the 2.4 kernel.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s-lvm-config"></a>9.2. LVM Configuration</h2>
                </div>
              </div>
            </div>
            <a id="id2941174" class="indexterm"></a>
            <a id="id2887156" class="indexterm"></a>
            <p>
			LVM can be configured during the graphical installation process, the text-based installation process, or during a kickstart installation. You can use the <code class="filename">system-config-lvm</code> utility to create your own LVM configuration post-installation. The next two sections focus on using <span><strong class="application">Disk Druid</strong></span> during installation to complete this task. The third section introduces the LVM utility (<code class="filename">system-config-lvm</code>) which allows you to manage your LVM volumes in X windows or graphically.
		</p>
            <p>
			Read <a href="#s1-lvm-intro-whatis" title="9.1. What is LVM?">Section 9.1, “What is LVM?”</a> first to learn about LVM. An overview of the steps required to configure LVM include:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Creating <em class="firstterm">physical volumes</em> from the hard drives.
				</p>
                </li>
                <li>
                  <p>
					Creating <em class="firstterm">volume groups</em> from the physical volumes.
				</p>
                </li>
                <li>
                  <p>
					Creating <em class="firstterm">logical volumes</em> from the volume groups and assign the logical volumes mount points.
				</p>
                </li>
              </ul>
            </div>
            <p>
			Two 9.1 GB SCSI drives (<code class="command">/dev/sda</code> and <code class="command">/dev/sdb</code>) are used in the following examples. They detail how to create a simple configuration using a single LVM volume group with associated logical volumes during installation.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-lvm-diskdruid-auto"></a>9.3. Automatic Partitioning</h2>
                </div>
              </div>
            </div>
            <a id="id2786627" class="indexterm"></a>
            <p>
			On the <span><strong class="guilabel">Disk Partitioning Setup</strong></span> screen, select <span><strong class="guibutton">Automatically partition</strong></span>.
		</p>
            <p>
			For Red Hat Enterprise Linux, LVM is the default method for disk partitioning. If you do not wish to have LVM implemented, or if you require RAID partitioning, manual disk partitioning through <span><strong class="application">Disk Druid</strong></span> is required.
		</p>
            <p>
			The following properties make up the automatically created configuration:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					The <code class="command">/boot/</code> partition resides on its own non-LVM partition. In the following example, it is the first partition on the first drive (<code class="command">/dev/sda1</code>). Bootable partitions <span class="emphasis"><em>cannot</em></span> reside on LVM logical volumes.
				</p>
                </li>
                <li>
                  <p>
					A single LVM volume group (<code class="command">VolGroup00</code>) is created, which spans all selected drives and all remaining space available. In the following example, the remainder of the first drive (<code class="command">/dev/sda2</code>), and the entire second drive (<code class="command">/dev/sdb1</code>) are allocated to the volume group.
				</p>
                </li>
                <li>
                  <p>
					Two LVM logical volumes (<code class="command">LogVol00</code> and <code class="command">LogVol01</code>) are created from the newly created spanned volume group. In the following example, the recommended swap space is automatically calculated and assigned to <code class="command">LogVol01</code>, and the remainder is allocated to the root file system, <code class="command">LogVol00</code>.
				</p>
                </li>
              </ul>
            </div>
            <div class="figure">
              <a id="fig-lvm-auto-config"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/lvm-auto-config.png" alt="Automatic LVM Configuration With Two SCSI Drives" />
                  <div class="longdesc">
                    <p>
						Automatic LVM Configuration With Two SCSI Drives
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 9.3. Automatic LVM Configuration With Two SCSI Drives</h6>
            </div>
            <br class="figure-break" />
            <div class="note">
              <h2>Note</h2>
              <p>
				If enabling quotas are of interest to you, it may be best to modify the automatic configuration to include other mount points, such as <code class="command">/home/</code> or <code class="command">/var/</code>, so that each file system has its own independent quota configuration limits.
			</p>
              <p>
				In most cases, the default automatic LVM partitioning is sufficient, but advanced implementations could warrant modification or manual configuration of the partition tables.
			</p>
            </div>
            <div class="note">
              <h2>Note</h2>
              <p>
				If you anticipate future memory upgrades, leaving some free space in the volume group would allow for easy future expansion of the swap space logical volume on the system; in which case, the automatic LVM configuration should be modified to leave available space for future growth.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-lvm-diskdruid-manual"></a>9.4. Manual LVM Partitioning</h2>
                </div>
              </div>
            </div>
            <a id="id2958962" class="indexterm"></a>
            <p>
			The following section explains how to manually configure LVM for Red Hat Enterprise Linux. Because there are numerous ways to manually configure a system with LVM, the following example is similar to the default configuration done in <a href="#s1-lvm-diskdruid-auto" title="9.3. Automatic Partitioning">Section 9.3, “Automatic Partitioning”</a>.
		</p>
            <p>
			On the <span><strong class="guilabel">Disk Partitioning Setup</strong></span> screen, select <span><strong class="guibutton">Manually partition with Disk Druid</strong></span>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-lvm-diskdruid-manual-boot"></a>9.4.1. Creating the <code class="command">/boot/</code> Partition</h3>
                  </div>
                </div>
              </div>
              <a id="id2967610" class="indexterm"></a>
              <a id="id2946236" class="indexterm"></a>
              <p>
				In a typical situation, the disk drives are new, or formatted clean. The following figure, <a href="#fig-lvm-manual-free" title="Figure 9.4. Two Blank Drives, Ready For Configuration">Figure 9.4, “Two Blank Drives, Ready For Configuration”</a>, shows both drives as raw devices with no partitioning configured.
			</p>
              <div class="figure">
                <a id="fig-lvm-manual-free"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-manual-free.png" alt="Two Blank Drives, Ready For Configuration" />
                    <div class="longdesc">
                      <p>
							Two Blank Drives, Ready For Configuration
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.4. Two Blank Drives, Ready For Configuration</h6>
              </div>
              <br class="figure-break" />
              <div class="warning">
                <h2>Warning</h2>
                <p>
					The <code class="filename">/boot/</code> partition cannot reside on an LVM volume because the GRUB boot loader cannot read it.
				</p>
              </div>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Select <span><strong class="guibutton">New</strong></span>.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">/boot</strong></span> from the <span><strong class="guilabel">Mount Point</strong></span> pulldown menu.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">ext3</strong></span> from the <span><strong class="guilabel">File System Type</strong></span> pulldown menu.
					</p>
                  </li>
                  <li>
                    <p>
						Select only the <span><strong class="guilabel">sda</strong></span> checkbox from the <span><strong class="guilabel">Allowable Drives</strong></span> area.
					</p>
                  </li>
                  <li>
                    <p>
						Leave <span><strong class="guilabel">100</strong></span> (the default) in the <span><strong class="guilabel">Size (MB)</strong></span> menu.
					</p>
                  </li>
                  <li>
                    <p>
						Leave the <span><strong class="guilabel">Fixed size</strong></span> (the default) radio button selected in the <span><strong class="guilabel">Additional Size Options</strong></span> area.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">Force to be a primary partition</strong></span> to make the partition be a primary partition. A primary partition is one of the first four partitions on the hard drive. If unselected, the partition is created as a logical partition. If other operating systems are already on the system, unselecting this option should be considered. For more information on primary versus logical/extended partitions, refer to the appendix section of the <em class="citetitle">Red Hat Enterprise Linux Installation Guide</em>.
					</p>
                  </li>
                </ol>
              </div>
              <p>
				Refer to <a href="#fig-lvm-manual-boot" title="Figure 9.5. Creation of the Boot Partition">Figure 9.5, “Creation of the Boot Partition”</a> to verify your inputted values:
			</p>
              <div class="figure">
                <a id="fig-lvm-manual-boot"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-manual-boot.png" alt="Creation of the Boot Partition" />
                    <div class="longdesc">
                      <p>
							Creation of the Boot Partition
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.5. Creation of the Boot Partition</h6>
              </div>
              <br class="figure-break" />
              <p>
				Click <span><strong class="guibutton">OK</strong></span> to return to the main screen. The following figure displays the boot partition correctly set:
			</p>
              <div class="figure">
                <a id="fig-lvm-manual-postboot"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-manual-postboot.png" alt="The /boot/ Partition Displayed" />
                    <div class="longdesc">
                      <p>
							The <code class="command">/boot/</code> Partition Displayed
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.6. The <code class="command">/boot/</code> Partition Displayed</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-lvm-diskdruid-manual-pv"></a>9.4.2. Creating the LVM Physical Volumes</h3>
                  </div>
                </div>
              </div>
              <a id="id2892333" class="indexterm"></a>
              <a id="id2892349" class="indexterm"></a>
              <a id="id2892362" class="indexterm"></a>
              <p>
				Once the boot partition is created, the remainder of all disk space can be allocated to LVM partitions. The first step in creating a successful LVM implementation is the creation of the physical volume(s).
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Select <span><strong class="guibutton">New</strong></span>.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">physical volume (LVM)</strong></span> from the <span><strong class="guilabel">File System Type</strong></span> pulldown menu as shown in <a href="#fig-lvm-manual-pv01" title="Figure 9.7. Creating a Physical Volume">Figure 9.7, “Creating a Physical Volume”</a>.
					</p>
                    <div class="figure">
                      <a id="fig-lvm-manual-pv01"></a>
                      <div class="figure-contents">
                        <div class="mediaobject">
                          <img src="images/lvm-manual-pv01.png" alt="Creating a Physical Volume" />
                          <div class="longdesc">
                            <p>
									Creating a Physical Volume
								</p>
                          </div>
                        </div>
                      </div>
                      <h6>Figure 9.7. Creating a Physical Volume</h6>
                    </div>
                    <br class="figure-break" />
                  </li>
                  <li>
                    <p>
						You cannot enter a mount point yet (you can once you have created all your physical volumes and then all volume groups).
					</p>
                  </li>
                  <li>
                    <p>
						A physical volume must be constrained to one drive. For <span><strong class="guimenuitem">Allowable Drives</strong></span>, select the drive on which the physical volume are created. If you have multiple drives, all drives are selected, and you must deselect all but one drive.
					</p>
                  </li>
                  <li>
                    <p>
						Enter the size that you want the physical volume to be.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">Fixed size</strong></span> to make the physical volume the specified size, select <span><strong class="guilabel">Fill all space up to (MB)</strong></span> and enter a size in MBs to give range for the physical volume size, or select <span><strong class="guilabel">Fill to maximum allowable size</strong></span> to make it grow to fill all available space on the hard disk. If you make more than one growable, they share the available free space on the disk.
					</p>
                  </li>
                  <li>
                    <p>
						Select <span><strong class="guilabel">Force to be a primary partition</strong></span> if you want the partition to be a primary partition.
					</p>
                  </li>
                  <li>
                    <p>
						Click <span><strong class="guibutton">OK</strong></span> to return to the main screen.
					</p>
                  </li>
                </ol>
              </div>
              <p>
				Repeat these steps to create as many physical volumes as needed for your LVM setup. For example, if you want the volume group to span over more than one drive, create a physical volume on each of the drives. The following figure shows both drives completed after the repeated process:
			</p>
              <div class="figure">
                <a id="fig-lvm-manual-pvdone"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-manual-pvdone.png" alt="Two Physical Volumes Created" />
                    <div class="longdesc">
                      <p>
							Two Physical Volumes Created, Ready For Volume Groups
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.8. Two Physical Volumes Created</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-lvm-diskdruid-manual-vg"></a>9.4.3. Creating the LVM Volume Groups</h3>
                  </div>
                </div>
              </div>
              <a id="id2908165" class="indexterm"></a>
              <a id="id2908182" class="indexterm"></a>
              <a id="id2954495" class="indexterm"></a>
              <p>
				Once all the physical volumes are created, the volume groups can be created:
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Click the <span><strong class="guibutton">LVM</strong></span> button to collect the physical volumes into volume groups. A volume group is basically a collection of physical volumes. You can have multiple logical volumes, but a physical volume can only be in one volume group.
					</p>
                    <div class="note">
                      <h2>Note</h2>
                      <p>
							There is overhead disk space reserved in the volume group. The volume group size is slightly less than the total of physical volume sizes.
						</p>
                    </div>
                    <div class="figure">
                      <a id="fig-lvm-manual-vg"></a>
                      <div class="figure-contents">
                        <div class="mediaobject">
                          <img src="images/lvm-manual-vg.png" alt="Creating an LVM Volume Group" />
                          <div class="longdesc">
                            <p>
									Creating an LVM Volume Group
								</p>
                          </div>
                        </div>
                      </div>
                      <h6>Figure 9.9. Creating an LVM Volume Group</h6>
                    </div>
                    <br class="figure-break" />
                  </li>
                  <li>
                    <p>
						Change the <span><strong class="guilabel">Volume Group Name</strong></span> if desired.
					</p>
                  </li>
                  <li>
                    <p>
						<a id="id2891950" class="indexterm"></a>
						<a id="id2852405" class="indexterm"></a>
						All logical volumes inside the volume group must be allocated in <em class="firstterm">physical extent (PE)</em> units. A physical extent is an allocation unit for data.
					</p>
                  </li>
                  <li>
                    <p>
						Select which physical volumes to use for the volume group.
					</p>
                  </li>
                </ol>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-lvm-diskdruid-manual-lv"></a>9.4.4. Creating the LVM Logical Volumes</h3>
                  </div>
                </div>
              </div>
              <a id="id2852442" class="indexterm"></a>
              <a id="id2957069" class="indexterm"></a>
              <a id="id2957083" class="indexterm"></a>
              <p>
				Create logical volumes with mount points such as <code class="filename">/</code>, <code class="filename">/home/</code>, and swap space. Remember that <code class="filename">/boot</code> cannot be a logical volume. To add a logical volume, click the <span><strong class="guibutton">Add</strong></span> button in the <span><strong class="guilabel">Logical Volumes</strong></span> section. A dialog window as shown in <a href="#fig-lvm-manual-lv" title="Figure 9.10. Creating a Logical Volume">Figure 9.10, “Creating a Logical Volume”</a> appears.
			</p>
              <div class="figure">
                <a id="fig-lvm-manual-lv"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-manual-lv.png" alt="Creating a Logical Volume" />
                    <div class="longdesc">
                      <p>
							Creating a Logical Volume
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.10. Creating a Logical Volume</h6>
              </div>
              <br class="figure-break" />
              <p>
				Repeat these steps for each volume group you want to create.
			</p>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					You may want to leave some free space in the volume group so you can expand the logical volumes later. The default automatic configuration does not do this, but this manual configuration example does — approximately 1 GB is left as free space for future expansion.
				</p>
              </div>
              <div class="figure">
                <a id="fig-lvm-manual-lvdone"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-manual-lvdone.png" alt="Pending Logical Volumes" />
                    <div class="longdesc">
                      <p>
							Pending Logical Volumes
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.11. Pending Logical Volumes</h6>
              </div>
              <br class="figure-break" />
              <p>
				Click <span><strong class="guilabel">OK</strong></span> to apply the volume group and all associated logical volumes.
			</p>
              <p>
				The following figure shows the final manual configuration:
			</p>
              <div class="figure">
                <a id="fig-lvm-manual-done"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-manual-done.png" alt="Final Manual Configuration" />
                    <div class="longdesc">
                      <p>
							Final Manual Configuration
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.12. Final Manual Configuration</h6>
              </div>
              <br class="figure-break" />
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-system-config-lvm"></a>9.5. Using the LVM utility <code class="filename">system-config-lvm</code></h2>
                </div>
              </div>
            </div>
            <a id="id2943124" class="indexterm"></a>
            <p>
			The LVM utility allows you to manage logical volumes within X windows or graphically. You can access the application by selecting from your menu panel <span><strong class="guimenuitem">System</strong></span> =&gt; <span><strong class="guimenuitem">Administration</strong></span> =&gt; <span><strong class="guimenuitem">Logical Volume Management</strong></span>. Alternatively you can start the Logical Volume Management utility by typing <code class="command">system-config-lvm</code> from a terminal.
		</p>
            <p>
			In the example used in this section, the following are the details for the volume group that was created during the installation:
		</p>
            <pre class="screen">/boot - (Ext3) file system. Displayed under 'Uninitialized Entities'. (DO NOT initialize this partition).
LogVol00 - (LVM) contains the (/) directory (312 extents).
LogVol02 - (LVM) contains the (/home) directory (128 extents).
LogVol03 - (LVM) swap (28 extents).
</pre>
            <p>
			The logical volumes above were created in disk entity <code class="filename">/dev/hda2</code> while <code class="filename">/boot</code> was created in <code class="filename">/dev/hda1</code>. The system also consists of 'Uninitialised Entities' which are illustrated in <a href="#system-config-lvm-main10" title="Figure 9.17. Uninitialized Entities">Figure 9.17, “Uninitialized Entities”</a>. The figure below illustrates the main window in the LVM utility. The logical and the physical views of the above configuration are illustrated below. The three logical volumes exist on the same physical volume (hda2).
		</p>
            <div class="figure">
              <a id="system-config-lvm-main1"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/lvm-main1.png" alt="Main LVM Window" />
                  <div class="longdesc">
                    <p>
						Main LVM Window
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 9.13. Main LVM Window</h6>
            </div>
            <br class="figure-break" />
            <p>
			The figure below illustrates the physical view for the volume. In this window, you can select and remove a volume from the volume group or migrate extents from the volume to another volume group. Steps to migrate extents are discussed in <a href="#system-config-lvm-main36" title="Figure 9.22. Migrate Extents">Figure 9.22, “Migrate Extents”</a>.
		</p>
            <div class="figure">
              <a id="system-config-lvm-main2"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/lvm-main2.png" alt="Physical View Window" />
                  <div class="longdesc">
                    <p>
						Physical View Window
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 9.14. Physical View Window</h6>
            </div>
            <br class="figure-break" />
            <p>
			The figure below illustrates the logical view for the selected volume group. The logical volume size is also indicated with the individual logical volume sizes illustrated.
		</p>
            <div class="figure">
              <a id="system-config-lvm-main3"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/lvm-main3.png" alt="Logical View Window" />
                  <div class="longdesc">
                    <p>
						Logical View Window
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 9.15. Logical View Window</h6>
            </div>
            <br class="figure-break" />
            <p>
			On the left side column, you can select the individual logical volumes in the volume group to view more details about each. In this example the objective is to rename the logical volume name for 'LogVol03' to 'Swap'. To perform this operation select the respective logical volume and click on the <span><strong class="guibutton">Edit Properties</strong></span> button. This will display the Edit Logical Volume window from which you can modify the Logical volume name, size (in extents) and also use the remaining space available in a logical volume group. The figure below illustrates this.
		</p>
            <p>
			Please note that this logical volume cannot be changed in size as there is currently no free space in the volume group. If there was remaining space, this option would be enabled (see <a href="#system-config-lvm-main32" title="Figure 9.31. Edit logical volume">Figure 9.31, “Edit logical volume”</a>). Click on the <span><strong class="guibutton">OK</strong></span> button to save your changes (this will remount the volume). To cancel your changes click on the <span><strong class="guibutton">Cancel</strong></span> button. To revert to the last snapshot settings click on the <span><strong class="guibutton">Revert</strong></span> button. A snapshot can be created by clicking on the <span><strong class="guibutton">Create Snapshot</strong></span> button on the LVM utility window. If the selected logical volume is in use by the system (for example) the <code class="filename">/</code> (root) directory, this task will not be successful as the volume cannot be unmounted.
		</p>
            <div class="figure">
              <a id="system-config-lvm-main7"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/lvm-main7.png" alt="Edit Logical Volume" />
                  <div class="longdesc">
                    <p>
						Edit Logical Volume
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 9.16. Edit Logical Volume</h6>
            </div>
            <br class="figure-break" />
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-system-config-lvm-uninitialized"></a>9.5.1. Utilizing uninitialized entities</h3>
                  </div>
                </div>
              </div>
              <p>
				'Uninitialized Entities' consist of unpartitioned space and non LVM file systems. In this example partitions 3, 4, 5, 6 and 7 were created during installation and some unpartitioned space was left on the hard disk. Please view each partition and ensure that you read the 'Properties for Disk Entity' on the right column of the window to ensure that you do not delete critical data. In this example partition 1 cannot be initialized as it is <code class="filename">/boot</code>. Uninitialized entities are illustrated below.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main10"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main10.png" alt="Uninitialized Entities" />
                    <div class="longdesc">
                      <p>
							Uninitialized Entities
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.17. Uninitialized Entities</h6>
              </div>
              <br class="figure-break" />
              <p>
				In this example, partition 3 will be initialized and added to an existing volume group. To initialize a partition or unpartioned space, select the partition and click on the <span><strong class="guibutton">Initialize Entity</strong></span> button. Once initialized, a volume will be listed in the 'Unallocated Volumes' list.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-system-config-lvm-add-unallocated"></a>9.5.2. Adding Unallocated Volumes to a volume group</h3>
                  </div>
                </div>
              </div>
              <p>
				Once initialized, a volume will be listed in the 'Unallocated Volumes' list. The figure below illustrates an unallocated partition (Partition 3). The respective buttons at the bottom of the window allow you to: 
				</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
							create a new volume group,
						</p>
                  </li>
                  <li>
                    <p>
							add the unallocated volume to an existing volume group,
						</p>
                  </li>
                  <li>
                    <p>
							remove the volume from LVM.
						</p>
                  </li>
                </ul>
              </div>
              <p>
				 To add the volume to an existing volume group, click on the <span><strong class="guibutton">Add to Existing Volume Group</strong></span> button.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main13"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main13.png" alt="Unallocated Volumes" />
                    <div class="longdesc">
                      <p>
							Unallocated Volumes
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.18. Unallocated Volumes</h6>
              </div>
              <br class="figure-break" />
              <p>
				Clicking on the <span><strong class="guibutton">Add to Existing Volume Group</strong></span> button will display a pop up window listing the existing volume groups to which you can add the physical volume you are about to initialize. A volume group may span across one or more hard disks. In this example only one volume group exists as illustrated below.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main14"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main14.png" alt="Add physical volume to volume group" />
                    <div class="longdesc">
                      <p>
							Add physical volume to volume group
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.19. Add physical volume to volume group</h6>
              </div>
              <br class="figure-break" />
              <p>
				Once added to an existing volume group the new logical volume is automatically added to the unused space of the selected volume group. You can use the unused space to: 
				</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
							create a new logical volume (click on the <span><strong class="guibutton">Create New Logical Volume(s)</strong></span> button,
						</p>
                  </li>
                  <li>
                    <p>
							select one of the existing logical volumes and increase the extents (see <a href="#s1-system-config-lvm-ext-volumegrp" title="9.5.6. Extending a volume group">Section 9.5.6, “Extending a volume group”</a>),
						</p>
                  </li>
                  <li>
                    <p>
							select an existing logical volume and remove it from the volume group by clicking on the <span><strong class="guibutton">Remove Selected Logical Volume(s)</strong></span> button. Please note that you cannot select unused space to perform this operation.
						</p>
                  </li>
                </ul>
              </div>
              <p>
				 The figure below illustrates the logical view of 'VolGroup00' after adding the new volume group.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main15"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main15.png" alt="Logical view of volume group" />
                    <div class="longdesc">
                      <p>
							Logical view of volume group
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.20. Logical view of volume group</h6>
              </div>
              <br class="figure-break" />
              <p>
				In the figure below, the uninitialized entities (partitions 3, 5, 6 and 7) were added to 'VolGroup00'.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main21"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main21.png" alt="Logical view of volume group" />
                    <div class="longdesc">
                      <p>
							Logical view of volume group
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.21. Logical view of volume group</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-system-config-lvm-migrate-extents"></a>9.5.3. Migrating extents</h3>
                  </div>
                </div>
              </div>
              <p>
				To migrate extents from a physical volume, select the volume and click on the <span><strong class="guibutton">Migrate Selected Extent(s) From Volume</strong></span> button. Please note that you need to have a sufficient number of free extents to migrate extents within a volume group. An error message will be displayed if you do not have a sufficient number of free extents. To resolve this problem, please extend your volume group (see <a href="#s1-system-config-lvm-ext-volumegrp" title="9.5.6. Extending a volume group">Section 9.5.6, “Extending a volume group”</a>). If a sufficient number of free extents is detected in the volume group, a pop up window will be displayed from which you can select the destination for the extents or automatically let LVM choose the physical volumes (PVs) to migrate them to. This is illustrated below.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main36"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main36.png" alt="Migrate Extents" />
                    <div class="longdesc">
                      <p>
							Migrate Extents
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.22. Migrate Extents</h6>
              </div>
              <br class="figure-break" />
              <p>
				The figure below illustrates a migration of extents in progress. In this example, the extents were migrated to 'Partition 3'.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main23"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main23.png" alt="Migrating extents in progress" />
                    <div class="longdesc">
                      <p>
							Migrating extents in progress
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.23. Migrating extents in progress</h6>
              </div>
              <br class="figure-break" />
              <p>
				Once the extents have been migrated, unused space is left on the physical volume. The figure below illustrates the physical and logical view for the volume group. Please note that the extents of LogVol00 which were initially in hda2 are now in hda3. Migrating extents allows you to move logical volumes in case of hard disk upgrades or to manage your disk space better.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main34"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main34.png" alt="Logical and physical view of volume group" />
                    <div class="longdesc">
                      <p>
							Logical and physical view of volume group
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.24. Logical and physical view of volume group</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-system-config-lvm-new-hdd"></a>9.5.4. Adding a new hard disk using LVM</h3>
                  </div>
                </div>
              </div>
              <p>
				In this example, a new IDE hard disk was added. The figure below illustrates the details for the new hard disk. From the figure below, the disk is uninitialized and not mounted. To initialize a partition, click on the <span><strong class="guibutton">Initialize Entity</strong></span> button. For more details, see <a href="#s1-system-config-lvm-uninitialized" title="9.5.1. Utilizing uninitialized entities">Section 9.5.1, “Utilizing uninitialized entities”</a>. Once initialized, LVM will add the new volume to the list of unallocated volumes as illustrated in <a href="#system-config-lvm-main17" title="Figure 9.26. Create new volume group">Figure 9.26, “Create new volume group”</a>.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main16"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main16.png" alt="Uninitialized hard disk" />
                    <div class="longdesc">
                      <p>
							Uninitialized hard disk
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.25. Uninitialized hard disk</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-system-config-lvm-new-volumegrp"></a>9.5.5. Adding a new volume group</h3>
                  </div>
                </div>
              </div>
              <p>
				Once initialized, LVM will add the new volume to the list of unallocated volumes where you can add it to an existing volume group or create a new volume group. You can also remove the volume from LVM. The volume if removed from LVM will be listed in the list of 'Uninitialized Entities' as illustrated in <a href="#system-config-lvm-main16" title="Figure 9.25. Uninitialized hard disk">Figure 9.25, “Uninitialized hard disk”</a>. In this example, a new volume group was created as illustrated below.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main17"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main17.png" alt="Create new volume group" />
                    <div class="longdesc">
                      <p>
							Create new volume group
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.26. Create new volume group</h6>
              </div>
              <br class="figure-break" />
              <p>
				Once created a new volume group will be displayed in the list of existing volume groups as illustrated below. The logical view will display the new volume group with unused space as no logical volumes have been created. To create a logical volume, select the volume group and click on the <span><strong class="guibutton">Create New Logical Volume</strong></span> button as illustrated below. Please select the extents you wish to use on the volume group. In this example, all the extents in the volume group were used to create the new logical volume.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main18"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main18.png" alt="Create new logical volume" />
                    <div class="longdesc">
                      <p>
							Create new logical volume
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.27. Create new logical volume</h6>
              </div>
              <br class="figure-break" />
              <p>
				The figure below illustrates the physical view of the new volume group. The new logical volume named 'Backups' in this volume group is also listed.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main26"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main26.png" alt="Physical view of new volume group" />
                    <div class="longdesc">
                      <p>
							Physical view of new volume group
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.28. Physical view of new volume group</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-system-config-lvm-ext-volumegrp"></a>9.5.6. Extending a volume group</h3>
                  </div>
                </div>
              </div>
              <p>
				In this example, the objective was to extend the new volume group to include an uninitialized entity (partition). This was to increase the size or number of extents for the volume group. To extend the volume group, click on the <span><strong class="guibutton">Extend Volume Group</strong></span> button. This will display the 'Extend Volume Group' window as illustrated below. On the 'Extend Volume Group' window, you can select disk entities (partitions) to add to the volume group. Please ensure that you check the contents of any 'Uninitialized Disk Entities' (partitions) to avoid deleting any critical data (see <a href="#system-config-lvm-main16" title="Figure 9.25. Uninitialized hard disk">Figure 9.25, “Uninitialized hard disk”</a>). In the example, the disk entity (partition) <code class="filename">/dev/hda6</code> was selected as illustrated below.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main27"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main27.png" alt="Select disk entities" />
                    <div class="longdesc">
                      <p>
							Select disk entities
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.29. Select disk entities</h6>
              </div>
              <br class="figure-break" />
              <p>
				Once added, the new volume will be added as 'Unused Space' in the volume group. The figure below illustrates the logical and physical view of the volume group after it was extended.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main28"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main28.png" alt="Logical and physical view of an extended volume group" />
                    <div class="longdesc">
                      <p>
							Logical and physical view of an extended volume group
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.30. Logical and physical view of an extended volume group</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-system-config-lvm-editing-lv"></a>9.5.7. Editing a Logical Volume</h3>
                  </div>
                </div>
              </div>
              <p>
				The LVM utility allows you to select a logical volume in the volume group and modify its name, size and specify filesystem options. In this example, the logical volume named 'Backups" was extended onto the remaining space for the volume group.
			</p>
              <p>
				Clicking on the <span><strong class="guibutton">Edit Properties</strong></span> button will display the 'Edit Logical Volume' popup window from which you can edit the properties of the logical volume. On this window, you can also mount the volume after making the changes and mount it when the system is rebooted. Please note that you should indicate the mount point. If the mount point you specify does not exist, a popup window will be displayed prompting you to create it. The 'Edit Logical Volume' window is illustrated below.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main32"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main32.png" alt="Edit logical volume" />
                    <div class="longdesc">
                      <p>
							Edit logical volume
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.31. Edit logical volume</h6>
              </div>
              <br class="figure-break" />
              <p>
				If you wish to mount the volume, select the 'Mount' checkbox indicating the preferred mount point. To mount the volume when the system is rebooted, select the 'Mount when rebooted' checkbox. In this example, the new volume will be mounted in <code class="filename">/mnt/backups</code>. This is illustrated in the figure below.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main33"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main33.png" alt="Edit logical volume - specifying mount options" />
                    <div class="longdesc">
                      <p>
							Edit logical volume - specifying mount options
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.32. Edit logical volume - specifying mount options</h6>
              </div>
              <br class="figure-break" />
              <p>
				The figure below illustrates the logical and physical view of the volume group after the logical volume was extended to the unused space. Please note in this example that the logical volume named 'Backups' spans across two hard disks. A volume can be stripped across two or more physical devices using LVM.
			</p>
              <div class="figure">
                <a id="system-config-lvm-main30"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/lvm-main30.png" alt="Edit logical volume" />
                    <div class="longdesc">
                      <p>
							Edit logical volume
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 9.33. Edit logical volume</h6>
              </div>
              <br class="figure-break" />
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-lvm-additional-resources"></a>9.6. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2951526" class="indexterm"></a>
            <p>
			Use these sources to learn more about LVM.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-lvm-installed-docs"></a>9.6.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">rpm -qd lvm2</code> — This command shows all the documentation available from the <code class="command">lvm</code> package, including man pages.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">lvm help</code> — This command shows all LVM commands available.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-lvm-useful-websites"></a>9.6.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://sources.redhat.com/lvm2">http://sources.redhat.com/lvm2</a> — LVM2 webpage, which contains an overview, link to the mailing lists, and more.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://tldp.org/HOWTO/LVM-HOWTO/">http://tldp.org/HOWTO/LVM-HOWTO/</a> — LVM HOWTO from the Linux Documentation Project.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="part" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title"><a id="pt-pkg-management"></a>Part II. Package Management</h1>
            </div>
          </div>
        </div>
        <div class="partintro" lang="en-US" xml:lang="en-US">
          <div></div>
          <p>
				All software on a Red Hat Enterprise Linux system is divided into RPM packages which can be installed, upgraded, or removed. This part describes how to manage the RPM packages on a Red Hat Enterprise Linux system using graphical and command line tools.
			</p>
          <div class="toc">
            <p>
              <b>Table of Contents</b>
            </p>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-rpm">10. Package Management with RPM</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-design">10.1. RPM Design Goals</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-using">10.2. Using RPM</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-finding">10.2.1. Finding RPM Packages</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-installing">10.2.2. Installing</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-uninstalling">10.2.3. Uninstalling</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-upgrading">10.2.4. Upgrading</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-freshening">10.2.5. Freshening</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-querying">10.2.6. Querying</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-verifying">10.2.7. Verifying</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-check-rpm-sig">10.3. Checking a Package's Signature</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-keys-importing">10.3.1. Importing Keys</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-keys-checking">10.3.2. Verifying Signature of Packages</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-impressing">10.4. Practical and Common Examples of RPM Usage</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-rpm-additional-resources">10.5. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-installed-docs">10.5.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-useful-websites">10.5.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-rpm-related-books">10.5.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-graphical-rpm">11. <span><strong class="application">Package Management Tool</strong></span></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-graphical-rpm-analyzing">11.1. Listing and Analyzing Packages</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-graphical-rpm-installing">11.2. Installing and Removing Packages</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#c1-yum">12. YUM (Yellowdog Updater Modified)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-repo-setup">12.1. Setting Up a <code class="command">yum</code> Repository</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-useful-commands">12.2. <code class="command">yum</code> Commands</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-common-options">12.3. <code class="command">yum</code> Options</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-yumconf">12.4. Configuring <code class="command">yum</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-yum-yumconf-main">12.4.1. <code class="command">[main]</code> Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-yum-yumconf-repository">12.4.2. <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> Options</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-useful-variables">12.5. Useful <code class="command">yum</code> Variables</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-rhnetwork">13. Red Hat Network</a>
                </span>
              </dt>
            </dl>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-rpm"></a>Chapter 10. Package Management with RPM</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-rpm-design">10.1. RPM Design Goals</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-rpm-using">10.2. Using RPM</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-finding">10.2.1. Finding RPM Packages</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-installing">10.2.2. Installing</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-uninstalling">10.2.3. Uninstalling</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-upgrading">10.2.4. Upgrading</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-freshening">10.2.5. Freshening</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-querying">10.2.6. Querying</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-verifying">10.2.7. Verifying</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-check-rpm-sig">10.3. Checking a Package's Signature</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-keys-importing">10.3.1. Importing Keys</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-keys-checking">10.3.2. Verifying Signature of Packages</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-rpm-impressing">10.4. Practical and Common Examples of RPM Usage</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-rpm-additional-resources">10.5. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-installed-docs">10.5.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-useful-websites">10.5.2. Useful Websites</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-rpm-related-books">10.5.3. Related Books</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2856381" class="indexterm"></a>
          <a id="id2887149" class="indexterm"></a>
          <p>
		The <em class="firstterm">RPM Package Manager</em> (RPM) is an open packaging system, which runs on Red Hat Enterprise Linux as well as other Linux and UNIX systems. Red Hat, Inc. encourages other vendors to use RPM for their own products. RPM is distributed under the terms of the GPL.
	</p>
          <p>
		The utility works only with packages built for processing by the <code class="filename">rpm</code> package. For the end user, RPM makes system updates easy. Installing, uninstalling, and upgrading RPM packages can be accomplished with short commands. RPM maintains a database of installed packages and their files, so you can invoke powerful queries and verifications on your system. If you prefer a graphical interface, you can use the <span><strong class="application">Package Management Tool</strong></span> to perform many RPM commands. Refer to <a href="#ch-graphical-rpm" title="Chapter 11. Package Management Tool">Chapter 11, <i><span><strong class="application">Package Management Tool</strong></span></i></a> for details.
	</p>
          <div class="important">
            <h2>Important</h2>
            <p>
			When installing a package, please ensure it is compatible with your operating system and architecture. This can usually be determined by checking the package name.
		</p>
          </div>
          <p>
		During upgrades, RPM handles configuration files carefully, so that you never lose your customizations — something that you cannot accomplish with regular <code class="filename">.tar.gz</code> files.
	</p>
          <p>
		For the developer, RPM allows you to take software source code and package it into source and binary packages for end users. This process is quite simple and is driven from a single file and optional patches that you create. This clear delineation between <em class="firstterm">pristine</em> sources and your patches along with build instructions eases the maintenance of the package as new versions of the software are released.
	</p>
          <div class="note">
            <h2>Note</h2>
            <p>
			Because RPM makes changes to your system, you must be logged in as root to install, remove, or upgrade an RPM package.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-rpm-design"></a>10.1. RPM Design Goals</h2>
                </div>
              </div>
            </div>
            <a id="id2886882" class="indexterm"></a>
            <p>
			To understand how to use RPM, it can be helpful to understand the design goals of RPM:
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term"> Upgradability </span>
                </dt>
                <dd>
                  <p>
						With RPM, you can upgrade individual components of your system without completely reinstalling. When you get a new release of an operating system based on RPM (such as Red Hat Enterprise Linux), you do not need to reinstall on your machine (as you do with operating systems based on other packaging systems). RPM allows intelligent, fully-automated, in-place upgrades of your system. Configuration files in packages are preserved across upgrades, so you do not lose your customizations. There are no special upgrade files needed to upgrade a package because the same RPM file is used to install and upgrade the package on your system.
					</p>
                </dd>
                <dt>
                  <span class="term"> Powerful Querying </span>
                </dt>
                <dd>
                  <p>
						RPM is designed to provide powerful querying options. You can do searches through your entire database for packages or just for certain files. You can also easily find out what package a file belongs to and from where the package came. The files an RPM package contains are in a compressed archive, with a custom binary header containing useful information about the package and its contents, allowing you to query individual packages quickly and easily.
					</p>
                </dd>
                <dt>
                  <span class="term"> System Verification </span>
                </dt>
                <dd>
                  <p>
						Another powerful RPM feature is the ability to verify packages. If you are worried that you deleted an important file for some package, you can verify the package. You are then notified of any anomalies, if any — at which point, you can reinstall the package if necessary. Any configuration files that you modified are preserved during reinstallation.
					</p>
                </dd>
                <dt>
                  <span class="term"> Pristine Sources </span>
                </dt>
                <dd>
                  <p>
						A crucial design goal was to allow the use of <span class="emphasis"><em>pristine </em></span> software sources, as distributed by the original authors of the software. With RPM, you have the pristine sources along with any patches that were used, plus complete build instructions. This is an important advantage for several reasons. For instance, if a new version of a program is released, you do not necessarily have to start from scratch to get it to compile. You can look at the patch to see what you <span class="emphasis"><em>might</em></span> need to do. All the compiled-in defaults, and all of the changes that were made to get the software to build properly, are easily visible using this technique.
					</p>
                  <p>
						The goal of keeping sources pristine may seem important only for developers, but it results in higher quality software for end users, too.
					</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-rpm-using"></a>10.2. Using RPM</h2>
                </div>
              </div>
            </div>
            <a id="id2881034" class="indexterm"></a>
            <p>
			RPM has five basic modes of operation (not counting package building): installing, uninstalling, upgrading, querying, and verifying. This section contains an overview of each mode. For complete details and options, try <code class="command">rpm --help</code> or <code class="command">man rpm</code>. You can also refer to <a href="#s1-rpm-additional-resources" title="10.5. Additional Resources">Section 10.5, “Additional Resources”</a> for more information on RPM.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-finding"></a>10.2.1. Finding RPM Packages</h3>
                  </div>
                </div>
              </div>
              <p>
				Before using any RPM packages, you must know where to find them. An Internet search returns many RPM repositories, but if you are looking for RPM packages built by Red Hat, they can be found at the following locations:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						The Red Hat Enterprise Linux CD-ROMs
					</p>
                  </li>
                  <li>
                    <p>
						The Red Hat Errata Page available at <a href="http://www.redhat.com/apps/support/errata/">http://www.redhat.com/apps/support/errata/</a>
					</p>
                  </li>
                  <li>
                    <p>
						Red Hat Network — Refer to <a href="#ch-rhnetwork" title="Chapter 13. Red Hat Network">Chapter 13, <i>Red Hat Network</i></a> for more details on Red Hat Network.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-installing"></a>10.2.2. Installing</h3>
                  </div>
                </div>
              </div>
              <a id="id2924167" class="indexterm"></a>
              <a id="id2889041" class="indexterm"></a>
              <p>
				RPM packages typically have file names like <code class="filename">foo-1.0-1.i386.rpm</code>. The file name includes the package name (<code class="filename">foo</code>), version (<code class="filename">1.0</code>), release (<code class="filename">1</code>), and architecture (<code class="filename">i386</code>). To install a package, log in as root and type the following command at a shell prompt:
			</p>
              <pre class="screen"><code class="command">rpm -ivh foo-1.0-1.i386.rpm</code>
</pre>
              <p>
				Alternatively, the following command can also be used:
			</p>
              <pre class="screen"><code class="command">rpm -Uvh foo-1.0-1.i386.rpm</code>
</pre>
              <p>
				If the installation is successful, the following output is displayed:
			</p>
              <pre class="screen"><code class="computeroutput"> Preparing... ########################################### [100%] 1:foo ########################################### [100%]</code>
</pre>
              <p>
				As you can see, RPM prints out the name of the package and then prints a succession of hash marks as a progress meter while the package is installed.
			</p>
              <p>
				The signature of a package is checked automatically when installing or upgrading a package. The signature confirms that the package was signed by an authorized party. For example, if the verification of the signature fails, an error message such as the following is displayed:
			</p>
              <pre class="screen"><code class="computeroutput">error: V3 DSA signature: BAD, key ID 0352860f</code>
</pre>
              <p>
				If it is a new, header-only, signature, an error message such as the following is displayed:
			</p>
              <pre class="screen"><code class="computeroutput">error: Header V3 DSA signature: BAD, key ID 0352860f</code>
</pre>
              <p>
				If you do not have the appropriate key installed to verify the signature, the message contains the word <code class="computeroutput">NOKEY</code> such as:
			</p>
              <pre class="screen"><code class="computeroutput">warning: V3 DSA signature: NOKEY, key ID 0352860f</code>
</pre>
              <p>
				Refer to <a href="#s1-check-rpm-sig" title="10.3. Checking a Package's Signature">Section 10.3, “Checking a Package's Signature”</a> for more information on checking a package's signature.
			</p>
              <div class="warning">
                <h2>Warning</h2>
                <p>
					If you are installing a kernel package, you should use <code class="command">rpm -ivh</code> instead. Refer to <a href="#ch-kernel" title="Chapter 40. Manually Upgrading the Kernel">Chapter 40, <i>Manually Upgrading the Kernel</i></a> for details.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-rpm-errors"></a>10.2.2.1. Package Already Installed</h4>
                    </div>
                  </div>
                </div>
                <p>
					If a package of the same name and version is already installed, the following output is displayed:
				</p>
                <pre class="screen"><code class="computeroutput"> Preparing... ########################################### [100%] package foo-1.0-1 is already installed</code>
</pre>
                <p>
					However, if you want to install the package anyway, you can use the <code class="command">--replacepkgs</code> option, which tells RPM to ignore the error:
				</p>
                <pre class="screen"><code class="command">rpm -ivh --replacepkgs foo-1.0-1.i386.rpm</code>
</pre>
                <p>
					This option is helpful if files installed from the RPM were deleted or if you want the original configuration files from the RPM to be installed.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-rpm-conflicting-files"></a>10.2.2.2. Conflicting Files</h4>
                    </div>
                  </div>
                </div>
                <a id="id2898606" class="indexterm"></a>
                <p>
					If you attempt to install a package that contains a file which has already been installed by another package, the following is displayed:
				</p>
                <pre class="screen"><code class="computeroutput"> Preparing... ########################################### [100%] file /usr/bin/foo from install of foo-1.0-1 conflicts with file from package bar-2.0.20</code>
</pre>
                <p>
					To make RPM ignore this error, use the <code class="command">--replacefiles</code> option:
				</p>
                <pre class="screen"><code class="command">rpm -ivh --replacefiles foo-1.0-1.i386.rpm</code>
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-rpm-unresolved-dependency"></a>10.2.2.3. Unresolved Dependency</h4>
                    </div>
                  </div>
                </div>
                <a id="id2878860" class="indexterm"></a>
                <a id="id2930001" class="indexterm"></a>
                <p>
					RPM packages may sometimes depend on other packages, which means that they require other packages to be installed to run properly. If you try to install a package which has an unresolved dependency, output similar to the following is displayed:
				</p>
                <pre class="screen"><code class="computeroutput"> error: Failed dependencies: bar.so.2 is needed by foo-1.0-1 Suggested resolutions: bar-2.0.20-3.i386.rpm</code>
</pre>
                <p>
					If you are installing a package from the Red Hat Enterprise Linux CD-ROM set, it usually suggest the package(s) needed to resolve the dependency. Find the suggested package(s) on the Red Hat Enterprise Linux CD-ROMs or from Red Hat Network , and add it to the command:
				</p>
                <pre class="screen"><code class="command">rpm -ivh foo-1.0-1.i386.rpm bar-2.0.20-3.i386.rpm</code>
</pre>
                <p>
					If installation of both packages is successful, output similar to the following is displayed:
				</p>
                <pre class="screen"><code class="computeroutput"> Preparing... ########################################### [100%] 1:foo ########################################### [ 50%] 2:bar ########################################### [100%]</code>
</pre>
                <p>
					If it does not suggest a package to resolve the dependency, you can try the <code class="option">--redhatprovides</code> option to determine which package contains the required file. You need the <code class="filename">rpmdb-redhat</code> package installed to use this option.
				</p>
                <pre class="screen"><code class="command">rpm -q --redhatprovides bar.so.2</code>
</pre>
                <p>
					If the package that contains <code class="filename">bar.so.2</code> is in the installed database from the <code class="filename">rpmdb-redhat</code> package, the name of the package is displayed:
				</p>
                <pre class="screen"><code class="computeroutput">bar-2.0.20-3.i386.rpm</code>
</pre>
                <p>
					To force the installation anyway (which is not recommended since the package may not run correctly), use the <code class="option">--nodeps</code> option.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-uninstalling"></a>10.2.3. Uninstalling</h3>
                  </div>
                </div>
              </div>
              <a id="id2868479" class="indexterm"></a>
              <a id="id2931531" class="indexterm"></a>
              <p>
				Uninstalling a package is just as simple as installing one. Type the following command at a shell prompt:
			</p>
              <pre class="screen"><code class="command">rpm -e foo</code>
</pre>
              <div class="note">
                <h2>Note</h2>
                <p>
					Notice that we used the package <span class="emphasis"><em>name</em></span><code class="filename">foo</code>, not the name of the original package <span class="emphasis"><em>file</em></span><code class="filename">foo-1.0-1.i386.rpm</code>. To uninstall a package, replace <code class="filename">foo</code> with the actual package name of the original package.
				</p>
              </div>
              <p>
				You can encounter a dependency error when uninstalling a package if another installed package depends on the one you are trying to remove. For example:
			</p>
              <pre class="screen"><code class="computeroutput"> error: Failed dependencies: foo is needed by (installed) bar-2.0.20-3.i386.rpm</code>
</pre>
              <p>
				To make RPM ignore this error and uninstall the package anyway (which may break the package dependent on it) use the <code class="option">--nodeps</code> option.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-upgrading"></a>10.2.4. Upgrading</h3>
                  </div>
                </div>
              </div>
              <a id="id2877713" class="indexterm"></a>
              <a id="id2934247" class="indexterm"></a>
              <p>
				Upgrading a package is similar to installing one. Type the following command at a shell prompt:
			</p>
              <pre class="screen"><code class="command">rpm -Uvh foo-2.0-1.i386.rpm</code>
</pre>
              <p>
				As part of upgrading a package, RPM automatically uninstalls any old versions of the <code class="filename">foo</code> package. Note that <code class="option">-U</code> will also install a package even when there are no previous versions of the package installed.
			</p>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					It is not advisable to use the <code class="option">-U</code> option for installing kernel packages, because RPM replaces the previous kernel package. This does not affect a running system, but if the new kernel is unable to boot during your next restart, there would be no other kernel to boot instead.
				</p>
                <p>
					Using the <code class="option">-i</code> option adds the kernel to your GRUB boot menu (<code class="filename">/etc/grub.conf</code>). Similarly, removing an old, unneeded kernel removes the kernel from GRUB.
				</p>
              </div>
              <p>
				Because RPM performs intelligent upgrading of packages with configuration files, you may see a message like the following:
			</p>
              <a id="id2955658" class="indexterm"></a>
              <a id="id2955670" class="indexterm"></a>
              <pre class="screen"><code class="computeroutput">saving /etc/foo.conf as /etc/foo.conf.rpmsave</code>
</pre>
              <p>
				This message means that changes you made to the configuration file may not be <span class="emphasis"><em>forward compatible</em></span> with the new configuration file in the package, so RPM saved your original file and installed a new one. You should investigate the differences between the two configuration files and resolve them as soon as possible, to ensure that your system continues to function properly.
			</p>
              <p>
				If you attempt to upgrade to a package with an <span class="emphasis"><em>older</em></span> version number (that is, if a more updated version of the package is already installed), the output is similar to the following:
			</p>
              <pre class="screen"><code class="computeroutput">package foo-2.0-1 (which is newer than foo-1.0-1) is already installed</code>
</pre>
              <p>
				To force RPM to upgrade anyway, use the <code class="command">--oldpackage</code> option:
			</p>
              <pre class="screen"><code class="command">rpm -Uvh --oldpackage foo-1.0-1.i386.rpm</code>
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-freshening"></a>10.2.5. Freshening</h3>
                  </div>
                </div>
              </div>
              <a id="id2943683" class="indexterm"></a>
              <a id="id2943696" class="indexterm"></a>
              <a id="id2943710" class="indexterm"></a>
              <p>
				Freshening is similar to upgrading, except that only existent packages are upgraded. Type the following command at a shell prompt:
			</p>
              <pre class="screen"><code class="command">rpm -Fvh foo-1.2-1.i386.rpm</code>
</pre>
              <p>
				RPM's freshen option checks the versions of the packages specified on the command line against the versions of packages that have already been installed on your system. When a newer version of an already-installed package is processed by RPM's freshen option, it is upgraded to the newer version. However, RPM's freshen option does not install a package if no previously-installed package of the same name exists. This differs from RPM's upgrade option, as an upgrade <span class="emphasis"><em>does</em></span> install packages whether or not an older version of the package was already installed.
			</p>
              <p>
				Freshening works for single packages or package groups. If you have just downloaded a large number of different packages, and you only want to upgrade those packages that are already installed on your system, freshening does the job. Thus, you do not have to delete any unwanted packages from the group that you downloaded before using RPM.
			</p>
              <p>
				In this case, issue the following command:
			</p>
              <pre class="screen"><code class="command">rpm -Fvh *.rpm</code>
</pre>
              <p>
				RPM automatically upgrades only those packages that are already installed.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-querying"></a>10.2.6. Querying</h3>
                  </div>
                </div>
              </div>
              <a id="id2952368" class="indexterm"></a>
              <a id="id2952381" class="indexterm"></a>
              <p>
				The RPM database stores information about all RPM packages installed in your system. It is stored in the directory <code class="filename">/var/lib/rpm/</code>, and is used to query what packages are installed, what versions each package is, and any changes to any files in the package since installation, among others.
			</p>
              <p>
				To query this database, use the <code class="command">-q</code> option. The <code class="command">rpm -q <em class="replaceable"><code>package name</code></em></code> command displays the package name, version, and release number of the installed package <code class="command"><em class="replaceable"><code>package name</code></em></code>. For example, using <code class="command">rpm -q foo</code> to query installed package <code class="filename">foo</code> might generate the following output:
			</p>
              <pre class="screen"><code class="computeroutput">foo-2.0-1</code>
</pre>
              <p>
				You can also use the following <span class="emphasis"><em>Package Selection Options</em></span> with <code class="command">-q</code> to further refine or qualify your query:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">-a</code> — queries all currently installed packages.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-f <code class="filename"><em class="replaceable"><code>&lt;filename&gt;</code></em></code></code> — queries the RPM database for which package owns <code class="filename"><em class="replaceable"><code>&lt;filename&gt;</code></em></code>. When specifying a file, specify the absolute path of the file (for example, <code class="command">rpm -f <code class="filename">/bin/ls</code></code>).
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-p <code class="filename"><em class="replaceable"><code>&lt;packagefile&gt;</code></em></code></code> — queries the uninstalled package <code class="filename"><em class="replaceable"><code>&lt;packagefile&gt;</code></em></code>.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				There are a number of ways to specify what information to display about queried packages. The following options are used to select the type of information for which you are searching. These are called <span class="emphasis"><em>Information Query Options</em></span>.
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">-i</code> displays package information including name, description, release, size, build date, install date, vendor, and other miscellaneous information.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-l</code> displays the list of files that the package contains.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-s</code> displays the state of all the files in the package.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-d</code> displays a list of files marked as documentation (man pages, info pages, READMEs, etc.).
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-c</code> displays a list of files marked as configuration files. These are the files you edit after installation to adapt and customize the package to your system (for example, <code class="filename">sendmail.cf</code>, <code class="filename">passwd</code>, <code class="filename">inittab</code>, etc.).
					</p>
                  </li>
                </ul>
              </div>
              <p>
				For options that display lists of files, add <code class="command">-v</code> to the command to display the lists in a familiar <code class="command">ls -l</code> format.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-verifying"></a>10.2.7. Verifying</h3>
                  </div>
                </div>
              </div>
              <a id="id2896151" class="indexterm"></a>
              <a id="id2896164" class="indexterm"></a>
              <p>
				Verifying a package compares information about files installed from a package with the same information from the original package. Among other things, verifying compares the size, MD5 sum, permissions, type, owner, and group of each file.
			</p>
              <p>
				The command <code class="command">rpm -V</code> verifies a package. You can use any of the <span class="emphasis"><em>Package Verify Options</em></span> listed for querying to specify the packages you wish to verify. A simple use of verifying is <code class="command">rpm -V foo</code>, which verifies that all the files in the <code class="command">foo</code> package are as they were when they were originally installed. For example:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						To verify a package containing a particular file:
					</p>
                    <pre class="screen"><code class="command">rpm -Vf /usr/bin/foo</code>
</pre>
                    <p>
						In this example, <code class="filename">/usr/bin/foo</code> is the absolute path to the file used to query a package.
					</p>
                  </li>
                  <li>
                    <p>
						To verify ALL installed packages throughout the system:
					</p>
                    <pre class="screen"><code class="command">rpm -Va</code>
</pre>
                  </li>
                  <li>
                    <p>
						To verify an installed package against an RPM package file:
					</p>
                    <pre class="screen"><code class="command">rpm -Vp foo-1.0-1.i386.rpm</code>
</pre>
                    <p>
						This command can be useful if you suspect that your RPM databases are corrupt.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If everything verified properly, there is no output. If there are any discrepancies, they are displayed. The format of the output is a string of eight characters (a <code class="computeroutput">c</code> denotes a configuration file) and then the file name. Each of the eight characters denotes the result of a comparison of one attribute of the file to the value of that attribute recorded in the RPM database. A single period (<code class="computeroutput">.</code>) means the test passed. The following characters denote specific discrepancies:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="computeroutput">5</code> — MD5 checksum
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">S</code> — file size
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">L</code> — symbolic link
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">T</code> — file modification time
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">D</code> — device
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">U</code> — user
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">G</code> — group
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">M</code> — mode (includes permissions and file type)
					</p>
                  </li>
                  <li>
                    <p>
						<code class="computeroutput">?</code> — unreadable file
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If you see any output, use your best judgment to determine if you should remove the package, reinstall it, or fix the problem in another way.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-check-rpm-sig"></a>10.3. Checking a Package's Signature</h2>
                </div>
              </div>
            </div>
            <a id="id2954747" class="indexterm"></a>
            <p>
			If you wish to verify that a package has not been corrupted or tampered with, examine only the md5sum by typing the following command at a shell prompt (where <em class="replaceable"><code>&lt;rpm-file&gt;</code></em> is the file name of the RPM package):
		</p>
            <pre class="screen"><code class="command">rpm -K --nosignature <em class="replaceable"><code>&lt;rpm-file&gt;</code></em></code>
</pre>
            <p>
			The message <code class="computeroutput"><em class="replaceable"><code>&lt;rpm-file&gt;</code></em>: md5 OK</code> is displayed. This brief message means that the file was not corrupted by the download. To see a more verbose message, replace <code class="option">-K</code> with <code class="option">-Kvv</code> in the command.
		</p>
            <p>
			On the other hand, how trustworthy is the developer who created the package? If the package is <em class="firstterm">signed</em> with the developer's GnuPG <em class="firstterm">key</em>, you know that the developer really is who they say they are.
		</p>
            <a id="id2942002" class="indexterm"></a>
            <a id="id2942015" class="indexterm"></a>
            <a id="id2942028" class="indexterm"></a>
            <p>
			An RPM package can be signed using <em class="firstterm">Gnu Privacy Guard</em> (or GnuPG), to help you make certain your downloaded package is trustworthy.
		</p>
            <p>
			GnuPG is a tool for secure communication; it is a complete and free replacement for the encryption technology of PGP, an electronic privacy program. With GnuPG, you can authenticate the validity of documents and encrypt/decrypt data to and from other recipients. GnuPG is capable of decrypting and verifying PGP 5.<em class="replaceable"><code>x</code></em> files as well.
		</p>
            <p>
			During installation, GnuPG is installed by default. That way you can immediately start using GnuPG to verify any packages that you receive from Red Hat. Before doing so, you must first import Red Hat's public key.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-keys-importing"></a>10.3.1. Importing Keys</h3>
                  </div>
                </div>
              </div>
              <p>
				To verify Red Hat packages, you must import the Red Hat GPG key. To do so, execute the following command at a shell prompt:
			</p>
              <pre class="screen"><code class="command">rpm --import /usr/share/rhn/RPM-GPG-KEY</code>
</pre>
              <p>
				To display a list of all keys installed for RPM verification, execute the command:
			</p>
              <pre class="screen"><code class="command">rpm -qa gpg-pubkey*</code>
</pre>
              <p>
				For the Red Hat key, the output includes:
			</p>
              <pre class="screen"><code class="computeroutput">gpg-pubkey-db42a60e-37ea5438</code>
</pre>
              <p>
				To display details about a specific key, use <code class="command">rpm -qi</code> followed by the output from the previous command:
			</p>
              <pre class="screen"><code class="command">rpm -qi gpg-pubkey-db42a60e-37ea5438</code>
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-keys-checking"></a>10.3.2. Verifying Signature of Packages</h3>
                  </div>
                </div>
              </div>
              <p>
				To check the GnuPG signature of an RPM file after importing the builder's GnuPG key, use the following command (replace <em class="replaceable"><code>&lt;rpm-file&gt;</code></em> with the filename of the RPM package):
			</p>
              <pre class="screen"><code class="command">rpm -K <em class="replaceable"><code>&lt;rpm-file&gt;</code></em></code>
</pre>
              <p>
				If all goes well, the following message is displayed: <code class="computeroutput">md5 gpg OK</code>. This means that the signature of the package has been verified, and that it is not corrupt.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-rpm-impressing"></a>10.4. Practical and Common Examples of RPM Usage</h2>
                </div>
              </div>
            </div>
            <a id="id2891788" class="indexterm"></a>
            <a id="id2891802" class="indexterm"></a>
            <p>
			RPM is a useful tool for both managing your system and diagnosing and fixing problems. The best way to make sense of all of its options is to look at some examples.
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Perhaps you have deleted some files by accident, but you are not sure what you deleted. To verify your entire system and see what might be missing, you could try the following command:
				</p>
                  <a id="id2891833" class="indexterm"></a>
                  <a id="id2939110" class="indexterm"></a>
                  <pre class="screen"><code class="command">rpm -Va</code>
</pre>
                  <p>
					If some files are missing or appear to have been corrupted, you should probably either re-install the package or uninstall and then re-install the package.
				</p>
                </li>
                <li>
                  <p>
					At some point, you might see a file that you do not recognize. To find out which package owns it, enter:
				</p>
                  <a id="id2939150" class="indexterm"></a>
                  <a id="id2939163" class="indexterm"></a>
                  <pre class="screen"><code class="command">rpm -qf /usr/bin/ggv</code>
</pre>
                  <p>
					The output would look like the following:
				</p>
                  <pre class="screen"><code class="computeroutput">ggv-2.6.0-2</code>
</pre>
                </li>
                <li>
                  <p>
					We can combine the above two examples in the following scenario. Say you are having problems with <code class="filename">/usr/bin/paste</code>. You would like to verify the package that owns that program, but you do not know which package owns <code class="command">paste</code>. Enter the following command,
				</p>
                  <pre class="screen"><code class="command">rpm -Vf /usr/bin/paste</code>
</pre>
                  <p>
					and the appropriate package is verified.
				</p>
                </li>
                <li>
                  <p>
					Do you want to find out more information about a particular program? You can try the following command to locate the documentation which came with the package that owns that program:
				</p>
                  <a id="id2958715" class="indexterm"></a>
                  <a id="id2878152" class="indexterm"></a>
                  <a id="id2878165" class="indexterm"></a>
                  <pre class="screen"><code class="command">rpm -qdf /usr/bin/free</code>
</pre>
                  <p>
					The output would be similar to the following:
				</p>
                  <pre class="screen"><code class="computeroutput">/usr/share/doc/procps-3.2.3/BUGS /usr/share/doc/procps-3.2.3/FAQ /usr/share/doc/procps-3.2.3/NEWS /usr/share/doc/procps-3.2.3/TODO /usr/share/man/man1/free.1.gz /usr/share/man/man1/pgrep.1.gz /usr/share/man/man1/pkill.1.gz /usr/share/man/man1/pmap.1.gz /usr/share/man/man1/ps.1.gz /usr/share/man/man1/skill.1.gz /usr/share/man/man1/slabtop.1.gz /usr/share/man/man1/snice.1.gz /usr/share/man/man1/tload.1.gz /usr/share/man/man1/top.1.gz /usr/share/man/man1/uptime.1.gz /usr/share/man/man1/w.1.gz /usr/share/man/man1/watch.1.gz /usr/share/man/man5/sysctl.conf.5.gz /usr/share/man/man8/sysctl.8.gz /usr/share/man/man8/vmstat.8.gz</code>
</pre>
                </li>
                <li>
                  <p>
					You may find a new RPM, but you do not know what it does. To find information about it, use the following command:
				</p>
                  <a id="id2878224" class="indexterm"></a>
                  <a id="id2851698" class="indexterm"></a>
                  <pre class="screen"><code class="command">rpm -qip crontabs-1.10-7.noarch.rpm</code>
</pre>
                  <p>
					The output would be similar to the following:
				</p>
                  <pre class="screen"><code class="computeroutput"> Name : crontabs Relocations: (not relocatable) Version : 1.10 Vendor: Red Hat, Inc. Release : 7 Build Date: Mon 20 Sep 2004 05:58:10 PM EDT Install Date: (not installed) Build Host: tweety.build.redhat.com Group : System Environment/Base Source RPM: crontabs-1.10-7.src.rpm Size : 1004 License: Public Domain Signature : DSA/SHA1, Wed 05 Jan 2005 06:05:25 PM EST, Key ID 219180cddb42a60e Packager : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt; Summary : Root crontab files used to schedule the execution of programs. Description : The crontabs package contains root crontab files. Crontab is the program used to install, uninstall, or list the tables used to drive the cron daemon. The cron daemon checks the crontab files to see when particular commands are scheduled to be executed. If commands are scheduled, then it executes them.</code>
</pre>
                </li>
                <li>
                  <p>
					Perhaps you now want to see what files the <code class="filename">crontabs</code> RPM installs. You would enter the following:
				</p>
                  <a id="id2851766" class="indexterm"></a>
                  <a id="id2948183" class="indexterm"></a>
                  <pre class="screen"><code class="command">rpm -qlp crontabs-1.10-5.noarch.rpm</code>
</pre>
                  <p>
					The output is similar to the following:
				</p>
                  <pre class="screen"><code class="computeroutput"> /etc/cron.daily /etc/cron.hourly /etc/cron.monthly /etc/cron.weekly /etc/crontab /usr/bin/run-parts</code>
</pre>
                </li>
              </ul>
            </div>
            <p>
			These are just a few examples. As you use RPM, you may find more uses for it.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-rpm-additional-resources"></a>10.5. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2948240" class="indexterm"></a>
            <p>
			RPM is an extremely complex utility with many options and methods for querying, installing, upgrading, and removing packages. Refer to the following resources to learn more about RPM.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-installed-docs"></a>10.5.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">rpm --help</code> — This command displays a quick reference of RPM parameters.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">man rpm</code> — The RPM man page gives more detail about RPM parameters than the <code class="command">rpm --help</code> command.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-useful-websites"></a>10.5.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <a id="id2888784" class="indexterm"></a>
                <ul>
                  <li>
                    <p>
						<a href="http://www.rpm.org/">http://www.rpm.org/</a> — The RPM website.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.redhat.com/mailman/listinfo/rpm-list/">http://www.redhat.com/mailman/listinfo/rpm-list/</a> — The RPM mailing list is archived here. To subscribe, send mail to <code class="email">&lt;<a href="mailto:rpm-list-request@redhat.com">rpm-list-request@redhat.com</a>&gt;</code>
						 with the word <code class="command">subscribe</code> in the subject line.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-rpm-related-books"></a>10.5.3. Related Books</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <a id="id2949528" class="indexterm"></a>
                <a id="id2949542" class="indexterm"></a>
                <ul>
                  <li>
                    <p>
						<em class="citetitle">Red Hat RPM Guide</em> by Eric Foster-Johnson; Wiley, John &amp; Sons, Incorporated — This book is a comprehensive guide to RPM, from installing packages to building RPMs.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-graphical-rpm"></a>Chapter 11. <span><strong class="application">Package Management Tool</strong></span></h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-graphical-rpm-analyzing">11.1. Listing and Analyzing Packages</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-graphical-rpm-installing">11.2. Installing and Removing Packages</a>
                </span>
              </dt>
            </dl>
          </div>
          <a id="id2930128" class="indexterm"></a>
          <a id="id2932078" class="indexterm"></a>
          <a id="id2912712" class="indexterm"></a>
          <p>
		If you prefer to use a graphical interface to view and manage packages in your system, you can use the <span><strong class="application">Package Management Tool</strong></span>, better known as <span class="emphasis"><em>pirut</em></span>. This tool allows you to perform basic package management of your system through an easy-to-use interface to remove installed packages or download (and install) packages compatible to your system. It also allows you to view what packages are installed in your system and which ones are available for download from Red Hat Network. In addition, the <span><strong class="application">Package Management Tool</strong></span> also automatically resolves any critical dependencies when you install or remove packages in the same way that the <code class="command">rpm</code> command does.
	</p>
          <div class="note">
            <h2>Note</h2>
            <p>
			While the <span><strong class="application">Package Management Tool</strong></span> can automatically resolve dependencies during package installation and removal, it <span class="emphasis"><em>cannot</em></span> perform a forced install / remove the same way that <code class="command">rpm -e --nodeps</code> or <code class="command">rpm -U --nodeps</code> can.
		</p>
          </div>
          <p>
		The X Window System is required to run the <span><strong class="application">Package Management Tool</strong></span>. To start the application, go to <span><strong class="guimenu">Applications</strong></span> (the main menu on the panel) =&gt; <span><strong class="guimenu">Add/Remove Software</strong></span>. Alternatively, you can type the commands <code class="command">system-config-packages</code> or <code class="command">pirut</code> at shell prompt.
	</p>
          <div class="figure">
            <a id="fig-redhat-config-packages"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="images/redhat-config-packages.png" alt="Package Management Tool" />
                <div class="longdesc">
                  <p>
					Package Management Tool
				</p>
                </div>
              </div>
            </div>
            <h6>Figure 11.1. Package Management Tool</h6>
          </div>
          <br class="figure-break" />
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-graphical-rpm-analyzing"></a>11.1. Listing and Analyzing Packages</h2>
                </div>
              </div>
            </div>
            <a id="id2923582" class="indexterm"></a>
            <a id="id2912983" class="indexterm"></a>
            <a id="id2876855" class="indexterm"></a>
            <p>
			You can use the <span><strong class="application">Package Management Tool</strong></span> to search and list all packages installed in your system, as well as any packages available for you to download. The <span><strong class="guibutton"><span class="accel">B</span>rowse</strong></span>, <span><strong class="guibutton"><span class="accel">S</span>earch</strong></span>, and <span><strong class="guibutton"><span class="accel">L</span>ist</strong></span> tabs present different options in viewing, analyzing, installing or removing packages.
		</p>
            <p>
			The <span><strong class="guibutton"><span class="accel">B</span>rowse</strong></span> tab allows you to view packages by group. In <a href="#fig-redhat-config-packages" title="Figure 11.1. Package Management Tool">Figure 11.1, “Package Management Tool”</a>, the left window shows the different package group types you can choose from (for example, Desktop Environments, Applications, Development and more). When a package group type is selected, the right window displays the different package groups of that type.
		</p>
            <p>
			To view what packages are included in a package group, click <span><strong class="guibutton"><span class="accel">O</span>ptional packages</strong></span>. Installed packages are checked.
		</p>
            <div class="figure">
              <a id="fig-redhat-optional-packages"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/redhat-optional-packages.png" alt="Optional Packages" />
                  <div class="longdesc">
                    <p>
						Optional Packages
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 11.2. Optional Packages</h6>
            </div>
            <br class="figure-break" />
            <p>
			The <span><strong class="guibutton"><span class="accel">L</span>ist</strong></span> tab displays a list of packages installed or available for download. Packages already installed in your system are marked with a green check ( 
			<span class="inlinemediaobject"><img src="images/icon-greencheck-pkgs.png" /></span>
			 ).
		</p>
            <p>
			By default, the <span><strong class="guibutton"><span class="accel">A</span>ll packages</strong></span> option above the main window is selected; this specifies that all packages be displayed. Use the <span><strong class="guibutton"><span class="accel">I</span>nstalled packages</strong></span> option to display only packages that are already installed in your system, and the <span><strong class="guibutton">A<span class="accel">v</span>ailable packages</strong></span> option to view what packages you can download and install.
		</p>
            <p>
			The <span><strong class="guibutton"><span class="accel">S</span>earch</strong></span> tab allows you to use keywords to search for particular packages. This tab also allows you to view a short description of a package. To do so, simply select a package and click the <span><strong class="guibutton">Package <span class="accel">D</span>etails</strong></span> button below the main window.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-graphical-rpm-installing"></a>11.2. Installing and Removing Packages</h2>
                </div>
              </div>
            </div>
            <a id="id2938788" class="indexterm"></a>
            <a id="id2905898" class="indexterm"></a>
            <a id="id2892507" class="indexterm"></a>
            <a id="id2937553" class="indexterm"></a>
            <a id="id2859899" class="indexterm"></a>
            <a id="id2929107" class="indexterm"></a>
            <p>
			To install a package available for download, click the checkbox beside the package name. When you do so, an installation icon ( 
			<span class="inlinemediaobject"><img src="images/icon-install-prep.png" /></span>
			 ) appears beside its checkbox. This indicates that the package is queued for download and installation. You can select multiple packages to download and install; once you have made your selection, click the <span><strong class="guibutton"><span class="accel">A</span>pply</strong></span> button.
		</p>
            <div class="figure">
              <a id="fig-install-packages"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/individual-pkgs.png" alt="Package installation" />
                  <div class="longdesc">
                    <p>
						Package installation
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 11.3. Package installation</h6>
            </div>
            <br class="figure-break" />
            <p>
			If there are any package dependencies for your selected downloads, the <span><strong class="application">Package Management Tool</strong></span> will notify you accordingly. Click <span><strong class="guibutton"><span class="accel">D</span>etails</strong></span> to view what additional packages are needed. To proceed with downloading and installing the package (along with all other dependent packages) click <span><strong class="guibutton"><span class="accel">C</span>ontinue</strong></span>.
		</p>
            <div class="figure">
              <a id="fig-install-depend-packages"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/install-depend-prep.png" alt="Package dependencies: installation" />
                  <div class="longdesc">
                    <p>
						Package dependencies: installation
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 11.4. Package dependencies: installation</h6>
            </div>
            <br class="figure-break" />
            <p>
			Removing a package can be done in a similar manner. To remove a package installed in your system, click the checkbox beside the package name. The green check appearing beside the package name will be replaced by a package removal icon ( 
			<span class="inlinemediaobject"><img src="images/icon-removal-prep.png" /></span>
			 ). This indicates that the package is queued for removal; you can also select multiple packages to be removed at the same time. Once you have selected the packages you want to remove, click the <span><strong class="guimenu"><span class="accel">A</span>pply</strong></span> button.
		</p>
            <div class="figure">
              <a id="fig-remove-packages"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/removal-prep.png" alt="Package removal" />
                  <div class="longdesc">
                    <p>
						Package removal
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 11.5. Package removal</h6>
            </div>
            <br class="figure-break" />
            <p>
			Note that if any other installed packages are dependent on the package you are removing, they will be removed as well. The <span><strong class="application">Package Management Tool</strong></span> will notify you if there are any such dependencies. Click <span><strong class="guibutton"><span class="accel">D</span>etails</strong></span> to view what packages are dependent on the one you are removing. To proceed with removing your selected package/s (along with all other dependent packages) click <span><strong class="guibutton"><span class="accel">C</span>ontinue</strong></span>.
		</p>
            <div class="figure">
              <a id="fig-remove-depend-packages"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/remove-depend-prep.png" alt="Package dependencies: removal" />
                  <div class="longdesc">
                    <p>
						Package dependencies: removal
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 11.6. Package dependencies: removal</h6>
            </div>
            <br class="figure-break" />
            <p>
			You can install and remove multiple packages by selecting packages to be installed / removed and then clicking <span><strong class="guibutton"><span class="accel">A</span>pply</strong></span>. The <span><strong class="guilabel">Package selections</strong></span> window displays the number of packages to be installed and removed.
		</p>
            <div class="figure">
              <a id="fig-remove-install-packages"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/package-selections.png" alt="Installing and removing packages simultaneously" />
                  <div class="longdesc">
                    <p>
						Installing and removing packages simultaneously
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 11.7. Installing and removing packages simultaneously</h6>
            </div>
            <br class="figure-break" />
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="c1-yum"></a>Chapter 12. YUM (Yellowdog Updater Modified)</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-yum-repo-setup">12.1. Setting Up a <code class="command">yum</code> Repository</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-yum-useful-commands">12.2. <code class="command">yum</code> Commands</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-yum-common-options">12.3. <code class="command">yum</code> Options</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-yum-yumconf">12.4. Configuring <code class="command">yum</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-yumconf-main">12.4.1. <code class="command">[main]</code> Options</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-yum-yumconf-repository">12.4.2. <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> Options</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-yum-useful-variables">12.5. Useful <code class="command">yum</code> Variables</a>
                </span>
              </dt>
            </dl>
          </div>
          <p>
		<em class="firstterm">Yellowdog Update, Modified</em> (YUM) is a package manager that was developed by Duke University to improve the installation of RPMs. <code class="command">yum</code> searches numerous repositories for packages and their dependencies so they may be installed together in an effort to alleviate dependency issues. Red Hat Enterprise Linux 5.2 uses <code class="command">yum</code> to fetch packages and install RPMs.
	</p>
          <p>
		<code class="command">up2date</code> is now deprecated in favor of <code class="command">yum</code> (Yellowdog Updater Modified). The entire stack of tools which installs and updates software in Red Hat Enterprise Linux 5.2 is now based on <code class="command">yum</code>. This includes everything, from the initial installation via <span><strong class="application">Anaconda</strong></span> to host software management tools like <code class="command">pirut</code>.
	</p>
          <p>
		<code class="command">yum</code> also allows system administrators to configure a local (i.e. available over a local network) repository to supplement packages provided by Red Hat. This is useful for user groups that use applications and packages that are not officially supported by Red Hat.
	</p>
          <p>
		Aside from being able to supplement available packages for local users, using a local <code class="command">yum</code> repository also saves bandwidth for the entire network. Further, clients that use local <code class="command">yum</code> repositories do not need to be registered individually to install or update the latest packages from Red Hat Network.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-yum-repo-setup"></a>12.1. Setting Up a <code class="command">yum</code> Repository</h2>
                </div>
              </div>
            </div>
            <p>
			To set up a repository, follow these steps:
		</p>
            <div class="procedure">
              <a id="id2885585"></a>
              <h6>Procedure 12.1. Setting Up a <code class="command">yum</code> Repository</h6>
              <ol class="1">
                <li>
                  <p>
					Install the <code class="filename">createrepo</code> package.
				</p>
                </li>
                <li>
                  <p>
					Copy all the packages into one directory (for example, <code class="filename">/mnt/local_repo</code>).
				</p>
                </li>
                <li>
                  <p>
					Run <code class="command">createrepo</code> on that directory (for example, <code class="command">createrepo /mnt/local_repo</code>). This will create the necessary metadata for your <code class="command">yum</code> repository.
				</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-yum-useful-commands"></a>12.2. <code class="command">yum</code> Commands</h2>
                </div>
              </div>
            </div>
            <p>
			<code class="command">yum</code> commands are typically run as <code class="command">yum <em class="replaceable"><code> &lt;command&gt; &lt;package name/s&gt;</code></em></code>. By default, <code class="command">yum</code> will automatically attempt to check all configured repositories to resolve all package dependencies during an installation/upgrade.
		</p>
            <p>
			The following is a list of the most commonly-used <code class="command">yum</code> commands. For a complete list of available <code class="command">yum</code> commands, refer to <code class="command">man yum</code>.
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">
                    <code class="command">yum install <em class="replaceable"><code>&lt;package name/s&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Used to install the latest version of a package or group of packages. If no package matches the specified package name(s), they are assumed to be a shell glob, and any matches are then installed.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">yum update <em class="replaceable"><code>&lt;package name/s&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Used to update the specified packages to the latest available version. If no package name/s are specified, then <code class="command">yum</code> will attempt to update all installed packages.
					</p>
                  <p>
						If the <code class="command">--obsoletes</code> option is used (i.e. <code class="command">yum --obsoletes <em class="replaceable"><code>&lt;package name/s&gt;</code></em></code>, <code class="command">yum</code> will process obsolete packages. As such, packages that are obsoleted accross updates will be removed and replaced accordingly.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">yum check-update</code>
                  </span>
                </dt>
                <dd>
                  <p>
						This command allows you to determine whether any updates are available for your installed packages. <code class="command">yum</code> returns a list of all package updates from all repositories if any are available.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">yum remove <em class="replaceable"><code>&lt;package name/s&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Used to remove specified packages, along with any other packages dependent on the packages being removed.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">yum provides <em class="replaceable"><code>&lt;file name&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Used to determine which packages provide a specific file or feature.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">yum search <em class="replaceable"><code>&lt;keyword&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						This command is used to find any packages containing the specified keyword in the description, summary, packager and package name fields of RPMs in all repositories.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">yum localinstall <em class="replaceable"><code>&lt;absolute path to package name/s&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Used when using <code class="command">yum</code> to install a package located locally in the machine.
					</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-yum-common-options"></a>12.3. <code class="command">yum</code> Options</h2>
                </div>
              </div>
            </div>
            <p>
			<code class="command">yum</code> options are typically stated before specific <code class="command">yum</code> commands; i.e. <code class="command">yum <em class="replaceable"><code>&lt;options&gt; &lt;command&gt; &lt;package name/s&gt;</code></em></code>. Most of these options can be set as default using the configuration file.
		</p>
            <p>
			The following is a list of the most commonly-used <code class="command">yum</code> options. For a complete list of available <code class="command">yum</code> options, refer to <code class="command">man yum</code>.
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">
                    <code class="command">-y</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Answer "yes" to every question in the transaction.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">-t</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Sets <code class="command">yum</code> to be "tolerant" of errors with regard to packages specified in the transaction. For example, if you run <code class="command">yum update package1 package2</code> and <code class="filename">package2</code> is already installed, <code class="command">yum</code> will continue to install <code class="command">package1</code>.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">--exclude=<em class="replaceable"><code>&lt;package name&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						Excludes a specific package by name or glob in a specific transaction.
					</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-yum-yumconf"></a>12.4. Configuring <code class="command">yum</code></h2>
                </div>
              </div>
            </div>
            <p>
			By default, <code class="command">yum</code> is configured through <code class="filename">/etc/yum.conf</code>. The following is an example of a typical <code class="filename">/etc/yum.conf</code> file:
		</p>
            <pre class="screen">
[main]
cachedir=/var/cache/yum
keepcache=0
debuglevel=2
logfile=/var/log/yum.log
pkgpolicy=newest
distroverpkg=redhat-release
tolerant=1
exactarch=1
obsoletes=1
gpgcheck=1
plugins=1
metadata_expire=1800

[myrepo]
name=RHEL 5 $releasever - $basearch
baseurl=http://local/path/to/yum/repository/
enabled=1
</pre>
            <p>
			A typical <code class="filename">/etc/yum.conf</code> file is made up of two types of sections: a <code class="command">[main]</code> section, and a repository section. There can only be one <code class="command">[main]</code> section, but you can specify multiple repositories in a single <code class="filename">/etc/yum.conf</code>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-yum-yumconf-main"></a>12.4.1. <code class="command">[main]</code> Options</h3>
                  </div>
                </div>
              </div>
              <p>
				The <code class="command">[main]</code> section is mandatory, and there must only be one. For a complete list of options you can use in the <code class="command">[main]</code> section, refer to <code class="command">man yum.conf</code>.
			</p>
              <p>
				The following is a list of the most commonly-used options in the <code class="command">[main]</code> section.
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">cachedir</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This option specifies the directory where <code class="command">yum</code> should store its cache and database files. By default, the cache directory of <code class="command">yum</code> is <code class="filename">/var/cache/yum</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">keepcache=<em class="replaceable"><code>&lt;1 or 0&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Setting <code class="command">keepcache=1</code> instructs <code class="command">yum</code> to keep the cache of headers and packages after a successful installation. <code class="command">keepcache=1</code> is the default.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">reposdir=<em class="replaceable"><code>&lt;absolute path to directory of .repo files&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This option allows you to specify a directory where <code class="filename">.repo</code> files are located. <code class="filename">.repo</code> files contain repository information (similar to the <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> section of <code class="filename">/etc/yum.conf</code>).
						</p>
                    <p>
							<code class="command">yum</code> collects all repository information from <code class="filename">.repo</code> files and the <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> section of the <code class="filename">/etc/yum.conf</code> file to create a master list of repositories to use for each transaction. Refer to <a href="#s1-yum-yumconf-repository" title="12.4.2. [repository] Options">Section 12.4.2, “<code class="command">[<em class="replaceable"><code>repository</code></em>]</code> Options”</a> for more information about options you can use for both the <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> section and <code class="filename">.repo</code> files.
						</p>
                    <p>
							If <code class="command">reposdir</code> is not set, <code class="command">yum</code> uses the default directory <code class="filename">/etc/yum.repos.d</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">gpgcheck=<em class="replaceable"><code>&lt;1 or 0&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This disables/enables GPG signature checking on packages on all repositories, including local package installation. The default is <code class="command">gpgcheck=0</code>, which disables GPG checking.
						</p>
                    <p>
							If this option is set in the <code class="command">[main]</code> section of the <code class="filename">/etc/yum.conf</code> file, it sets the GPG checking rule for all repositories. However, you can also set this on individual repositories instead; i.e., you can enable GPG checking on one repository while disabling it on another.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">assumeyes=<em class="replaceable"><code>&lt;1 or 0&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This determines whether or not <code class="command">yum</code> should prompt for confirmation of critical actions. The default if <code class="command">assumeyes=0</code>, which means <code class="command">yum</code> will prompt you for confirmation.
						</p>
                    <p>
							If <code class="command">assumeyes=1</code> is set, <code class="command">yum</code> behaves in the same way that the command line option <code class="command">-y</code> does.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">tolerant=<em class="replaceable"><code>&lt;1 or 0&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							When enabled (<code class="command">tolerant=1</code>), <code class="command">yum</code> will be tolerant of errors on the command line with regard to packages. This is similar to the <code class="command">yum</code> command line option <code class="command">-t</code>.
						</p>
                    <p>
							The default value for this is <code class="command">tolerant=0</code> (not tolerant).
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">exclude=<em class="replaceable"><code>&lt;package name/s&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This option allows you to exclude packages by keyword during installation/updates. If you are specifying multiple packages, this is a space-delimited list. Shell globs using wildcards (for example, * and ?) are allowed.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">retries=<em class="replaceable"><code>&lt;number of retries&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This sets the number of times <code class="command">yum</code> should attempt to retrieve a file before returning an error. Setting this to 0 makes <code class="command">yum</code> retry forever. The default value is 6.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-yum-yumconf-repository"></a>12.4.2. <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> Options</h3>
                  </div>
                </div>
              </div>
              <p>
				The <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> section of the <code class="filename">/etc/yum.conf</code> file contains information about a repository <code class="command">yum</code> can use to find packages during package installation, updating and dependency resolution. A repository entry takes the following form:
			</p>
              <pre class="screen">
[<em class="replaceable"><code>repository ID</code></em>]
name=<em class="replaceable"><code>repository name</code></em>
baseurl=<em class="replaceable"><code>url, file or ftp</code></em>://<em class="replaceable"><code>path to repository</code></em>
</pre>
              <p>
				You can also specify repository information in a separate <code class="filename">.repo</code> files (for example, <code class="filename">rhel5.repo</code>). The format of repository information placed in <code class="filename">.repo</code> files is identical with the <code class="command">[<em class="replaceable"><code>repository</code></em>]</code> of <code class="filename">/etc/yum.conf</code>.
			</p>
              <p>
				<code class="filename">.repo</code> files are typically placed in <code class="filename">/etc/yum.repos.d</code>, unless you specify a different repository path in the <code class="command">[main]</code> section of <code class="filename">/etc/yum.conf</code> with <code class="command">reposdir=</code>. <code class="filename">.repo</code> files and the <code class="filename">/etc/yum.conf</code> file can contain multiple repository entries.
			</p>
              <p>
				Each repository entry consists of the following mandatory parts:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">[<em class="replaceable"><code>repository ID</code></em>]</span>
                  </dt>
                  <dd>
                    <p>
							The repository ID is a unique, one-word string that serves as a repository identifier.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">name=<em class="replaceable"><code>repository name</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This is a human-readable string describing the repository.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">baseurl=<em class="replaceable"><code>http, file or ftp</code></em>://<em class="replaceable"><code>path</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This is a URL to the directory where the <code class="filename">repodata</code>directory of a repository is located. If the repository is local to the machine, use <code class="command">baseurl=file://<em class="replaceable"><code>path to local repository</code></em></code>. If the repository is located online using HTTP, use <code class="command">baseurl=http://<em class="replaceable"><code>link</code></em></code>. If the repository is online and uses FTP, use <code class="command">baseurl=ftp://<em class="replaceable"><code>link</code></em></code>.
						</p>
                    <p>
							If a specific online repository requires basic HTTP authentication, you can specify your username and password in the <code class="command">baseurl</code> line by prepending it as <em class="replaceable"><code>username</code></em>:<em class="replaceable"><code>password</code></em>@<em class="replaceable"><code>link</code></em>. For example, if a repository on <a href="http://www.example.com/repo/">http://www.example.com/repo/</a> requires a username of "user" and a password os "password", then the <code class="command">baseurl</code> link can be specified as <code class="command">baseurl=http://user:password@www.example.com/repo/</code>.
						</p>
                  </dd>
                </dl>
              </div>
              <p>
				The following is a list of options most commonly used in repository entries. For a complete list of repository entries, refer to <code class="command">man yum.conf</code>.
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">gpgcheck=<em class="replaceable"><code>&lt;1 or 0&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This disables/enables GPG signature checking a specific repository. The default is <code class="command">gpgcheck=0</code>, which disables GPG checking.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">gpgkey=<em class="replaceable"><code>URL</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This option allows you to point to a URL of the ASCII-armoured GPG key file for a repository. This option is normally used if <code class="command">yum</code> needs a public key to verify a package and the required key was not imported into the RPM database.
						</p>
                    <p>
							If this option is set, <code class="command">yum</code> will automatically import the key from the specified URL. You will be prompted before the key is installed unless you set <code class="command">assumeyes=1</code> (in the <code class="command">[main]</code> section of <code class="filename">/etc/yum.conf</code>) or <code class="command">-y</code> (in a <code class="command">yum</code> transaction).
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">exclude=<em class="replaceable"><code>&lt;package name/s&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This option is similar to the <code class="command">exclude</code> option in the <code class="command">[main]</code> section of <code class="filename">/etc/yum.conf</code>. However, it only applies to the repository in which it is specified.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">includepkgs=<em class="replaceable"><code>&lt;package name/s&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This option is the opposite of <code class="command">exclude</code>. When this option is set on a repository, <code class="command">yum</code> will only be able to see the specified packages in that repository. By default, all packages in a repository are visible to <code class="command">yum</code>.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-yum-useful-variables"></a>12.5. Useful <code class="command">yum</code> Variables</h2>
                </div>
              </div>
            </div>
            <p>
			The following is a list of variables you can use for both <code class="command">yum</code> commands and <code class="command">yum</code> configuration files (i.e. <code class="filename">/etc/yum.conf</code> and <code class="filename">.repo</code> files).
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">
                    <code class="command">$releasever</code>
                  </span>
                </dt>
                <dd>
                  <p>
						This is replaced with the package's version, as listed in <code class="command">distroverpkg</code>. This defaults to the version of the <code class="command">redhat-release</code> package.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">$arch</code>
                  </span>
                </dt>
                <dd>
                  <p>
						This is replaced with your system's architecture, as listed by <code class="command">os.uname()</code> in Python.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">$basearch</code>
                  </span>
                </dt>
                <dd>
                  <p>
						This is replaced with your base architecture. For example, if <code class="command">$arch</code>=i686 then <code class="command">$basearch</code>=i386.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">$YUM<em class="replaceable"><code>0-9</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						This is replaced with the value of the shell environment variable of the same name. If the shell environment variable does not exist, then the configuration file variable will not be replaced.
					</p>
                </dd>
              </dl>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-rhnetwork"></a>Chapter 13. Red Hat Network</h2>
              </div>
            </div>
          </div>
          <a id="id2948160" class="indexterm"></a>
          <a id="id2878507" class="indexterm"></a>
          <a id="id2868383" class="indexterm"></a>
          <p>
		Red Hat Network is an Internet solution for managing one or more Red Hat Enterprise Linux systems. All Security Alerts, Bug Fix Alerts, and Enhancement Alerts (collectively known as Errata Alerts) can be downloaded directly from Red Hat using the <span><strong class="application">Package Updater</strong></span> standalone application or through the RHN website available at <a href="https://rhn.redhat.com/">https://rhn.redhat.com/</a>.
	</p>
          <div class="figure">
            <a id="fig-your-rhn"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="images/your-rhn.png" alt="Your RHN" />
                <div class="longdesc">
                  <p>
					Your RHN
				</p>
                </div>
              </div>
            </div>
            <h6>Figure 13.1. <span>Your RHN</span></h6>
          </div>
          <br class="figure-break" />
          <p>
		Red Hat Network saves you time because you receive email when updated packages are released. You do not have to search the Web for updated packages or security alerts. By default, Red Hat Network installs the packages as well. You do not have to learn how to use RPM or worry about resolving software package dependencies; RHN does it all.
	</p>
          <p>
		Red Hat Network features include:
	</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
				Errata Alerts — learn when Security Alerts, Bug Fix Alerts, and Enhancement Alerts are issued for all the systems in your network
			</p>
                <div class="figure">
                  <a id="fig-relevant-errata"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/relevant-errata.png" alt="Relevant Errata" />
                      <div class="longdesc">
                        <p>
							Relevant Errata
						</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 13.2. Relevant Errata</h6>
                </div>
                <br class="figure-break" />
              </li>
              <li>
                <p>
				Automatic email notifications — Receive an email notification when an Errata Alert is issued for your system(s)
			</p>
              </li>
              <li>
                <p>
				Scheduled Errata Updates — Schedule delivery of Errata Updates
			</p>
              </li>
              <li>
                <p>
				Package installation — Schedule package installation on one or more systems with the click of a button
			</p>
              </li>
              <li>
                <p>
				<span><strong class="application">Package Updater</strong></span> — Use the <span><strong class="application">Package Updater</strong></span> to download the latest software packages for your system (with optional package installation)
			</p>
              </li>
              <li>
                <p>
				Red Hat Network website — Manage multiple systems, downloaded individual packages, and schedule actions such as Errata Updates through a secure Web browser connection from any computer
			</p>
              </li>
            </ul>
          </div>
          <div class="caution">
            <h2>Caution</h2>
            <p>
			You must activate your Red Hat Enterprise Linux product before registering your system with Red Hat Network to make sure your system is entitled to the correct services. To activate your product, go to:
		</p>
            <pre class="screen"><a href="http://www.redhat.com/apps/activate/">http://www.redhat.com/apps/activate/</a>
</pre>
          </div>
          <p>
		After activating your product, register it with Red Hat Network to receive Errata Updates. The registration process gathers information about the system that is required to notify you of updates. For example, a list of packages installed on the system is compiled so you are only notified about updates that are relevant to your system.
	</p>
          <p>
		The first time the system is booted, the <span><strong class="application">Software Update Setup Assistant</strong></span> prompts you to register. If you did not register then, select <span><strong class="guimenu">Applications</strong></span> (the main menu on the panel) =&gt; <span><strong class="guimenuitem">System Tools</strong></span> =&gt; <span><strong class="guimenuitem">Package Updater</strong></span> on your desktop to start the registration process. Alternately, execute the command <code class="command">yum update</code> from a shell prompt.
	</p>
          <div class="figure">
            <a id="fig-rhn-register"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="images/registering.png" alt="Registering with RHN" />
                <div class="longdesc">
                  <p>
					Registering with RHN
				</p>
                </div>
              </div>
            </div>
            <h6>Figure 13.3. Registering with RHN</h6>
          </div>
          <br class="figure-break" />
          <p>
		After registering, use one of the following methods to start receiving updates:
	</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
				Select <span><strong class="guimenu">Applications</strong></span> (the main menu on the panel) =&gt; <span><strong class="guimenuitem">System Tools</strong></span> =&gt; <span><strong class="guimenuitem">Package Updater</strong></span> on your desktop
			</p>
              </li>
              <li>
                <p>
				Execute the command <code class="command">yum</code> from a shell prompt
			</p>
              </li>
              <li>
                <p>
				Use the RHN website at <a href="https://rhn.redhat.com/">https://rhn.redhat.com/</a>
			</p>
              </li>
              <li>
                <p>
				Click on the package icon when it appears in the panel to launch the <span><strong class="application">Package Updater</strong></span>.
			</p>
              </li>
            </ul>
          </div>
          <p>
		For more detailed instructions, refer to the documentation available at:
	</p>
          <pre class="screen"><a href="http://www.redhat.com/docs/manuals/RHNetwork/">http://www.redhat.com/docs/manuals/RHNetwork/</a>
</pre>
          <div class="tip">
            <h2>Tip</h2>
            <p>
			Red Hat Enterprise Linux includes a convenient panel icon that displays visible alerts when there is an update for your Red Hat Enterprise Linux system. This panel icon is not present if no updates are available.
		</p>
          </div>
        </div>
      </div>
      <div class="part" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title"><a id="pt-network-related-config"></a>Part III. Network-Related Configuration</h1>
            </div>
          </div>
        </div>
        <div class="partintro" lang="en-US" xml:lang="en-US">
          <div></div>
          <p>
				After explaining how to configure the network, this part discusses topics related to networking such as how to allow remote logins, share files and directories over the network, and set up a Web server.
			</p>
          <div class="toc">
            <p>
              <b>Table of Contents</b>
            </p>
            <dl>
              <dt>
                <span class="chapter">
                  <a href="#ch-networkscripts">14. Network Interfaces</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-files">14.1. Network Configuration Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-interfaces">14.2. Interface Configuration Files</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-eth0">14.2.1. Ethernet Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-ipsec">14.2.2. IPsec Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-chan">14.2.3. Channel Bonding Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-alias">14.2.4. Alias and Clone Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-ppp0">14.2.5. Dialup Interfaces</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-interfaces-other">14.2.6. Other Interfaces</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-control">14.3. Interface Control Scripts</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-static-routes">14.4. Configuring Static Routes</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-functions">14.5. Network Function Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-networkscripts-resources">14.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-networkscripts-docs-inst">14.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-network-config">15. Network Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-overview">15.1. Overview</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-ethernet">15.2. Establishing an Ethernet Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-isdn">15.3. Establishing an ISDN Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-modem">15.4. Establishing a Modem Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-xdsl">15.5. Establishing an xDSL Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-tokenring">15.6. Establishing a Token Ring Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-wireless">15.7. Establishing a Wireless Connection</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-dns">15.8. Managing DNS Settings</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-config-hosts">15.9. Managing Hosts</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-profiles">15.10. Working with Profiles</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-aliases">15.11. Device Aliases</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-network-save-config">15.12. Saving and Restoring the Network Configuration</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-services">16. Controlling Access to Services</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-runlevels">16.1. Runlevels</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-tcp-wrappers">16.2. TCP Wrappers</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-services-xinetd">16.2.1. <code class="command">xinetd</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-serviceconf">16.3. <span><strong class="application">Services Configuration Tool</strong></span></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-ntsysv">16.4. <span><strong class="application">ntsysv</strong></span></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-chkconfig">16.5. <code class="command">chkconfig</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-services-additional-resources">16.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#services-installed-docs">16.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#services-useful-websites">16.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-bind">17. Berkeley Internet Name Domain (BIND)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-introduction">17.1. Introduction to DNS</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-introduction-zones">17.1.1. Nameserver Zones</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-introduction-nameservers">17.1.2. Nameserver Types</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-introduction-bind">17.1.3. BIND as a Nameserver</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-namedconf">17.2. <code class="filename">/etc/named.conf</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-namedconf-state">17.2.1. Common Statement Types</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-namedconf-state-other">17.2.2. Other Statement Types</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-namedconf-comm">17.2.3. Comment Tags</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-zone">17.3. Zone Files</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-zone-directives">17.3.1. Zone File Directives</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s3-bind-zone-rr">17.3.2. Zone File Resource Records</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-zone-examples">17.3.3. Example Zone File</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-configuration-zone-reverse">17.3.4. Reverse Name Resolution Zone Files</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-rndc">17.4. Using <code class="command">rndc</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-rndc-configuration-namedconf">17.4.1. Configuring <code class="filename">/etc/named.conf</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-rndc-configuration-rndcconf">17.4.2. Configuring <code class="filename">/etc/rndc.conf</code></a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-rndc-options">17.4.3. Command Line Options</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-features">17.5. Advanced Features of BIND</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-protocol">17.5.1. DNS Protocol Enhancements</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-views">17.5.2. Multiple Views</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-security">17.5.3. Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-features-ipv6">17.5.4. IP version 6</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-mistakes">17.6. Common Mistakes to Avoid</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-bind-additional-resources">17.7. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-installed-docs">17.7.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-useful-websites">17.7.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-bind-related-books">17.7.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-openssh">18. OpenSSH</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-intro">18.1. Features of SSH</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-intro-why">18.1.1. Why Use SSH?</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-version">18.2. SSH Protocol Versions</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-conn">18.3. Event Sequence of an SSH Connection</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-protocol-conn-transport">18.3.1. Transport Layer</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-protocol-authentication">18.3.2. Authentication</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-protocol-connection">18.3.3. Channels</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-openssh-server-config">18.4. Configuring an OpenSSH Server</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-requiring">18.4.1. Requiring SSH for Remote Connections</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-configfiles">18.5. OpenSSH Configuration Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-openssh-client-config">18.6. Configuring an OpenSSH Client</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-using-ssh">18.6.1. Using the <code class="command">ssh</code> Command</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-using-scp">18.6.2. Using the <code class="command">scp</code> Command</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-using-sftp">18.6.3. Using the <code class="command">sftp</code> Command</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ssh-beyondshell">18.7. More Than a Secure Shell</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-beyondshell-x11">18.7.1. X11 Forwarding</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ssh-beyondshell-tcpip">18.7.2. Port Forwarding</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-generate-keypairs">18.7.3. Generating Key Pairs</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-openssh-additional-resources">18.8. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-installed-docs">18.8.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-openssh-useful-websites">18.8.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-nfs">19. Network File System (NFS)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-how">19.1. How It Works</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-how-daemons">19.1.1. Required Services</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-client-config">19.2. NFS Client Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-fstab">19.2.1. Mounting NFS File Systems using <code class="filename">/etc/fstab</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-client-config-autofs">19.3. <code class="command">autofs</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-config-autofs-new">19.3.1. What's new in <code class="command">autofs</code> version 5?</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-config-autofs">19.3.2. <code class="command">autofs</code> Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-config-autofs-commontasks">19.3.3. <code class="command">autofs</code> Common Tasks</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-client-config-options">19.4. Common NFS Mount Options</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-start">19.5. Starting and Stopping NFS</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-server-export">19.6. NFS Server Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-export">19.6.1. Exporting or Sharing NFS File Systems</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-command-line">19.6.2. Command Line Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-hostname-formats">19.6.3. Hostname Formats</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-server-config-exports">19.7. The <code class="filename">/etc/exports</code> Configuration File</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-nfs-server-config-exportfs">19.7.1. The <code class="command">exportfs</code> Command</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-security">19.8. Securing NFS</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-security-hosts">19.8.1. Host Access</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-security-files">19.8.2. File Permissions</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-methodology-portmap">19.9. NFS and <code class="command">portmap</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s3-nfs-methodology-portmap-rpcinfo">19.9.1. Troubleshooting NFS and <code class="command">portmap</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-tcp">19.10. Using NFS over TCP</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-additional-resources">19.11. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-installed-documentation">19.11.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-useful-websites">19.11.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-nfs-related-books">19.11.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-samba">20. Samba</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#samba-rgs-overview">20.1. Introduction to Samba</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-abilities">20.1.1. Samba Features</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-daemons">20.2. Samba Daemons and Related Services</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-services">20.2.1. Samba Daemons</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-connect-share">20.3. Connecting to a Samba Share</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-connect-share-cmdline">20.3.1. Command Line</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-samba-mounting">20.3.2. Mounting the Share</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-configuring">20.4. Configuring a Samba Server</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-configuring-gui">20.4.1. Graphical Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-configuring-cmdline">20.4.2. Command Line Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-encrypted-passwords">20.4.3. Encrypted Passwords</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-startstop">20.5. Starting and Stopping Samba</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-servers">20.6. Samba Server Types and the <code class="command">smb.conf</code> File</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-standalone">20.6.1. Stand-alone Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-domain-member">20.6.2. Domain Member Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-domain-controller">20.6.3. Domain Controller</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-security-modes">20.7. Samba Security Modes</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-user-level">20.7.1. User-Level Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-share-level">20.7.2. Share-Level Security</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-account-info-dbs">20.8. Samba Account Information Databases</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-network-browsing">20.9. Samba Network Browsing</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-domain-browsing">20.9.1. Domain Browsing</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-wins">20.9.2. WINS (Windows Internetworking Name Server)</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-cups">20.10. Samba with CUPS Printing Support</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-cups-smb.conf">20.10.1. Simple <code class="filename">smb.conf</code> Settings</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-programs">20.11. Samba Distribution Programs</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-resources">20.12. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-resources-installed">20.12.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-resources-published">20.12.2. Related Books</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-samba-resources-community">20.12.3. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-dhcp">21. Dynamic Host Configuration Protocol (DHCP)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-why">21.1. Why Use DHCP?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-configuring-server">21.2. Configuring a DHCP Server</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#config-file">21.2.1. Configuration File</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#lease-database">21.2.2. Lease Database</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#id2953977">21.2.3. Starting and Stopping the Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#dhcp-relay-agent">21.2.4. DHCP Relay Agent</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-configuring-client">21.3. Configuring a DHCP Client</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-dhcp-additional-resources">21.4. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-dhcp-installed-docs">21.4.1. Installed Documentation</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-httpd">22. Apache HTTP Server</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-httpd-v2">22.1. Apache HTTP Server 2.2</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-httpd-v2-features">22.1.1. Features of Apache HTTP Server 2.2</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-httpd-mig">22.2. Migrating Apache HTTP Server Configuration Files</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-httpd-v22-mig">22.2.1. Migrating Apache HTTP Server 2.0 Configuration Files</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s3-httpd-v2-mig">22.2.2. Migrating Apache HTTP Server 1.3 Configuration Files to 2.0</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-startstop">22.3. Starting and Stopping <code class="command">httpd</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-config-ui">22.4. Apache HTTP Server Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-httpd-basic-settings">22.4.1. Basic Settings</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-httpd-default-settings">22.4.2. Default Settings</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-config">22.5. Configuration Directives in <code class="filename">httpd.conf</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-tips">22.5.1. General Configuration Tips</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-sslcommands">22.5.2. Configuration Directives for SSL</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-mpm-containers">22.5.3. MPM Specific Server-Pool Directives</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-addmods">22.6. Adding Modules</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-virtualhosts">22.7. Virtual Hosts</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-settingupvhosts">22.7.1. Setting Up Virtual Hosts</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-httpd-secure-server">22.8. Apache HTTP Secure Server Configuration</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-optionalpackages">22.8.1. An Overview of Security-Related Packages</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-overview-certs">22.8.2. An Overview of Certificates and Security</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-secureserver-oldcert">22.8.3. Using Pre-Existing Keys and Certificates</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-certs">22.8.4. Types of Certificates</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-secureserver-generatingkey">22.8.5. Generating a Key</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s1-use-new-key">22.8.6. How to configure the server to use the new key</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-apache-additional-resources">22.9. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-apache-additional-resources-web">22.9.1. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-ftp">23. FTP</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-protocol">23.1. The File Transport Protocol</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-protocol-multiport">23.1.1. Multiple Ports, Multiple Modes</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-servers">23.2. FTP Servers</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-servers-vsftpd">23.2.1. <code class="command">vsftpd</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s2-ftp-vsftpd-conf">23.3. Files Installed with <code class="command">vsftpd</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-vsftpd-start">23.4. Starting and Stopping <code class="command">vsftpd</code></a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-start-multi">23.4.1. Starting Multiple Copies of <code class="command">vsftpd</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-vsftpd-conf">23.5. <code class="command">vsftpd</code> Configuration Options</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-daemon">23.5.1. Daemon Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-login">23.5.2. Log In Options and Access Controls</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-anon">23.5.3. Anonymous User Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-usr">23.5.4. Local User Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-dir">23.5.5. Directory Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-file">23.5.6. File Transfer Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-log">23.5.7. Logging Options</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-vsftpd-conf-opt-net">23.5.8. Network Options</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ftp-resources">23.6. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-installed-documentation">23.6.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ftp-useful-websites">23.6.2. Useful Websites</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-email">24. Email</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-protocols">24.1. Email Protocols</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-protocols-send">24.1.1. Mail Transport Protocols</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-protocols-client">24.1.2. Mail Access Protocols</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-types">24.2. Email Program Classifications</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-types-mta">24.2.1. Mail Transport Agent</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-types-mda">24.2.2. Mail Delivery Agent</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-types-mua">24.2.3. Mail User Agent</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-mta">24.3. Mail Transport Agents</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-mta-sendmail">24.3.1. Sendmail</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-mta-postfix">24.3.2. Postfix</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-mta-fetchmail">24.3.3. Fetchmail</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-switchmail">24.4. Mail Transport Agent (MTA) Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-mda">24.5. Mail Delivery Agents</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-procmail-configuration">24.5.1. Procmail Configuration</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-procmail-recipes">24.5.2. Procmail Recipes</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-mua">24.6. Mail User Agents</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-security">24.6.1. Securing Communication</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-email-additional-resources">24.7. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-installed-docs">24.7.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-useful-websites">24.7.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-email-related-books">24.7.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-ldap">25. Lightweight Directory Access Protocol (LDAP)</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-adv">25.1. Why Use LDAP?</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s1-ldap-v3">25.1.1. OpenLDAP Features</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-terminology">25.2. LDAP Terminology</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-daemonsutils">25.3. OpenLDAP Daemons and Utilities</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-pam-nss">25.3.1. NSS, PAM, and LDAP</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-other-apps">25.3.2. PHP4, LDAP, and the Apache HTTP Server</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-applications">25.3.3. LDAP Client Applications</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-files">25.4. OpenLDAP Configuration Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-files-schemas">25.5. The <code class="filename">/etc/openldap/schema/</code> Directory</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-quickstart">25.6. OpenLDAP Setup Overview</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-files-slapd-conf">25.6.1. Editing <code class="filename">/etc/openldap/slapd.conf</code></a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-pam">25.7. Configuring a System to Authenticate Using OpenLDAP</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-pamd">25.7.1. PAM and LDAP</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-migrate">25.7.2. Migrating Old Authentication Information to LDAP Format</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-migrate">25.8. Migrating Directories from Earlier Releases</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-ldap-additional-resources">25.9. Additional Resources</a>
                    </span>
                  </dt>
                  <dd>
                    <dl>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-installed-docs">25.9.1. Installed Documentation</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-additional-resources-web">25.9.2. Useful Websites</a>
                        </span>
                      </dt>
                      <dt>
                        <span class="section">
                          <a href="#s2-ldap-related-books">25.9.3. Related Books</a>
                        </span>
                      </dt>
                    </dl>
                  </dd>
                </dl>
              </dd>
              <dt>
                <span class="chapter">
                  <a href="#ch-authconfig">26. Authentication Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-authconfig-user-info">26.1. User Information</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-authconfig-auth">26.2. Authentication</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#authconfig-options">26.3. Options</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-authconfig-command-line">26.4. Command Line Version</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-networkscripts"></a>Chapter 14. Network Interfaces</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-networkscripts-files">14.1. Network Configuration Files</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-networkscripts-interfaces">14.2. Interface Configuration Files</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-networkscripts-interfaces-eth0">14.2.1. Ethernet Interfaces</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-networkscripts-interfaces-ipsec">14.2.2. IPsec Interfaces</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-networkscripts-interfaces-chan">14.2.3. Channel Bonding Interfaces</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-networkscripts-interfaces-alias">14.2.4. Alias and Clone Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-networkscripts-interfaces-ppp0">14.2.5. Dialup Interfaces</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-networkscripts-interfaces-other">14.2.6. Other Interfaces</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-networkscripts-control">14.3. Interface Control Scripts</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-networkscripts-static-routes">14.4. Configuring Static Routes</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-networkscripts-functions">14.5. Network Function Files</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-networkscripts-resources">14.6. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-networkscripts-docs-inst">14.6.1. Installed Documentation</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2946711" class="indexterm"></a>
          <a id="id2928426" class="indexterm"></a>
          <p>
		Under Red Hat Enterprise Linux, all network communications occur between configured software <em class="firstterm">interfaces</em> and <em class="firstterm">physical networking devices</em> connected to the system.
	</p>
          <p>
		The configuration files for network interfaces are located in the <code class="filename">/etc/sysconfig/network-scripts/</code> directory. The scripts used to activate and deactivate these network interfaces are also located here. Although the number and type of interface files can differ from system to system, there are three categories of files that exist in this directory:
	</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
				<em class="firstterm">Interface configuration files</em>
			</p>
              </li>
              <li>
                <p>
				<em class="firstterm">Interface control scripts</em>
			</p>
              </li>
              <li>
                <p>
				<em class="firstterm">Network function files</em>
			</p>
              </li>
            </ol>
          </div>
          <p>
		The files in each of these categories work together to enable various network devices.
	</p>
          <p>
		This chapter explores the relationship between these files and how they are used.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-networkscripts-files"></a>14.1. Network Configuration Files</h2>
                </div>
              </div>
            </div>
            <a id="id2879221" class="indexterm"></a>
            <p>
			Before delving into the interface configuration files, let us first itemize the primary configuration files used in network configuration. Understanding the role these files play in setting up the network stack can be helpful when customizing a Red Hat Enterprise Linux system.
		</p>
            <p>
			The primary network configuration files are as follows:
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">
                    <code class="filename">/etc/hosts</code>
                  </span>
                </dt>
                <dd>
                  <p>
						The main purpose of this file is to resolve hostnames that cannot be resolved any other way. It can also be used to resolve hostnames on small networks with no DNS server. Regardless of the type of network the computer is on, this file should contain a line specifying the IP address of the loopback device (<code class="command">127.0.0.1</code>) as <code class="command">localhost.localdomain</code>. For more information, refer to the <code class="filename">hosts</code> man page.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">/etc/resolv.conf</code>
                  </span>
                </dt>
                <dd>
                  <p>
						This file specifies the IP addresses of DNS servers and the search domain. Unless configured to do otherwise, the network initialization scripts populate this file. For more information about this file, refer to the <code class="filename">resolv.conf</code> man page.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">/etc/sysconfig/network</code>
                  </span>
                </dt>
                <dd>
                  <p>
						This file specifies routing and host information for all network interfaces. For more information about this file and the directives it accepts, refer to <a href="#s2-sysconfig-network" title="28.1.21. /etc/sysconfig/network">Section 28.1.21, “<code class="filename">/etc/sysconfig/network</code>”</a>.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">/etc/sysconfig/network-scripts/ifcfg-<em class="replaceable"><code>&lt;interface-name&gt;</code></em></code>
                  </span>
                </dt>
                <dd>
                  <p>
						For each network interface, there is a corresponding interface configuration script. Each of these files provide information specific to a particular network interface. Refer to <a href="#s1-networkscripts-interfaces" title="14.2. Interface Configuration Files">Section 14.2, “Interface Configuration Files”</a> for more information on this type of file and the directives it accepts.
					</p>
                </dd>
              </dl>
            </div>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				The <code class="filename">/etc/sysconfig/networking/</code> directory is used by the <span><strong class="application">Network Administration Tool</strong></span> (<code class="command">system-config-network</code>) and its contents should <span class="bold"><strong>not</strong></span> be edited manually. Using only one method for network configuration is strongly encouraged, due to the risk of configuration deletion.
			</p>
              <p>
				For more information about configuring network interfaces using the <span><strong class="application">Network Administration Tool</strong></span>, refer to <a href="#ch-network-config" title="Chapter 15. Network Configuration">Chapter 15, <i>Network Configuration</i></a>
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-networkscripts-interfaces"></a>14.2. Interface Configuration Files</h2>
                </div>
              </div>
            </div>
            <a id="id2949636" class="indexterm"></a>
            <a id="id2913406" class="indexterm"></a>
            <p>
			Interface configuration files control the software interfaces for individual network devices. As the system boots, it uses these files to determine what interfaces to bring up and how to configure them. These files are usually named <code class="filename">ifcfg-<em class="replaceable"><code>&lt;name&gt;</code></em></code>, where <em class="replaceable"><code>&lt;name&gt;</code></em> refers to the name of the device that the configuration file controls.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-networkscripts-interfaces-eth0"></a>14.2.1. Ethernet Interfaces</h3>
                  </div>
                </div>
              </div>
              <a id="id2892308" class="indexterm"></a>
              <a id="id2878793" class="indexterm"></a>
              <p>
				One of the most common interface files is <code class="filename">ifcfg-eth0</code>, which controls the first Ethernet <em class="firstterm">network interface card</em> or <em class="firstterm">NIC</em> in the system. In a system with multiple NICs, there are multiple <code class="filename">ifcfg-eth<em class="replaceable"><code>&lt;X&gt;</code></em></code> files (where <em class="replaceable"><code>&lt;X&gt;</code></em> is a unique number corresponding to a specific interface). Because each device has its own configuration file, an administrator can control how each interface functions individually.
			</p>
              <p>
				The following is a sample <code class="filename">ifcfg-eth0</code> file for a system using a fixed IP address:
			</p>
              <pre class="screen"><code class="computeroutput">DEVICE=eth0 BOOTPROTO=none ONBOOT=yes NETWORK=10.0.1.0 NETMASK=255.255.255.0 IPADDR=10.0.1.27 USERCTL=no</code>
</pre>
              <p>
				The values required in an interface configuration file can change based on other values. For example, the <code class="filename">ifcfg-eth0</code> file for an interface using DHCP looks different because IP information is provided by the DHCP server:
			</p>
              <pre class="screen"><code class="computeroutput">DEVICE=eth0 BOOTPROTO=dhcp ONBOOT=yes</code>
</pre>
              <p>
				The <span><strong class="application">Network Administration Tool</strong></span> (<code class="command">system-config-network</code>) is an easy way to make changes to the various network interface configuration files (refer to <a href="#ch-network-config" title="Chapter 15. Network Configuration">Chapter 15, <i>Network Configuration</i></a> for detailed instructions on using this tool).
			</p>
              <p>
				However, it is also possible to manually edit the configuration files for a given network interface.
			</p>
              <p>
				Below is a listing of the configurable parameters in an Ethernet interface configuration file:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">BONDING_OPTS=<em class="replaceable"><code>&lt;parameters&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							sets the configuration parameters for the bonding device, and is used in <code class="filename">/etc/sysconfig/network-scripts/ifcfg-bond<em class="replaceable"><code>&lt;N&gt;</code></em></code> (see <a href="#s2-networkscripts-interfaces-chan" title="14.2.3. Channel Bonding Interfaces">Section 14.2.3, “Channel Bonding Interfaces”</a>). These parameters are identical to those used for bonding devices in <code class="filename">/sys/class/net/<em class="replaceable"><code>&lt;bonding device&gt;</code></em>/bonding</code>, and the module parameters for the bonding driver as described in <span class="emphasis"><em><code class="filename">bonding</code> Module Directives</em></span>.
						</p>
                    <p>
							This configuration method is used so that multiple bonding devices can have different configurations. If you use <code class="command">BONDING_OPTS</code> in <code class="filename">ifcfg-<em class="replaceable"><code>&lt;name&gt;</code></em></code>, do <span class="emphasis"><em>not</em></span> use <code class="filename">/etc/modprobe.conf</code> to specify options for the bonding device.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">BOOTPROTO=<em class="replaceable"><code>&lt;protocol&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;protocol&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">none</code> — No boot-time protocol should be used.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">bootp</code> — The BOOTP protocol should be used.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">dhcp</code> — The DHCP protocol should be used.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">BROADCAST=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;address&gt;</code></em></code> is the broadcast address. This directive is deprecated, as the value is calculated automatically with <code class="command">ifcalc</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">DEVICE=<em class="replaceable"><code>&lt;name&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;name&gt;</code></em></code> is the name of the physical device (except for dynamically-allocated PPP devices where it is the <span class="emphasis"><em>logical name</em></span>).
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">DHCP_HOSTNAME</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Use this option only if the DHCP server requires the client to specify a hostname before receiving an IP address.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">DNS<em class="replaceable"><code>{1,2}</code></em>=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;address&gt;</code></em></code> is a name server address to be placed in <code class="filename">/etc/resolv.conf</code> if the <code class="command">PEERDNS</code> directive is set to <code class="command">yes</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">ETHTOOL_OPTS=<em class="replaceable"><code>&lt;options&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;options&gt;</code></em></code> are any device-specific options supported by <code class="command">ethtool</code>. For example, if you wanted to force 100Mb, full duplex:
						</p>
                    <pre class="screen"><code class="command">ETHTOOL_OPTS="autoneg off speed 100 duplex full"</code>
</pre>
                    <p>
							Instead of a custom initscript, use <code class="command">ETHTOOL_OPTS</code> to set the interface speed and duplex settings. Custom initscripts run outside of the network init script lead to unpredictable results during a post-boot network service restart.
						</p>
                    <div class="note">
                      <h2>Note</h2>
                      <p>
								Changing speed or duplex settings almost always requires disabling autonegotiation with the <code class="command">autoneg off</code> option. This needs to be stated first, as the option entries are order-dependent.
							</p>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">GATEWAY=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;address&gt;</code></em> is the IP address of the network router or gateway device (if any).
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">HWADDR=<em class="replaceable"><code>&lt;MAC-address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;MAC-address&gt;</code></em> is the hardware address of the Ethernet device in the form <em class="replaceable"><code>AA:BB:CC:DD:EE:FF</code></em>. This directive is useful for machines with multiple NICs to ensure that the interfaces are assigned the correct device names regardless of the configured load order for each NIC's module. This directive should <span class="bold"><strong>not</strong></span> be used in conjunction with <code class="command">MACADDR</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">IPADDR=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;address&gt;</code></em></code> is the IP address.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">MACADDR=<em class="replaceable"><code>&lt;MAC-address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;MAC-address&gt;</code></em> is the hardware address of the Ethernet device in the form <em class="replaceable"><code>AA:BB:CC:DD:EE:FF</code></em>. This directive is used to assign a MAC address to an interface, overriding the one assigned to the physical NIC. This directive should <span class="bold"><strong>not</strong></span> be used in conjunction with <code class="command">HWADDR</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">MASTER=<em class="replaceable"><code>&lt;bond-interface&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;bond-interface&gt;</code></em></code> is the channel bonding interface to which the Ethernet interface is linked.
						</p>
                    <p>
							This directive is used in conjunction with the <code class="command">SLAVE</code> directive.
						</p>
                    <p>
							Refer to <a href="#s2-networkscripts-interfaces-chan" title="14.2.3. Channel Bonding Interfaces">Section 14.2.3, “Channel Bonding Interfaces”</a> for more information about channel bonding interfaces.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">NETMASK=<em class="replaceable"><code>&lt;mask&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;mask&gt;</code></em></code> is the netmask value.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">NETWORK=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;address&gt;</code></em></code> is the network address. This directive is deprecated, as the value is calculated automatically with <code class="command">ifcalc</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">ONBOOT=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">yes</code> — This device should be activated at boot-time.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">no</code> — This device should not be activated at boot-time.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">PEERDNS=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">yes</code> — Modify <code class="filename">/etc/resolv.conf</code> if the DNS directive is set. If using DHCP, then <code class="command">yes</code> is the default.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">no</code> — Do not modify <code class="filename">/etc/resolv.conf</code>.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">SLAVE=<em class="replaceable"><code>&lt;bond-interface&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;bond-interface&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">yes</code> — This device is controlled by the channel bonding interface specified in the <code class="command">MASTER</code> directive.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">no</code> — This device is <span class="emphasis"><em>not</em></span> controlled by the channel bonding interface specified in the <code class="command">MASTER</code> directive.
								</p>
                        </li>
                      </ul>
                    </div>
                    <p>
							This directive is used in conjunction with the <code class="command">MASTER</code> directive.
						</p>
                    <p>
							Refer to <a href="#s2-networkscripts-interfaces-chan" title="14.2.3. Channel Bonding Interfaces">Section 14.2.3, “Channel Bonding Interfaces”</a> for more about channel bonding interfaces.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">SRCADDR=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;address&gt;</code></em></code> is the specified source IP address for outgoing packets.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">USERCTL=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">yes</code> — Non-root users are allowed to control this device.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">no</code> — Non-root users are not allowed to control this device.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-networkscripts-interfaces-ipsec"></a>14.2.2. IPsec Interfaces</h3>
                  </div>
                </div>
              </div>
              <a id="id2897682" class="indexterm"></a>
              <a id="id2897699" class="indexterm"></a>
              <p>
				The following example shows the <code class="filename">ifcfg</code> file for a network-to-network IPsec connection for LAN A. The unique name to identify the connection in this example is <code class="filename">ipsec1</code>, so the resulting file is named <code class="filename">/etc/sysconfig/network-scripts/ifcfg-ipsec1</code>.
			</p>
              <pre class="screen"><code class="computeroutput">TYPE=IPsec ONBOOT=yes IKE_METHOD=PSK SRCNET=192.168.1.0/24 DSTNET=192.168.2.0/24 DST=<em class="replaceable"><code>X.X.X.X</code></em></code>
</pre>
              <p>
				In the example above, <em class="replaceable"><code>X.X.X.X</code></em> is the publicly routable IP address of the destination IPsec router.
			</p>
              <p>
				Below is a listing of the configurable parameters for an IPsec interface:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">DST=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;address&gt;</code></em> is the IP address of the IPsec destination host or router. This is used for both host-to-host and network-to-network IPsec configurations.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">DSTNET=<em class="replaceable"><code>&lt;network&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;network&gt;</code></em> is the network address of the IPsec destination network. This is only used for network-to-network IPsec configurations.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">SRC=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;address&gt;</code></em> is the IP address of the IPsec source host or router. This setting is optional and is only used for host-to-host IPsec configurations.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">SRCNET=<em class="replaceable"><code>&lt;network&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;network&gt;</code></em> is the network address of the IPsec source network. This is only used for network-to-network IPsec configurations.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">TYPE=<em class="replaceable"><code>&lt;interface-type&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;interface-type&gt;</code></em> is <code class="command">IPSEC</code>. Both applications are part of the <code class="command">ipsec-tools</code> package.
						</p>
                  </dd>
                </dl>
              </div>
              <p>
				If manual key encryption with IPsec is being used, refer to <code class="filename">/usr/share/doc/initscripts-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/sysconfig.txt</code> (replace <em class="replaceable"><code>&lt;version-number&gt;</code></em> with the version of the <code class="command">initscripts</code> package installed) for configuration parameters.
			</p>
              <p>
				The <code class="command">racoon</code> IKEv1 key management daemon negotiates and configures a set of parameters for IPSec. It can use preshared keys, RSA signatures, or GSS-API. If <code class="command">racoon</code> is used to automatically manage key encryption, the following options are required:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">IKE_METHOD=<em class="replaceable"><code>&lt;encryption-method&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;encryption-method&gt;</code></em> is either <code class="command">PSK</code>, <code class="command">X509</code>, or <code class="command">GSSAPI</code>. If <code class="command">PSK</code> is specified, the <code class="command">IKE_PSK</code> parameter must also be set. If <code class="command">X509</code> is specified, the <code class="command">IKE_CERTFILE</code> parameter must also be set.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">IKE_PSK=<em class="replaceable"><code>&lt;shared-key&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;shared-key&gt;</code></em> is the shared, secret value for the PSK (preshared keys) method.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">IKE_CERTFILE=<em class="replaceable"><code>&lt;cert-file&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;cert-file&gt;</code></em> is a valid <code class="filename">X.509</code> certificate file for the host.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">IKE_PEER_CERTFILE=<em class="replaceable"><code>&lt;cert-file&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;cert-file&gt;</code></em> is a valid <code class="filename">X.509</code> certificate file for the <span class="emphasis"><em>remote</em></span> host.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">IKE_DNSSEC=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <em class="replaceable"><code>&lt;answer&gt;</code></em> is <code class="command">yes</code>. The <code class="command">racoon</code> daemon retrieves the remote host's <code class="filename">X.509</code> certificate via DNS. If a <code class="command">IKE_PEER_CERTFILE</code> is specified, do <span class="emphasis"><em>not</em></span> include this parameter.
						</p>
                  </dd>
                </dl>
              </div>
              <p>
				For more information about the encryption algorithms available for IPsec, refer to the <code class="command">setkey</code> man page. For more information about <code class="command">racoon</code>, refer to the <code class="command">racoon</code> and <code class="command">racoon.conf</code> man pages.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-networkscripts-interfaces-chan"></a>14.2.3. Channel Bonding Interfaces</h3>
                  </div>
                </div>
              </div>
              <a id="id2875390" class="indexterm"></a>
              <a id="id2875408" class="indexterm"></a>
              <p>
				Red Hat Enterprise Linux allows administrators to bind multiple network interfaces together into a single channel using the <code class="filename">bonding</code> kernel module and a special network interface called a <em class="firstterm">channel bonding interface</em>. Channel bonding enables two or more network interfaces to act as one, simultaneously increasing the bandwidth and providing redundancy.
			</p>
              <p>
				To create a channel bonding interface, create a file in the <code class="filename">/etc/sysconfig/network-scripts/</code> directory called <code class="filename">ifcfg-bond<em class="replaceable"><code>&lt;N&gt;</code></em></code>, replacing <em class="replaceable"><code>&lt;N&gt;</code></em> with the number for the interface, such as <code class="filename">0</code>.
			</p>
              <p>
				The contents of the file can be identical to whatever type of interface is getting bonded, such as an Ethernet interface. The only difference is that the <code class="command">DEVICE=</code> directive must be <code class="command">bond<em class="replaceable"><code>&lt;N&gt;</code></em></code>, replacing <em class="replaceable"><code>&lt;N&gt;</code></em> with the number for the interface.
			</p>
              <p>
				The following is a sample channel bonding configuration file:
			</p>
              <pre class="screen"><code class="command">DEVICE=bond0 BONDING_OPTS="mode=1 miimon=500" BOOTPROTO=none ONBOOT=yes NETWORK=10.0.1.0 NETMASK=255.255.255.0 IPADDR=10.0.1.27 USERCTL=no</code>
</pre>
              <p>
				After the channel bonding interface is created, the network interfaces to be bound together must be configured by adding the <code class="command">MASTER=</code> and <code class="command">SLAVE=</code> directives to their configuration files. The configuration files for each of the channel-bonded interfaces can be nearly identical.
			</p>
              <p>
				For example, if two Ethernet interfaces are being channel bonded, both <code class="filename">eth0</code> and <code class="filename">eth1</code> may look like the following example:
			</p>
              <pre class="screen"><code class="command">DEVICE=eth<em class="replaceable"><code>&lt;N&gt;</code></em> BOOTPROTO=none ONBOOT=yes MASTER=bond0 SLAVE=yes USERCTL=no</code>
</pre>
              <p>
				In this example, replace <em class="replaceable"><code>&lt;N&gt;</code></em> with the numerical value for the interface.
			</p>
              <div class="important">
                <h2>Important</h2>
                <p>
					Important aspects of the channel bonding interface are controlled through the kernel module. For more information about controlling the <code class="filename">bonding</code> modules, refer to <a href="#s2-modules-bonding" title="41.5.2. The Channel Bonding Module">Section 41.5.2, “The Channel Bonding Module”</a>.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-networkscripts-interfaces-alias"></a>14.2.4. Alias and Clone Files</h3>
                  </div>
                </div>
              </div>
              <a id="id2900494" class="indexterm"></a>
              <a id="id2900511" class="indexterm"></a>
              <p>
				Two lesser-used types of interface configuration files are <em class="firstterm">alias</em> and <em class="firstterm">clone</em> files.
			</p>
              <p>
				Alias interface configuration files, which are used to bind multiple addresses to a single interface, use the <code class="filename">ifcfg-<em class="replaceable"><code>&lt;if-name&gt;</code></em>:<em class="replaceable"><code>&lt;alias-value&gt;</code></em></code> naming scheme.
			</p>
              <p>
				For example, an <code class="filename">ifcfg-eth0:0</code> file could be configured to specify <code class="computeroutput">DEVICE=eth0:0</code> and a static IP address of 10.0.0.2, serving as an alias of an Ethernet interface already configured to receive its IP information via DHCP in <code class="filename">ifcfg-eth0</code>. Under this configuration, <code class="filename">eth0</code> is bound to a dynamic IP address, but the same physical network card can receive requests via the fixed, 10.0.0.2 IP address.
			</p>
              <div class="caution">
                <h2>Caution</h2>
                <p>
					Alias interfaces do not support DHCP.
				</p>
              </div>
              <p>
				A clone interface configuration file should use the following naming convention: <code class="filename">ifcfg-<em class="replaceable"><code>&lt;if-name&gt;</code></em>-<em class="replaceable"><code>&lt;clone-name&gt;</code></em></code>. While an alias file allows multiple addresses for an existing interface, a clone file is used to specify additional options for an interface. For example, a standard DHCP Ethernet interface called <code class="filename">eth0</code>, may look similar to this:
			</p>
              <pre class="screen"><code class="computeroutput">DEVICE=eth0 ONBOOT=yes BOOTPROTO=dhcp</code>
</pre>
              <p>
				Since the default value for the <code class="command">USERCTL</code> directive is <code class="command">no</code> if it is not specified, users cannot bring this interface up and down. To give users the ability to control the interface, create a clone by copying <code class="filename">ifcfg-eth0</code> to <code class="filename">ifcfg-eth0-user</code> and add the following line to <code class="filename">ifcfg-eth0-user</code>:
			</p>
              <pre class="screen"><code class="computeroutput">USERCTL=yes</code>
</pre>
              <p>
				This way a user can bring up the <code class="filename">eth0</code> interface using the <code class="command">/sbin/ifup eth0-user</code> command because the configuration options from <code class="filename">ifcfg-eth0</code> and <code class="filename">ifcfg-eth0-user</code> are combined. While this is a very basic example, this method can be used with a variety of options and interfaces.
			</p>
              <p>
				The easiest way to create alias and clone interface configuration files is to use the graphical <span><strong class="application">Network Administration Tool</strong></span>. For more information on using this tool, refer to <a href="#ch-network-config" title="Chapter 15. Network Configuration">Chapter 15, <i>Network Configuration</i></a>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-networkscripts-interfaces-ppp0"></a>14.2.5. Dialup Interfaces</h3>
                  </div>
                </div>
              </div>
              <a id="id2966236" class="indexterm"></a>
              <p>
				If you are connecting to the Internet via a dialup connection, a configuration file is necessary for the interface.
			</p>
              <p>
				PPP interface files are named using the following format: 
				</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="filename">ifcfg-ppp<em class="replaceable"><code>&lt;X&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
								where <em class="replaceable"><code>&lt;X&gt;</code></em> is a unique number corresponding to a specific interface.
							</p>
                  </dd>
                </dl>
              </div>
              <p>
			</p>
              <p>
				The PPP interface configuration file is created automatically when <code class="command">wvdial</code>, the <span><strong class="application">Network Administration Tool</strong></span> or <span><strong class="application">Kppp</strong></span> is used to create a dialup account. It is also possible to create and edit this file manually.
			</p>
              <p>
				The following is a typical <code class="filename">ifcfg-ppp0</code> file:
			</p>
              <pre class="screen"><code class="computeroutput">DEVICE=ppp0 NAME=test WVDIALSECT=test MODEMPORT=/dev/modem LINESPEED=115200 PAPNAME=test USERCTL=true ONBOOT=no PERSIST=no DEFROUTE=yes PEERDNS=yes DEMAND=no IDLETIMEOUT=600</code>
</pre>
              <p>
				<em class="firstterm">Serial Line Internet Protocol (SLIP)</em> is another dialup interface, although it is used less frequently. SLIP files have interface configuration file names such as <code class="filename">ifcfg-sl0</code>.
			</p>
              <p>
				Other options that may be used in these files include:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">DEFROUTE=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">yes</code> — Set this interface as the default route.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">no</code> — Do not set this interface as the default route.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">DEMAND=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">yes</code> — This interface allows <code class="command">pppd</code> to initiate a connection when someone attempts to use it.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">no</code> — A connection must be manually established for this interface.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">IDLETIMEOUT=<em class="replaceable"><code>&lt;value&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;value&gt;</code></em></code> is the number of seconds of idle activity before the interface disconnects itself.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">INITSTRING=<em class="replaceable"><code>&lt;string&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;string&gt;</code></em></code> is the initialization string passed to the modem device. This option is primarily used in conjunction with SLIP interfaces.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">LINESPEED=<em class="replaceable"><code>&lt;value&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;value&gt;</code></em></code> is the baud rate of the device. Possible standard values include <code class="command">57600</code>, <code class="command">38400</code>, <code class="command">19200</code>, and <code class="command">9600</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">MODEMPORT=<em class="replaceable"><code>&lt;device&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;device&gt;</code></em></code> is the name of the serial device that is used to establish the connection for the interface.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">MTU=<em class="replaceable"><code>&lt;value&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;value&gt;</code></em></code> is the <em class="firstterm">Maximum Transfer Unit (MTU)</em> setting for the interface. The MTU refers to the largest number of bytes of data a frame can carry, not counting its header information. In some dialup situations, setting this to a value of <code class="command">576</code> results in fewer packets dropped and a slight improvement to the throughput for a connection.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">NAME=<em class="replaceable"><code>&lt;name&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;name&gt;</code></em></code> is the reference to the title given to a collection of dialup connection configurations.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">PAPNAME=<em class="replaceable"><code>&lt;name&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;name&gt;</code></em></code> is the username given during the <em class="firstterm">Password Authentication Protocol (PAP)</em> exchange that occurs to allow connections to a remote system.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">PERSIST=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">yes</code> — This interface should be kept active at all times, even if deactivated after a modem hang up.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">no</code> — This interface should not be kept active at all times.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">REMIP=<em class="replaceable"><code>&lt;address&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;address&gt;</code></em></code> is the IP address of the remote system. This is usually left unspecified.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">WVDIALSECT=<em class="replaceable"><code>&lt;name&gt;</code></em></code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							where <code class="command"><em class="replaceable"><code>&lt;name&gt;</code></em></code> associates this interface with a dialer configuration in <code class="filename">/etc/wvdial.conf</code>. This file contains the phone number to be dialed and other important information for the interface.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-networkscripts-interfaces-other"></a>14.2.6. Other Interfaces</h3>
                  </div>
                </div>
              </div>
              <p>
				Other common interface configuration files include the following:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="filename">ifcfg-lo</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							A local <em class="firstterm">loopback interface</em> is often used in testing, as well as being used in a variety of applications that require an IP address pointing back to the same system. Any data sent to the loopback device is immediately returned to the host's network layer.
						</p>
                    <div class="warning">
                      <h2>Warning</h2>
                      <p>
								The loopback interface script, <code class="filename">/etc/sysconfig/network-scripts/ifcfg-lo</code>, should never be edited manually. Doing so can prevent the system from operating correctly.
							</p>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">ifcfg-irlan0</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							An <em class="firstterm">infrared interface</em> allows information between devices, such as a laptop and a printer, to flow over an infrared link. This works in a similar way to an Ethernet device except that it commonly occurs over a peer-to-peer connection.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">ifcfg-plip0</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							A <em class="firstterm">Parallel Line Interface Protocol (PLIP)</em> connection works much the same way as an Ethernet device, except that it utilizes a parallel port.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">ifcfg-tr0</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							<em class="firstterm">Token Ring</em> topologies are not as common on <em class="firstterm">Local Area Networks</em> (<em class="firstterm">LANs</em>) as they once were, having been eclipsed by Ethernet.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-networkscripts-control"></a>14.3. Interface Control Scripts</h2>
                </div>
              </div>
            </div>
            <a id="id2880236" class="indexterm"></a>
            <a id="id2864385" class="indexterm"></a>
            <a id="id2864406" class="indexterm"></a>
            <a id="id2864426" class="indexterm"></a>
            <a id="id2864439" class="indexterm"></a>
            <p>
			The interface control scripts activate and deactivated system interfaces. There are two primary interface control scripts that call on control scripts located in the <code class="filename">/etc/sysconfig/network-scripts/</code> directory: <code class="command">/sbin/ifdown</code> and <code class="command">/sbin/ifup</code>.
		</p>
            <p>
			The <code class="filename">ifup</code> and <code class="filename">ifdown</code> interface scripts are symbolic links to scripts in the <code class="filename">/sbin/</code> directory. When either of these scripts are called, they require the value of the interface to be specified, such as:
		</p>
            <pre class="screen"><code class="command">ifup eth0</code>
</pre>
            <div class="caution">
              <h2>Caution</h2>
              <p>
				The <code class="filename">ifup</code> and <code class="filename">ifdown</code> interface scripts are the only scripts that the user should use to bring up and take down network interfaces.
			</p>
              <p>
				The following scripts are described for reference purposes only.
			</p>
            </div>
            <p>
			Two files used to perform a variety of network initialization tasks during the process of bringing up a network interface are <code class="filename">/etc/rc.d/init.d/functions</code> and <code class="filename">/etc/sysconfig/network-scripts/network-functions</code>. Refer to <a href="#s1-networkscripts-functions" title="14.5. Network Function Files">Section 14.5, “Network Function Files”</a> for more information.
		</p>
            <p>
			After verifying that an interface has been specified and that the user executing the request is allowed to control the interface, the correct script brings the interface up or down. The following are common interface control scripts found within the <code class="filename">/etc/sysconfig/network-scripts/</code> directory:
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">
                    <code class="filename">ifup-aliases</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Configures IP aliases from interface configuration files when more than one IP address is associated with an interface.
					</p>
                </dd>
                <dt>
                  <span class="term"><code class="filename">ifup-ippp</code> and <code class="filename">ifdown-ippp</code></span>
                </dt>
                <dd>
                  <p>
						Brings ISDN interfaces up and down.
					</p>
                </dd>
                <dt>
                  <span class="term"><code class="filename">ifup-ipsec</code> and <code class="filename">ifdown-ipsec</code></span>
                </dt>
                <dd>
                  <p>
						Brings IPsec interfaces up and down.
					</p>
                </dd>
                <dt>
                  <span class="term"><code class="filename">ifup-ipv6</code> and <code class="filename">ifdown-ipv6</code></span>
                </dt>
                <dd>
                  <p>
						Brings IPv6 interfaces up and down.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">ifup-ipx</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Brings up an IPX interface.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">ifup-plip</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Brings up a PLIP interface.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">ifup-plusb</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Brings up a USB interface for network connections.
					</p>
                </dd>
                <dt>
                  <span class="term"><code class="filename">ifup-post</code> and <code class="filename">ifdown-post</code></span>
                </dt>
                <dd>
                  <p>
						Contains commands to be executed after an interface is brought up or down.
					</p>
                </dd>
                <dt>
                  <span class="term"><code class="filename">ifup-ppp</code> and <code class="filename">ifdown-ppp</code></span>
                </dt>
                <dd>
                  <p>
						Brings a PPP interface up or down.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">ifup-routes</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Adds static routes for a device as its interface is brought up.
					</p>
                </dd>
                <dt>
                  <span class="term"><code class="filename">ifdown-sit</code> and <code class="filename">ifup-sit</code></span>
                </dt>
                <dd>
                  <p>
						Contains function calls related to bringing up and down an IPv6 tunnel within an IPv4 connection.
					</p>
                </dd>
                <dt>
                  <span class="term"><code class="filename">ifup-sl</code> and <code class="filename">ifdown-sl</code></span>
                </dt>
                <dd>
                  <p>
						Brings a SLIP interface up or down.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename">ifup-wireless</code>
                  </span>
                </dt>
                <dd>
                  <p>
						Brings up a wireless interface.
					</p>
                </dd>
              </dl>
            </div>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				Removing or modifying any scripts in the <code class="filename">/etc/sysconfig/network-scripts/</code> directory can cause interface connections to act irregularly or fail. Only advanced users should modify scripts related to a network interface.
			</p>
            </div>
            <p>
			The easiest way to manipulate all network scripts simultaneously is to use the <code class="command">/sbin/service</code> command on the network service (<code class="filename">/etc/rc.d/init.d/network</code>), as illustrated the following command:
		</p>
            <pre class="screen"><code class="command">/sbin/service network <em class="replaceable"><code>&lt;action&gt;</code></em></code>
</pre>
            <p>
			Here, <em class="replaceable"><code>&lt;action&gt;</code></em> can be either <code class="command">start</code>, <code class="command">stop</code>, or <code class="command">restart</code>.
		</p>
            <p>
			To view a list of configured devices and currently active network interfaces, use the following command:
		</p>
            <pre class="screen"><code class="command">/sbin/service network status</code>
</pre>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-networkscripts-static-routes"></a>14.4. Configuring Static Routes</h2>
                </div>
              </div>
            </div>
            <p>
			Routing will be configured on routing devices, therefore it should not be necessary to configure static routes on Red Hat Enterprise Linux servers or clients. However, if static routes are required they can be configured for each interface. This can be useful if you have multiple interfaces in different subnets. Use the <code class="command">route</code> command to display the IP routing table.
		</p>
            <p>
			Static route configuration is stored in a <code class="filename">/etc/sysconfig/network-scripts/route-<em class="replaceable"><code>interface</code></em></code> file. For example, static routes for the eth0 interface would be stored in the <code class="filename">/etc/sysconfig/network-scripts/route-eth0</code> file. The <code class="filename">route-<em class="replaceable"><code>interface</code></em></code> file has two formats: IP command arguments and network/netmask directives.
		</p>
            <h5 class="formalpara">IP Command Arguments Format</h5>
            <p class="formalpara">
				Define a default gateway on the first line. This is only required if the default gateway is not set via DHCP:
			</p>
            <pre class="screen">
default <em class="replaceable"><code>X.X.X.X</code></em> dev <em class="replaceable"><code>interface</code></em>
</pre>
            <p>
			<em class="replaceable"><code>X.X.X.X</code></em> is the IP address of the default gateway. The <em class="replaceable"><code>interface</code></em> is the interface that is connected to, or can reach, the default gateway.
		</p>
            <p>
			Define a static route. Each line is parsed as an individual route:
		</p>
            <pre class="screen"><em class="replaceable"><code>X.X.X.X/X</code></em> via <em class="replaceable"><code>X.X.X.X</code></em> dev <em class="replaceable"><code>interface</code></em>
</pre>
            <p>
			<em class="replaceable"><code>X.X.X.X/X</code></em> is the network number and netmask for the static route. <em class="replaceable"><code>X.X.X.X</code></em> and <em class="replaceable"><code>interface</code></em> are the IP address and interface for the default gateway respectively. The <em class="replaceable"><code>X.X.X.X</code></em> address does not have to be the default gateway IP address. In most cases, <em class="replaceable"><code>X.X.X.X</code></em> will be an IP address in a different subnet, and <em class="replaceable"><code>interface</code></em> will be the interface that is connected to, or can reach, that subnet. Add as many static routes as required.
		</p>
            <p>
			The following is a sample <code class="filename">route-eth0</code> file using the IP command arguments format. The default gateway is 192.168.0.1, interface eth0. The two static routes are for the 10.10.10.0/24 and 172.16.1.0/24 networks:
		</p>
            <pre class="screen">
default 192.168.0.1 dev eth0
10.10.10.0/24 via 192.168.0.1 dev eth0
172.16.1.0/24 via 192.168.0.1 dev eth0
</pre>
            <p>
			Static routes should only be configured for other subnets. The above example is not necessary, since packets going to the 10.10.10.0/24 and 172.16.1.0/24 networks will use the default gateway anyway. Below is an example of setting static routes to a different subnet, on a machine in a 192.168.0.0/24 subnet. The example machine has an eth0 interface in the 192.168.0.0/24 subnet, and an eth1 interface (10.10.10.1) in the 10.10.10.0/24 subnet:
		</p>
            <pre class="screen">
10.10.10.0/24 via 10.10.10.1 dev eth1
</pre>
            <div class="warning">
              <h2>Duplicate Default Gateways</h2>
              <p>
				If the default gateway is already assigned from DHCP, the IP command arguments format can cause one of two errors during start-up, or when bringing up an interface from the down state using the <code class="command">ifup</code> command: "RTNETLINK answers: File exists" or 'Error: either "to" is a duplicate, or "<em class="replaceable"><code>X.X.X.X</code></em>" is a garbage.', where <em class="replaceable"><code>X.X.X.X</code></em> is the gateway, or a different IP address. These errors can also occur if you have another route to another network using the default gateway. Both of these errors are safe to ignore.
			</p>
            </div>
            <h5 class="formalpara">Network/Netmask Directives Format</h5>
            <p class="formalpara">
				You can also use the network/netmask directives format for <code class="filename">route-<em class="replaceable"><code>interface</code></em></code> files. The following is a template for the network/netmask format, with instructions following afterwards:
			</p>
            <pre class="screen">
ADDRESS0=<em class="replaceable"><code>X.X.X.X</code></em>
NETMASK0=<em class="replaceable"><code>X.X.X.X</code></em>
GATEWAY0=<em class="replaceable"><code>X.X.X.X</code></em>
</pre>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<code class="computeroutput">ADDRESS0=<em class="replaceable"><code>X.X.X.X</code></em></code> is the network number for the static route.
				</p>
                </li>
                <li>
                  <p>
					<code class="computeroutput">NETMASK0=<em class="replaceable"><code>X.X.X.X</code></em></code> is the netmask for the network number defined with <code class="computeroutput">ADDRESS0=<em class="replaceable"><code>X.X.X.X</code></em></code>.
				</p>
                </li>
                <li>
                  <p>
					<code class="computeroutput">GATEWAY0=<em class="replaceable"><code>X.X.X.X</code></em></code> is the default gateway, or an IP address that can be used to reach <code class="computeroutput">ADDRESS0=<em class="replaceable"><code>X.X.X.X</code></em></code>
				</p>
                </li>
              </ul>
            </div>
            <p>
			The following is a sample <code class="filename">route-eth0</code> file using the network/netmask directives format. The default gateway is 192.168.0.1, interface eth0. The two static routes are for the 10.10.10.0/24 and 172.16.1.0/24 networks. However, as mentioned before, this example is not necessary as the 10.10.10.0/24 and 172.16.1.0/24 networks would use the default gateway anyway:
		</p>
            <pre class="screen">
ADDRESS0=10.10.10.0
NETMASK0=255.255.255.0
GATEWAY0=192.168.0.1
ADDRESS1=172.16.1.0
NETMASK1=255.255.255.0
GATEWAY1=192.168.0.1
</pre>
            <p>
			Subsequent static routes must be numbered sequentially, and must not skip any values. For example, <code class="computeroutput">ADDRESS0</code>, <code class="computeroutput">ADDRESS1</code>, <code class="computeroutput">ADDRESS2</code>, and so on.
		</p>
            <p>
			Below is an example of setting static routes to a different subnet, on a machine in the 192.168.0.0/24 subnet. The example machine has an eth0 interface in the 192.168.0.0/24 subnet, and an eth1 interface (10.10.10.1) in the 10.10.10.0/24 subnet:
		</p>
            <pre class="screen">
ADDRESS0=10.10.10.0
NETMASK0=255.255.255.0
GATEWAY0=10.10.10.1
</pre>
            <p>
			DHCP should assign these settings automatically, therefore it should not be necessary to configure static routes on Red Hat Enterprise Linux servers or clients.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-networkscripts-functions"></a>14.5. Network Function Files</h2>
                </div>
              </div>
            </div>
            <a id="id2953607" class="indexterm"></a>
            <p>
			Red Hat Enterprise Linux makes use of several files that contain important common functions used to bring interfaces up and down. Rather than forcing each interface control file to contain these functions, they are grouped together in a few files that are called upon when necessary.
		</p>
            <p>
			The <code class="filename">/etc/sysconfig/network-scripts/network-functions</code> file contains the most commonly used IPv4 functions, which are useful to many interface control scripts. These functions include contacting running programs that have requested information about changes in the status of an interface, setting hostnames, finding a gateway device, verifying whether or not a particular device is down, and adding a default route.
		</p>
            <p>
			As the functions required for IPv6 interfaces are different from IPv4 interfaces, a <code class="filename">/etc/sysconfig/network-scripts/network-functions-ipv6</code> file exists specifically to hold this information. The functions in this file configure and delete static IPv6 routes, create and remove tunnels, add and remove IPv6 addresses to an interface, and test for the existence of an IPv6 address on an interface.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-networkscripts-resources"></a>14.6. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2897489" class="indexterm"></a>
            <p>
			The following are resources which explain more about network interfaces.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-networkscripts-docs-inst"></a>14.6.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="filename">/usr/share/doc/initscripts-<em class="replaceable"><code>&lt;version&gt;</code></em>/sysconfig.txt</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							A guide to available options for network configuration files, including IPv6 options not covered in this chapter.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">/usr/share/doc/iproute-<em class="replaceable"><code>&lt;version&gt;</code></em>/ip-cref.ps</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This file contains a wealth of information about the <code class="command">ip</code> command, which can be used to manipulate routing tables, among other things. Use the <span><strong class="application">ggv</strong></span> or <span><strong class="application">kghostview</strong></span> application to view this file.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-network-config"></a>Chapter 15. Network Configuration</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-overview">15.1. Overview</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-ethernet">15.2. Establishing an Ethernet Connection</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-isdn">15.3. Establishing an ISDN Connection</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-modem">15.4. Establishing a Modem Connection</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-xdsl">15.5. Establishing an xDSL Connection</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-tokenring">15.6. Establishing a Token Ring Connection</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-wireless">15.7. Establishing a Wireless Connection</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-dns">15.8. Managing DNS Settings</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-config-hosts">15.9. Managing Hosts</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-profiles">15.10. Working with Profiles</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-aliases">15.11. Device Aliases</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-network-save-config">15.12. Saving and Restoring the Network Configuration</a>
                </span>
              </dt>
            </dl>
          </div>
          <a id="id2967453" class="indexterm"></a>
          <a id="id2923514" class="indexterm"></a>
          <a id="id2955068" class="indexterm"></a>
          <a id="id2843881" class="indexterm"></a>
          <p>
		To communicate with each other, computers must have a network connection. This is accomplished by having the operating system recognize an interface card (such as Ethernet, ISDN modem, or token ring) and configuring the interface to connect to the network.
	</p>
          <p>
		The <span><strong class="application">Network Administration Tool</strong></span> can be used to configure the following types of network interfaces:
	</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
				Ethernet
			</p>
              </li>
              <li>
                <p>
				ISDN
			</p>
              </li>
              <li>
                <p>
				modem
			</p>
              </li>
              <li>
                <p>
				xDSL
			</p>
              </li>
              <li>
                <p>
				token ring
			</p>
              </li>
              <li>
                <p>
				CIPE
			</p>
              </li>
              <li>
                <p>
				wireless devices
			</p>
              </li>
            </ul>
          </div>
          <p>
		It can also be used to configure IPsec connections, manage DNS settings, and manage the <code class="filename">/etc/hosts</code> file used to store additional hostnames and IP address combinations.
	</p>
          <a id="id2917578" class="indexterm"></a>
          <p>
		To use the <span><strong class="application">Network Administration Tool</strong></span>, you must have root privileges. To start the application, go to the Applications (the main menu on the panel) =&gt; <span><strong class="guimenu">System Settings</strong></span> =&gt; <span><strong class="guimenuitem">Network</strong></span>, or type the command <code class="command">system-config-network</code> at a shell prompt (for example, in an <span><strong class="application">XTerm</strong></span> or a <span><strong class="application">GNOME terminal</strong></span>). If you type the command, the graphical version is displayed if <span><strong class="application">X</strong></span> is running; otherwise, the text-based version is displayed.
	</p>
          <p>
		To use the command line version, execute the command <code class="command">system-config-network-cmd --help</code> as root to view all of the options.
	</p>
          <div class="figure">
            <a id="fig-network-config-main"></a>
            <div class="figure-contents">
              <div class="mediaobject">
                <img src="images/neat.png" alt="Network Administration Tool" />
                <div class="longdesc">
                  <p>
					Main Window
				</p>
                </div>
              </div>
            </div>
            <h6>Figure 15.1. <span>Network Administration Tool</span></h6>
          </div>
          <br class="figure-break" />
          <div class="tip">
            <h2>Tip</h2>
            <p>
			Use the Red Hat Hardware Compatibility List (<a href="http://hardware.redhat.com/hcl/">http://hardware.redhat.com/hcl/</a>) to determine if Red Hat Enterprise Linux supports your hardware device.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-overview"></a>15.1. Overview</h2>
                </div>
              </div>
            </div>
            <a id="id2952204" class="indexterm"></a>
            <p>
			To configure a network connection with the <span><strong class="application">Network Administration Tool</strong></span>, perform the following steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Add a network device associated with the physical hardware device.
				</p>
                </li>
                <li>
                  <p>
					Add the physical hardware device to the hardware list, if it does not already exist.
				</p>
                </li>
                <li>
                  <p>
					Configure the hostname and DNS settings.
				</p>
                </li>
                <li>
                  <p>
					Configure any hosts that cannot be looked up through DNS.
				</p>
                </li>
              </ol>
            </div>
            <p>
			This chapter discusses each of these steps for each type of network connection.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-ethernet"></a>15.2. Establishing an Ethernet Connection</h2>
                </div>
              </div>
            </div>
            <a id="id2938211" class="indexterm"></a>
            <a id="id2859585" class="indexterm"></a>
            <p>
			To establish an Ethernet connection, you need a network interface card (NIC), a network cable (usually a CAT5 cable), and a network to connect to. Different networks are configured to use different network speeds; make sure your NIC is compatible with the network to which you want to connect.
		</p>
            <p>
			To add an Ethernet connection, follow these steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Click the <span><strong class="guilabel">Devices</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">New</strong></span> button on the toolbar.
				</p>
                </li>
                <li>
                  <p>
					Select <span><strong class="guilabel">Ethernet connection</strong></span> from the <span><strong class="guilabel">Device Type</strong></span> list, and click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					If you have already added the network interface card to the hardware list, select it from the <span><strong class="guilabel">Ethernet card</strong></span> list. Otherwise, select <span><strong class="guilabel">Other Ethernet Card</strong></span> to add the hardware device.
				</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
						The installation program detects supported Ethernet devices and prompts you to configure them. If you configured any Ethernet devices during the installation, they are displayed in the hardware list on the <span><strong class="guilabel">Hardware</strong></span> tab.
					</p>
                  </div>
                </li>
                <li>
                  <p>
					If you selected <span><strong class="guilabel">Other Ethernet Card</strong></span>, the <span><strong class="guilabel">Select Ethernet Adapter</strong></span> window appears. Select the manufacturer and model of the Ethernet card. Select the device name. If this is the system's first Ethernet card, select <span><strong class="guilabel">eth0</strong></span> as the device name; if this is the second Ethernet card, select <span><strong class="guilabel">eth1</strong></span> (and so on). The <span><strong class="application">Network Administration Tool</strong></span> also allows you to configure the resources for the NIC. Click <span><strong class="guibutton">Forward</strong></span> to continue.
				</p>
                </li>
                <li>
                  <p>
					<a id="id2907098" class="indexterm"></a>
					<a id="id2915267" class="indexterm"></a>
					 In the <span><strong class="guilabel">Configure Network Settings</strong></span> window shown in <a href="#fig-neat-ethernet-settings" title="Figure 15.2. Ethernet Settings">Figure 15.2, “Ethernet Settings”</a>, choose between DHCP and a static IP address. If the device receives a different IP address each time the network is started, do not specify a hostname. Click <span><strong class="guibutton">Forward</strong></span> to continue.
				</p>
                </li>
                <li>
                  <p>
					Click <span><strong class="guibutton">Apply</strong></span> on the <span><strong class="guilabel">Create Ethernet Device</strong></span> page.
				</p>
                </li>
              </ol>
            </div>
            <div class="figure">
              <a id="fig-neat-ethernet-settings"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-ethernet-settings.png" alt="Ethernet Settings" />
                  <div class="longdesc">
                    <p>
						Ethernet Settings
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.2. Ethernet Settings</h6>
            </div>
            <br class="figure-break" />
            <p>
			After configuring the Ethernet device, it appears in the device list as shown in <a href="#fig-neat-ethernet" title="Figure 15.3. Ethernet Device">Figure 15.3, “Ethernet Device”</a>.
		</p>
            <div class="figure">
              <a id="fig-neat-ethernet"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-ethernet.png" alt="Ethernet Device" />
                  <div class="longdesc">
                    <p>
						Ethernet Device
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.3. Ethernet Device</h6>
            </div>
            <br class="figure-break" />
            <p>
	Be sure to select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes.
</p>
            <p>
			After adding the Ethernet device, you can edit its configuration by selecting the device from the device list and clicking <span><strong class="guibutton">Edit</strong></span>. For example, when the device is added, it is configured to start at boot time by default. To change this setting, select to edit the device, modify the <span><strong class="guilabel">Activate device when computer starts</strong></span> value, and save the changes.
		</p>
            <a id="id3043504" class="indexterm"></a>
            <p>
	When the device is added, it is not activated immediately, as seen by its <span><strong class="guilabel">Inactive</strong></span> status. To activate the device, select it from the device list, and click the <span><strong class="guibutton">Activate</strong></span> button. If the system is configured to activate the device when the computer starts (the default), this step does not have to be performed again.
</p>
            <p>
			If you associate more than one device with an Ethernet card, the subsequent devices are <em class="firstterm">device aliases</em>. A device alias allows you to setup multiple virtual devices for one physical device, thus giving the one physical device more than one IP address. For example, you can configure an eth1 device and an eth1:1 device. For details, refer to <a href="#s1-network-aliases" title="15.11. Device Aliases">Section 15.11, “Device Aliases”</a>.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-isdn"></a>15.3. Establishing an ISDN Connection</h2>
                </div>
              </div>
            </div>
            <a id="id2942383" class="indexterm"></a>
            <a id="id2957006" class="indexterm"></a>
            <p>
			An ISDN connection is an Internet connection established with a ISDN modem card through a special phone line installed by the phone company. ISDN connections are popular in Europe.
		</p>
            <p>
			To add an ISDN connection, follow these steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Click the <span><strong class="guilabel">Devices</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">New</strong></span> button on the toolbar.
				</p>
                </li>
                <li>
                  <p>
					Select <span><strong class="guilabel">ISDN connection</strong></span> from the <span><strong class="guilabel">Device Type</strong></span> list, and click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					Select the ISDN adapter from the pulldown menu. Then configure the resources and D channel protocol for the adapter. Click <span><strong class="guibutton">Forward</strong></span> to continue.
				</p>
                  <div class="figure">
                    <a id="fig-neat-isdn-settings"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-isdn-settings.png" alt="ISDN Settings" />
                        <div class="longdesc">
                          <p>
								ISDN Settings
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.4. ISDN Settings</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					If your Internet Service Provider (ISP) is in the pre-configured list, select it. Otherwise, enter the required information about your ISP account. If you do not know the values, contact your ISP. Click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					In the <span><strong class="guilabel">IP Settings</strong></span> window, select the <span><strong class="guilabel">Encapsulation Mode</strong></span> and whether to obtain an IP address automatically or to set a static IP instead. Click <span><strong class="guibutton">Forward</strong></span> when finished.
				</p>
                </li>
                <li>
                  <p>
					On the <span><strong class="guilabel">Create Dialup Connection</strong></span> page, click <span><strong class="guibutton">Apply</strong></span>.
				</p>
                </li>
              </ol>
            </div>
            <p>
			After configuring the ISDN device, it appears in the device list as a device with type <span><strong class="guilabel">ISDN</strong></span> as shown in <a href="#fig-neat-isdn" title="Figure 15.5. ISDN Device">Figure 15.5, “ISDN Device”</a>.
		</p>
            <p>
	Be sure to select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes.
</p>
            <p>
			After adding the ISDN device, you can edit its configuration by selecting the device from the device list and clicking <span><strong class="guibutton">Edit</strong></span>. For example, when the device is added, it is configured not to start at boot time by default. Edit its configuration to modify this setting. Compression, PPP options, login name, password, and more can be changed.
		</p>
            <a id="id2961739" class="indexterm"></a>
            <p>
	When the device is added, it is not activated immediately, as seen by its <span><strong class="guilabel">Inactive</strong></span> status. To activate the device, select it from the device list, and click the <span><strong class="guibutton">Activate</strong></span> button. If the system is configured to activate the device when the computer starts (the default), this step does not have to be performed again.
</p>
            <div class="figure">
              <a id="fig-neat-isdn"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-isdn.png" alt="ISDN Device" />
                  <div class="longdesc">
                    <p>
						ISDN Device
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.5. ISDN Device</h6>
            </div>
            <br class="figure-break" />
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-modem"></a>15.4. Establishing a Modem Connection</h2>
                </div>
              </div>
            </div>
            <a id="id3030196" class="indexterm"></a>
            <a id="id2974842" class="indexterm"></a>
            <p>
			A modem can be used to configure an Internet connection over an active phone line. An Internet Service Provider (ISP) account (also called a dial-up account) is required.
		</p>
            <p>
			To add a modem connection, follow these steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Click the <span><strong class="guilabel">Devices</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">New</strong></span> button on the toolbar.
				</p>
                </li>
                <li>
                  <p>
					Select <span><strong class="guilabel">Modem connection</strong></span> from the <span><strong class="guilabel">Device Type</strong></span> list, and click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					If there is a modem already configured in the hardware list (on the <span><strong class="guilabel">Hardware</strong></span> tab), the <span><strong class="application">Network Administration Tool</strong></span> assumes you want to use it to establish a modem connection. If there are no modems already configured, it tries to detect any modems in the system. This probe might take a while. If a modem is not found, a message is displayed to warn you that the settings shown are not values found from the probe.
				</p>
                </li>
                <li>
                  <p>
					After probing, the window in <a href="#fig-neat-modem-settings" title="Figure 15.6. Modem Settings">Figure 15.6, “Modem Settings”</a> appears.
				</p>
                  <div class="figure">
                    <a id="fig-neat-modem-settings"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-modem-settings.png" alt="Modem Settings" />
                        <div class="longdesc">
                          <p>
								Modem Settings
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.6. Modem Settings</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					Configure the modem device, baud rate, flow control, and modem volume. If you do not know these values, accept the defaults if the modem was probed successfully. If you do not have touch tone dialing, uncheck the corresponding checkbox. Click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					If your ISP is in the pre-configured list, select it. Otherwise, enter the required information about your ISP account. If you do not know these values, contact your ISP. Click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					On the <span><strong class="guilabel">IP Settings</strong></span> page, select whether to obtain an IP address automatically or whether to set one statically. Click <span><strong class="guibutton">Forward</strong></span> when finished.
				</p>
                </li>
                <li>
                  <p>
					On the <span><strong class="guilabel">Create Dialup Connection</strong></span> page, click <span><strong class="guibutton">Apply</strong></span>.
				</p>
                </li>
              </ol>
            </div>
            <p>
			After configuring the modem device, it appears in the device list with the type <code class="computeroutput">Modem</code> as shown in <a href="#fig-neat-modem" title="Figure 15.7. Modem Device">Figure 15.7, “Modem Device”</a>.
		</p>
            <div class="figure">
              <a id="fig-neat-modem"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-modem.png" alt="Modem Device" />
                  <div class="longdesc">
                    <p>
						Modem Device
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.7. Modem Device</h6>
            </div>
            <br class="figure-break" />
            <p>
	Be sure to select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes.
</p>
            <p>
			After adding the modem device, you can edit its configuration by selecting the device from the device list and clicking <span><strong class="guibutton">Edit</strong></span>. For example, when the device is added, it is configured not to start at boot time by default. Edit its configuration to modify this setting. Compression, PPP options, login name, password, and more can also be changed.
		</p>
            <a id="id2956355" class="indexterm"></a>
            <p>
	When the device is added, it is not activated immediately, as seen by its <span><strong class="guilabel">Inactive</strong></span> status. To activate the device, select it from the device list, and click the <span><strong class="guibutton">Activate</strong></span> button. If the system is configured to activate the device when the computer starts (the default), this step does not have to be performed again.
</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-xdsl"></a>15.5. Establishing an xDSL Connection</h2>
                </div>
              </div>
            </div>
            <a id="id2982998" class="indexterm"></a>
            <a id="id2982974" class="indexterm"></a>
            <a id="id2982988" class="indexterm"></a>
            <a id="id2979135" class="indexterm"></a>
            <p>
			DSL stands for <em class="firstterm">Digital Subscriber Lines</em>. There are different types of DSL such as ADSL, IDSL, and SDSL. The <span><strong class="application">Network Administration Tool</strong></span> uses the term <em class="firstterm">xDSL</em> to mean all types of DSL connections.
		</p>
            <p>
			Some DSL providers require that the system is configured to obtain an IP address through DHCP with an Ethernet card. Some DSL providers require you to configure a PPPoE (Point-to-Point Protocol over Ethernet) connection with an Ethernet card. Ask your DSL provider which method to use.
		</p>
            <p>
			If you are required to use DHCP, refer to <a href="#s1-network-config-ethernet" title="15.2. Establishing an Ethernet Connection">Section 15.2, “Establishing an Ethernet Connection”</a> to configure your Ethernet card.
		</p>
            <p>
			If you are required to use PPPoE, follow these steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Click the <span><strong class="guilabel">Devices</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">New</strong></span> button.
				</p>
                </li>
                <li>
                  <p>
					Select <span><strong class="guilabel">xDSL connection</strong></span> from the <span><strong class="guilabel">Device Type</strong></span> list, and click <span><strong class="guibutton">Forward</strong></span> as shown in <a href="#fig-neat-xdsl-selectdevicetype" title="Figure 15.8. Select Device Type">Figure 15.8, “Select Device Type”</a>.
				</p>
                  <div class="figure">
                    <a id="fig-neat-xdsl-selectdevicetype"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-xdsl-selectdevicetype.png" alt="Select Device Type" />
                        <div class="longdesc">
                          <p>
								Select Device Type
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.8. Select Device Type</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					If your Ethernet card is in the hardware list, select the <span><strong class="guilabel">Ethernet Device</strong></span> from the pulldown menu from the page shown in <a href="#fig-neat-xdsl-settings" title="Figure 15.9. xDSL Settings">Figure 15.9, “xDSL Settings”</a>. Otherwise, the <span><strong class="guilabel">Select Ethernet Adapter</strong></span> window appears.
				</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
						The installation program detects supported Ethernet devices and prompts you to configure them. If you configured any Ethernet devices during the installation, they are displayed in the hardware list on the <span><strong class="guilabel">Hardware</strong></span> tab.
					</p>
                  </div>
                  <div class="figure">
                    <a id="fig-neat-xdsl-settings"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-xdsl-settings.png" alt="xDSL Settings" />
                        <div class="longdesc">
                          <p>
								xDSL Settings
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.9. xDSL Settings</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					Enter the <span><strong class="guilabel">Provider Name</strong></span>, <span><strong class="guilabel">Login Name</strong></span>, and <span><strong class="guilabel">Password</strong></span>. If you are not setting up a T-Online account, select <span><strong class="guilabel">Normal</strong></span> from the <span><strong class="guilabel">Account Type</strong></span> pulldown menu.
				</p>
                  <p>
					If you are setting up a T-Online account, select <span><strong class="guilabel">T-Online</strong></span> from the <span><strong class="guilabel">Account Type</strong></span> pulldown menu and enter any values in the <span><strong class="guilabel">Login name</strong></span> and <span><strong class="guilabel">Password</strong></span> field. You can further configure your T-Online account settings once the DSL connection has been fully configured (refer to <a href="#tonline_setup" title="Setting Up a T-Online Account">Setting Up a T-Online Account</a>).
				</p>
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">Forward</strong></span> to go to the <span><strong class="guimenu">Create DSL Connection</strong></span> menu. Check your settings and click <span><strong class="guibutton">Apply</strong></span> to finish.
				</p>
                </li>
                <li>
                  <p>
					After configuring the DSL connection, it appears in the device list as shown in <a href="#fig-neat-xdsl" title="Figure 15.10. xDSL Device">Figure 15.10, “xDSL Device”</a>.
				</p>
                  <div class="figure">
                    <a id="fig-neat-xdsl"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-xdsl.png" alt="xDSL Device" />
                        <div class="longdesc">
                          <p>
								xDSL Device
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.10. xDSL Device</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					After adding the xDSL connection, you can edit its configuration by selecting the device from the device list and clicking <span><strong class="guibutton">Edit</strong></span>.
				</p>
                  <div class="figure">
                    <a id="fig-neat-xdsl-edit"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-tonline1.png" alt="xDSL Configuration" />
                        <div class="longdesc">
                          <p>
								xDSL Configuration
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.11. xDSL Configuration</h6>
                  </div>
                  <br class="figure-break" />
                  <p>
					For example, when the device is added, it is configured not to start at boot time by default. Edit its configuration to modify this setting. Click <span><strong class="guibutton">OK</strong></span> when finished.
				</p>
                </li>
                <li>
                  <p>
					Once you are satisfied with your xDSL connection settings, select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes.
				</p>
                </li>
              </ol>
            </div>
            <p class="formalpara">
              <a id="tonline_setup"></a>
            </p>
            <h5 class="formalpara">Setting Up a T-Online Account</h5>
            <p class="formalpara">
				If you are setting up a T-Online Account, follow these additional steps:
			</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Select the device from the device list and click <span><strong class="guibutton">Edit</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					Select the <span><strong class="guilabel">Provider</strong></span> tab from the <span><strong class="guimenu">xDSL Configuration</strong></span> menu as shown in <a href="#fig-neat-xdsl-editProvidertab" title="Figure 15.12. xDSL Configuration - Provider Tab">Figure 15.12, “xDSL Configuration - Provider Tab”</a>.
				</p>
                  <div class="figure">
                    <a id="fig-neat-xdsl-editProvidertab"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-tonlineProvidertab.png" alt="xDSL Configuration - Provider Tab" />
                        <div class="longdesc">
                          <p>
								xDSL Configuration - Provider Tab
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.12. xDSL Configuration - Provider Tab</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">T-Online Account Setup</strong></span> button. This will open the <span><strong class="guimenu">Account Setup</strong></span> window for your T-Online account as shown in <a href="#fig-neat-xdsl-tonlinesettings" title="Figure 15.13. Account Setup">Figure 15.13, “Account Setup”</a>.
				</p>
                  <div class="figure">
                    <a id="fig-neat-xdsl-tonlinesettings"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-tonlineAcctsetup.png" alt="Account Setup" />
                        <div class="longdesc">
                          <p>
								Account Setup
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.13. Account Setup</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					Enter your <span><strong class="guilabel">Adapter identifier</strong></span>, <span><strong class="guilabel">Associated T-Online number</strong></span>, <span><strong class="guilabel">Concurrent user number/suffix</strong></span>, and <span><strong class="guilabel">Personal password.</strong></span>. Click <span><strong class="guibutton">OK</strong></span> when finished to close the <span><strong class="guimenu">Account Setup</strong></span> window.
				</p>
                </li>
                <li>
                  <p>
					On the <span><strong class="guimenu">xDSL Configuration</strong></span> window, click <span><strong class="guibutton">OK</strong></span>. Be sure to select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> from the <span><strong class="application">Network Administration Tool</strong></span> to save the changes.
				</p>
                </li>
              </ol>
            </div>
            <p>
	When the device is added, it is not activated immediately, as seen by its <span><strong class="guilabel">Inactive</strong></span> status. To activate the device, select it from the device list, and click the <span><strong class="guibutton">Activate</strong></span> button. If the system is configured to activate the device when the computer starts (the default), this step does not have to be performed again.
</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-tokenring"></a>15.6. Establishing a Token Ring Connection</h2>
                </div>
              </div>
            </div>
            <a id="id2942401" class="indexterm"></a>
            <a id="id2942414" class="indexterm"></a>
            <p>
			A <em class="firstterm">token ring network</em> is a network in which all the computers are connected in a circular pattern. A <em class="firstterm">token</em>, or a special network packet, travels around the token ring and allows computers to send information to each other.
		</p>
            <div class="tip">
              <h2>Tip</h2>
              <p>
				For more information on using token rings under Linux, refer to the <em class="citetitle">Linux Token Ring Project</em> website available at <a href="http://www.linuxtr.net/">http://www.linuxtr.net/</a>.
			</p>
            </div>
            <p>
			To add a token ring connection, follow these steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Click the <span><strong class="guilabel">Devices</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">New</strong></span> button on the toolbar.
				</p>
                </li>
                <li>
                  <p>
					Select <span><strong class="guilabel">Token Ring connection</strong></span> from the <span><strong class="guilabel">Device Type</strong></span> list and click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					If you have already added the token ring card to the hardware list, select it from the <span><strong class="guilabel">Tokenring card</strong></span> list. Otherwise, select <span><strong class="guilabel">Other Tokenring Card</strong></span> to add the hardware device.
				</p>
                </li>
                <li>
                  <p>
					If you selected <span><strong class="guilabel">Other Tokenring Card</strong></span>, the <span><strong class="guilabel">Select Token Ring Adapter</strong></span> window as shown in <a href="#fig-neat-tokenring-settings" title="Figure 15.14. Token Ring Settings">Figure 15.14, “Token Ring Settings”</a> appears. Select the manufacturer and model of the adapter. Select the device name. If this is the system's first token ring card, select <span><strong class="guilabel">tr0</strong></span>; if this is the second token ring card, select <span><strong class="guilabel">tr1</strong></span> (and so on). The <span><strong class="application">Network Administration Tool</strong></span> also allows the user to configure the resources for the adapter. Click <span><strong class="guibutton">Forward</strong></span> to continue.
				</p>
                  <div class="figure">
                    <a id="fig-neat-tokenring-settings"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-tokenring-settings.png" alt="Token Ring Settings" />
                        <div class="longdesc">
                          <p>
								Token Ring Settings
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.14. Token Ring Settings</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					On the <span><strong class="guilabel">Configure Network Settings</strong></span> page, choose between DHCP and static IP address. You may specify a hostname for the device. If the device receives a dynamic IP address each time the network is started, do not specify a hostname. Click <span><strong class="guibutton">Forward</strong></span> to continue.
				</p>
                </li>
                <li>
                  <p>
					Click <span><strong class="guibutton">Apply</strong></span> on the <span><strong class="guilabel">Create Tokenring Device</strong></span> page.
				</p>
                </li>
              </ol>
            </div>
            <p>
			After configuring the token ring device, it appears in the device list as shown in <a href="#fig-neat-tokenring" title="Figure 15.15. Token Ring Device">Figure 15.15, “Token Ring Device”</a>.
		</p>
            <div class="figure">
              <a id="fig-neat-tokenring"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-tokenring.png" alt="Token Ring Device" />
                  <div class="longdesc">
                    <p>
						Token Ring Device
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.15. Token Ring Device</h6>
            </div>
            <br class="figure-break" />
            <p>
	Be sure to select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes.
</p>
            <p>
			After adding the device, you can edit its configuration by selecting the device from the device list and clicking <span><strong class="guibutton">Edit</strong></span>. For example, you can configure whether the device is started at boot time.
		</p>
            <a id="id3025277" class="indexterm"></a>
            <p>
	When the device is added, it is not activated immediately, as seen by its <span><strong class="guilabel">Inactive</strong></span> status. To activate the device, select it from the device list, and click the <span><strong class="guibutton">Activate</strong></span> button. If the system is configured to activate the device when the computer starts (the default), this step does not have to be performed again.
</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-wireless"></a>15.7. Establishing a Wireless Connection</h2>
                </div>
              </div>
            </div>
            <a id="id2956387" class="indexterm"></a>
            <p>
			Wireless Ethernet devices are becoming increasingly popular. The configuration is similar to the Ethernet configuration except that it allows you to configure settings such as the SSID and key for the wireless device.
		</p>
            <p>
			To add a wireless Ethernet connection, follow these steps:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Click the <span><strong class="guilabel">Devices</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Click the <span><strong class="guibutton">New</strong></span> button on the toolbar.
				</p>
                </li>
                <li>
                  <p>
					Select <span><strong class="guilabel">Wireless connection</strong></span> from the <span><strong class="guilabel">Device Type</strong></span> list and click <span><strong class="guibutton">Forward</strong></span>.
				</p>
                </li>
                <li>
                  <p>
					If you have already added the wireless network interface card to the hardware list, select it from the <span><strong class="guilabel">Wireless card</strong></span> list. Otherwise, select <span><strong class="guilabel">Other Wireless Card</strong></span> to add the hardware device.
				</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
						The installation program usually detects supported wireless Ethernet devices and prompts you to configure them. If you configured them during the installation, they are displayed in the hardware list on the <span><strong class="guilabel">Hardware</strong></span> tab.
					</p>
                  </div>
                </li>
                <li>
                  <p>
					If you selected <span><strong class="guilabel">Other Wireless Card</strong></span>, the <span><strong class="guilabel">Select Ethernet Adapter</strong></span> window appears. Select the manufacturer and model of the Ethernet card and the device. If this is the first Ethernet card for the system, select <span><strong class="guilabel">eth0</strong></span>; if this is the second Ethernet card for the system, select <span><strong class="guilabel">eth1</strong></span> (and so on). The <span><strong class="application"> Network Administration Tool</strong></span> also allows the user to configure the resources for the wireless network interface card. Click <span><strong class="guibutton">Forward</strong></span> to continue.
				</p>
                </li>
                <li>
                  <p>
					On the <span><strong class="guilabel">Configure Wireless Connection</strong></span> page as shown in <a href="#fig-neat-wireless-settings" title="Figure 15.16. Wireless Settings">Figure 15.16, “Wireless Settings”</a>, configure the settings for the wireless device.
				</p>
                  <div class="figure">
                    <a id="fig-neat-wireless-settings"></a>
                    <div class="figure-contents">
                      <div class="mediaobject">
                        <img src="images/neat-wireless-settings.png" alt="Wireless Settings" />
                        <div class="longdesc">
                          <p>
								Wireless Settings
							</p>
                        </div>
                      </div>
                    </div>
                    <h6>Figure 15.16. Wireless Settings</h6>
                  </div>
                  <br class="figure-break" />
                </li>
                <li>
                  <p>
					On the <span><strong class="guilabel">Configure Network Settings</strong></span> page, choose between DHCP and static IP address. You may specify a hostname for the device. If the device receives a dynamic IP address each time the network is started, do not specify a hostname. Click <span><strong class="guibutton">Forward</strong></span> to continue.
				</p>
                </li>
                <li>
                  <p>
					Click <span><strong class="guibutton">Apply</strong></span> on the <span><strong class="guilabel">Create Wireless Device</strong></span> page.
				</p>
                </li>
              </ol>
            </div>
            <p>
			After configuring the wireless device, it appears in the device list as shown in <a href="#fig-neat-wireless" title="Figure 15.17. Wireless Device">Figure 15.17, “Wireless Device”</a>.
		</p>
            <div class="figure">
              <a id="fig-neat-wireless"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-wireless.png" alt="Wireless Device" />
                  <div class="longdesc">
                    <p>
						Wireless Device
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.17. Wireless Device</h6>
            </div>
            <br class="figure-break" />
            <p>
	Be sure to select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> to save the changes.
</p>
            <p>
			After adding the wireless device, you can edit its configuration by selecting the device from the device list and clicking <span><strong class="guibutton">Edit</strong></span>. For example, you can configure the device to activate at boot time.
		</p>
            <a id="id2970801" class="indexterm"></a>
            <p>
	When the device is added, it is not activated immediately, as seen by its <span><strong class="guilabel">Inactive</strong></span> status. To activate the device, select it from the device list, and click the <span><strong class="guibutton">Activate</strong></span> button. If the system is configured to activate the device when the computer starts (the default), this step does not have to be performed again.
</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-dns"></a>15.8. Managing DNS Settings</h2>
                </div>
              </div>
            </div>
            <a id="id2882355" class="indexterm"></a>
            <p>
			The <span><strong class="guilabel">DNS</strong></span> tab allows you to configure the system's hostname, domain, name servers, and search domain. Name servers are used to look up other hosts on the network.
		</p>
            <p>
			If the DNS server names are retrieved from DHCP or PPPoE (or retrieved from the ISP), do not add primary, secondary, or tertiary DNS servers.
		</p>
            <p>
			If the hostname is retrieved dynamically from DHCP or PPPoE (or retrieved from the ISP), do not change it.
		</p>
            <div class="figure">
              <a id="fig-neat-dns"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-dns.png" alt="DNS Configuration" />
                  <div class="longdesc">
                    <p>
						DNS Configuration
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.18. DNS Configuration</h6>
            </div>
            <br class="figure-break" />
            <div class="note">
              <h2>Note</h2>
              <p>
				The name servers section does not configure the system to be a name server. Instead, it configures which name servers to use when resolving IP addresses to hostnames and vice-versa.
			</p>
            </div>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				If the hostname is changed and <code class="command">system-config-network</code> is started on the local host, you may not be able to start another <span><strong class="application">X11</strong></span> application. As such, you may have to re-login to a new desktop session.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-config-hosts"></a>15.9. Managing Hosts</h2>
                </div>
              </div>
            </div>
            <a id="id2960529" class="indexterm"></a>
            <a id="id2948669" class="indexterm"></a>
            <a id="id2948687" class="indexterm"></a>
            <p>
			The <span><strong class="guilabel">Hosts</strong></span> tab allows you to add, edit, or remove hosts from the <code class="filename">/etc/hosts</code> file. This file contains IP addresses and their corresponding hostnames.
		</p>
            <p>
			When your system tries to resolve a hostname to an IP address or tries to determine the hostname for an IP address, it refers to the <code class="filename">/etc/hosts</code> file before using the name servers (if you are using the default Red Hat Enterprise Linux configuration). If the IP address is listed in the <code class="filename">/etc/hosts</code> file, the name servers are not used. If your network contains computers whose IP addresses are not listed in DNS, it is recommended that you add them to the <code class="filename">/etc/hosts</code> file.
		</p>
            <p>
			To add an entry to the <code class="filename">/etc/hosts</code> file, go to the <span><strong class="guilabel">Hosts</strong></span> tab, click the <span><strong class="guibutton">New</strong></span> button on the toolbar, provide the requested information, and click <span><strong class="guilabel">OK</strong></span>. Select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save</strong></span> or press <span><strong class="keycap">Ctrl</strong></span>-<span><strong class="keycap">S</strong></span> to save the changes to the <code class="filename">/etc/hosts</code> file. The network or network services do not need to be restarted since the current version of the file is referred to each time an address is resolved.
		</p>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				Do not remove the <code class="computeroutput">localhost</code> entry. Even if the system does not have a network connection or have a network connection running constantly, some programs need to connect to the system via the localhost loopback interface.
			</p>
            </div>
            <div class="figure">
              <a id="fig-neat-hosts"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-hosts.png" alt="Hosts Configuration" />
                  <div class="longdesc">
                    <p>
						Hosts Configuration
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.19. Hosts Configuration</h6>
            </div>
            <br class="figure-break" />
            <div class="tip">
              <h2>Tip</h2>
              <p>
				To change lookup order, edit the <code class="filename">/etc/host.conf</code> file. The line <code class="computeroutput">order hosts, bind</code> specifies that <code class="filename">/etc/hosts</code> takes precedence over the name servers. Changing the line to <code class="filename">order bind, hosts</code> configures the system to resolve hostnames and IP addresses using the name servers first. If the IP address cannot be resolved through the name servers, the system then looks for the IP address in the <code class="filename">/etc/hosts</code> file.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-profiles"></a>15.10. Working with Profiles</h2>
                </div>
              </div>
            </div>
            <a id="id2969427" class="indexterm"></a>
            <a id="id2969441" class="indexterm"></a>
            <p>
			Multiple logical network devices can be created for each physical hardware device. For example, if you have one Ethernet card in your system (eth0), you can create logical network devices with different nicknames and different configuration options, all to be specifically associated with eth0.
		</p>
            <p>
			Logical network devices are different from device aliases. Logical network devices associated with the same physical device must exist in different profiles and cannot be activated simultaneously. Device aliases are also associated with the same physical hardware device, but device aliases associated with the same physical hardware can be activated at the same time. Refer to <a href="#s1-network-aliases" title="15.11. Device Aliases">Section 15.11, “Device Aliases”</a> for details about creating device aliases.
		</p>
            <p>
			<em class="firstterm">Profiles</em> can be used to create multiple configuration sets for different networks. A configuration set can include logical devices as well as hosts and DNS settings. After configuring the profiles, you can use the <span><strong class="application">Network Administration Tool</strong></span> to switch back and forth between them.
		</p>
            <p>
			By default, there is one profile called <span><strong class="guilabel">Common</strong></span>. To create a new profile, select <span><strong class="guimenu">Profile</strong></span> =&gt; <span><strong class="guimenuitem">New</strong></span> from the pull-down menu, and enter a unique name for the profile.
		</p>
            <p>
			You are now modifying the new profile as indicated by the status bar at the bottom of the main window.
		</p>
            <p>
			Click on an existing device already in the list and click the <span><strong class="guibutton">Copy</strong></span> button to copy the existing device to a logical network device. If you use the <span><strong class="guibutton">New</strong></span> button, a network alias is created, which is incorrect. To change the properties of the logical device, select it from the list and click <span><strong class="guibutton">Edit</strong></span>. For example, the nickname can be changed to a more descriptive name, such as <strong class="userinput"><code>eth0_office</code></strong>, so that it can be recognized more easily.
		</p>
            <p>
			In the list of devices, there is a column of checkboxes labeled <span><strong class="guilabel">Profile</strong></span>. For each profile, you can check or uncheck devices. Only the checked devices are included for the currently selected profile. For example, if you create a logical device named <strong class="userinput"><code>eth0_office</code></strong> in a profile called <strong class="userinput"><code>Office</code></strong> and want to activate the logical device if the profile is selected, uncheck the <code class="computeroutput">eth0</code> device and check the <code class="computeroutput">eth0_office</code> device.
		</p>
            <p>
			For example, <a href="#fig-neat-office-profile" title="Figure 15.20. Office Profile">Figure 15.20, “Office Profile”</a> shows a profile called <span><strong class="guilabel">Office</strong></span> with the logical device <span><strong class="guilabel">eth0_office</strong></span>. It is configured to activate the first Ethernet card using DHCP.
		</p>
            <div class="figure">
              <a id="fig-neat-office-profile"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-office-profile.png" alt="Office Profile" />
                  <div class="longdesc">
                    <p>
						Creating an Office Profile
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.20. Office Profile</h6>
            </div>
            <br class="figure-break" />
            <p>
			Notice that the <span><strong class="guilabel">Home</strong></span> profile as shown in <a href="#fig-neat-home-profile" title="Figure 15.21. Home Profile">Figure 15.21, “Home Profile”</a> activates the <span><strong class="guilabel">eth0_home</strong></span> logical device, which is associated with <code class="computeroutput">eth0</code>.
		</p>
            <div class="figure">
              <a id="fig-neat-home-profile"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-home-profile.png" alt="Home Profile" />
                  <div class="longdesc">
                    <p>
						Creating a Home Profile
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.21. Home Profile</h6>
            </div>
            <br class="figure-break" />
            <p>
			You can also configure <code class="computeroutput">eth0</code> to activate in the <span><strong class="guilabel">Office</strong></span> profile only and to activate a PPP (modem) device in the <span><strong class="guilabel">Home</strong></span> profile only. Another example is to have the <span><strong class="guilabel">Common</strong></span> profile activate <code class="computeroutput">eth0</code> and an <span><strong class="guilabel">Away</strong></span> profile activate a PPP device for use while traveling.
		</p>
            <a id="id3021280" class="indexterm"></a>
            <a id="id2860599" class="indexterm"></a>
            <p>
			To activate a profile at boot time, modify the boot loader configuration file to include the <code class="computeroutput">netprofile=<em class="replaceable"><code>&lt;profilename&gt;</code></em></code> option. For example, if the system uses GRUB as the boot loader and <code class="filename">/boot/grub/grub.conf</code> contains:
		</p>
            <pre class="screen"><code class="computeroutput">title Red Hat Enterprise Linux (2.6.9-5.EL) root (hd0,0) kernel /vmlinuz-2.6.9-5.EL ro root=/dev/VolGroup00/LogVol00 rhgb quiet initrd /initrd-2.6.9-5.EL.img</code>
</pre>
            <p>
			Modify it to the following (where <em class="replaceable"><code>&lt;profilename&gt;</code></em> is the name of the profile to be activated at boot time):
		</p>
            <pre class="screen"><code class="computeroutput">title Red Hat Enterprise Linux (2.6.9-5.EL) root (hd0,0) kernel /vmlinuz-2.6.9-5.EL ro root=/dev/VolGroup00/LogVol00 \ <strong class="userinput"><code>netprofile=<em class="replaceable"><code>&lt;profilename&gt;</code></em></code></strong> \ rhgb quiet initrd /initrd-2.6.9-5.EL.img</code>
</pre>
            <p>
			To switch profiles after the system has booted, go to Applications (the main menu on the panel) =&gt; <span><strong class="guimenu">System Tools</strong></span> =&gt; <span><strong class="guimenuitem">Network Device Control</strong></span> (or type the command <code class="command">system-control-network</code>) to select a profile and activate it. The activate profile section only appears in the <span><strong class="application">Network Device Control</strong></span> interface if more than the default <span><strong class="guilabel">Common</strong></span> interface exists.
		</p>
            <a id="id2970853" class="indexterm"></a>
            <p>
			Alternatively, execute the following command to enable a profile (replace <em class="replaceable"><code>&lt;profilename&gt;</code></em> with the name of the profile):
		</p>
            <pre class="screen"><code class="command">system-config-network-cmd --profile <em class="replaceable"><code>&lt;profilename&gt;</code></em> --activate</code>
</pre>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-aliases"></a>15.11. Device Aliases</h2>
                </div>
              </div>
            </div>
            <a id="id3027635" class="indexterm"></a>
            <p>
			<em class="firstterm">Device aliases</em> are virtual devices associated with the same physical hardware, but they can be activated at the same time to have different IP addresses. They are commonly represented as the device name followed by a colon and a number (for example, eth0:1). They are useful if you want to have multiple IP addresses for a system that only has one network card.
		</p>
            <p>
			After configuring the Ethernet device —such as <code class="computeroutput">eth0</code> —to use a static IP address (DHCP does not work with aliases), go to the <span><strong class="guilabel">Devices</strong></span> tab and click <span><strong class="guibutton">New</strong></span>. Select the Ethernet card to configure with an alias, set the static IP address for the alias, and click <span><strong class="guibutton">Apply</strong></span> to create it. Since a device already exists for the Ethernet card, the one just created is the alias, such as <code class="computeroutput">eth0:1</code>.
		</p>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				If you are configuring an Ethernet device to have an alias, neither the device nor the alias can be configured to use DHCP. You must configure the IP addresses manually.
			</p>
            </div>
            <p>
			<a href="#fig-network-aliases" title="Figure 15.22. Network Device Alias Example">Figure 15.22, “Network Device Alias Example”</a> shows an example of one alias for the <code class="computeroutput">eth0</code> device. Notice the <code class="computeroutput">eth0:1</code> device — the first alias for <code class="computeroutput">eth0</code>. The second alias for <code class="computeroutput">eth0</code> would have the device name <code class="computeroutput">eth0:2</code>, and so on. To modify the settings for the device alias, such as whether to activate it at boot time and the alias number, select it from the list and click the <span><strong class="guibutton">Edit</strong></span> button.
		</p>
            <div class="figure">
              <a id="fig-network-aliases"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/neat-aliases.png" alt="Network Device Alias Example" />
                  <div class="longdesc">
                    <p>
						Network Alias Example
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 15.22. Network Device Alias Example</h6>
            </div>
            <br class="figure-break" />
            <p>
			Select the alias and click the <span><strong class="guibutton">Activate</strong></span> button to activate the alias. If you have configured multiple profiles, select which profiles in which to include it.
		</p>
            <p>
			To verify that the alias has been activated, use the command <code class="command">/sbin/ifconfig</code>. The output should show the device and the device alias with different IP addresses:
		</p>
            <pre class="screen"><code class="computeroutput">eth0 Link encap:Ethernet HWaddr 00:A0:CC:60:B7:G4 inet addr:192.168.100.5 Bcast:192.168.100.255 Mask:255.255.255.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:161930 errors:1 dropped:0 overruns:0 frame:0 TX packets:244570 errors:0 dropped:0 overruns:0 carrier:0 collisions:475 txqueuelen:100 RX bytes:55075551 (52.5 Mb) TX bytes:178108895 (169.8 Mb) Interrupt:10 Base address:0x9000 eth0:1 Link encap:Ethernet HWaddr 00:A0:CC:60:B7:G4 inet addr:192.168.100.42 Bcast:192.168.100.255 Mask:255.255.255.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 Interrupt:10 Base address:0x9000 lo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 UP LOOPBACK RUNNING MTU:16436 Metric:1 RX packets:5998 errors:0 dropped:0 overruns:0 frame:0 TX packets:5998 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:0 RX bytes:1627579 (1.5 Mb) TX bytes:1627579 (1.5 Mb)</code>
</pre>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-network-save-config"></a>15.12. Saving and Restoring the Network Configuration</h2>
                </div>
              </div>
            </div>
            <a id="id2950430" class="indexterm"></a>
            <a id="id2942442" class="indexterm"></a>
            <a id="id2942456" class="indexterm"></a>
            <p>
			The command line version of <span><strong class="application">Network Administration Tool</strong></span> can be used to save the system's network configuration to a file. This file can then be used to restore the network settings to a Red Hat Enterprise Linux system.
		</p>
            <p>
			This feature can be used as part of an automated backup script, to save the configuration before upgrading or reinstalling, or to copy the configuration to a different Red Hat Enterprise Linux system.
		</p>
            <p>
			To save, or <em class="firstterm">export</em>, the network configuration of a system to the file <code class="filename">/tmp/network-config</code>, execute the following command as root:
		</p>
            <pre class="screen"><code class="command">system-config-network-cmd -e &gt; /tmp/network-config</code>
</pre>
            <p>
			To restore, or <em class="firstterm">import</em>, the network configuration from the file created from the previous command, execute the following command as root:
		</p>
            <pre class="screen"><code class="command">system-config-network-cmd -i -c -f /tmp/network-config</code>
</pre>
            <p>
			The <code class="option">-i</code> option means to import the data, the <code class="option">-c</code> option means to clear the existing configuration prior to importing, and the <code class="option">-f</code> option specifies that the file to import is as follows.
		</p>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-services"></a>Chapter 16. Controlling Access to Services</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-services-runlevels">16.1. Runlevels</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-services-tcp-wrappers">16.2. TCP Wrappers</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-services-xinetd">16.2.1. <code class="command">xinetd</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-services-serviceconf">16.3. <span><strong class="application">Services Configuration Tool</strong></span></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-services-ntsysv">16.4. <span><strong class="application">ntsysv</strong></span></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-services-chkconfig">16.5. <code class="command">chkconfig</code></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-services-additional-resources">16.6. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#services-installed-docs">16.6.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#services-useful-websites">16.6.2. Useful Websites</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2961114" class="indexterm"></a>
          <a id="id2851241" class="indexterm"></a>
          <p>
		Maintaining security on your system is extremely important, and one approach for this task is to manage access to system services carefully. Your system may need to provide open access to particular services (for example, <code class="command">httpd</code> if you are running a Web server). However, if you do not need to provide a service, you should turn it off to minimize your exposure to possible bug exploits.
	</p>
          <p>
		There are several different methods for managing access to system services. Choose which method of management to use based on the service, your system's configuration, and your level of Linux expertise.
	</p>
          <p>
		The easiest way to deny access to a service is to turn it off. Both the services managed by <code class="command">xinetd</code> and the services in the <code class="filename">/etc/rc.d/init.d</code> hierarchy (also known as SysV services) can be configured to start or stop using three different applications:
	</p>
          <div class="variablelist">
            <dl>
              <dt>
                <span class="term">
                  <span>
                    <strong class="application">Services Configuration Tool </strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					This is a graphical application that displays a description of each service, displays whether each service is started at boot time (for runlevels 3, 4, and 5), and allows services to be started, stopped, and restarted.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="application">ntsysv</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					This is a text-based application that allows you to configure which services are started at boot time for each runlevel. Non-<code class="command">xinetd</code> services can not be started, stopped, or restarted using this program.
				</p>
              </dd>
              <dt>
                <span class="term">
                  <code class="command">chkconfig</code>
                </span>
              </dt>
              <dd>
                <p>
					This is a command line utility that allows you to turn services on and off for the different runlevels. Non-<code class="command">xinetd</code> services can not be started, stopped, or restarted using this utility.
				</p>
              </dd>
            </dl>
          </div>
          <p>
		You may find that these tools are easier to use than the alternatives — editing the numerous symbolic links located in the directories below <code class="filename">/etc/rc.d</code> by hand or editing the <code class="command">xinetd</code> configuration files in <code class="filename">/etc/xinetd.d</code>.
	</p>
          <p>
		Another way to manage access to system services is by using <code class="command">iptables</code> to configure an IP firewall. If you are a new Linux user, note that <code class="command">iptables</code> may not be the best solution for you. Setting up <code class="command">iptables</code> can be complicated, and is best tackled by experienced Linux system administrators.
	</p>
          <p>
		On the other hand, the benefit of using <code class="command">iptables</code> is flexibility. For example, if you need a customized solution which provides certain hosts access to certain services, <code class="command">iptables</code> can provide it for you. Refer to <a href="#s1-firewall-ipt" title="43.8.1. Netfilter and IPTables">Section 43.8.1, “Netfilter and IPTables”</a> and <a href="#s1-fireall-ipt-act" title="43.8.3. Using IPTables">Section 43.8.3, “Using IPTables”</a> for more information about <code class="command">iptables</code>.
	</p>
          <p>
		Alternatively, if you are looking for a utility to set general access rules for your home machine, and/or if you are new to Linux, try the <span><strong class="application">Security Level Configuration Tool</strong></span> (<code class="command">system-config-securitylevel</code>), which allows you to select the security level for your system, similar to the <span><strong class="guilabel">Firewall Configuration</strong></span> screen in the installation program.
	</p>
          <p>
		Refer to <a href="#ch-fw" title="43.8. Firewalls">Section 43.8, “Firewalls”</a> for more information.
	</p>
          <div class="important">
            <h2>Important</h2>
            <p>
			When you allow access for new services, always remember that both the firewall and SELinux need to be configured as well. One of the most common mistakes committed when configuring a new service is neglecting to implement the necessary firewall configuration and SELinux policies to allow access for it. Refer to <a href="#s1-basic-firewall" title="43.8.2. Basic Firewall Configuration">Section 43.8.2, “Basic Firewall Configuration”</a> for more information.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-services-runlevels"></a>16.1. Runlevels</h2>
                </div>
              </div>
            </div>
            <a id="id2864991" class="indexterm"></a>
            <p>
			Before you can configure access to services, you must understand Linux runlevels. A runlevel is a state, or <em class="firstterm">mode</em>, that is defined by the services listed in the directory <code class="filename">/etc/rc.d/rc<em class="replaceable"><code>&lt;x&gt;</code></em>.d</code>, where <em class="replaceable"><code>&lt;x&gt;</code></em> is the number of the runlevel.
		</p>
            <p>
			The following runlevels exist:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					0 — Halt
				</p>
                </li>
                <li>
                  <p>
					1 — Single-user mode
				</p>
                </li>
                <li>
                  <p>
					2 — Not used (user-definable)
				</p>
                </li>
                <li>
                  <p>
					3 — Full multi-user mode
				</p>
                </li>
                <li>
                  <p>
					4 — Not used (user-definable)
				</p>
                </li>
                <li>
                  <p>
					5 — Full multi-user mode (with an X-based login screen)
				</p>
                </li>
                <li>
                  <p>
					6 — Reboot
				</p>
                </li>
              </ul>
            </div>
            <p>
			If you use a text login screen, you are operating in runlevel 3. If you use a graphical login screen, you are operating in runlevel 5.
		</p>
            <p>
			The default runlevel can be changed by modifying the <code class="filename">/etc/inittab</code> file, which contains a line near the top of the file similar to the following:
		</p>
            <pre class="screen"><code class="computeroutput">id:5:initdefault:</code>
</pre>
            <p>
			Change the number in this line to the desired runlevel. The change does not take effect until you reboot the system.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-services-tcp-wrappers"></a>16.2. TCP Wrappers</h2>
                </div>
              </div>
            </div>
            <p>
			<a id="id2916823" class="indexterm"></a>
			 Many UNIX system administrators are accustomed to using TCP wrappers to manage access to certain network services. Any network services managed by <code class="command">xinetd</code> (as well as any program with built-in support for <code class="command">libwrap</code>) can use TCP wrappers to manage access. <code class="command">xinetd</code> can use the <code class="filename">/etc/hosts.allow</code> and <code class="filename">/etc/hosts.deny</code> files to configure access to system services. As the names imply, <code class="filename">hosts.allow</code> contains a list of rules that allow clients to access the network services controlled by <code class="command">xinetd</code>, and <code class="filename">hosts.deny</code> contains rules to deny access. The <code class="filename">hosts.allow</code> file takes precedence over the <code class="filename">hosts.deny</code> file. Permissions to grant or deny access can be based on individual IP address (or hostnames) or on a pattern of clients. Refer to <code class="filename">hosts_access</code> in section 5 of the man pages (<code class="command">man 5 hosts_access</code>) for details.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-services-xinetd"></a>16.2.1. <code class="command">xinetd</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2851670" class="indexterm"></a>
              <a id="id2871189" class="indexterm"></a>
              <p>
				To control access to Internet services, use <code class="command">xinetd</code>, which is a secure replacement for <code class="command">inetd</code>. The <code class="command">xinetd</code> daemon conserves system resources, provides access control and logging, and can be used to start special-purpose servers. <code class="command">xinetd</code> can also be used to grant or deny access to particular hosts, provide service access at specific times, limit the rate of incoming connections, limit the load created by connections, and more.
			</p>
              <p>
				<code class="command">xinetd</code> runs constantly and listens on all ports for the services it manages. When a connection request arrives for one of its managed services, <code class="command">xinetd</code> starts up the appropriate server for that service.
			</p>
              <p>
				The configuration file for <code class="command">xinetd</code> is <code class="filename">/etc/xinetd.conf</code>, but the file only contains a few defaults and an instruction to include the <code class="filename">/etc/xinetd.d</code> directory. To enable or disable an <code class="command">xinetd</code> service, edit its configuration file in the <code class="filename">/etc/xinetd.d</code> directory. If the <code class="computeroutput">disable</code> attribute is set to <strong class="userinput"><code>yes</code></strong>, the service is disabled. If the <code class="computeroutput">disable</code> attribute is set to <strong class="userinput"><code>no</code></strong>, the service is enabled. You can edit any of the <code class="command">xinetd</code> configuration files or change its enabled status using the <span><strong class="application">Services Configuration Tool</strong></span>, <span><strong class="application">ntsysv</strong></span>, or <code class="command">chkconfig</code>. For a list of network services controlled by <code class="command">xinetd</code>, review the contents of the <code class="filename">/etc/xinetd.d</code> directory with the command <code class="command">ls /etc/xinetd.d</code>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-services-serviceconf"></a>16.3. <span><strong class="application">Services Configuration Tool</strong></span></h2>
                </div>
              </div>
            </div>
            <a id="id2907416" class="indexterm"></a>
            <p>
			The <span><strong class="application">Services Configuration Tool</strong></span> is a graphical application developed by Red Hat to configure which SysV services in the <code class="filename">/etc/rc.d/init.d</code> directory are started at boot time (for runlevels 3, 4, and 5) and which <code class="command">xinetd</code> services are enabled. It also allows you to start, stop, and restart SysV services as well as reload <code class="command">xinetd</code>.
		</p>
            <p>
			To start the <span><strong class="application">Services Configuration Tool</strong></span> from the desktop, go to the Applications (the main menu on the panel) =&gt; <span><strong class="guimenu">System Settings</strong></span> =&gt; <span><strong class="guimenu">Server Settings</strong></span> =&gt; <span><strong class="guimenuitem">Services</strong></span> or type the command <code class="command">system-config-services</code> at a shell prompt (for example, in an <span><strong class="application">XTerm</strong></span> or a <span><strong class="application">GNOME terminal</strong></span>).
		</p>
            <div class="figure">
              <a id="fig-serviceconf"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/serviceconf.png" alt="Services Configuration Tool" />
                  <div class="longdesc">
                    <p>
						Configuring network services
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 16.1. <span>Services Configuration Tool</span></h6>
            </div>
            <br class="figure-break" />
            <p>
			The <span><strong class="application">Services Configuration Tool</strong></span> displays the current runlevel as well as the runlevel you are currently editing. To edit a different runlevel, select <span><strong class="guimenu">Edit Runlevel</strong></span> from the pulldown menu and select runlevel 3, 4, or 5. Refer to <a href="#s1-services-runlevels" title="16.1. Runlevels">Section 16.1, “Runlevels”</a> for a description of runlevels.
		</p>
            <p>
			The <span><strong class="application">Services Configuration Tool</strong></span> lists the services from the <code class="filename">/etc/rc.d/init.d</code> directory as well as the services controlled by <code class="command">xinetd</code>. Click on the name of the service from the list on the left-hand side of the application to display a brief description of that service as well as the status of the service. If the service is not an <code class="command">xinetd</code> service, the status window shows whether the service is currently running. If the service is controlled by <code class="command">xinetd</code>, the status window displays the phrase <span><strong class="guilabel">xinetd service</strong></span>.
		</p>
            <p>
			To start, stop, or restart a service immediately, select the service from the list and click the appropriate button on the toolbar (or choose the action from the <span><strong class="guimenu">Actions</strong></span> pulldown menu). If the service is an <code class="command">xinetd</code> service, the action buttons are disabled because they cannot be started or stopped individually.
		</p>
            <p>
			If you enable/disable an <code class="command">xinetd</code> service by checking or unchecking the checkbox next to the service name, you must select <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save Changes</strong></span> from the pulldown menu (or the <span><strong class="guimenuitem">Save</strong></span> button above the tabs) to reload <code class="command">xinetd</code> and immediately enable/disable the <code class="command">xinetd</code> service that you changed. <code class="command">xinetd</code> is also configured to remember the setting. You can enable/disable multiple <code class="command">xinetd</code> services at a time and save the changes when you are finished.
		</p>
            <p>
			For example, assume you check <code class="command">rsync</code> to enable it in runlevel 3 and then save the changes. The <code class="command">rsync</code> service is immediately enabled. The next time <code class="command">xinetd</code> is started, <code class="command">rsync</code> is still enabled.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				When you save changes to <code class="command">xinetd</code> services, <code class="command">xinetd</code> is reloaded, and the changes take place immediately. When you save changes to other services, the runlevel is reconfigured, but the changes do not take effect immediately.
			</p>
            </div>
            <p>
			To enable a non-<code class="command">xinetd</code> service to start at boot time for the currently selected runlevel, check the box beside the name of the service in the list. After configuring the runlevel, apply the changes by selecting <span><strong class="guimenu">File</strong></span> =&gt; <span><strong class="guimenuitem">Save Changes</strong></span> from the pulldown menu. The runlevel configuration is changed, but the runlevel is not restarted; thus, the changes do not take place immediately.
		</p>
            <p>
			For example, assume you are configuring runlevel 3. If you change the value for the <code class="command">httpd</code> service from checked to unchecked and then select <span><strong class="guimenuitem">Save Changes</strong></span>, the runlevel 3 configuration changes so that <code class="command">httpd</code> is not started at boot time. However, runlevel 3 is not reinitialized, so <code class="command">httpd</code> is still running. Select one of following options at this point:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Stop the <code class="command">httpd</code> service — Stop the service by selecting it from the list and clicking the <span><strong class="guibutton">Stop</strong></span> button. A message appears stating that the service was stopped successfully.
				</p>
                </li>
                <li>
                  <p>
					Reinitialize the runlevel — Reinitialize the runlevel by going to a shell prompt and typing the command <code class="command">telinit <em class="replaceable"><code>x</code></em></code> (where <em class="replaceable"><code>x</code></em> is the runlevel number; in this example, 3.). This option is recommended if you change the <span><strong class="guilabel">Start at Boot</strong></span> value of multiple services and want to activate the changes immediately.
				</p>
                </li>
                <li>
                  <p>
					Do nothing else — You do not have to stop the <code class="command">httpd</code> service. You can wait until the system is rebooted for the service to stop. The next time the system is booted, the runlevel is initialized without the <code class="command">httpd</code> service running.
				</p>
                </li>
              </ol>
            </div>
            <p>
			To add a service to a runlevel, select the runlevel from the <span><strong class="guimenu">Edit Runlevel</strong></span> pulldown menu, and then select <span><strong class="guimenu">Actions</strong></span> =&gt; <span><strong class="guimenuitem">Add Service</strong></span>. To delete a service from a runlevel, select the runlevel from the <span><strong class="guimenu">Edit Runlevel</strong></span> pulldown menu, select the service to be deleted from the list on the left, and select <span><strong class="guimenu">Actions</strong></span> =&gt; <span><strong class="guimenuitem">Delete Service</strong></span>.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-services-ntsysv"></a>16.4. <span><strong class="application">ntsysv</strong></span></h2>
                </div>
              </div>
            </div>
            <a id="id2972406" class="indexterm"></a>
            <p>
			The <span><strong class="application">ntsysv</strong></span> utility provides a simple interface for activating or deactivating services. You can use <span><strong class="application">ntsysv</strong></span> to turn an <code class="command">xinetd</code>-managed service on or off. You can also use <span><strong class="application">ntsysv</strong></span> to configure runlevels. By default, only the current runlevel is configured. To configure a different runlevel, specify one or more runlevels with the <code class="option">--level</code> option. For example, the command <code class="command">ntsysv --level 345</code> configures runlevels 3, 4, and 5.
		</p>
            <p>
			The <span><strong class="application">ntsysv</strong></span> interface works like the text mode installation program. Use the up and down arrows to navigate up and down the list. The space bar selects/unselects services and is also used to "press" the <span><strong class="guilabel">Ok</strong></span> and <span><strong class="guilabel">Cancel</strong></span> buttons. To move between the list of services and the <span><strong class="guilabel">Ok</strong></span> and <span><strong class="guilabel">Cancel</strong></span> buttons, use the <span><strong class="keycap">Tab</strong></span> key. An asterisk (<span><strong class="guilabel">*</strong></span>) signifies that a service is set to on. Pressing the <span><strong class="keycap">F1</strong></span> key displays a short description of the selected service.
		</p>
            <div class="figure">
              <a id="fig-ntsysv"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/ntsysv.png" alt="The ntsysv utility" />
                  <div class="longdesc">
                    <p>
						The <span><strong class="application">ntsysv</strong></span> utility
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 16.2. The <span>ntsysv</span> utility</h6>
            </div>
            <br class="figure-break" />
            <div class="warning">
              <h2>Warning</h2>
              <p>
				Services managed by <code class="command">xinetd</code> are immediately affected by <span><strong class="application">ntsysv</strong></span>. For all other services, changes do not take effect immediately. You must stop or start the individual service with the command <code class="command">service <em class="replaceable"><code>&lt;daemon&gt;</code></em> stop</code> (where <em class="replaceable"><code>&lt;daemon&gt;</code></em> is the name of the service you want to stop; for example, <code class="command">httpd</code>). Replace <code class="command">stop</code> with <code class="command">start</code> or <code class="command">restart</code> to start or restart the service.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-services-chkconfig"></a>16.5. <code class="command">chkconfig</code></h2>
                </div>
              </div>
            </div>
            <a id="id2869812" class="indexterm"></a>
            <p>
			The <code class="command">chkconfig</code> command can also be used to activate and deactivate services. The <code class="command">chkconfig --list</code> command displays a list of system services and whether they are started (<code class="command">on</code>) or stopped (<code class="command">off</code>) in runlevels 0-6. At the end of the list is a section for the services managed by <code class="command">xinetd</code>.
		</p>
            <p>
			If the <code class="command">chkconfig --list</code> command is used to query a service managed by <code class="command">xinetd</code>, it displays whether the <code class="command">xinetd</code> service is enabled (<code class="command">on</code>) or disabled (<code class="command">off</code>). For example, the command <code class="command">chkconfig --list rsync</code> returns the following output:
		</p>
            <pre class="screen"><code class="computeroutput">rsync on</code>
</pre>
            <p>
			As shown, <code class="command">rsync</code> is enabled as an <code class="command">xinetd</code> service. If <code class="command">xinetd</code> is running, <code class="command">rsync</code> is enabled.
		</p>
            <p>
			If you use <code class="command">chkconfig --list</code> to query a service in <code class="filename">/etc/rc.d</code>, that service's settings for each runlevel are displayed. For example, the command <code class="command">chkconfig --list httpd</code> returns the following output:
		</p>
            <pre class="screen"><code class="computeroutput">httpd 0:off 1:off 2:on 3:on 4:on 5:on 6:off</code>
</pre>
            <p>
			<code class="command">chkconfig</code> can also be used to configure a service to be started (or not) in a specific runlevel. For example, to turn <code class="command">nscd</code> off in runlevels 3, 4, and 5, use the following command:
		</p>
            <pre class="screen"><code class="command">chkconfig --level 345 nscd off</code>
</pre>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				Services managed by <code class="command">xinetd</code> are immediately affected by <code class="command">chkconfig</code>. For example, if <code class="command">xinetd</code> is running while <code class="command">rsync</code> is disabled, and the command <code class="command">chkconfig rsync on</code> is executed, then <code class="command">rsync</code> is immediately enabled without having to restart <code class="command">xinetd</code> manually. Changes for other services do not take effect immediately after using <code class="command">chkconfig</code>. You must stop or start the individual service with the command <code class="command">service <em class="replaceable"><code>&lt;daemon&gt;</code></em> stop</code> (where <em class="replaceable"><code>&lt;daemon&gt;</code></em> is the name of the service you want to stop; for example, <code class="command">httpd</code>). Replace <code class="command">stop</code> with <code class="command">start</code> or <code class="command">restart</code> to start or restart the service.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-services-additional-resources"></a>16.6. Additional Resources</h2>
                </div>
              </div>
            </div>
            <p>
			For more information, refer to the following resources.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="services-installed-docs"></a>16.6.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						The man pages for <code class="command">ntsysv</code>, <code class="command">chkconfig</code>, <code class="command">xinetd</code>, and <code class="filename">xinetd.conf</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">man 5 hosts_access</code> — The man page for the format of host access control files (in section 5 of the man pages).
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="services-useful-websites"></a>16.6.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://www.xinetd.org">http://www.xinetd.org</a> — The <code class="command">xinetd</code> webpage. It contains sample configuration files and a more detailed list of features.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-bind"></a>Chapter 17. Berkeley Internet Name Domain (BIND)</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-bind-introduction">17.1. Introduction to DNS</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-introduction-zones">17.1.1. Nameserver Zones</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-introduction-nameservers">17.1.2. Nameserver Types</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-introduction-bind">17.1.3. BIND as a Nameserver</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-bind-namedconf">17.2. <code class="filename">/etc/named.conf</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-namedconf-state">17.2.1. Common Statement Types</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-namedconf-state-other">17.2.2. Other Statement Types</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-namedconf-comm">17.2.3. Comment Tags</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-bind-zone">17.3. Zone Files</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-zone-directives">17.3.1. Zone File Directives</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s3-bind-zone-rr">17.3.2. Zone File Resource Records</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-zone-examples">17.3.3. Example Zone File</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-configuration-zone-reverse">17.3.4. Reverse Name Resolution Zone Files</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-bind-rndc">17.4. Using <code class="command">rndc</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-rndc-configuration-namedconf">17.4.1. Configuring <code class="filename">/etc/named.conf</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-rndc-configuration-rndcconf">17.4.2. Configuring <code class="filename">/etc/rndc.conf</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-rndc-options">17.4.3. Command Line Options</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-bind-features">17.5. Advanced Features of BIND</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-features-protocol">17.5.1. DNS Protocol Enhancements</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-features-views">17.5.2. Multiple Views</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-features-security">17.5.3. Security</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-features-ipv6">17.5.4. IP version 6</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-bind-mistakes">17.6. Common Mistakes to Avoid</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-bind-additional-resources">17.7. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-installed-docs">17.7.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-useful-websites">17.7.2. Useful Websites</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-bind-related-books">17.7.3. Related Books</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2923421" class="indexterm"></a>
          <a id="id2943379" class="indexterm"></a>
          <p>
		On most modern networks, including the Internet, users locate other computers by name. This frees users from the daunting task of remembering the numerical network address of network resources. The most effective way to configure a network to allow such name-based connections is to set up a <em class="firstterm">Domain Name Service</em> (<em class="firstterm">DNS</em>) or a <em class="firstterm">nameserver</em>, which resolves hostnames on the network to numerical addresses and vice versa.
	</p>
          <p>
		This chapter reviews the nameserver included in Red Hat Enterprise Linux and the <em class="firstterm">Berkeley Internet Name Domain</em> (<em class="firstterm">BIND</em>) DNS server, with an emphasis on the structure of its configuration files and how it may be administered both locally and remotely.
	</p>
          <div class="note">
            <h2>Note</h2>
            <p>
			BIND is also known as the service <code class="command">named</code> in Red Hat Enterprise Linux. You can manage it via the Services Configuration Tool (<code class="command">system-config-service</code>).
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-bind-introduction"></a>17.1. Introduction to DNS</h2>
                </div>
              </div>
            </div>
            <a id="id2856634" class="indexterm"></a>
            <a id="id2900761" class="indexterm"></a>
            <a id="id2872630" class="indexterm"></a>
            <a id="id2905237" class="indexterm"></a>
            <a id="id2850677" class="indexterm"></a>
            <a id="id2954596" class="indexterm"></a>
            <a id="id2918672" class="indexterm"></a>
            <p>
			DNS associates hostnames with their respective IP addresses, so that when users want to connect to other machines on the network, they can refer to them by name, without having to remember IP addresses.
		</p>
            <p>
			Use of DNS and FQDNs also has advantages for system administrators, allowing the flexibility to change the IP address for a host without affecting name-based queries to the machine. Conversely, administrators can shuffle which machines handle a name-based query.
		</p>
            <p>
			DNS is normally implemented using centralized servers that are authoritative for some domains and refer to other DNS servers for other domains.
		</p>
            <p>
			When a client host requests information from a nameserver, it usually connects to port 53. The nameserver then attempts to resolve the FQDN based on its resolver library, which may contain authoritative information about the host requested or cached data from an earlier query. If the nameserver does not already have the answer in its resolver library, it queries other nameservers, called <em class="firstterm">root nameservers</em>, to determine which nameservers are authoritative for the FQDN in question. Then, with that information, it queries the authoritative nameservers to determine the IP address of the requested host. If a reverse lookup is performed, the same procedure is used, except that the query is made with an unknown IP address rather than a name.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-introduction-zones"></a>17.1.1. Nameserver Zones</h3>
                  </div>
                </div>
              </div>
              <a id="id2890948" class="indexterm"></a>
              <p>
				On the Internet, the FQDN of a host can be broken down into different sections. These sections are organized into a hierarchy (much like a tree), with a main trunk, primary branches, secondary branches, and so forth. Consider the following FQDN:
			</p>
              <pre class="screen"><code class="computeroutput">bob.sales.example.com</code>
</pre>
              <p>
				When looking at how an FQDN is resolved to find the IP address that relates to a particular system, read the name from right to left, with each level of the hierarchy divided by periods (<code class="computeroutput">.</code>). In this example, <code class="computeroutput">com</code> defines the <em class="firstterm">top level domain</em> for this FQDN. The name <code class="computeroutput">example</code> is a sub-domain under <code class="computeroutput">com</code>, while <code class="computeroutput">sales</code> is a sub-domain under <code class="computeroutput">example</code>. The name furthest to the left, <code class="computeroutput">bob</code>, identifies a specific machine hostname.
			</p>
              <p>
				Except for the hostname, each section is called a <em class="firstterm">zone</em>, which defines a specific <em class="firstterm">namespace</em>. A namespace controls the naming of the sub-domains to its left. While this example only contains two sub-domains, an FQDN must contain at least one sub-domain but may include many more, depending upon how the namespace is organized.
			</p>
              <p>
				Zones are defined on authoritative nameservers through the use of <em class="firstterm">zone files</em> (which describe the namespace of that zone), the mail servers to be used for a particular domain or sub-domain, and more. Zone files are stored on <em class="firstterm">primary nameservers</em> (also called <em class="firstterm">master nameservers</em>), which are truly authoritative and where changes are made to the files, and <em class="firstterm">secondary nameservers</em> (also called <em class="firstterm">slave nameservers</em>), which receive their zone files from the primary nameservers. Any nameserver can be a primary and secondary nameserver for different zones at the same time, and they may also be considered authoritative for multiple zones. It all depends on how the nameserver is configured.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-introduction-nameservers"></a>17.1.2. Nameserver Types</h3>
                  </div>
                </div>
              </div>
              <a id="id2912587" class="indexterm"></a>
              <a id="id2876095" class="indexterm"></a>
              <a id="id2863673" class="indexterm"></a>
              <a id="id2916144" class="indexterm"></a>
              <a id="id2874798" class="indexterm"></a>
              <a id="id2866460" class="indexterm"></a>
              <a id="id2891321" class="indexterm"></a>
              <a id="id2941737" class="indexterm"></a>
              <p>
				There are four primary nameserver configuration types:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">master</span>
                  </dt>
                  <dd>
                    <p>
							Stores original and authoritative zone records for a namespace, and answers queries about the namespace from other nameservers.
						</p>
                  </dd>
                  <dt>
                    <span class="term">slave</span>
                  </dt>
                  <dd>
                    <p>
							Answers queries from other nameservers concerning namespaces for which it is considered an authority. However, slave nameservers get their namespace information from master nameservers.
						</p>
                  </dd>
                  <dt>
                    <span class="term">caching-only</span>
                  </dt>
                  <dd>
                    <p>
							Offers name-to-IP resolution services, but is not authoritative for any zones. Answers for all resolutions are cached in memory for a fixed period of time, which is specified by the retrieved zone record.
						</p>
                  </dd>
                  <dt>
                    <span class="term">forwarding</span>
                  </dt>
                  <dd>
                    <p>
							Forwards requests to a specific list of nameservers for name resolution. If none of the specified nameservers can perform the resolution, the resolution fails.
						</p>
                  </dd>
                </dl>
              </div>
              <p>
				A nameserver may be one or more of these types. For example, a nameserver can be a master for some zones, a slave for others, and only offer forwarding resolutions for others.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-introduction-bind"></a>17.1.3. BIND as a Nameserver</h3>
                  </div>
                </div>
              </div>
              <a id="id2888889" class="indexterm"></a>
              <a id="id2931765" class="indexterm"></a>
              <a id="id2879322" class="indexterm"></a>
              <a id="id2917998" class="indexterm"></a>
              <a id="id2858100" class="indexterm"></a>
              <p>
				BIND performs name resolution services through the <code class="command">/usr/sbin/named</code> daemon. BIND also includes an administration utility called <code class="command">/usr/sbin/rndc</code>. More information about <code class="command">rndc</code> can be found in <a href="#s1-bind-rndc" title="17.4. Using rndc">Section 17.4, “Using <code class="command">rndc</code>”</a>.
			</p>
              <p>
				BIND stores its configuration files in the following locations:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="filename">/etc/named.conf</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							The configuration file for the <code class="command">named</code> daemon
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="filename">/var/named/</code> directory</span>
                  </dt>
                  <dd>
                    <p>
							The <code class="command">named</code> working directory which stores zone, statistic, and cache files
						</p>
                  </dd>
                </dl>
              </div>
              <div class="note">
                <h2>Note</h2>
                <p>
					If you have installed the <code class="filename">bind-chroot</code> package, the BIND service will run in the <code class="command">/var/named/chroot</code> environment. All configuration files will be moved there. As such, <code class="filename">named.conf</code> will be located in <code class="filename">/var/named/chroot/etc/named.conf</code>, and so on.
				</p>
              </div>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					If you have installed the <code class="filename">caching-nameserver</code> package, the default configuration file is <code class="filename">/etc/named.caching-nameserver.conf</code>. To override this default configuration, you can create your own custom configuration file in <code class="filename">/etc/named.conf</code>. BIND will use the <code class="filename">/etc/named.conf</code> custom file instead of the default configuration file after you restart.
				</p>
              </div>
              <p>
				The next few sections review the BIND configuration files in more detail.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-bind-namedconf"></a>17.2. <code class="filename">/etc/named.conf</code></h2>
                </div>
              </div>
            </div>
            <a id="id2985292" class="indexterm"></a>
            <a id="id2985309" class="indexterm"></a>
            <a id="id2985326" class="indexterm"></a>
            <p>
			The <code class="filename">named.conf</code> file is a collection of statements using nested options surrounded by opening and closing ellipse characters, <code class="command">{ }</code>. Administrators must be careful when editing <code class="filename">named.conf</code> to avoid syntax errors as many seemingly minor errors prevent the <code class="command">named</code> service from starting.
		</p>
            <p>
			A typical <code class="filename">named.conf</code> file is organized similar to the following example:
		</p>
            <pre class="screen"><code class="command"><em class="replaceable"><code>&lt;statement-1&gt;</code></em> ["<em class="replaceable"><code>&lt;statement-1-name&gt;</code></em>"] [<em class="replaceable"><code>&lt;statement-1-class&gt;</code></em>] { <em class="replaceable"><code>&lt;option-1&gt;</code></em>; <em class="replaceable"><code>&lt;option-2&gt;</code></em>; <em class="replaceable"><code>&lt;option-N&gt;</code></em>; }; <em class="replaceable"><code>&lt;statement-2&gt;</code></em> ["<em class="replaceable"><code>&lt;statement-2-name&gt;</code></em>"] [<em class="replaceable"><code>&lt;statement-2-class&gt;</code></em>] { <em class="replaceable"><code>&lt;option-1&gt;</code></em>; <em class="replaceable"><code>&lt;option-2&gt;</code></em>; <em class="replaceable"><code>&lt;option-N&gt;</code></em>; }; <em class="replaceable"><code>&lt;statement-N&gt;</code></em> ["<em class="replaceable"><code>&lt;statement-N-name&gt;</code></em>"] [<em class="replaceable"><code>&lt;statement-N-class&gt;</code></em>] { <em class="replaceable"><code>&lt;option-1&gt;</code></em>; <em class="replaceable"><code>&lt;option-2&gt;</code></em>; <em class="replaceable"><code>&lt;option-N&gt;</code></em>; };</code>
</pre>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-namedconf-state"></a>17.2.1. Common Statement Types</h3>
                  </div>
                </div>
              </div>
              <p>
				The following types of statements are commonly used in <code class="filename">/etc/named.conf</code>:
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-bind-namedconf-state-acl"></a>17.2.1.1. <code class="command">acl</code> Statement</h4>
                    </div>
                  </div>
                </div>
                <p>
					The <code class="command">acl</code> statement (or access control statement) defines groups of hosts which can then be permitted or denied access to the nameserver.
				</p>
                <p>
					An <code class="command">acl</code> statement takes the following form:
				</p>
                <pre class="screen"><code class="command">acl <em class="replaceable"><code>&lt;acl-name&gt;</code></em> { <em class="replaceable"><code>&lt;match-element&gt;</code></em>; [<em class="replaceable"><code>&lt;match-element&gt;</code></em>; ...] };</code>
</pre>
                <p>
					In this statement, replace <em class="replaceable"><code>&lt;acl-name&gt;</code></em> with the name of the access control list and replace <em class="replaceable"><code>&lt;match-element&gt;</code></em> with a semi-colon separated list of IP addresses. Most of the time, an individual IP address or IP network notation (such as <code class="command">10.0.1.0/24</code>) is used to identify the IP addresses within the <code class="command">acl</code> statement.
				</p>
                <p>
					The following access control lists are already defined as keywords to simplify configuration:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<code class="command">any</code> — Matches every IP address
						</p>
                    </li>
                    <li>
                      <p>
							<code class="command">localhost</code> — Matches any IP address in use by the local system
						</p>
                    </li>
                    <li>
                      <p>
							<code class="command">localnets</code> — Matches any IP address on any network to which the local system is connected
						</p>
                    </li>
                    <li>
                      <p>
							<code class="command">none</code> — Matches no IP addresses
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					When used in conjunction with other statements (such as the <code class="command">options</code> statement), <code class="command">acl</code> statements can be very useful in preventing the misuse of a BIND nameserver.
				</p>
                <p>
					The following example defines two access control lists and uses an <code class="command">options</code> statement to define how they are treated by the nameserver:
				</p>
                <pre class="screen">
	acl black-hats {     
	10.0.2.0/24;     192.168.0.0/24;  };  
	acl red-hats {     10.0.1.0/24;  };  
options {     
	blackhole { black-hats; };     
	allow-query { red-hats; };     
	allow-recursion { red-hats; };  
}
</pre>
                <p>
					This example contains two access control lists, <code class="command">black-hats</code> and <code class="command">red-hats</code>. Hosts in the <code class="command">black-hats</code> list are denied access to the nameserver, while hosts in the <code class="command">red-hats</code> list are given normal access.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-bind-namedconf-state-inc"></a>17.2.1.2. <code class="command">include</code> Statement</h4>
                    </div>
                  </div>
                </div>
                <p>
					The <code class="command">include</code> statement allows files to be included in a <code class="filename">named.conf</code> file. In this way, sensitive configuration data (such as <code class="command">keys</code>) can be placed in a separate file with restrictive permissions.
				</p>
                <p>
					An <code class="command">include</code> statement takes the following form:
				</p>
                <pre class="screen"><code class="command">include "<em class="replaceable"><code>&lt;file-name&gt;</code></em>"</code>
</pre>
                <p>
					In this statement, <em class="replaceable"><code>&lt;file-name&gt;</code></em> is replaced with an absolute path to a file.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-bind-namedconf-state-opt"></a>17.2.1.3. <code class="command">options</code> Statement</h4>
                    </div>
                  </div>
                </div>
                <p>
					The <code class="command">options</code> statement defines global server configuration options and sets defaults for other statements. It can be used to specify the location of the <code class="command">named</code> working directory, the types of queries allowed, and much more.
				</p>
                <p>
					The <code class="command">options</code> statement takes the following form:
				</p>
                <pre class="screen"><code class="command">options { <em class="replaceable"><code>&lt;option&gt;</code></em>; [<em class="replaceable"><code>&lt;option&gt;</code></em>; ...] }; </code>
</pre>
                <p>
					In this statement, the <em class="replaceable"><code>&lt;option&gt;</code></em> directives are replaced with a valid option.
				</p>
                <p>
					The following are commonly used options:
				</p>
                <div class="variablelist">
                  <dl>
                    <dt>
                      <span class="term">
                        <code class="command">allow-query</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies which hosts are allowed to query this nameserver. By default, all hosts are allowed to query. An access control list, or collection of IP addresses or networks, may be used here to allow only particular hosts to query the nameserver.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">allow-recursion</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Similar to <code class="command">allow-query</code>, this option applies to recursive queries. By default, all hosts are allowed to perform recursive queries on the nameserver.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">blackhole </code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies which hosts are not allowed to query the server.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">directory</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the <code class="command">named</code> working directory if different from the default value, <code class="filename">/var/named/</code>.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">forwarders</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies a list of valid IP addresses for nameservers where requests should be forwarded for resolution.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">forward</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the forwarding behavior of a <code class="command">forwarders</code> directive.
							</p>
                      <p>
								The following options are accepted:
							</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
										<code class="command">first</code> — Specifies that the nameservers listed in the <code class="command">forwarders</code> directive be queried before <code class="command">named</code> attempts to resolve the name itself.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">only</code> — Specifies that <code class="command">named</code> does not attempt name resolution itself in the event that queries to nameservers specified in the <code class="command">forwarders</code> directive fail.
									</p>
                          </li>
                        </ul>
                      </div>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">listen-on</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the network interface on which <code class="command">named</code> listens for queries. By default, all interfaces are used.
							</p>
                      <p>
								Using this directive on a DNS server which also acts a gateway, BIND can be configured to only answer queries that originate from one of the networks.
							</p>
                      <p>
								The following is an example of a <code class="command">listen-on</code> directive:
							</p>
                      <pre class="screen"><code class="command">options { listen-on { 10.0.1.1; }; };</code>
</pre>
                      <p>
								In this example, only requests that arrive from the network interface serving the private network (<code class="command">10.0.1.1</code>) are accepted.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">notify</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Controls whether <code class="command">named</code> notifies the slave servers when a zone is updated. It accepts the following options:
							</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
										<code class="command">yes</code> — Notifies slave servers.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">no</code> — Does not notify slave servers.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">explicit</code> — Only notifies slave servers specified in an <code class="command">also-notify</code> list within a zone statement.
									</p>
                          </li>
                        </ul>
                      </div>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">pid-file</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the location of the process ID file created by <code class="command">named</code>.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">root-delegation-only</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Turns on the enforcement of delegation properties in top-level domains (TLDs) and root zones with an optional exclude list. <em class="firstterm">Delegation</em> is the process of dividing a single zone into multiple subzones. In order to create a delegated zone, items known as <em class="firstterm">NS records</em> are used. NameServer records (delegation records) announce the authoritative nameservers for a particular zone.
							</p>
                      <p>
								The following <code class="command">root-delegation-only</code> example specifies an exclude list of TLDs from whom undelegated responses are expected and trusted:
							</p>
                      <pre class="screen"><code class="command">options { root-delegation-only exclude { "ad"; "ar"; "biz"; "cr"; "cu"; "de"; "dm"; "id"; "lu"; "lv"; "md"; "ms"; "museum"; "name"; "no"; "pa"; "pf"; "se"; "sr"; "to"; "tw"; "us"; "uy"; }; };</code>
</pre>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">statistics-file</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies an alternate location for statistics files. By default, <code class="command">named</code> statistics are saved to the <code class="filename">/var/named/named.stats</code> file.
							</p>
                    </dd>
                  </dl>
                </div>
                <p>
					There are several other options also available, many of which rely upon one another to work properly. Refer to the <em class="citetitle">BIND 9 Administrator Reference Manual</em> referenced in <a href="#s2-bind-installed-docs" title="17.7.1. Installed Documentation">Section 17.7.1, “Installed Documentation”</a> and the <code class="filename">bind.conf</code> man page for more details.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-bind-namedconf-state-zone"></a>17.2.1.4. <code class="command">zone</code> Statement</h4>
                    </div>
                  </div>
                </div>
                <p>
					A <code class="command">zone</code> statement defines the characteristics of a zone, such as the location of its configuration file and zone-specific options. This statement can be used to override the global <code class="command">options</code> statements.
				</p>
                <p>
					A <code class="command">zone</code> statement takes the following form:
				</p>
                <pre class="screen"><code class="command">zone <em class="replaceable"><code>&lt;zone-name&gt;</code></em><em class="replaceable"><code>&lt;zone-class&gt;</code></em> { <em class="replaceable"><code>&lt;zone-options&gt;</code></em>; [<em class="replaceable"><code>&lt;zone-options&gt;</code></em>; ...] };</code>
</pre>
                <p>
					In this statement, <em class="replaceable"><code>&lt;zone-name&gt;</code></em> is the name of the zone, <em class="replaceable"><code>&lt;zone-class&gt;</code></em> is the optional class of the zone, and <em class="replaceable"><code>&lt;zone-options&gt;</code></em> is a list of options characterizing the zone.
				</p>
                <p>
					The <em class="replaceable"><code>&lt;zone-name&gt;</code></em> attribute for the zone statement is particularly important. It is the default value assigned for the <code class="command">$ORIGIN</code> directive used within the corresponding zone file located in the <code class="filename">/var/named/</code> directory. The <code class="command">named</code> daemon appends the name of the zone to any non-fully qualified domain name listed in the zone file.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						If you have installed the <code class="filename">caching-nameserver</code> package, the default configuration file will be in <code class="filename">/etc/named.rfc1912.zones</code>.
					</p>
                </div>
                <p>
					For example, if a <code class="command">zone</code> statement defines the namespace for <code class="command">example.com</code>, use <code class="command">example.com</code> as the <em class="replaceable"><code>&lt;zone-name&gt;</code></em> so it is placed at the end of hostnames within the <code class="command">example.com</code> zone file.
				</p>
                <p>
					For more information about zone files, refer to <a href="#s1-bind-zone" title="17.3. Zone Files">Section 17.3, “Zone Files”</a>.
				</p>
                <p>
					The most common <code class="command">zone</code> statement options include the following:
				</p>
                <div class="variablelist">
                  <dl>
                    <dt>
                      <span class="term">
                        <code class="command">allow-query</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the clients that are allowed to request information about this zone. The default is to allow all query requests.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">allow-transfer</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the slave servers that are allowed to request a transfer of the zone's information. The default is to allow all transfer requests.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">allow-update</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the hosts that are allowed to dynamically update information in their zone. The default is to deny all dynamic update requests.
							</p>
                      <p>
								Be careful when allowing hosts to update information about their zone. Do not enable this option unless the host specified is completely trusted. In general, it is better to have an administrator manually update the records for a zone and reload the <code class="command">named</code> service.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">file</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the name of the file in the <code class="command">named</code> working directory that contains the zone's configuration data.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">masters</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies the IP addresses from which to request authoritative zone information and is used only if the zone is defined as <code class="command">type</code><code class="command">slave</code>.
							</p>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">notify</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Specifies whether or not <code class="command">named</code> notifies the slave servers when a zone is updated. This directive accepts the following options:
							</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
										<code class="command">yes</code> — Notifies slave servers.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">no</code> — Does not notify slave servers.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">explicit</code> — Only notifies slave servers specified in an <code class="command">also-notify</code> list within a zone statement.
									</p>
                          </li>
                        </ul>
                      </div>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">type</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Defines the type of zone.
							</p>
                      <p>
								Below is a list of valid options:
							</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
										<code class="command">delegation-only</code> — Enforces the delegation status of infrastructure zones such as COM, NET, or ORG. Any answer that is received without an explicit or implicit delegation is treated as <code class="command">NXDOMAIN</code>. This option is only applicable in TLDs or root zone files used in recursive or caching implementations.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">forward</code> — Forwards all requests for information about this zone to other nameservers.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">hint</code> — A special type of zone used to point to the root nameservers which resolve queries when a zone is not otherwise known. No configuration beyond the default is necessary with a <code class="command">hint</code> zone.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">master</code> — Designates the nameserver as authoritative for this zone. A zone should be set as the <code class="command">master</code> if the zone's configuration files reside on the system.
									</p>
                          </li>
                          <li>
                            <p>
										<code class="command">slave</code> — Designates the nameserver as a slave server for this zone. Also specifies the IP address of the master nameserver for the zone.
									</p>
                          </li>
                        </ul>
                      </div>
                    </dd>
                    <dt>
                      <span class="term">
                        <code class="command">zone-statistics</code>
                      </span>
                    </dt>
                    <dd>
                      <p>
								Configures <code class="command">named</code> to keep statistics concerning this zone, writing them to either the default location (<code class="filename">/var/named/named.stats</code>) or the file listed in the <code class="command">statistics-file</code> option in the <code class="command">server</code> statement. Refer to <a href="#s2-bind-namedconf-state-other" title="17.2.2. Other Statement Types">Section 17.2.2, “Other Statement Types”</a> for more information about the <code class="command">server</code> statement.
							</p>
                    </dd>
                  </dl>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-bind-configuration-named-zone"></a>17.2.1.5. Sample <code class="command">zone</code> Statements</h4>
                    </div>
                  </div>
                </div>
                <a id="id2965951" class="indexterm"></a>
                <p>
					Most changes to the <code class="filename">/etc/named.conf</code> file of a master or slave nameserver involves adding, modifying, or deleting <code class="command">zone</code> statements. While these <code class="command">zone</code> statements can contain many options, most nameservers require only a small subset to function efficiently. The following <code class="command">zone</code> statements are very basic examples illustrating a master-slave nameserver relationship.
				</p>
                <p>
					The following is an example of a <code class="command">zone</code> statement for the primary nameserver hosting <code class="command">example.com</code> (<code class="command">192.168.0.1</code>):
				</p>
                <pre class="screen"><code class="command">zone "example.com" IN { type master; file "example.com.zone"; allow-update { none; }; };</code>
</pre>
                <p>
					In the statement, the zone is identified as <code class="command">example.com</code>, the type is set to <code class="command">master</code>, and the <code class="command">named</code> service is instructed to read the <code class="filename">/var/named/example.com.zone</code> file. It also tells <code class="command">named</code> not to allow any other hosts to update.
				</p>
                <p>
					A slave server's <code class="command">zone</code> statement for <code class="command">example.com</code> is slightly different from the previous example. For a slave server, the type is set to <code class="command">slave</code> and in place of the <code class="command">allow-update</code> line is a directive telling <code class="command">named</code> the IP address of the master server.
				</p>
                <p>
					The following is an example slave server <code class="command">zone</code> statement for <code class="command">example.com</code> zone:
				</p>
                <pre class="screen"><code class="command">zone "example.com" { type slave; file "example.com.zone"; masters { 192.168.0.1; }; };</code>
</pre>
                <p>
					This <code class="command">zone</code> statement configures <code class="command">named</code> on the slave server to query the master server at the <code class="command">192.168.0.1</code> IP address for information about the <code class="command">example.com</code> zone. The information that the slave server receives from the master server is saved to the <code class="filename">/var/named/example.com.zone</code> file.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-namedconf-state-other"></a>17.2.2. Other Statement Types</h3>
                  </div>
                </div>
              </div>
              <p>
				The following is a list of lesser used statement types available within <code class="filename">named.conf</code>:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">controls</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Configures various security requirements necessary to use the <code class="command">rndc</code> command to administer the <code class="command">named</code> service.
						</p>
                    <p>
							Refer to <a href="#s2-bind-rndc-configuration-namedconf" title="17.4.1. Configuring /etc/named.conf">Section 17.4.1, “Configuring <code class="filename">/etc/named.conf</code>”</a> to learn more about how the <code class="command">controls</code> statement is structured and what options are available.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">key "<em class="replaceable"><code>&lt;key-name&gt;</code></em>"</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Defines a particular key by name. Keys are used to authenticate various actions, such as secure updates or the use of the <code class="command">rndc</code> command. Two options are used with <code class="command">key</code>:
						</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">algorithm <em class="replaceable"><code>&lt;algorithm-name&gt;</code></em></code> — The type of algorithm used, such as <code class="command">dsa</code> or <code class="command">hmac-md5</code>.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">secret "<em class="replaceable"><code>&lt;key-value&gt;</code></em>"</code> — The encrypted key.
								</p>
                        </li>
                      </ul>
                    </div>
                    <p>
							Refer to <a href="#s2-bind-rndc-configuration-rndcconf" title="17.4.2. Configuring /etc/rndc.conf">Section 17.4.2, “Configuring <code class="filename">/etc/rndc.conf</code>”</a> for instructions on how to write a <code class="command">key</code> statement.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">logging</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Allows for the use of multiple types of logs, called <em class="firstterm">channels</em>. By using the <code class="command">channel</code> option within the <code class="command">logging</code> statement, a customized type of log can be constructed — with its own file name (<code class="command">file</code>), size limit (<code class="command">size</code>), versioning (<code class="command">version</code>), and level of importance (<code class="command">severity</code>). Once a customized channel is defined, a <code class="command">category</code> option is used to categorize the channel and begin logging when <code class="command">named</code> is restarted.
						</p>
                    <p>
							By default, <code class="command">named</code> logs standard messages to the <code class="command">syslog</code> daemon, which places them in <code class="filename">/var/log/messages</code>. This occurs because several standard channels are built into BIND with various severity levels, such as <code class="command">default_syslog</code> (which handles informational logging messages) and <code class="command">default_debug</code> (which specifically handles debugging messages). A default category, called <code class="command">default</code>, uses the built-in channels to do normal logging without any special configuration.
						</p>
                    <p>
							Customizing the logging process can be a very detailed process and is beyond the scope of this chapter. For information on creating custom BIND logs, refer to the <em class="citetitle">BIND 9 Administrator Reference Manual</em> referenced in <a href="#s2-bind-installed-docs" title="17.7.1. Installed Documentation">Section 17.7.1, “Installed Documentation”</a>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">server</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Specifies options that affect how <code class="command">named</code> should respond to remote nameservers, especially with regard to notifications and zone transfers.
						</p>
                    <p>
							The <code class="command">transfer-format</code> option controls whether one resource record is sent with each message (<code class="command">one-answer</code>) or multiple resource records are sent with each message (<code class="command">many-answers</code>). While <code class="command">many-answers</code> is more efficient, only newer BIND nameservers understand it.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">trusted-keys</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Contains assorted public keys used for secure DNS (DNSSEC). Refer to <a href="#s2-bind-features-security" title="17.5.3. Security">Section 17.5.3, “Security”</a> for more information concerning BIND security.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">view "<em class="replaceable"><code>&lt;view-name&gt;</code></em>"</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Creates special views depending upon which network the host querying the nameserver is on. This allows some hosts to receive one answer regarding a zone while other hosts receive totally different information. Alternatively, certain zones may only be made available to particular trusted hosts while non-trusted hosts can only make queries for other zones.
						</p>
                    <p>
							Multiple views may be used, but their names must be unique. The <code class="command">match-clients</code> option specifies the IP addresses that apply to a particular view. Any <code class="command">options</code> statement may also be used within a view, overriding the global options already configured for <code class="command">named</code>. Most <code class="command">view</code> statements contain multiple <code class="command">zone</code> statements that apply to the <code class="command">match-clients</code> list. The order in which <code class="command">view</code> statements are listed is important, as the first <code class="command">view</code> statement that matches a particular client's IP address is used.
						</p>
                    <p>
							Refer to <a href="#s2-bind-features-views" title="17.5.2. Multiple Views">Section 17.5.2, “Multiple Views”</a> for more information about the <code class="command">view</code> statement.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-namedconf-comm"></a>17.2.3. Comment Tags</h3>
                  </div>
                </div>
              </div>
              <p>
				The following is a list of valid comment tags used within <code class="filename">named.conf</code>:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">//</code> — When placed at the beginning of a line, that line is ignored by <code class="command">named</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">#</code> — When placed at the beginning of a line, that line is ignored by <code class="command">named</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">/*</code> and <code class="command">*/</code> — When text is enclosed in these tags, the block of text is ignored by <code class="command">named</code>.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-bind-zone"></a>17.3. Zone Files</h2>
                </div>
              </div>
            </div>
            <a id="id2966571" class="indexterm"></a>
            <p>
			<em class="firstterm">Zone files</em> contain information about a namespace and are stored in the <code class="command">named</code> working directory (<code class="filename">/var/named/</code>) by default. Each zone file is named according to the <code class="command">file</code> option data in the <code class="command">zone</code> statement, usually in a way that relates to the domain in question and identifies the file as containing zone data, such as <code class="filename">example.com.zone</code>.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				If you have installed the <code class="filename">bind-chroot</code> package, the BIND service will run in the <code class="command">/var/named/chroot</code> environment. All configuration files will be moved there. As such, you can find the zone files in <code class="filename">/var/named/chroot/var/named</code>.
			</p>
            </div>
            <p>
			Each zone file may contain <em class="firstterm">directives</em> and <em class="firstterm">resource records</em>. Directives tell the nameserver to perform tasks or apply special settings to the zone. Resource records define the parameters of the zone and assign identities to individual hosts. Directives are optional, but resource records are required to provide name service to a zone.
		</p>
            <p>
			All directives and resource records should be entered on individual lines.
		</p>
            <p>
			Comments can be placed after semicolon characters (<code class="command">;</code>) in zone files.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-zone-directives"></a>17.3.1. Zone File Directives</h3>
                  </div>
                </div>
              </div>
              <a id="id2966698" class="indexterm"></a>
              <p>
				Directives begin with the dollar sign character (<code class="command">$</code>) followed by the name of the directive. They usually appear at the top of the zone file.
			</p>
              <p>
				The following are commonly used directives:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">$INCLUDE</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Configures <code class="command">named</code> to include another zone file in this zone file at the place where the directive appears. This allows additional zone settings to be stored apart from the main zone file.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">$ORIGIN</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Appends the domain name to unqualified records, such as those with the hostname and nothing more.
						</p>
                    <p>
							For example, a zone file may contain the following line:
						</p>
                    <pre class="screen"><code class="command">$ORIGIN example.com.</code>
</pre>
                    <p>
							Any names used in resource records that do not end in a trailing period (<code class="command">.</code>) are appended with <code class="command">example.com</code>.
						</p>
                    <div class="note">
                      <h2>Note</h2>
                      <p>
								The use of the <code class="command">$ORIGIN</code> directive is unnecessary if the zone is specified in <code class="filename">/etc/named.conf</code> because the zone name is used as the value for the <code class="command">$ORIGIN</code> directive by default.
							</p>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">$TTL</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Sets the default <em class="firstterm">Time to Live (TTL)</em> value for the zone. This is the length of time, in seconds, that a zone resource record is valid. Each resource record can contain its own TTL value, which overrides this directive.
						</p>
                    <p>
							Increasing this value allows remote nameservers to cache the zone information for a longer period of time, reducing the number of queries for the zone and lengthening the amount of time required to proliferate resource record changes.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s3-bind-zone-rr"></a>17.3.2. Zone File Resource Records</h3>
                  </div>
                </div>
              </div>
              <a id="id2973941" class="indexterm"></a>
              <p>
				The primary component of a zone file is its resource records.
			</p>
              <p>
				There are many types of zone file resource records. The following are used most frequently:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="command">A</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This refers to the Address record, which specifies an IP address to assign to a name, as in this example:
						</p>
                    <pre class="screen"><code class="command"><em class="replaceable"><code>&lt;host&gt;</code></em> IN A <em class="replaceable"><code>&lt;IP-address&gt;</code></em></code>
</pre>
                    <p>
							If the <em class="replaceable"><code>&lt;host&gt;</code></em> value is omitted, then an <code class="command">A</code> record points to a default IP address for the top of the namespace. This system is the target for all non-FQDN requests.
						</p>
                    <p>
							Consider the following <code class="command">A</code> record examples for the <code class="command">example.com</code> zone file:
						</p>
                    <pre class="screen"><code class="command">server1 IN A 10.0.1.3 IN A 10.0.1.5</code>
</pre>
                    <p>
							Requests for <code class="command">example.com</code> are pointed to 10.0.1.3 or 10.0.1.5.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">CNAME</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This refers to the Canonical Name record, which maps one name to another. This type of record can also be referred to as an <em class="firstterm">alias record</em>.
						</p>
                    <p>
							The next example tells <code class="command">named</code> that any requests sent to the <em class="replaceable"><code>&lt;alias-name&gt;</code></em> should point to the host, <em class="replaceable"><code>&lt;real-name&gt;</code></em>. <code class="command">CNAME</code> records are most commonly used to point to services that use a common naming scheme, such as <code class="command">www</code> for Web servers.
						</p>
                    <pre class="screen"><code class="command"><em class="replaceable"><code>&lt;alias-name&gt;</code></em> IN CNAME <em class="replaceable"><code>&lt;real-name&gt;</code></em></code>
</pre>
                    <p>
							In the following example, an <code class="command">A</code> record binds a hostname to an IP address, while a <code class="command">CNAME</code> record points the commonly used <code class="command">www</code> hostname to it.
						</p>
                    <pre class="screen"><code class="command">server1 IN A 10.0.1.5 www IN CNAME server1</code>
</pre>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">MX</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This refers to the Mail eXchange record, which tells where mail sent to a particular namespace controlled by this zone should go.
						</p>
                    <pre class="screen"><code class="command"> IN MX <em class="replaceable"><code>&lt;preference-value&gt;</code></em><em class="replaceable"><code>&lt;email-server-name&gt;</code></em></code>
</pre>
                    <p>
							Here, the <em class="replaceable"><code>&lt;preference-value&gt;</code></em> allows numerical ranking of the email servers for a namespace, giving preference to some email systems over others. The <code class="command">MX</code> resource record with the lowest <em class="replaceable"><code>&lt;preference-value&gt;</code></em> is preferred over the others. However, multiple email servers can possess the same value to distribute email traffic evenly among them.
						</p>
                    <p>
							The <em class="replaceable"><code>&lt;email-server-name&gt;</code></em> may be a hostname or FQDN.
						</p>
                    <pre class="screen"><code class="command"> IN MX 10 mail.example.com. IN MX 20 mail2.example.com.</code>
</pre>
                    <p>
							In this example, the first <code class="command">mail.example.com</code> email server is preferred to the <code class="command">mail2.example.com</code> email server when receiving email destined for the <code class="command">example.com</code> domain.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">NS</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This refers to the NameServer record, which announces the authoritative nameservers for a particular zone.
						</p>
                    <p>
							The following illustrates the layout of an <code class="command">NS</code> record:
						</p>
                    <pre class="screen"><code class="command"> IN NS <em class="replaceable"><code>&lt;nameserver-name&gt;</code></em></code>
</pre>
                    <p>
							Here, <em class="replaceable"><code>&lt;nameserver-name&gt;</code></em> should be an FQDN.
						</p>
                    <p>
							Next, two nameservers are listed as authoritative for the domain. It is not important whether these nameservers are slaves or if one is a master; they are both still considered authoritative.
						</p>
                    <pre class="screen"><code class="command"> IN NS dns1.example.com. IN NS dns2.example.com.</code>
</pre>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">PTR</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This refers to the PoinTeR record, which is designed to point to another part of the namespace.
						</p>
                    <p>
							<code class="command">PTR</code> records are primarily used for reverse name resolution, as they point IP addresses back to a particular name. Refer to <a href="#s2-bind-configuration-zone-reverse" title="17.3.4. Reverse Name Resolution Zone Files">Section 17.3.4, “Reverse Name Resolution Zone Files”</a> for more examples of <code class="command">PTR</code> records in use.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="command">SOA</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This refers to the Start Of Authority resource record, which proclaims important authoritative information about a namespace to the nameserver.
						</p>
                    <p>
							Located after the directives, an <code class="command">SOA</code> resource record is the first resource record in a zone file.
						</p>
                    <p>
							The following shows the basic structure of an <code class="command">SOA</code> resource record:
						</p>
                    <pre class="screen"><code class="command">@ IN SOA <em class="replaceable"><code>&lt;primary-name-server&gt;</code></em><em class="replaceable"><code>&lt;hostmaster-email&gt;</code></em> ( <em class="replaceable"><code>&lt;serial-number&gt;</code></em><em class="replaceable"><code>&lt;time-to-refresh&gt;</code></em><em class="replaceable"><code>&lt;time-to-retry&gt;</code></em><em class="replaceable"><code>&lt;time-to-expire&gt;</code></em><em class="replaceable"><code>&lt;minimum-TTL&gt; )</code></em></code>
</pre>
                    <p>
							The <code class="command">@</code> symbol places the <code class="command">$ORIGIN</code> directive (or the zone's name, if the <code class="command">$ORIGIN</code> directive is not set) as the namespace being defined by this <code class="command">SOA</code> resource record. The hostname of the primary nameserver that is authoritative for this domain is the <em class="replaceable"><code>&lt;primary-name-server&gt;</code></em> directive, and the email of the person to contact about this namespace is the <em class="replaceable"><code>&lt;hostmaster-email&gt;</code></em> directive.
						</p>
                    <p>
							The <em class="replaceable"><code>&lt;serial-number&gt;</code></em> directive is a numerical value incremented every time the zone file is altered to indicate it is time for <code class="command">named</code> to reload the zone. The <em class="replaceable"><code>&lt;time-to-refresh&gt;</code></em> directive is the numerical value slave servers use to determine how long to wait before asking the master nameserver if any changes have been made to the zone. The <em class="replaceable"><code>&lt;serial-number&gt;</code></em> directive is a numerical value used by the slave servers to determine if it is using outdated zone data and should therefore refresh it.
						</p>
                    <p>
							The <em class="replaceable"><code>&lt;time-to-retry&gt;</code></em> directive is a numerical value used by slave servers to determine the length of time to wait before issuing a refresh request in the event that the master nameserver is not answering. If the master has not replied to a refresh request before the amount of time specified in the <em class="replaceable"><code>&lt;time-to-expire&gt;</code></em> directive elapses, the slave servers stop responding as an authority for requests concerning that namespace.
						</p>
                    <p>
							The <em class="replaceable"><code>&lt;minimum-TTL&gt;</code></em> directive is the amount of time other nameservers cache the zone's information.
						</p>
                    <p>
							When configuring BIND, all times are specified in seconds. However, it is possible to use abbreviations when specifying units of time other than seconds, such as minutes (<code class="command">M</code>), hours (<code class="command">H</code>), days (<code class="command">D</code>), and weeks (<code class="command">W</code>). The table in <a href="#tb-bind-seconds" title="Table 17.1. Seconds compared to other time units">Table 17.1, “Seconds compared to other time units”</a> shows an amount of time in seconds and the equivalent time in another format.
						</p>
                    <div class="table">
                      <a id="tb-bind-seconds"></a>
                      <div class="table-contents">
                        <table summary="Seconds compared to other time units" border="1">
                          <colgroup>
                            <col />
                            <col />
                          </colgroup>
                          <thead>
                            <tr>
                              <th>
											Seconds
										</th>
                              <th>
											Other Time Units
										</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>
											<code class="command">60</code>
										</td>
                              <td>
											<code class="command">1M</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">1800</code>
										</td>
                              <td>
											<code class="command">30M</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">3600</code>
										</td>
                              <td>
											<code class="command">1H</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">10800</code>
										</td>
                              <td>
											<code class="command">3H</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">21600</code>
										</td>
                              <td>
											<code class="command">6H</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">43200</code>
										</td>
                              <td>
											<code class="command">12H</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">86400</code>
										</td>
                              <td>
											<code class="command">1D</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">259200</code>
										</td>
                              <td>
											<code class="command">3D</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">604800</code>
										</td>
                              <td>
											<code class="command">1W</code>
										</td>
                            </tr>
                            <tr>
                              <td>
											<code class="command">31536000</code>
										</td>
                              <td>
											<code class="command">365D</code>
										</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <h6>Table 17.1. Seconds compared to other time units</h6>
                    </div>
                    <br class="table-break" />
                    <p>
							The following example illustrates the form an <code class="command">SOA</code> resource record might take when it is populated with real values.
						</p>
                    <pre class="screen"><code class="command">@ IN SOA dns1.example.com. hostmaster.example.com. ( 2001062501 ; serial 21600 ; refresh after 6 hours 3600 ; retry after 1 hour 604800 ; expire after 1 week 86400 ) ; minimum TTL of 1 day</code>
</pre>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-zone-examples"></a>17.3.3. Example Zone File</h3>
                  </div>
                </div>
              </div>
              <a id="id2959124" class="indexterm"></a>
              <p>
				Seen individually, directives and resource records can be difficult to grasp. However, when placed together in a single file, they become easier to understand.
			</p>
              <p>
				The following example shows a very basic zone file.
			</p>
              <pre class="screen"><code class="command">$ORIGIN example.com. $TTL 86400 @ IN SOA dns1.example.com. hostmaster.example.com. ( 2001062501 ; serial 21600 ; refresh after 6 hours 3600 ; retry after 1 hour 604800 ; expire after 1 week 86400 ) ; minimum TTL of 1 day IN NS dns1.example.com. IN NS dns2.example.com. IN MX 10 mail.example.com. IN MX 20 mail2.example.com. dns1 IN A 10.0.1.1 dns2 IN A 10.0.1.2 server1 IN A 10.0.1.5 server2 IN A 10.0.1.6 ftp IN A 10.0.1.3 IN A 10.0.1.4 mail IN CNAME server1 mail2 IN CNAME server2 www IN CNAME server1</code>
</pre>
              <p>
				In this example, standard directives and <code class="command">SOA</code> values are used. The authoritative nameservers are set as <code class="command">dns1.example.com</code> and <code class="command">dns2.example.com</code>, which have <code class="command">A</code> records that tie them to <code class="command">10.0.1.1</code> and <code class="command">10.0.1.2</code>, respectively.
			</p>
              <p>
				The email servers configured with the <code class="command">MX</code> records point to <code class="command">server1</code> and <code class="command">server2</code> via <code class="command">CNAME</code> records. Since the <code class="command">server1</code> and <code class="command">server2</code> names do not end in a trailing period (<code class="command">.</code>), the <code class="command">$ORIGIN</code> domain is placed after them, expanding them to <code class="command">server1.example.com</code> and <code class="command">server2.example.com</code>. Through the related <code class="command">A</code> resource records, their IP addresses can be determined.
			</p>
              <p>
				FTP and Web services, available at the standard <code class="command">ftp.example.com</code> and <code class="command">www.example.com</code> names, are pointed at the appropriate servers using <code class="command">CNAME</code> records.
			</p>
              <p>
				This zone file would be called into service with a <code class="command">zone</code> statement in the <code class="filename">named.conf</code> similar to the following: 
</p>
              <pre class="screen"><code class="command">zone "example.com" IN { type master; file "example.com.zone"; allow-update { none; }; };</code>
</pre>
              <p>
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-configuration-zone-reverse"></a>17.3.4. Reverse Name Resolution Zone Files</h3>
                  </div>
                </div>
              </div>
              <a id="id2943530" class="indexterm"></a>
              <p>
				A reverse name resolution zone file is used to translate an IP address in a particular namespace into an FQDN. It looks very similar to a standard zone file, except that <code class="command">PTR</code> resource records are used to link the IP addresses to a fully qualified domain name.
			</p>
              <p>
				The following illustrates the layout of a <code class="command">PTR</code> record:
			</p>
              <pre class="screen"><code class="command"><em class="replaceable"><code>&lt;last-IP-digit&gt;</code></em> IN PTR <em class="replaceable"><code>&lt;FQDN-of-system&gt;</code></em></code>
</pre>
              <p>
				The <em class="replaceable"><code>&lt;last-IP-digit&gt;</code></em> is the last number in an IP address which points to a particular system's FQDN.
			</p>
              <p>
				In the following example, IP addresses <code class="command">10.0.1.1</code> through <code class="command">10.0.1.6</code> are pointed to corresponding FQDNs. It can be located in <code class="filename">/var/named/example.com.rr.zone</code>.
			</p>
              <pre class="screen"><code class="command">$ORIGIN 1.0.10.in-addr.arpa. $TTL 86400 @ IN SOA dns1.example.com. hostmaster.example.com. ( 2001062501 ; serial 21600 ; refresh after 6 hours 3600 ; retry after 1 hour 604800 ; expire after 1 week 86400 ) ; minimum TTL of 1 day 1 IN PTR dns1.example.com. 2 IN PTR dns2.example.com. 5 IN PTR server1.example.com. 6 IN PTR server2.example.com. 3 IN PTR ftp.example.com. 4 IN PTR ftp.example.com.</code>
</pre>
              <p>
				This zone file would be called into service with a <code class="command">zone</code> statement in the <code class="filename">named.conf</code> file similar to the following:
			</p>
              <pre class="screen"><code class="command">zone "1.0.10.in-addr.arpa" IN { type master; file "example.com.rr.zone"; allow-update { none; }; };</code>
</pre>
              <p>
				There is very little difference between this example and a standard <code class="command">zone</code> statement, except for the zone name. Note that a reverse name resolution zone requires the first three blocks of the IP address reversed followed by <code class="command">.in-addr.arpa</code>. This allows the single block of IP numbers used in the reverse name resolution zone file to be associated with the zone.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-bind-rndc"></a>17.4. Using <code class="command">rndc</code></h2>
                </div>
              </div>
            </div>
            <a id="id2957216" class="indexterm"></a>
            <p>
			BIND includes a utility called <code class="command">rndc</code> which allows command line administration of the <code class="command">named</code> daemon from the localhost or a remote host.
		</p>
            <p>
			In order to prevent unauthorized access to the <code class="command">named</code> daemon, BIND uses a shared secret key authentication method to grant privileges to hosts. This means an identical key must be present in both <code class="filename">/etc/named.conf</code> and the <code class="command">rndc</code> configuration file, <code class="filename">/etc/rndc.conf</code>.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				If you have installed the <code class="filename">bind-chroot</code> package, the BIND service will run in the <code class="command">/var/named/chroot</code> environment. All configuration files will be moved there. As such, the <code class="filename">rndc.conf</code> file is located in <code class="filename">/var/named/chroot/etc/rndc.conf</code>.
			</p>
              <p>
				Note that since the <code class="command">rndc</code> utility does not run in a <code class="command">chroot</code> environment, <code class="filename">/etc/rndc.conf</code> is a symlink to <code class="filename">/var/named/chroot/etc/rndc.conf</code>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-rndc-configuration-namedconf"></a>17.4.1. Configuring <code class="filename">/etc/named.conf</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2947921" class="indexterm"></a>
              <p>
				In order for <code class="command">rndc</code> to connect to a <code class="command">named</code> service, there must be a <code class="command">controls</code> statement in the BIND server's <code class="filename">/etc/named.conf</code> file.
			</p>
              <p>
				The <code class="command">controls</code> statement, shown in the following example, allows <code class="command">rndc</code> to connect from the localhost.
			</p>
              <pre class="screen"><code class="command">controls { inet 127.0.0.1 allow { localhost; } keys { <em class="replaceable"><code>&lt;key-name&gt;</code></em>; }; };</code>
</pre>
              <p>
				This statement tells <code class="command">named</code> to listen on the default TCP port 953 of the loopback address and allow <code class="command">rndc</code> commands coming from the localhost, if the proper key is given. The <em class="replaceable"><code>&lt;key-name&gt;</code></em> specifies a name in the <code class="command">key</code> statement within the <code class="filename">/etc/named.conf</code> file. The next example illustrates a sample <code class="command">key</code> statement.
			</p>
              <pre class="screen"><code class="command">key "<em class="replaceable"><code>&lt;key-name&gt;</code></em>" { algorithm hmac-md5; secret "<em class="replaceable"><code>&lt;key-value&gt;</code></em>"; };</code>
</pre>
              <p>
				In this case, the <em class="replaceable"><code>&lt;key-value&gt;</code></em> uses the HMAC-MD5 algorithm. Use the following command to generate keys using the HMAC-MD5 algorithm:
			</p>
              <pre class="screen"><code class="command">dnssec-keygen -a hmac-md5 -b <em class="replaceable"><code>&lt;bit-length&gt;</code></em> -n HOST <em class="replaceable"><code>&lt;key-file-name&gt;</code></em></code>
</pre>
              <p>
				A key with at least a 256-bit length is a good idea. The actual key that should be placed in the <em class="replaceable"><code>&lt;key-value&gt;</code></em> area can be found in the <code class="filename"><em class="replaceable"><code>&lt;key-file-name&gt;</code></em></code> file generated by this command.
			</p>
              <div class="warning">
                <h2>Warning</h2>
                <p>
					Because <code class="filename">/etc/named.conf</code> is world-readable, it is advisable to place the <code class="command">key</code> statement in a separate file, readable only by root, and then use an <code class="command">include</code> statement to reference it. For example:
				</p>
                <pre class="screen"><code class="command">include "/etc/rndc.key";</code>
</pre>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-rndc-configuration-rndcconf"></a>17.4.2. Configuring <code class="filename">/etc/rndc.conf</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2967456" class="indexterm"></a>
              <a id="id2967482" class="indexterm"></a>
              <p>
				The <code class="command">key</code> is the most important statement in <code class="filename">/etc/rndc.conf</code>.
			</p>
              <pre class="screen"><code class="command">key "<em class="replaceable"><code>&lt;key-name&gt;</code></em>" { algorithm hmac-md5; secret "<em class="replaceable"><code>&lt;key-value&gt;</code></em>"; };</code>
</pre>
              <p>
				The <em class="replaceable"><code>&lt;key-name&gt;</code></em> and <em class="replaceable"><code>&lt;key-value&gt;</code></em> should be exactly the same as their settings in <code class="filename">/etc/named.conf</code>.
			</p>
              <p>
				To match the keys specified in the target server's <code class="filename">/etc/named.conf</code>, add the following lines to <code class="filename">/etc/rndc.conf</code>.
			</p>
              <pre class="screen"><code class="command">options { default-server localhost; default-key "<em class="replaceable"><code>&lt;key-name&gt;</code></em>"; };</code>
</pre>
              <p>
				This directive sets a global default key. However, the <code class="filename">rndc</code> configuration file can also specify different keys for different servers, as in the following example:
			</p>
              <pre class="screen"><code class="command">server localhost { key "<em class="replaceable"><code>&lt;key-name&gt;</code></em>"; };</code>
</pre>
              <div class="important">
                <h2>Important</h2>
                <p>
					Make sure that only the root user can read or write to the <code class="filename">/etc/rndc.conf</code> file.
				</p>
              </div>
              <p>
				For more information about the <code class="filename">/etc/rndc.conf</code> file, refer to the <code class="filename">rndc.conf</code> man page.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-rndc-options"></a>17.4.3. Command Line Options</h3>
                  </div>
                </div>
              </div>
              <a id="id2962018" class="indexterm"></a>
              <p>
				An <code class="command">rndc</code> command takes the following form:
			</p>
              <pre class="screen"><code class="command">rndc <em class="replaceable"><code>&lt;options&gt;</code></em><em class="replaceable"><code>&lt;command&gt;</code></em><em class="replaceable"><code>&lt;command-options&gt;</code></em></code>
</pre>
              <p>
				When executing <code class="command">rndc</code> on a properly configured localhost, the following commands are available:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">halt</code> — Stops the <code class="filename">named</code> service immediately.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">querylog</code> — Logs all queries made to this nameserver.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">refresh</code> — Refreshes the nameserver's database.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">reload</code> — Reloads the zone files but keeps all other previously cached responses. This command also allows changes to zone files without losing all stored name resolutions.
					</p>
                    <p>
						If changes made only affect a specific zone, reload only that specific zone by adding the name of the zone after the <code class="command">reload</code> command.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">stats</code> — Dumps the current <code class="command">named</code> statistics to the <code class="filename">/var/named/named.stats</code> file.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">stop</code> — Stops the server gracefully, saving any dynamic update and <em class="firstterm">Incremental Zone Transfers</em> (<em class="firstterm">IXFR</em>) data before exiting.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				Occasionally, it may be necessary to override the default settings in the <code class="filename">/etc/rndc.conf</code> file. The following options are available:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">-c <em class="replaceable"><code>&lt;configuration-file&gt;</code></em></code> — Specifies the alternate location of a configuration file.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-p <em class="replaceable"><code>&lt;port-number&gt;</code></em></code> — Specifies a port number to use for the <code class="command">rndc</code> connection other than the default port 953.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-s <em class="replaceable"><code>&lt;server&gt;</code></em></code> — Specifies a server other than the <code class="command">default-server</code> listed in <code class="filename">/etc/rndc.conf</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-y <em class="replaceable"><code>&lt;key-name&gt;</code></em></code> — Specifies a key other than the <code class="command">default-key</code> option in <code class="filename">/etc/rndc.conf</code>.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				Additional information about these options can be found in the <code class="command">rndc</code> man page.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-bind-features"></a>17.5. Advanced Features of BIND</h2>
                </div>
              </div>
            </div>
            <a id="id2884994" class="indexterm"></a>
            <p>
			Most BIND implementations only use <code class="command">named</code> to provide name resolution services or to act as an authority for a particular domain or sub-domain. However, BIND version 9 has a number of advanced features that allow for a more secure and efficient DNS service.
		</p>
            <div class="caution">
              <h2>Caution</h2>
              <p>
				Some of these advanced features, such as DNSSEC, TSIG, and IXFR (which are defined in the following section), should only be used in network environments with nameservers that support the features. If the network environment includes non-BIND or older BIND nameservers, verify that each advanced feature is supported before attempting to use it.
			</p>
            </div>
            <p>
			All of the features mentioned are discussed in greater detail in the <em class="citetitle">BIND 9 Administrator Reference Manual</em> referenced in <a href="#s2-bind-installed-docs" title="17.7.1. Installed Documentation">Section 17.7.1, “Installed Documentation”</a>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-features-protocol"></a>17.5.1. DNS Protocol Enhancements</h3>
                  </div>
                </div>
              </div>
              <a id="id2885060" class="indexterm"></a>
              <p>
				BIND supports Incremental Zone Transfers (IXFR), where a slave nameserver only downloads the updated portions of a zone modified on a master nameserver. The standard transfer process requires that the entire zone be transferred to each slave nameserver for even the smallest change. For very popular domains with very lengthy zone files and many slave nameservers, IXFR makes the notification and update process much less resource-intensive.
			</p>
              <p>
				Note that IXFR is only available when using <em class="firstterm">dynamic updating</em> to make changes to master zone records. If manually editing zone files to make changes, Automatic Zone Transfer (AXFR) is used. More information on dynamic updating is available in the <em class="citetitle">BIND 9 Administrator Reference Manual</em> referenced in <a href="#s2-bind-installed-docs" title="17.7.1. Installed Documentation">Section 17.7.1, “Installed Documentation”</a>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-features-views"></a>17.5.2. Multiple Views</h3>
                  </div>
                </div>
              </div>
              <a id="id2960574" class="indexterm"></a>
              <p>
				Through the use of the <code class="command">view</code> statement in <code class="filename">named.conf</code>, BIND can present different information depending on which network a request originates from.
			</p>
              <p>
				This is primarily used to deny sensitive DNS entries from clients outside of the local network, while allowing queries from clients inside the local network.
			</p>
              <p>
				The <code class="command">view</code> statement uses the <code class="command">match-clients</code> option to match IP addresses or entire networks and give them special options and zone data.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-features-security"></a>17.5.3. Security</h3>
                  </div>
                </div>
              </div>
              <a id="id2960641" class="indexterm"></a>
              <p>
				BIND supports a number of different methods to protect the updating and transfer of zones, on both master and slave nameservers:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <span class="emphasis">
                        <em>DNSSEC</em>
                      </span>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Short for <em class="firstterm">DNS SECurity</em>, this feature allows for zones to be cryptographically signed with a <em class="firstterm">zone key</em>.
						</p>
                    <p>
							In this way, the information about a specific zone can be verified as coming from a nameserver that has signed it with a particular private key, as long as the recipient has that nameserver's public key.
						</p>
                    <p>
							BIND version 9 also supports the SIG(0) public/private key method of message authentication.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <span class="emphasis">
                        <em>TSIG</em>
                      </span>
                    </span>
                  </dt>
                  <dd>
                    <p>
							Short for <em class="firstterm">Transaction SIGnatures</em>, this feature allows a transfer from master to slave only after verifying that a shared secret key exists on both nameservers.
						</p>
                    <p>
							This feature strengthens the standard IP address-based method of transfer authorization. An attacker would not only need to have access to the IP address to transfer the zone, but they would also need to know the secret key.
						</p>
                    <p>
							BIND version 9 also supports <em class="firstterm">TKEY</em>, which is another shared secret key method of authorizing zone transfers.
						</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-features-ipv6"></a>17.5.4. IP version 6</h3>
                  </div>
                </div>
              </div>
              <a id="id2966421" class="indexterm"></a>
              <p>
				BIND version 9 supports name service in IP version 6 (IPv6) environments through the use of <code class="command">A6</code> zone records.
			</p>
              <p>
				If the network environment includes both IPv4 and IPv6 hosts, use the <code class="command">lwresd</code> lightweight resolver daemon on all network clients. This daemon is a very efficient, caching-only nameserver which understands the new <code class="command">A6</code> and <code class="command">DNAME</code> records used under IPv6. Refer to the <code class="command">lwresd</code> man page for more information.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-bind-mistakes"></a>17.6. Common Mistakes to Avoid</h2>
                </div>
              </div>
            </div>
            <a id="id2966493" class="indexterm"></a>
            <p>
			It is very common for beginners to make mistakes when editing BIND configuration files. Be sure to avoid the following issues:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<span class="emphasis"><em>Take care to increment the serial number when editing a zone file.</em></span>
				</p>
                  <p>
					If the serial number is not incremented, the master nameserver has the correct, new information, but the slave nameservers are never notified of the change and do not attempt to refresh their data of that zone.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>Be careful to use ellipses and semi-colons correctly in the <code class="filename">/etc/named.conf</code> file.</em></span>
				</p>
                  <p>
					An omitted semi-colon or unclosed ellipse section can cause <code class="command">named</code> to refuse to start.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>Remember to place periods (<code class="command">.</code>) in zone files after all FQDNs and omit them on hostnames.</em></span>
				</p>
                  <p>
					A period at the end of a domain name denotes a fully qualified domain name. If the period is omitted, then <code class="command">named</code> appends the name of the zone or the <code class="command">$ORIGIN</code> value to complete it.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>If a firewall is blocking connections from the <code class="command">named</code> program to other nameservers, edit its configuration file.</em></span>
				</p>
                  <p>
					By default, BIND version 9 uses random ports above 1024 to query other nameservers. Some firewalls, however, expect all nameservers to communicate using only port 53. To force <code class="command">named</code> to use port 53, add the following line to the <code class="command">options</code> statement of <code class="filename">/etc/named.conf</code>:
				</p>
                  <pre class="screen"><code class="command">query-source address * port 53;</code>
</pre>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-bind-additional-resources"></a>17.7. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2988760" class="indexterm"></a>
            <p>
			The following sources of information provide additional resources regarding BIND.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-installed-docs"></a>17.7.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <a id="id2872255" class="indexterm"></a>
              <p>
				BIND features a full range of installed documentation covering many different topics, each placed in its own subject directory. For each item below, replace <em class="replaceable"><code>&lt;version-number&gt;</code></em> with the version of <code class="filename">bind</code> installed on the system:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="filename">/usr/share/doc/bind-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This directory lists the most recent features.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">/usr/share/doc/bind-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/arm/</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This directory contains the <em class="citetitle">BIND 9 Administrator Reference Manual</em> in HTML and SGML formats, which details BIND resource requirements, how to configure different types of nameservers, how to perform load balancing, and other advanced topics. For most new users of BIND, this is the best place to start.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">/usr/share/doc/bind-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/draft/</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This directory contains assorted technical documents that review issues related to DNS service and propose some methods to address them.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">/usr/share/doc/bind-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/misc/</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This directory contains documents designed to address specific advanced issues. Users of BIND version 8 should consult the <code class="filename">migration</code> document for specific changes they must make when moving to BIND 9. The <code class="filename">options</code> file lists all of the options implemented in BIND 9 that are used in <code class="filename">/etc/named.conf</code>.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">/usr/share/doc/bind-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/rfc/</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							This directory provides every RFC document related to BIND.
						</p>
                  </dd>
                </dl>
              </div>
              <p>
				There are also a number of man pages for the various applications and configuration files involved with BIND. The following lists some of the more important man pages.
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">Administrative Applications</span>
                  </dt>
                  <dd>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">man rndc</code> — Explains the different options available when using the <code class="command">rndc</code> command to control a BIND nameserver.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">Server Applications</span>
                  </dt>
                  <dd>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">man named</code> — Explores assorted arguments that can be used to control the BIND nameserver daemon.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">man lwresd</code> — Describes the purpose of and options available for the lightweight resolver daemon.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">Configuration Files</span>
                  </dt>
                  <dd>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
									<code class="command">man named.conf</code> — A comprehensive list of options available within the <code class="command">named</code> configuration file.
								</p>
                        </li>
                        <li>
                          <p>
									<code class="command">man rndc.conf</code> — A comprehensive list of options available within the <code class="command">rndc</code> configuration file.
								</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-useful-websites"></a>17.7.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <a id="id2963442" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://www.isc.org/index.pl?/sw/bind/">http://www.isc.org/index.pl?/sw/bind/</a> — The home page of the BIND project containing information about current releases as well as a PDF version of the <em class="citetitle">BIND 9 Administrator Reference Manual</em>.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.redhat.com/mirrors/LDP/HOWTO/DNS-HOWTO.html">http://www.redhat.com/mirrors/LDP/HOWTO/DNS-HOWTO.html</a> — Covers the use of BIND as a resolving, caching nameserver and the configuration of various zone files necessary to serve as the primary nameserver for a domain.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-bind-related-books"></a>17.7.3. Related Books</h3>
                  </div>
                </div>
              </div>
              <a id="id2963508" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<em class="citetitle">DNS and BIND</em> by Paul Albitz and Cricket Liu; O'Reilly &amp; Associates — A popular reference that explains both common and esoteric BIND configuration options, as well as providing strategies for securing a DNS server.
					</p>
                  </li>
                  <li>
                    <p>
						<em class="citetitle">The Concise Guide to DNS and BIND</em> by Nicolai Langfeldt; Que — Looks at the connection between multiple network services and BIND, with an emphasis on task-oriented, technical topics.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-openssh"></a>Chapter 18. OpenSSH</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-ssh-intro">18.1. Features of SSH</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-ssh-intro-why">18.1.1. Why Use SSH?</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-ssh-version">18.2. SSH Protocol Versions</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-ssh-conn">18.3. Event Sequence of an SSH Connection</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-ssh-protocol-conn-transport">18.3.1. Transport Layer</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-ssh-protocol-authentication">18.3.2. Authentication</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-ssh-protocol-connection">18.3.3. Channels</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-openssh-server-config">18.4. Configuring an OpenSSH Server</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-ssh-requiring">18.4.1. Requiring SSH for Remote Connections</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-ssh-configfiles">18.5. OpenSSH Configuration Files</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-openssh-client-config">18.6. Configuring an OpenSSH Client</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-openssh-using-ssh">18.6.1. Using the <code class="command">ssh</code> Command</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-openssh-using-scp">18.6.2. Using the <code class="command">scp</code> Command</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-openssh-using-sftp">18.6.3. Using the <code class="command">sftp</code> Command</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-ssh-beyondshell">18.7. More Than a Secure Shell</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-ssh-beyondshell-x11">18.7.1. X11 Forwarding</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-ssh-beyondshell-tcpip">18.7.2. Port Forwarding</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-openssh-generate-keypairs">18.7.3. Generating Key Pairs</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-openssh-additional-resources">18.8. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-openssh-installed-docs">18.8.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-openssh-useful-websites">18.8.2. Useful Websites</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2950903" class="indexterm"></a>
          <p>
		<span class="trademark">SSH</span>™ (or <span class="emphasis"><em>S</em></span>ecure <span class="emphasis"><em>SH</em></span>ell) is a protocol which facilitates secure communications between two systems using a client/server architecture and allows users to log into server host systems remotely. Unlike other remote communication protocols, such as FTP or Telnet, SSH encrypts the login session, rendering the connection difficult for intruders to collect unencrypted passwords.
	</p>
          <p>
		SSH is designed to replace older, less secure terminal applications used to log into remote hosts, such as <code class="command">telnet</code> or <code class="command">rsh</code>. A related program called <code class="command">scp</code> replaces older programs designed to copy files between hosts, such as <code class="command">rcp</code>. Because these older applications do not encrypt passwords transmitted between the client and the server, avoid them whenever possible. Using secure methods to log into remote systems decreases the risks for both the client system and the remote host.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-ssh-intro"></a>18.1. Features of SSH</h2>
                </div>
              </div>
            </div>
            <a id="id2938996" class="indexterm"></a>
            <a id="id2919652" class="indexterm"></a>
            <p>
			The SSH protocol provides the following safeguards:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					After an initial connection, the client can verify that it is connecting to the same server it had connected to previously.
				</p>
                </li>
                <li>
                  <p>
					The client transmits its authentication information to the server using strong, 128-bit encryption.
				</p>
                </li>
                <li>
                  <p>
					All data sent and received during a session is transferred using 128-bit encryption, making intercepted transmissions extremely difficult to decrypt and read.
				</p>
                </li>
                <li>
                  <p>
					The client can forward X11<sup>[<a id="id2923382" href="#ftn.id2923382">5</a>]</sup> applications from the server. This technique, called <em class="firstterm">X11 forwarding</em>, provides a secure means to use graphical applications over a network.
				</p>
                </li>
              </ul>
            </div>
            <p>
			Because the SSH protocol encrypts everything it sends and receives, it can be used to secure otherwise insecure protocols. Using a technique called <em class="firstterm">port forwarding</em>, an SSH server can become a conduit to securing otherwise insecure protocols, like POP, and increasing overall system and data security.
		</p>
            <p>
			The OpenSSH server and client can also be configured to create a tunnel similar to a virtual private network for traffic between server and client machines.
		</p>
            <p>
			Finally, OpenSSH servers and clients can be configured to authenticate using the GSSAPI implementation of the Kerberos network authentication protocol. For more information on configuring Kerberos authentication services, refer to <a href="#ch-kerberos" title="43.6. Kerberos">Section 43.6, “Kerberos”</a>.
		</p>
            <p>
			Red Hat Enterprise Linux includes the general OpenSSH package (<code class="filename">openssh</code>) as well as the OpenSSH server (<code class="filename">openssh-server</code>) and client (<code class="filename">openssh-clients</code>) packages. Note, the OpenSSH packages require the OpenSSL package (<code class="filename">openssl</code>) which installs several important cryptographic libraries, enabling OpenSSH to provide encrypted communications.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-ssh-intro-why"></a>18.1.1. Why Use SSH?</h3>
                  </div>
                </div>
              </div>
              <a id="id2896603" class="indexterm"></a>
              <p>
				Nefarious computer users have a variety of tools at their disposal enabling them to disrupt, intercept, and re-route network traffic in an effort to gain access to a system. In general terms, these threats can be categorized as follows:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<span class="emphasis"><em>Interception of communication between two systems</em></span> — In this scenario, the attacker can be somewhere on the network between the communicating parties, copying any information passed between them. The attacker may intercept and keep the information, or alter the information and send it on to the intended recipient.
					</p>
                    <p>
						This attack can be mounted through the use of a packet sniffer — a common network utility.
					</p>
                  </li>
                  <li>
                    <p>
						<span class="emphasis"><em>Impersonation of a particular host</em></span> — Using this strategy, an attacker's system is configured to pose as the intended recipient of a transmission. If this strategy works, the user's system remains unaware that it is communicating with the wrong host.
					</p>
                    <p>
						This attack can be mounted through techniques known as DNS poisoning<sup>[<a id="id2906965" href="#ftn.id2906965">6</a>]</sup> or IP spoofing<sup>[<a id="id2936096" href="#ftn.id2936096">7</a>]</sup>.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				Both techniques intercept potentially sensitive information and, if the interception is made for hostile reasons, the results can be disastrous.
			</p>
              <p>
				If SSH is used for remote shell login and file copying, these security threats can be greatly diminished. This is because the SSH client and server use digital signatures to verify their identity. Additionally, all communication between the client and server systems is encrypted. Attempts to spoof the identity of either side of a communication does not work, since each packet is encrypted using a key known only by the local and remote systems.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-ssh-version"></a>18.2. SSH Protocol Versions</h2>
                </div>
              </div>
            </div>
            <a id="id2903216" class="indexterm"></a>
            <a id="id2941151" class="indexterm"></a>
            <p>
			The SSH protocol allows any client and server programs built to the protocol's specifications to communicate securely and to be used interchangeably.
		</p>
            <p>
			Two varieties of SSH (version 1 and version 2) currently exist. The OpenSSH suite under Red Hat Enterprise Linux uses SSH version 2 which has an enhanced key exchange algorithm not vulnerable to the exploit in version 1. However, the OpenSSH suite does support version 1 connections.
		</p>
            <div class="important">
              <h2>Important</h2>
              <p>
				It is recommended that only SSH version 2-compatible servers and clients are used whenever possible.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-ssh-conn"></a>18.3. Event Sequence of an SSH Connection</h2>
                </div>
              </div>
            </div>
            <a id="id2852904" class="indexterm"></a>
            <p>
			The following series of events help protect the integrity of SSH communication between two hosts.
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					A cryptographic handshake is made so that the client can verify that it is communicating with the correct server.
				</p>
                </li>
                <li>
                  <p>
					The transport layer of the connection between the client and remote host is encrypted using a symmetric cipher.
				</p>
                </li>
                <li>
                  <p>
					The client authenticates itself to the server.
				</p>
                </li>
                <li>
                  <p>
					The remote client interacts with the remote host over the encrypted connection.
				</p>
                </li>
              </ol>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-ssh-protocol-conn-transport"></a>18.3.1. Transport Layer</h3>
                  </div>
                </div>
              </div>
              <a id="id2867269" class="indexterm"></a>
              <p>
				The primary role of the transport layer is to facilitate safe and secure communication between the two hosts at the time of authentication and during subsequent communication. The transport layer accomplishes this by handling the encryption and decryption of data, and by providing integrity protection of data packets as they are sent and received. The transport layer also provides compression, speeding the transfer of information.
			</p>
              <p>
				Once an SSH client contacts a server, key information is exchanged so that the two systems can correctly construct the transport layer. The following steps occur during this exchange:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Keys are exchanged
					</p>
                  </li>
                  <li>
                    <p>
						The public key encryption algorithm is determined
					</p>
                  </li>
                  <li>
                    <p>
						The symmetric encryption algorithm is determined
					</p>
                  </li>
                  <li>
                    <p>
						The message authentication algorithm is determined
					</p>
                  </li>
                  <li>
                    <p>
						The hash algorithm is determined
					</p>
                  </li>
                </ul>
              </div>
              <p>
				During the key exchange, the server identifies itself to the client with a unique <em class="firstterm">host key</em>. If the client has never communicated with this particular server before, the server's host key is unknown to the client and it does not connect. OpenSSH gets around this problem by accepting the server's host key. This is done after the user is notified and has both accepted and verified the new host key. In subsequent connections, the server's host key is checked against the saved version on the client, providing confidence that the client is indeed communicating with the intended server. If, in the future, the host key no longer matches, the user must remove the client's saved version before a connection can occur.
			</p>
              <div class="caution">
                <h2>Caution</h2>
                <p>
					It is possible for an attacker to masquerade as an SSH server during the initial contact since the local system does not know the difference between the intended server and a false one set up by an attacker. To help prevent this, verify the integrity of a new SSH server by contacting the server administrator before connecting for the first time or in the event of a host key mismatch.
				</p>
              </div>
              <p>
				SSH is designed to work with almost any kind of public key algorithm or encoding format. After an initial key exchange creates a hash value used for exchanges and a shared secret value, the two systems immediately begin calculating new keys and algorithms to protect authentication and future data sent over the connection.
			</p>
              <p>
				After a certain amount of data has been transmitted using a given key and algorithm (the exact amount depends on the SSH implementation), another key exchange occurs, generating another set of hash values and a new shared secret value. Even if an attacker is able to determine the hash and shared secret value, this information is only useful for a limited period of time.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-ssh-protocol-authentication"></a>18.3.2. Authentication</h3>
                  </div>
                </div>
              </div>
              <a id="id2927785" class="indexterm"></a>
              <p>
				Once the transport layer has constructed a secure tunnel to pass information between the two systems, the server tells the client the different authentication methods supported, such as using a private key-encoded signature or typing a password. The client then tries to authenticate itself to the server using one of these supported methods.
			</p>
              <p>
				SSH servers and clients can be configured to allow different types of authentication, which gives each side the optimal amount of control. The server can decide which encryption methods it supports based on its security model, and the client can choose the order of authentication methods to attempt from the available options.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-ssh-protocol-connection"></a>18.3.3. Channels</h3>
                  </div>
                </div>
              </div>
              <a id="id2945387" class="indexterm"></a>
              <p>
				After a successful authentication over the SSH transport layer, multiple channels are opened via a technique called <em class="firstterm">multiplexing</em><sup>[<a id="id2945409" href="#ftn.id2945409">8</a>]</sup>. Each of these channels handles communication for different terminal sessions and for forwarded X11 sessions.
			</p>
              <p>
				Both clients and servers can create a new channel. Each channel is then assigned a different number on each end of the connection. When the client attempts to open a new channel, the clients sends the channel number along with the request. This information is stored by the server and is used to direct communication to that channel. This is done so that different types of sessions do not affect one another and so that when a given session ends, its channel can be closed without disrupting the primary SSH connection.
			</p>
              <p>
				Channels also support <em class="firstterm">flow-control</em>, which allows them to send and receive data in an orderly fashion. In this way, data is not sent over the channel until the client receives a message that the channel is open.
			</p>
              <p>
				The client and server negotiate the characteristics of each channel automatically, depending on the type of service the client requests and the way the user is connected to the network. This allows great flexibility in handling different types of remote connections without having to change the basic infrastructure of the protocol.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-openssh-server-config"></a>18.4. Configuring an OpenSSH Server</h2>
                </div>
              </div>
            </div>
            <a id="id2956076" class="indexterm"></a>
            <p>
			To run an OpenSSH server, you must first make sure that you have the proper RPM packages installed. The <code class="filename">openssh-server</code> package is required and is dependent on the <code class="filename">openssh</code> package.
		</p>
            <a id="id2956108" class="indexterm"></a>
            <p>
			The OpenSSH daemon uses the configuration file <code class="filename">/etc/ssh/sshd_config</code>. The default configuration file should be sufficient for most purposes. If you want to configure the daemon in ways not provided by the default <code class="filename">sshd_config</code>, read the <code class="command">sshd</code> man page for a list of the keywords that can be defined in the configuration file.
		</p>
            <a id="id2956152" class="indexterm"></a>
            <p>
			To start the OpenSSH service, use the command <code class="command">/sbin/service sshd start</code>. To stop the OpenSSH server, use the command <code class="command">/sbin/service sshd stop</code>. If you want the daemon to start automatically at boot time, refer to <a href="#ch-services" title="Chapter 16. Controlling Access to Services">Chapter 16, <i>Controlling Access to Services</i></a> for information on how to manage services.
		</p>
            <p>
			If you reinstall, the reinstalled system creates a new set of identification keys. Any clients who had connected to the system with any of the OpenSSH tools before the reinstall will see the following message:
		</p>
            <pre class="screen">
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY! 
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that the RSA host key has just been changed.
</pre>
            <p>
			If you want to keep the host keys generated for the system, backup the <code class="filename">/etc/ssh/ssh_host*key*</code> files and restore them after the reinstall. This process retains the system's identity, and when clients try to connect to the system after the reinstall, they will not receive the warning message.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-ssh-requiring"></a>18.4.1. Requiring SSH for Remote Connections</h3>
                  </div>
                </div>
              </div>
              <a id="id2957348" class="indexterm"></a>
              <a id="id2957361" class="indexterm"></a>
              <p>
				For SSH to be truly effective, using insecure connection protocols, such as Telnet and FTP, should be prohibited. Otherwise, a user's password may be protected using SSH for one session, only to be captured later while logging in using Telnet.
			</p>
              <p>
				Some services to disable include:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">telnet</code>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">rsh</code>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">rlogin</code>
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">vsftpd</code>
					</p>
                  </li>
                </ul>
              </div>
              <p>
				To disable insecure connection methods to the system, use the command line program <code class="command">chkconfig</code>, the ncurses-based program <span><strong class="application">/usr/sbin/ntsysv</strong></span>, or the <span><strong class="application">Services Configuration Tool</strong></span> (<code class="command">system-config-services</code>) graphical application. All of these tools require root level access.
			</p>
              <p>
				For more information on runlevels and configuring services with <code class="command">chkconfig</code>, <span><strong class="application">/usr/sbin/ntsysv</strong></span>, and the <span><strong class="application">Services Configuration Tool</strong></span>, refer to <a href="#ch-services" title="Chapter 16. Controlling Access to Services">Chapter 16, <i>Controlling Access to Services</i></a>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-ssh-configfiles"></a>18.5. OpenSSH Configuration Files</h2>
                </div>
              </div>
            </div>
            <a id="id2918494" class="indexterm"></a>
            <a id="id2937398" class="indexterm"></a>
            <p>
			OpenSSH has two different sets of configuration files: one for client programs (<code class="command">ssh</code>, <code class="command">scp</code>, and <code class="command">sftp</code>) and one for the server daemon (<code class="command">sshd</code>).
		</p>
            <p>
			System-wide SSH configuration information is stored in the <code class="filename">/etc/ssh/</code> directory:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<code class="filename">moduli</code> — Contains Diffie-Hellman groups used for the Diffie-Hellman key exchange which is critical for constructing a secure transport layer. When keys are exchanged at the beginning of an SSH session, a shared, secret value is created which cannot be determined by either party alone. This value is then used to provide host authentication.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">ssh_config</code> — The system-wide default SSH client configuration file. It is overridden if one is also present in the user's home directory (<code class="filename">~/.ssh/config</code>).
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">sshd_config</code> — The configuration file for the <code class="command">sshd</code> daemon.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">ssh_host_dsa_key</code> — The DSA private key used by the <code class="command">sshd</code> daemon.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">ssh_host_dsa_key.pub</code> — The DSA public key used by the <code class="command">sshd</code> daemon.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">ssh_host_key</code> — The RSA private key used by the <code class="command">sshd</code> daemon for version 1 of the SSH protocol.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">ssh_host_key.pub</code> — The RSA public key used by the <code class="command">sshd</code> daemon for version 1 of the SSH protocol.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">ssh_host_rsa_key</code> — The RSA private key used by the <code class="command">sshd</code> daemon for version 2 of the SSH protocol.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">ssh_host_rsa_key.pub</code> — The RSA public key used by the <code class="command">sshd</code> for version 2 of the SSH protocol.
				</p>
                </li>
              </ul>
            </div>
            <p>
			User-specific SSH configuration information is stored in the user's home directory within the <code class="filename">~/.ssh/</code> directory:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<code class="filename">authorized_keys</code> — This file holds a list of authorized public keys for servers. When the client connects to a server, the server authenticates the client by checking its signed public key stored within this file.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">id_dsa</code> — Contains the DSA private key of the user.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">id_dsa.pub</code> — The DSA public key of the user.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">id_rsa</code> — The RSA private key used by <code class="command">ssh</code> for version 2 of the SSH protocol.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">id_rsa.pub</code> — The RSA public key used by <code class="command">ssh</code> for version 2 of the SSH protocol
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">identity</code> — The RSA private key used by <code class="command">ssh</code> for version 1 of the SSH protocol.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">identity.pub</code> — The RSA public key used by <code class="command">ssh</code> for version 1 of the SSH protocol.
				</p>
                </li>
                <li>
                  <p>
					<code class="filename">known_hosts</code> — This file contains DSA host keys of SSH servers accessed by the user. This file is very important for ensuring that the SSH client is connecting the correct SSH server.
				</p>
                  <div class="important">
                    <h2>Important</h2>
                    <p>
						If an SSH server's host key has changed, the client notifies the user that the connection cannot proceed until the server's host key is deleted from the <code class="filename">known_hosts</code> file using a text editor. Before doing this, however, contact the system administrator of the SSH server to verify the server is not compromised.
					</p>
                  </div>
                </li>
              </ul>
            </div>
            <p>
			Refer to the <code class="command">ssh_config</code> and <code class="command">sshd_config</code> man pages for information concerning the various directives available in the SSH configuration files.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-openssh-client-config"></a>18.6. Configuring an OpenSSH Client</h2>
                </div>
              </div>
            </div>
            <a id="id2975000" class="indexterm"></a>
            <p>
			To connect to an OpenSSH server from a client machine, you must have the <code class="filename">openssh-clients</code> and <code class="filename">openssh</code> packages installed on the client machine.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-openssh-using-ssh"></a>18.6.1. Using the <code class="command">ssh</code> Command</h3>
                  </div>
                </div>
              </div>
              <a id="id2975045" class="indexterm"></a>
              <a id="id2886230" class="indexterm"></a>
              <p>
				The <code class="command">ssh</code> command is a secure replacement for the <code class="command">rlogin</code>, <code class="command">rsh</code>, and <code class="command">telnet</code> commands. It allows you to log in to a remote machine as well as execute commands on a remote machine.
			</p>
              <p>
				Logging in to a remote machine with <code class="command">ssh</code> is similar to using <code class="command">telnet</code>. To log in to a remote machine named penguin.example.net, type the following command at a shell prompt:
			</p>
              <pre class="screen">
ssh penguin.example.net
</pre>
              <p>
				The first time you <code class="command">ssh</code> to a remote machine, you will see a message similar to the following:
			</p>
              <pre class="screen">
The authenticity of host 'penguin.example.net' can't be established.
DSA key fingerprint is 94:68:3a:3a:bc:f3:9a:9b:01:5d:b3:07:38:e2:11:0c.
Are you sure you want to continue connecting (yes/no)?
</pre>
              <p>
				Type <strong class="userinput"><code>yes</code></strong> to continue. This will add the server to your list of known hosts (<code class="filename">~/.ssh/known_hosts</code>) as seen in the following message:
			</p>
              <pre class="screen">
Warning: Permanently added 'penguin.example.net' (RSA) to the list of known hosts.
</pre>
              <p>
				Next, you will see a prompt asking for your password for the remote machine. After entering your password, you will be at a shell prompt for the remote machine. If you do not specify a username the username that you are logged in as on the local client machine is passed to the remote machine. If you want to specify a different username, use the following command:
			</p>
              <pre class="screen">
ssh <em class="replaceable"><code>username</code></em>@penguin.example.net
</pre>
              <p>
				You can also use the syntax <code class="command">ssh -l <em class="replaceable"><code>username</code></em> penguin.example.net</code>.
			</p>
              <p>
				The <code class="command">ssh</code> command can be used to execute a command on the remote machine without logging in to a shell prompt. The syntax is <code class="command"> ssh <em class="replaceable"><code>hostname</code></em><em class="replaceable"><code>command</code></em></code>. For example, if you want to execute the command <code class="command">ls /usr/share/doc</code> on the remote machine penguin.example.net, type the following command at a shell prompt:
			</p>
              <pre class="screen">
ssh penguin.example.net ls /usr/share/doc
</pre>
              <p>
				After you enter the correct password, the contents of the remote directory <code class="filename">/usr/share/doc</code> will be displayed, and you will return to your local shell prompt.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-openssh-using-scp"></a>18.6.2. Using the <code class="command">scp</code> Command</h3>
                  </div>
                </div>
              </div>
              <a id="id3027593" class="indexterm"></a>
              <a id="id3027610" class="indexterm"></a>
              <a id="id2979902" class="indexterm"></a>
              <p>
				The <code class="command">scp</code> command can be used to transfer files between machines over a secure, encrypted connection. It is similar to <code class="command">rcp</code>.
			</p>
              <p>
				The general syntax to transfer a local file to a remote system is as follows:
			</p>
              <pre class="screen">
scp <em class="replaceable"><code>&lt;localfile&gt;</code></em><em class="replaceable"><code>username@tohostname:&lt;remotefile&gt;</code></em>
</pre>
              <p>
				The <em class="replaceable"><code>&lt;localfile&gt;</code></em> specifies the source including path to the file, such as <code class="filename">/var/log/maillog</code>. The <em class="replaceable"><code>&lt;remotefile&gt;</code></em> specifies the destination, which can be a new filename such as <code class="filename">/tmp/hostname-maillog</code>. For the remote system, if you do not have a preceding <code class="command">/</code>, the path will be relative to the home directory of <em class="replaceable"><code>username</code></em>, typically <code class="filename">/home/username/</code>.
			</p>
              <p>
				To transfer the local file <code class="filename">shadowman</code> to the home directory of your account on penguin.example.net, type the following at a shell prompt (replace <em class="replaceable"><code>username</code></em> with your username):
			</p>
              <pre class="screen">
scp shadowman <em class="replaceable"><code>username</code></em>@penguin.example.net:shadowman
</pre>
              <p>
				This will transfer the local file <code class="filename">shadowman</code> to <code class="filename">/home/<em class="replaceable"><code>username</code></em>/shadowman</code> on penguin.example.net. Alternately, you can leave off the final <code class="computeroutput">shadowman</code> in the <code class="command">scp</code> command.
			</p>
              <p>
				The general syntax to transfer a remote file to the local system is as follows:
			</p>
              <pre class="screen">
scp <em class="replaceable"><code>username@tohostname:&lt;remotefile&gt;</code></em><em class="replaceable"><code>&lt;newlocalfile&gt;</code></em>
</pre>
              <p>
				The <em class="replaceable"><code>&lt;remotefile&gt;</code></em> specifies the source including path, and <em class="replaceable"><code>&lt;newlocalfile&gt;</code></em> specifies the destination including path.
			</p>
              <p>
				Multiple files can be specified as the source files. For example, to transfer the contents of the directory <code class="filename">downloads/</code> to an existing directory called <code class="filename">uploads/</code> on the remote machine penguin.example.net, type the following at a shell prompt:
			</p>
              <pre class="screen">
scp downloads/* <em class="replaceable"><code>username</code></em>@penguin.example.net:uploads/
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-openssh-using-sftp"></a>18.6.3. Using the <code class="command">sftp</code> Command</h3>
                  </div>
                </div>
              </div>
              <a id="id3027442" class="indexterm"></a>
              <a id="id2967631" class="indexterm"></a>
              <p>
				The <code class="command">sftp</code> utility can be used to open a secure, interactive FTP session. It is similar to <code class="command">ftp</code> except that it uses a secure, encrypted connection. The general syntax is <code class="command">sftp<em class="replaceable"><code> username@hostname.com</code></em></code>. Once authenticated, you can use a set of commands similar to those used by FTP. Refer to the <code class="command">sftp</code> man page for a list of these commands. To read the man page, execute the command <code class="command">man sftp</code> at a shell prompt. The <code class="command">sftp</code> utility is only available in OpenSSH version 2.5.0p1 and higher.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-ssh-beyondshell"></a>18.7. More Than a Secure Shell</h2>
                </div>
              </div>
            </div>
            <p>
			A secure command line interface is just the beginning of the many ways SSH can be used. Given the proper amount of bandwidth, X11 sessions can be directed over an SSH channel. Or, by using TCP/IP forwarding, previously insecure port connections between systems can be mapped to specific SSH channels.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-ssh-beyondshell-x11"></a>18.7.1. X11 Forwarding</h3>
                  </div>
                </div>
              </div>
              <a id="id2967727" class="indexterm"></a>
              <p>
				Opening an X11 session over an SSH connection is as easy as connecting to the SSH server using the <code class="option">-Y</code> option and running an X program on a local machine.
			</p>
              <pre class="screen">
ssh -Y &lt;user&gt;@example.com
</pre>
              <p>
				When an X program is run from the secure shell prompt, the SSH client and server create a new secure channel, and the X program data is sent over that channel to the client machine transparently.
			</p>
              <p>
				X11 forwarding can be very useful. For example, X11 forwarding can be used to create a secure, interactive session of the <span><strong class="application">Printer Configuration Tool</strong></span>. To do this, connect to the server using <span><strong class="application">ssh</strong></span> and type:
			</p>
              <pre class="screen">
system-config-printer &amp;
</pre>
              <p>
				After supplying the root password for the server, the <span><strong class="application">Printer Configuration Tool</strong></span> appears and allows the remote user to safely configure printing on the remote system.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-ssh-beyondshell-tcpip"></a>18.7.2. Port Forwarding</h3>
                  </div>
                </div>
              </div>
              <a id="id2982691" class="indexterm"></a>
              <p>
				SSH can secure otherwise insecure TCP/IP protocols via port forwarding. When using this technique, the SSH server becomes an encrypted conduit to the SSH client.
			</p>
              <p>
				Port forwarding works by mapping a local port on the client to a remote port on the server. SSH can map any port from the server to any port on the client; port numbers do not need to match for this technique to work.
			</p>
              <p>
				To create a TCP/IP port forwarding channel which listens for connections on the localhost, use the following command:
			</p>
              <pre class="screen">
ssh -L <em class="replaceable"><code>local-port</code></em>:<em class="replaceable"><code>remote-hostname</code></em>:<em class="replaceable"><code>remote-port</code></em><em class="replaceable"><code>username</code></em>@<em class="replaceable"><code>hostname</code></em>
</pre>
              <div class="note">
                <h2>Note</h2>
                <p>
					Setting up port forwarding to listen on ports below 1024 requires root level access.
				</p>
              </div>
              <p>
				To check email on a server called <code class="command">mail.example.com</code> using POP3 through an encrypted connection, use the following command:
			</p>
              <pre class="screen">
ssh -L 1100:mail.example.com:110 mail.example.com
</pre>
              <p>
				Once the port forwarding channel is in place between the client machine and the mail server, direct a POP3 mail client to use port 1100 on the localhost to check for new mail. Any requests sent to port 1100 on the client system are directed securely to the <code class="command">mail.example.com</code> server.
			</p>
              <p>
				If <code class="command">mail.example.com</code> is not running an SSH server, but another machine on the same network is, SSH can still be used to secure part of the connection. However, a slightly different command is necessary:
			</p>
              <pre class="screen">
ssh -L 1100:mail.example.com:110 other.example.com
</pre>
              <p>
				In this example, POP3 requests from port 1100 on the client machine are forwarded through the SSH connection on port 22 to the SSH server, <code class="command">other.example.com</code>. Then, <code class="command">other.example.com</code> connects to port 110 on <code class="command">mail.example.com</code> to check for new mail. Note, when using this technique only the connection between the client system and <code class="command">other.example.com</code> SSH server is secure.
			</p>
              <p>
				Port forwarding can also be used to get information securely through network firewalls. If the firewall is configured to allow SSH traffic via its standard port (22) but blocks access to other ports, a connection between two hosts using the blocked ports is still possible by redirecting their communication over an established SSH connection.
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					Using port forwarding to forward connections in this manner allows any user on the client system to connect to that service. If the client system becomes compromised, the attacker also has access to forwarded services.
				</p>
                <p>
					System administrators concerned about port forwarding can disable this functionality on the server by specifying a <code class="command">No</code> parameter for the <code class="command">AllowTcpForwarding</code> line in <code class="filename">/etc/ssh/sshd_config</code> and restarting the <code class="command">sshd</code> service.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-openssh-generate-keypairs"></a>18.7.3. Generating Key Pairs</h3>
                  </div>
                </div>
              </div>
              <a id="id2967232" class="indexterm"></a>
              <p>
				If you do not want to enter your password every time you use <code class="command">ssh</code>, <code class="command">scp</code>, or <code class="command">sftp</code> to connect to a remote machine, you can generate an authorization key pair.
			</p>
              <p>
				Keys must be generated for each user. To generate keys for a user, use the following steps as the user who wants to connect to remote machines. If you complete the steps as root, only root will be able to use the keys.
			</p>
              <p>
				Starting with OpenSSH version 3.0, <code class="filename">~/.ssh/authorized_keys2</code>, <code class="filename">~/.ssh/known_hosts2</code>, and <code class="filename">/etc/ssh_known_hosts2</code> are obsolete. SSH Protocol 1 and 2 share the <code class="filename">~/.ssh/authorized_keys</code>, <code class="filename">~/.ssh/known_hosts</code>, and <code class="filename">/etc/ssh/ssh_known_hosts</code> files.
			</p>
              <p>
				Red Hat Enterprise Linux 5.2 uses SSH Protocol 2 and RSA keys by default.
			</p>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					If you reinstall and want to save your generated key pair, backup the <code class="filename">.ssh</code> directory in your home directory. After reinstalling, copy this directory back to your home directory. This process can be done for all users on your system, including root.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-openssh-rsa-keys-v2"></a>18.7.3.1. Generating an RSA Key Pair for Version 2</h4>
                    </div>
                  </div>
                </div>
                <a id="id2973509" class="indexterm"></a>
                <a id="id2973523" class="indexterm"></a>
                <p>
					Use the following steps to generate an RSA key pair for version 2 of the SSH protocol. This is the default starting with OpenSSH 2.9.
				</p>
                <a id="id2973546" class="indexterm"></a>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
							To generate an RSA key pair to work with version 2 of the protocol, type the following command at a shell prompt:
						</p>
                      <pre class="screen">
ssh-keygen -t rsa
</pre>
                      <p>
							Accept the default file location of <code class="filename">~/.ssh/id_rsa</code>. Enter a passphrase different from your account password and confirm it by entering it again.
						</p>
                      <p>
							The public key is written to <code class="filename">~/.ssh/id_rsa.pub</code>. The private key is written to <code class="filename">~/.ssh/id_rsa</code>. Never distribute your private key to anyone.
						</p>
                    </li>
                    <li>
                      <p>
							Change the permissions of the <code class="filename">.ssh</code> directory using the following command:
						</p>
                      <pre class="screen">
chmod 755 ~/.ssh
</pre>
                    </li>
                    <li>
                      <p>
							Copy the contents of <code class="filename">~/.ssh/id_rsa.pub</code> into the file <code class="filename">~/.ssh/authorized_keys</code> on the machine to which you want to connect. If the file <code class="filename">~/.ssh/authorized_keys</code> exist, append the contents of the file <code class="filename">~/.ssh/id_rsa.pub</code> to the file <code class="filename">~/.ssh/authorized_keys</code> on the other machine.
						</p>
                    </li>
                    <li>
                      <p>
							Change the permissions of the <code class="filename">authorized_keys</code> file using the following command:
						</p>
                      <pre class="screen">
chmod 644 ~/.ssh/authorized_keys
</pre>
                    </li>
                    <li>
                      <p>
							If you are running GNOME or are running in a graphical desktop with GTK2+ libraries installed, skip to <a href="#s3-openssh-ssh-agent-with-gnome" title="18.7.3.4. Configuring ssh-agent with a GUI">Section 18.7.3.4, “Configuring <code class="command">ssh-agent</code> with a GUI”</a>. If you are not running the X Window System, skip to <a href="#s3-openssh-config-ssh-agent" title="18.7.3.5. Configuring ssh-agent">Section 18.7.3.5, “Configuring <code class="command">ssh-agent</code>”</a>.
						</p>
                    </li>
                  </ol>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-openssh-dsa-key"></a>18.7.3.2. Generating a DSA Key Pair for Version 2</h4>
                    </div>
                  </div>
                </div>
                <a id="id2929848" class="indexterm"></a>
                <a id="id2929862" class="indexterm"></a>
                <p>
					Use the following steps to generate a DSA key pair for version 2 of the SSH Protocol.
				</p>
                <a id="id2929884" class="indexterm"></a>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
							To generate a DSA key pair to work with version 2 of the protocol, type the following command at a shell prompt:
						</p>
                      <pre class="screen">
ssh-keygen -t dsa
</pre>
                      <p>
							Accept the default file location of <code class="filename">~/.ssh/id_dsa</code>. Enter a passphrase different from your account password and confirm it by entering it again.
						</p>
                      <div class="tip">
                        <h2>Tip</h2>
                        <p>
								A passphrase is a string of words and characters used to authenticate a user. Passphrases differ from passwords in that you can use spaces or tabs in the passphrase. Passphrases are generally longer than passwords because they are usually phrases instead of a single word.
							</p>
                      </div>
                      <p>
							The public key is written to <code class="filename">~/.ssh/id_dsa.pub</code>. The private key is written to <code class="filename">~/.ssh/id_dsa</code>. It is important never to give anyone the private key.
						</p>
                    </li>
                    <li>
                      <p>
							Change the permissions of the <code class="filename">.ssh</code> directory with the following command:
						</p>
                      <pre class="screen">
chmod 755 ~/.ssh
</pre>
                    </li>
                    <li>
                      <p>
							Copy the contents of <code class="filename">~/.ssh/id_dsa.pub</code> into the file <code class="filename">~/.ssh/authorized_keys</code> on the machine to which you want to connect. If the file <code class="filename">~/.ssh/authorized_keys</code> exist, append the contents of the file <code class="filename">~/.ssh/id_dsa.pub</code> to the file <code class="filename">~/.ssh/authorized_keys</code> on the other machine.
						</p>
                    </li>
                    <li>
                      <p>
							Change the permissions of the <code class="filename">authorized_keys</code> file using the following command:
						</p>
                      <pre class="screen">
chmod 644 ~/.ssh/authorized_keys
</pre>
                    </li>
                    <li>
                      <p>
							If you are running GNOME or a graphical desktop environment with the GTK2+ libraries installed, skip to <a href="#s3-openssh-ssh-agent-with-gnome" title="18.7.3.4. Configuring ssh-agent with a GUI">Section 18.7.3.4, “Configuring <code class="command">ssh-agent</code> with a GUI”</a>. If you are not running the X Window System, skip to <a href="#s3-openssh-config-ssh-agent" title="18.7.3.5. Configuring ssh-agent">Section 18.7.3.5, “Configuring <code class="command">ssh-agent</code>”</a>.
						</p>
                    </li>
                  </ol>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-openssh-rsa-keys-v1"></a>18.7.3.3. Generating an RSA Key Pair for Version 1.3 and 1.5</h4>
                    </div>
                  </div>
                </div>
                <a id="id2969285" class="indexterm"></a>
                <a id="id2969298" class="indexterm"></a>
                <p>
					Use the following steps to generate an RSA key pair, which is used by version 1 of the SSH Protocol. If you are only connecting between systems that use DSA, you do not need an RSA version 1.3 or RSA version 1.5 key pair.
				</p>
                <a id="id2969323" class="indexterm"></a>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
							To generate an RSA (for version 1.3 and 1.5 protocol) key pair, type the following command at a shell prompt:
						</p>
                      <pre class="screen">
ssh-keygen -t rsa1
</pre>
                      <p>
							Accept the default file location (<code class="filename">~/.ssh/identity</code>). Enter a passphrase different from your account password. Confirm the passphrase by entering it again.
						</p>
                      <p>
							The public key is written to <code class="filename">~/.ssh/identity.pub</code>. The private key is written to <code class="filename">~/.ssh/identity</code>. Do not give anyone the private key.
						</p>
                    </li>
                    <li>
                      <p>
							Change the permissions of your <code class="filename">.ssh</code> directory and your key with the commands <code class="command">chmod 755 ~/.ssh</code> and <code class="command">chmod 644 ~/.ssh/identity.pub</code>.
						</p>
                    </li>
                    <li>
                      <p>
							Copy the contents of <code class="filename">~/.ssh/identity.pub</code> into the file <code class="filename">~/.ssh/authorized_keys</code> on the machine to which you wish to connect. If the file <code class="filename">~/.ssh/authorized_keys</code> does not exist, you can copy the file <code class="filename">~/.ssh/identity.pub</code> to the file <code class="filename">~/.ssh/authorized_keys</code> on the remote machine.
						</p>
                    </li>
                    <li>
                      <p>
							If you are running GNOME, skip to <a href="#s3-openssh-ssh-agent-with-gnome" title="18.7.3.4. Configuring ssh-agent with a GUI">Section 18.7.3.4, “Configuring <code class="command">ssh-agent</code> with a GUI”</a>. If you are not running GNOME, skip to <a href="#s3-openssh-config-ssh-agent" title="18.7.3.5. Configuring ssh-agent">Section 18.7.3.5, “Configuring <code class="command">ssh-agent</code>”</a>.
						</p>
                    </li>
                  </ol>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-openssh-ssh-agent-with-gnome"></a>18.7.3.4. Configuring <code class="command">ssh-agent</code> with a GUI</h4>
                    </div>
                  </div>
                </div>
                <a id="id2968423" class="indexterm"></a>
                <a id="id3035348" class="indexterm"></a>
                <p>
					The <code class="command">ssh-agent</code> utility can be used to save your passphrase so that you do not have to enter it each time you initiate an <code class="command">ssh</code> or <code class="command">scp</code> connection. If you are using GNOME, the <code class="command">gnome-ssh-askpass</code> package contains the application used to prompt you for your passphrase when you log in to GNOME and save it until you log out of GNOME. You will not have to enter your password or passphrase for any <code class="command">ssh</code> or <code class="command">scp</code> connection made during that GNOME session. If you are not using GNOME, refer to <a href="#s3-openssh-config-ssh-agent" title="18.7.3.5. Configuring ssh-agent">Section 18.7.3.5, “Configuring <code class="command">ssh-agent</code>”</a>.
				</p>
                <p>
					To save your passphrase during your GNOME session, follow the following steps:
				</p>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
							You will need to have the package <code class="filename">gnome-ssh-askpass</code> installed; you can use the command <code class="command">rpm -q openssh-askpass</code> to determine if it is installed or not. If it is not installed, install it from your Red Hat Enterprise Linux CD-ROM set, from a Red Hat FTP mirror site, or using Red Hat Network.
						</p>
                    </li>
                    <li>
                      <p>
							Select <span><strong class="guimenu">Main Menu Button</strong></span> (on the Panel) =&gt; <span><strong class="guimenuitem">Preferences</strong></span> =&gt; <span><strong class="guimenuitem">More Preferences</strong></span> =&gt; <span><strong class="guilabel">Sessions</strong></span>, and click on the <span><strong class="guilabel">Startup Programs</strong></span> tab. Click <span><strong class="guibutton">Add</strong></span> and enter <strong class="userinput"><code>/usr/bin/ssh-add</code></strong> in the <span><strong class="guilabel">Startup Command</strong></span> text area. Set it a priority to a number higher than any existing commands to ensure that it is executed last. A good priority number for <code class="command">ssh-add</code> is 70 or higher. The higher the priority number, the lower the priority. If you have other programs listed, this one should have the lowest priority. Click <span><strong class="guibutton">Close</strong></span> to exit the program.
						</p>
                    </li>
                    <li>
                      <p>
							Log out and then log back into GNOME; in other words, restart X. After GNOME is started, a dialog box will appear prompting you for your passphrase(s). Enter the passphrase requested. If you have both DSA and RSA key pairs configured, you will be prompted for both. From this point on, you should not be prompted for a password by <code class="command">ssh</code>, <code class="command">scp</code>, or <code class="command">sftp</code>.
						</p>
                    </li>
                  </ol>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-openssh-config-ssh-agent"></a>18.7.3.5. Configuring <code class="command">ssh-agent</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2968643" class="indexterm"></a>
                <a id="id2968659" class="indexterm"></a>
                <p>
					The <code class="command">ssh-agent</code> can be used to store your passphrase so that you do not have to enter it each time you make a <code class="command">ssh</code> or <code class="command">scp</code> connection. If you are not running the X Window System, follow these steps from a shell prompt. If you are running GNOME but you do not want to configure it to prompt you for your passphrase when you log in (refer to <a href="#s3-openssh-ssh-agent-with-gnome" title="18.7.3.4. Configuring ssh-agent with a GUI">Section 18.7.3.4, “Configuring <code class="command">ssh-agent</code> with a GUI”</a>), this procedure will work in a terminal window, such as an XTerm. If you are running X but not GNOME, this procedure will work in a terminal window. However, your passphrase will only be remembered for that terminal window; it is not a global setting.
				</p>
                <a id="id2968708" class="indexterm"></a>
                <a id="id2968724" class="indexterm"></a>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p><a id="nox"></a>
							At a shell prompt, type the following command:
						</p>
                      <pre class="screen">
exec /usr/bin/ssh-agent $SHELL
</pre>
                    </li>
                    <li>
                      <p>
							Then type the command:
						</p>
                      <pre class="screen">
ssh-add
</pre>
                      <p>
							and enter your passphrase(s). If you have more than one key pair configured, you will be prompted for each one.
						</p>
                    </li>
                    <li>
                      <p>
							When you log out, your passphrase(s) will be forgotten. You must execute these two commands each time you log in to a virtual console or open a terminal window.
						</p>
                    </li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-openssh-additional-resources"></a>18.8. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2951927" class="indexterm"></a>
            <a id="id2951940" class="indexterm"></a>
            <p>
			The OpenSSH and OpenSSL projects are in constant development, and the most up-to-date information for them is available from their websites. The man pages for OpenSSH and OpenSSL tools are also good sources of detailed information.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-openssh-installed-docs"></a>18.8.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						The <code class="command">ssh</code>, <code class="command">scp</code>, <code class="command">sftp</code>, <code class="command">sshd</code>, and <code class="command">ssh-keygen</code> man pages — These man pages include information on how to use these commands as well as all the parameters that can be used with them.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-openssh-useful-websites"></a>18.8.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://www.openssh.com/">http://www.openssh.com/</a> — The OpenSSH FAQ page, bug reports, mailing lists, project goals, and a more technical explanation of the security features.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.openssl.org/">http://www.openssl.org/</a> — The OpenSSL FAQ page, mailing lists, and a description of the project goal.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.freessh.org/">http://www.freessh.org/</a> — SSH client software for other platforms.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footnotes">
            <br />
            <hr width="100" align="left" />
            <div class="footnote">
              <p><sup>[<a id="ftn.id2923382" href="#id2923382">5</a>] </sup>
						X11 refers to the X11R7 windowing display system, traditionally referred to as the X Window System or X. Red Hat Enterprise Linux includes X11R7, an open source X Window System.
					</p>
            </div>
            <div class="footnote">
              <p><sup>[<a id="ftn.id2906965" href="#id2906965">6</a>] </sup>
							DNS poisoning occurs when an intruder cracks a DNS server, pointing client systems to a maliciously duplicated host.
						</p>
            </div>
            <div class="footnote">
              <p><sup>[<a id="ftn.id2936096" href="#id2936096">7</a>] </sup>
							IP spoofing occurs when an intruder sends network packets which falsely appear to be from a trusted host on the network.
						</p>
            </div>
            <div class="footnote">
              <p><sup>[<a id="ftn.id2945409" href="#id2945409">8</a>] </sup>
					A multiplexed connection consists of several signals being sent over a shared, common medium. With SSH, different channels are sent over a common secure connection.
				</p>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-nfs"></a>Chapter 19. Network File System (NFS)</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-how">19.1. How It Works</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-how-daemons">19.1.1. Required Services</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-client-config">19.2. NFS Client Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-fstab">19.2.1. Mounting NFS File Systems using <code class="filename">/etc/fstab</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-client-config-autofs">19.3. <code class="command">autofs</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-config-autofs-new">19.3.1. What's new in <code class="command">autofs</code> version 5?</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-config-autofs">19.3.2. <code class="command">autofs</code> Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-config-autofs-commontasks">19.3.3. <code class="command">autofs</code> Common Tasks</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-client-config-options">19.4. Common NFS Mount Options</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-start">19.5. Starting and Stopping NFS</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-server-export">19.6. NFS Server Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-export">19.6.1. Exporting or Sharing NFS File Systems</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-command-line">19.6.2. Command Line Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-hostname-formats">19.6.3. Hostname Formats</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-server-config-exports">19.7. The <code class="filename">/etc/exports</code> Configuration File</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-nfs-server-config-exportfs">19.7.1. The <code class="command">exportfs</code> Command</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-security">19.8. Securing NFS</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-security-hosts">19.8.1. Host Access</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-security-files">19.8.2. File Permissions</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s2-nfs-methodology-portmap">19.9. NFS and <code class="command">portmap</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s3-nfs-methodology-portmap-rpcinfo">19.9.1. Troubleshooting NFS and <code class="command">portmap</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-tcp">19.10. Using NFS over TCP</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-nfs-additional-resources">19.11. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-installed-documentation">19.11.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-useful-websites">19.11.2. Useful Websites</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-nfs-related-books">19.11.3. Related Books</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2954559" class="indexterm"></a>
          <a id="id2885484" class="indexterm"></a>
          <p>
		A <em class="firstterm">Network File System</em> (<em class="firstterm">NFS</em>) allows remote hosts to mount file systems over a network and interact with those file systems as though they are mounted locally. This enables system administrators to consolidate resources onto centralized servers on the network.
	</p>
          <p>
		This chapter focuses on fundamental NFS concepts and supplemental information.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-how"></a>19.1. How It Works</h2>
                </div>
              </div>
            </div>
            <a id="id2928441" class="indexterm"></a>
            <a id="id2934037" class="indexterm"></a>
            <a id="id2786838" class="indexterm"></a>
            <p>
			Currently, there are three versions of NFS. NFS version 2 (NFSv2) is older and is widely supported. NFS version 3 (NFSv3) has more features, including 64bit file handles, Safe Async writes and more robust error handling. NFS version 4 (NFSv4) works through firewalls and on the Internet, no longer requires portmapper, supports ACLs, and utilizes stateful operations. Red Hat Enterprise Linux supports NFSv2, NFSv3, and NFSv4 clients, and when mounting a file system via NFS, Red Hat Enterprise Linux uses NFSv3 by default, if the server supports it.
		</p>
            <p>
			All versions of NFS can use <em class="firstterm">Transmission Control Protocol</em> (<em class="firstterm">TCP</em>) running over an IP network, with NFSv4 requiring it. NFSv2 and NFSv3 can use the <em class="firstterm">User Datagram Protocol</em> (<em class="firstterm">UDP</em>) running over an IP network to provide a stateless network connection between the client and server.
		</p>
            <p>
			When using NFSv2 or NFSv3 with UDP, the stateless UDP connection under normal conditions has less Protocol overhead than TCP which can translate into better performance on very clean, non-congested networks. The NFS server sends the client a file handle after the client is authorized to access the shared volume. This file handle is an opaque object stored on the server's side and is passed along with RPC requests from the client. The NFS server can be restarted without affecting the clients and the cookie remains intact. However, because UDP is stateless, if the server goes down unexpectedly, UDP clients continue to saturate the network with requests for the server. For this reason, TCP is the preferred protocol when connecting to an NFS server.
		</p>
            <p>
			NFSv4 has no interaction with portmapper, <code class="command">rpc.mountd</code>, <code class="command">rpc.lockd</code>, and <code class="command">rpc.statd</code>, since protocol support has been incorporated into the v4 protocol. NFSv4 listens on the well known TCP port (2049) which eliminates the need for the <code class="command">portmapper</code> interaction. The mounting and locking protocols have been incorpated into the V4 protocol which eliminates the need for interaction with <code class="command">rpc.mountd</code> and <code class="command">rpc.lockd</code>.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				TCP is the default transport protocol for NFS under Red Hat Enterprise Linux. UDP can be used for compatibility purposes as needed, but is not recommended for wide usage.
			</p>
              <p>
				All the RPC/NFS daemon have a <code class="command">'-p'</code> command line option that can set the port, making firewall configuration easier.
			</p>
            </div>
            <p>
			After the client is granted access by TCP wrappers, the NFS server refers to its configuration file, <code class="filename">/etc/exports</code>, to determine whether the client is allowed to access any of the exported file systems. Once access is granted, all file and directory operations are available to the user.
		</p>
            <div class="important">
              <h2>Important</h2>
              <p>
				In order for NFS to work with a default installation of Red Hat Enterprise Linux with a firewall enabled, IPTables with the default TCP port 2049 must be configured. Without proper IPTables configuration, NFS does not function properly.
			</p>
              <p>
				The NFS initialization script and <code class="command">rpc.nfsd</code> process now allow binding to any specified port during system start up. However, this can be error prone if the port is unavailable or conflicts with another daemon.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-how-daemons"></a>19.1.1. Required Services</h3>
                  </div>
                </div>
              </div>
              <a id="id2926224" class="indexterm"></a>
              <p>
				Red Hat Enterprise Linux uses a combination of kernel-level support and daemon processes to provide NFS file sharing. All NFS versions rely on <em class="firstterm">Remote Procedure Calls</em> (<em class="firstterm">RPC</em>) between clients and servers. RPC services under Linux are controlled by the <code class="command">portmap</code> service. To share or mount NFS file systems, the following services work together, depending on which version of NFS is implemented:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">nfs</code> — (<code class="command">/sbin/service nfs start</code>) starts the NFS server and the appropriate RPC processes to service requests for shared NFS file systems.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">nfslock</code> — (<code class="command">/sbin/service nfslock start</code>) is a mandatory service that starts the appropriate RPC processes to allow NFS clients to lock files on the server.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">portmap</code> — accepts port reservations from local RPC services. These ports are then made available (or advertised) so the corresponding remote RPC services access them. <code class="command">portmap</code> responds to requests for RPC services and sets up connections to the requested RPC service. This is not used with NFSv4.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				The following RPC processes facilitate NFS services:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">rpc.mountd</code> — This process receives mount requests from NFS clients and verifies the requested file system is currently exported. This process is started automatically by the <code class="command">nfs</code> service and does not require user configuration. This is not used with NFSv4.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">rpc.nfsd</code> — Allows explicit NFS versions and protocols the server advertises to be defined. It works with the Linux kernel to meet the dynamic demands of NFS clients, such as providing server threads each time an NFS client connects. This process corresponds to the <code class="command">nfs</code> service.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">rpc.lockd</code> — allows NFS clients to lock files on the server. If <code class="command">rpc.lockd</code> is not started, file locking will fail. <code class="command">rpc.lockd</code> implements the <em class="firstterm">Network Lock Manager (NLM)</em> protocol. This process corresponds to the <code class="command">nfslock</code> service. This is not used with NFSv4.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">rpc.statd</code> — This process implements the <em class="firstterm">Network Status Monitor (NSM)</em> RPC protocol which notifies NFS clients when an NFS server is restarted without being gracefully brought down. This process is started automatically by the <code class="command">nfslock</code> service and does not require user configuration. This is not used with NFSv4.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">rpc.rquotad</code> — This process provides user quota information for remote users. This process is started automatically by the <code class="command">nfs</code> service and does not require user configuration.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">rpc.idmapd</code> — This process provides NFSv4 client and server upcalls which map between on-the-wire NFSv4 names (which are strings in the form of user@domain) and local UIDs and GIDs. For <code class="command">idmapd</code> to function with NFSv4, the <code class="filename">/etc/idmapd.conf</code> must be configured. This service is required for use with NFSv4.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-client-config"></a>19.2. NFS Client Configuration</h2>
                </div>
              </div>
            </div>
            <a id="id2867766" class="indexterm"></a>
            <p>
			NFS shares are mounted on the client side using the <code class="command">mount</code> command. The format of the command is as follows:
		</p>
            <pre class="screen"><code class="command">mount -t <em class="replaceable"><code>&lt;nfs-type&gt;</code></em> -o <em class="replaceable"><code>&lt;options&gt;</code></em><em class="replaceable"><code>&lt;host&gt;</code></em>:<em class="replaceable"><code>&lt;/remote/export&gt;</code></em><em class="replaceable"><code>&lt;/local/directory&gt;</code></em></code>
</pre>
            <p>
			Replace <em class="replaceable"><code>&lt;nfs-type&gt;</code></em> with either <code class="command">nfs</code> for NFSv2 or NFSv3 servers, or <code class="command">nfs4</code> for NFSv4 servers. Replace <em class="replaceable"><code>&lt;options&gt;</code></em> with a comma separated list of options for the NFS file system (refer to <a href="#s1-nfs-client-config-options" title="19.4. Common NFS Mount Options">Section 19.4, “Common NFS Mount Options”</a> for details). Replace <em class="replaceable"><code>&lt;host&gt;</code></em> with the remote host, <em class="replaceable"><code>&lt;/remote/export&gt;</code></em> with the remote directory being mounted, and <em class="replaceable"><code>&lt;/local/directory&gt;</code></em> with the local directory where the remote file system is to be mounted.
		</p>
            <p>
			Refer to the <code class="command">mount</code> man page for more details.
		</p>
            <p>
			If accessing an NFS share by manually issuing the <code class="command">mount</code> command, the file system must be remounted manually after the system is rebooted. Red Hat Enterprise Linux offers two methods for mounting remote file systems automatically at boot time: the <code class="filename">/etc/fstab</code> file or the <code class="command">autofs</code> service.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-fstab"></a>19.2.1. Mounting NFS File Systems using <code class="filename">/etc/fstab</code></h3>
                  </div>
                </div>
              </div>
              <p>
				<a id="id2878612" class="indexterm"></a>
				<a id="id2906393" class="indexterm"></a>
				 An alternate way to mount an NFS share from another machine is to add a line to the <code class="filename">/etc/fstab</code> file. The line must state the hostname of the NFS server, the directory on the server being exported, and the directory on the local machine where the NFS share is to be mounted. You must be root to modify the <code class="filename">/etc/fstab</code> file.
			</p>
              <p>
				The general syntax for the line in <code class="filename">/etc/fstab</code> is as follows:
			</p>
              <pre class="screen"><code class="computeroutput">server:/usr/local/pub /pub nfs rsize=8192,wsize=8192,timeo=14,intr</code>
</pre>
              <p>
				The mount point <code class="filename">/pub</code> must exist on the client machine before this command can be executed. After adding this line to <code class="filename">/etc/fstab</code> on the client system, type the command <code class="filename">mount /pub</code> at a shell prompt, and the mount point <code class="filename">/pub</code> is mounted from the server.
			</p>
              <p>
				The <code class="filename">/etc/fstab</code> file is referenced by the <code class="command">netfs</code> service at boot time, so lines referencing NFS shares have the same effect as manually typing the <code class="command">mount</code> command during the boot process.
			</p>
              <p>
				A sample <code class="filename">/etc/fstab</code> line to mount an NFS export looks like the following example:
			</p>
              <pre class="screen"><code class="command"><em class="replaceable"><code>&lt;server&gt;</code></em>:<em class="replaceable"><code>&lt;/remote/export&gt;</code></em><em class="replaceable"><code>&lt;/local/directory&gt;</code></em><em class="replaceable"><code>&lt;nfs-type&gt;</code></em><em class="replaceable"><code>&lt;options&gt;</code></em> 0 0</code>
</pre>
              <p>
				Replace <code class="option"><em class="replaceable"><code>&lt;server&gt;</code></em></code> with the hostname, IP address, or fully qualified domain name of the server exporting the file system.
			</p>
              <p>
				Replace <code class="option"><em class="replaceable"><code>&lt;/remote/export&gt;</code></em></code> with the path to the exported directory.
			</p>
              <p>
				Replace <code class="option"><em class="replaceable"><code>&lt;/local/directory&gt;</code></em></code> with the local file system on which the exported directory is mounted. This mount point must exist before <code class="filename">/etc/fstab</code> is read or the mount fails.
			</p>
              <p>
				Replace <code class="option"><em class="replaceable"><code>&lt;nfs-type&gt;</code></em></code> with either <code class="command">nfs</code> for NFSv2 or NFSv3 servers, or <code class="command">nfs4</code> for NFSv4 servers.
			</p>
              <p>
				Replace <em class="replaceable"><code>&lt;options&gt;</code></em> with a comma separated list of options for the NFS file system (refer to <a href="#s1-nfs-client-config-options" title="19.4. Common NFS Mount Options">Section 19.4, “Common NFS Mount Options”</a> for details). Refer to the <code class="filename">fstab</code> man page for additional information.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-client-config-autofs"></a>19.3. <code class="command">autofs</code></h2>
                </div>
              </div>
            </div>
            <a id="id2913832" class="indexterm"></a>
            <a id="id2887334" class="indexterm"></a>
            <p>
			One drawback to using <code class="filename">/etc/fstab</code> is that, regardless of how infrequently a user accesses the NFS mounted file system, the system must dedicate resources to keep the mounted file system in place. This is not a problem with one or two mounts, but when the system is maintaining mounts to many systems at one time, overall system performance can be affected. An alternative to <code class="filename">/etc/fstab</code> is to use the kernel-based automount utility. An automounter consists of two components. One is a kernel module that implements a file system, while the other is a user-space daemon that performs all of the other functions. The automount utility can mount and unmount NFS file systems automatically (on demand mounting) therefore saving system resources. The automount utility can be used to mount other file systems including AFS, SMBFS, CIFS and local file systems.
		</p>
            <p>
			<code class="command">autofs</code> uses <code class="filename">/etc/auto.master</code> (master map) as its default primary configuration file. This can be changed to use another supported network source and name using the autofs configuration (in <code class="filename">/etc/sysconfig/autofs</code>) in conjunction with the Name Service Switch mechanism. An instance of the version 4 daemon was run for each mount point configured in the master map and so it could be run manually from the command line for any given mount point. This is not possible with version 5 because it uses a single daemon to manage all configured mount points, so all automounts must be configured in the master map. This is in line with the usual requirements of other industry standard automounters. Mount point, hostname, exported directory, and options can all be specified in a set of files (or other supported network sources) rather than configuring them manually for each host. Please ensure that you have the <code class="command">autofs</code> package installed if you wish to use this service.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-config-autofs-new"></a>19.3.1. What's new in <code class="command">autofs</code> version 5?</h3>
                  </div>
                </div>
              </div>
              <a id="id2786462" class="indexterm"></a>
              <p>
				</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">Direct map support</span>
                  </dt>
                  <dd>
                    <p>
								Autofs direct maps provide a mechanism to automatically mount file systems at arbitrary points in the file system hierarchy. A direct map is denoted by a mount point of "/-" in the master map. Entries in a direct map contain an absolute path name as a key (instead of the relative path names used in indirect maps).
							</p>
                  </dd>
                  <dt>
                    <span class="term">Lazy mount and unmount support </span>
                  </dt>
                  <dd>
                    <p>
								Multimount map entries describe a hierarchy of mount points under a single key. A good example of this is the "-hosts" map, commonly used for automounting all exports from a host under "<code class="filename">/net/&lt;host&gt;</code>" as a multi-mount map entry. When using the "<code class="filename">-hosts</code>" map, an '<code class="command">ls</code>' of "<code class="command">/net/&lt;host&gt;</code>" will mount autofs trigger mounts for each export from <code class="command">&lt;host&gt;</code> and mount and expire them as they are accessed. This can greatly reduce the number of active mounts needed when accessing a server with a large number of exports.
							</p>
                  </dd>
                  <dt>
                    <span class="term">Enhanced LDAP support</span>
                  </dt>
                  <dd>
                    <p>
								The Lightweight Directory Access Protocol, or LDAP, support in autofs version 5 has been enhanced in several ways with respect to autofs version 4. The autofs configuration file (<code class="filename">/etc/sysconfig/autofs</code>) provides a mechanism to specify the autofs schema that a site implements, thus precluding the need to determine this via trial and error in the application itself. In addition, authenticated binds to the LDAP server are now supported, using most mechanisms supported by the common LDAP server implementations. A new configuration file has been added for this support: <code class="filename">/etc/autofs_ldap_auth.conf</code>. The default configuration file is self-documenting, and uses an XML format.
							</p>
                  </dd>
                  <dt>
                    <span class="term">Proper use of the Name Service Switch (<code class="command">nsswitch</code>) configuration.</span>
                  </dt>
                  <dd>
                    <p>
								The Name Service Switch configuration file exists to provide a means of determining from where specific configuration data comes. The reason for this configuration is to allow administrators the flexibility of using the back-end database of choice, while maintaining a uniform software interface to access the data. While the version 4 automounter is becoming increasingly better at handling the name service switch configuration, it is still not complete. Autofs version 5, on the other hand, is a complete implementation. See the manual page for nsswitch.conf for more information on the supported syntax of this file. Please note that not all nss databases are valid map sources and the parser will reject ones that are invalid. Valid sources are files, yp, nis, nisplus, ldap and hesiod.
							</p>
                  </dd>
                  <dt>
                    <span class="term">Multiple master map entries per autofs mount point</span>
                  </dt>
                  <dd>
                    <p>
								One thing that is frequently used but not yet mentioned is the handling of multiple master map entries for the direct mount point "/-". The map keys for each entry are merged and behave as one map.
							</p>
                    <p>
								An example is seen in the connectathon test maps for the direct mounts below:
							</p>
                    <pre class="screen">
/- /tmp/auto_dcthon
/- /tmp/auto_test3_direct
/- /tmp/auto_test4_direct
</pre>
                  </dd>
                </dl>
              </div>
              <p>
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-config-autofs"></a>19.3.2. <code class="command">autofs</code> Configuration</h3>
                  </div>
                </div>
              </div>
              <a id="id2982878" class="indexterm"></a>
              <a id="id2982899" class="indexterm"></a>
              <p>
				The primary configuration file for the automounter is <code class="filename">/etc/auto.master</code>, also referred to as the master map which may be changed as described in the introduction section above. The master map lists autofs-controlled mount points on the system, and their corresponding configuration files or network sources known as automount maps. The format of the master map is as follows:
			</p>
              <pre class="screen">&lt;mount-point&gt; &lt;map-name&gt; &lt;options&gt;
</pre>
              <p>
				where:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">mount-point</code> is the autofs mount point e.g <code class="filename">/home</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">map-name</code> is the name of a map source which contains a list of mount points, and the file system location from which those mount points should be mounted. The syntax for a map entry is described below.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">options</code> if supplied, will apply to all entries in the given map provided they don't themselves have options specified. This behavior is different from autofs version 4 where the options where cumulative. This has been changed to meet our primary goal of mixed environment compatibility.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				The following is a sample <code class="filename">/etc/auto.master</code> file:
			</p>
              <pre class="screen"><code class="command"> $ cat /etc/auto.master /home /etc/auto.misc</code>
</pre>
              <p>
				The general format of maps is similar to the master map, however the "options" appear between the mount point and the location instead of at the end of the entry as in the master map:
			</p>
              <pre class="screen"><code class="command"> &lt;mount-point&gt; [&lt;options&gt;] &lt;location&gt;</code>
</pre>
              <p>
				where:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">&lt;mount-point&gt;</code> is the autofs mount point. This can be a single directory name for an indirect mount or the full path of the mount point for direct mounts. Each direct and indirect map entry key (<code class="command">&lt;mount-point&gt;</code> above) may be followed by a space separated list of offset directories (sub directory names each beginning with a "/") making them what is known as a mutli-mount entry.
					</p>
                  </li>
                  <li>
                    <p>
						&lt;options&gt; if supplied, are the mount options for the map entries that do not specify their own options.
					</p>
                  </li>
                  <li>
                    <p>
						&lt;location&gt; is the file system location such as a local file system path (preceded with the Sun map format escape character ":" for map names beginning with "/"), an NFS file system or other valid file system location.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				The following is a sample map file:
			</p>
              <pre class="screen"><code class="command"> $ cat /etc/auto.misc payroll -fstype=nfs personnel:/dev/hda3 sales -fstype=ext3 :/dev/hda4</code>
</pre>
              <p>
				The first column in a map file indicates the autofs mount point (<code class="filename">sales</code> and <code class="filename">payroll</code> from the server called <code class="filename">personnel</code>). The second column indicates the options for the autofs mount while the third column indicates the source of the mount. Following the above configuration, the autofs mount points will be <code class="filename">/home/payroll</code> and <code class="filename">/home/sales</code>. The <code class="command">-fstype=</code> option is often omitted and is generally not needed for correct operation.
			</p>
              <p>
				The automounter will create the directories if they do not exist. If the directories exist before the automounter was started, the automounter will not remove them when it exits. You can start or restart the automount daemon by issuing the following command:
			</p>
              <pre class="screen"><code class="command">$/sbin/service autofs start</code> 
or <code class="command">$/sbin/service autofs restart</code>
</pre>
              <p>
				Using the above configuration, if a process requires access to an autofs unmounted directory such as <code class="filename">/home/payroll/2006/July.sxc</code>, the automount daemon automatically mounts the directory. If a timeout is specified, the directory will automatically be unmounted if the directory is not accessed for the timeout period.
			</p>
              <p>
				You can view the status of the automount daemon by issuing the following command in your terminal:
			</p>
              <pre class="screen"><code class="command"> $/sbin/service/autofs status</code>
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-config-autofs-commontasks"></a>19.3.3. <code class="command">autofs</code> Common Tasks</h3>
                  </div>
                </div>
              </div>
              <a id="id2971056" class="indexterm"></a>
              <a id="id2971076" class="indexterm"></a>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-nfs-config-autofs-augmenting"></a>19.3.3.1. Overriding or augmenting site configuration files</h4>
                    </div>
                  </div>
                </div>
                <a id="id2971102" class="indexterm"></a>
                <p>
					It can be useful to override site defaults for a specific mount point on a client system. For example, assuming that the automounter maps are stored in NIS and the <code class="filename">/etc/nsswitch.conf</code> file has the following directive:
				</p>
                <pre class="screen">automount:  files nis
</pre>
                <p>
					and the NIS <code class="filename">auto.master</code> map file contains the following:
				</p>
                <pre class="screen">/home auto.home
</pre>
                <p>
					Also assume the NIS <code class="filename">auto.home</code> map contains the following:
				</p>
                <pre class="screen">beth      fileserver.example.com:/export/home/beth
joe      fileserver.example.com:/export/home/joe
*      fileserver.example.com:/export/home/&amp;
</pre>
                <p>
					and the file map <code class="filename">/etc/auto.home</code> does not exist.
				</p>
                <p>
					For the above example, lets assume that the client system needs to mount home directories from a different server. In this case, the client will need to use the following <code class="filename">/etc/auto.master</code> map:
				</p>
                <pre class="screen">/home /etc/auto.home2
+auto.master
</pre>
                <p>
					And the <code class="filename">/etc/auto.home2</code> map contains the entry:
				</p>
                <pre class="screen">*   labserver.example.com:/export/home/&amp;
</pre>
                <p>
					Because only the first occurrence of a mount point is processed, <code class="filename">/home</code> will contain the contents of <code class="filename">/etc/auto.home2</code> instead of the NIS <code class="filename">auto.home</code> map.
				</p>
                <p>
					Alternatively, if you just want to augment the site-wide 
</p>
                <pre class="screen">auto.home
</pre>
                <p>
					 map with a few entries, create a <code class="filename">/etc/auto.home</code> file map, and in it put your new entries and at the end, include the NIS auto.home map. Then the <code class="filename">/etc/auto.home</code> file map might look similar to:
				</p>
                <pre class="screen">mydir someserver:/export/mydir
+auto.home
</pre>
                <p>
					Given the NIS <code class="filename">auto.home</code> map listed above, an <code class="command">ls</code> of <code class="filename">/home</code> would now give:
				</p>
                <pre class="screen"><code class="command">$ ls /home</code>
beth	joe	mydir
</pre>
                <p>
					This last example works as expected because <code class="filename">autofs</code> knows not to include the contents of a file map of the same name as the one it is reading and so moves on to the next map source in the <code class="filename">nsswitch</code> configuration.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-nfs-config-autofs-LDAP"></a>19.3.3.2. Using LDAP to Store Automounter Maps</h4>
                    </div>
                  </div>
                </div>
                <a id="id2883301" class="indexterm"></a>
                <p>
					LDAP client libraries must be installed on all systems which are to retrieve automounter maps from LDAP. On RHEL 5, the <code class="filename">openldap</code> package should be installed automatically as a dependency of the <code class="filename">automounter</code>. To configure LDAP access, modify <code class="filename">/etc/openldap/ldap.conf</code>. Ensure that BASE and URI are set appropriately for your site. Please also ensure that the schema is set in the configuration.
				</p>
                <p>
					The most recently established schema for storing automount maps in LDAP is described by <code class="filename">rfc2307bis</code>. To use this schema it is necessary to set it in the <code class="filename">autofs</code> configuration (<code class="filename">/etc/sysconfig/autofs</code>) by removing the comment characters from the schema definition. For example:
				</p>
                <pre class="screen">
DEFAULT_MAP_OBJECT_CLASS="automountMap"
DEFAULT_ENTRY_OBJECT_CLASS="automount"
DEFAULT_MAP_ATTRIBUTE="automountMapName"
DEFAULT_ENTRY_ATTRIBUTE="automountKey"
DEFAULT_VALUE_ATTRIBUTE="automountInformation"
</pre>
                <p>
					Ensure that these are the only schema entries not commented in the configuration. Please also note that the <code class="command">automountKey</code> replaces the <code class="command">cn</code> attribute in the <code class="filename">rfc2307bis</code> schema. An <code class="filename">LDIF</code> of a sample configuration is described below:
				</p>
                <pre class="screen">
# extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope subtree
# filter: (&amp;(objectclass=automountMap)(automountMapName=auto.master))
# requesting: ALL
#

# auto.master, example.com
dn: automountMapName=auto.master,dc=example,dc=com
objectClass: top
objectClass: automountMap
automountMapName: auto.master

# extended LDIF
#
# LDAPv3
# base &lt;automountMapName=auto.master,dc=example,dc=com&gt; with scope subtree
# filter: (objectclass=automount)
# requesting: ALL
#

# /home, auto.master, example.com
dn: automountMapName=auto.master,dc=example,dc=com
objectClass: automount
cn: /home

automountKey: /home
automountInformation: auto.home

# extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope subtree
# filter: (&amp;(objectclass=automountMap)(automountMapName=auto.home))
# requesting: ALL
#

# auto.home, example.com
dn: automountMapName=auto.home,dc=example,dc=com
objectClass: automountMap
automountMapName: auto.home

# extended LDIF
#
# LDAPv3
# base &lt;automountMapName=auto.home,dc=example,dc=com&gt; with scope subtree
# filter: (objectclass=automount)
# requesting: ALL
#

# foo, auto.home, example.com
dn: automountKey=foo,automountMapName=auto.home,dc=example,dc=com
objectClass: automount
automountKey: foo
automountInformation: filer.example.com:/export/foo

# /, auto.home, example.com
dn: automountKey=/,automountMapName=auto.home,dc=example,dc=com
objectClass: automount
automountKey: /
automountInformation: filer.example.com:/export/&amp;
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-nfs-config-autofs-adapting"></a>19.3.3.3. Adapting Autofs v4 Maps To Autofs v5</h4>
                    </div>
                  </div>
                </div>
                <a id="id2959522" class="indexterm"></a>
                <p class="formalpara">
                  <a id="v4-multimap-entities"></a>
                </p>
                <h5 class="formalpara">v4 Multi-map entries</h5>
                <p class="formalpara">
						Autofs version 4 introduced the notion of a multi-map entry in the master map. A multi-map entry is of the form:
					</p>
                <pre class="screen">&lt;mount-point&gt; &lt;maptype1&gt; &lt;mapname1&gt; &lt;options1&gt; -- &lt;maptype2&gt; &lt;mapname2&gt; &lt;options2&gt; -- ...
</pre>
                <p>
					Any number of maps can be combined into a single map in this manner. This feature is no longer present in v5. This is because Version 5 supports included maps which can be used to attain the same results. Consider the following multi-map example: <code class="command">/home file /etc/auto.home -- nis auto.home</code>
				</p>
                <p>
					This can be replaced by the following configuration for v5:
				</p>
                <p>
					<code class="filename">/etc/nsswitch.conf</code> must list: 
</p>
                <pre class="screen">automount: files nis
</pre>
                <p>
				</p>
                <p>
					<code class="filename">/etc/auto.master</code> should contain: 
</p>
                <pre class="screen">/home  auto.home
</pre>
                <p>
				</p>
                <p>
					<code class="filename">/etc/auto.home</code> should contain: 
</p>
                <pre class="screen">&lt;entries for the home directory&gt;
+auto.home
</pre>
                <p>
				</p>
                <p>
					In this way, the entries from <code class="filename">/etc/auto.home</code> and the nis <code class="filename">auto.home</code> map are combined.
				</p>
                <p class="formalpara">
                  <a id="multiple-master"></a>
                </p>
                <h5 class="formalpara">Multiple master maps</h5>
                <p class="formalpara">
						In autofs version 4, it is possible to merge the contents of master maps from each source, such as files, nis, hesiod, and LDAP. The version 4 automounter looks for a master map for each of the sources listed in <code class="filename">/etc/nsswitch.conf</code>. The map is read if it exists and its contents are merged into one large <code class="filename">auto.master</code> map.
					</p>
                <p>
					In version 5, this is no longer the behaviour. Only the first master map found from the list of sources in <code class="filename">nsswitch.conf</code> is consulted. If it is desirable to merge the contents of multiple master maps, included maps can be used. Consider the following example:
				</p>
                <p>
</p>
                <pre class="screen">/etc/nsswitch.conf:
automount: files nis
</pre>
                <p>
				</p>
                <p>
</p>
                <pre class="screen">/etc/auto.master:
/home  /etc/auto.home
+auto.master
</pre>
                <p>
				</p>
                <p>
					The above configuration will merge the contents of the file-based <code class="filename">auto.master</code> and the NIS-based <code class="filename">auto.master</code>. However, because included map entries are only allowed in file maps, there is no way to include both an NIS <code class="filename">auto.master</code> and an LDAP <code class="filename">auto.master</code>.
				</p>
                <p>
					This limitation can be overcome by creating a master maps that have a different name in the source. In the example above if we had an LDAP master map named <code class="filename">auto.master.ldap</code> we could also add <code class="filename">"+auto.master.ldap"</code> to the file based master map and provided that "<code class="filename">ldap</code>" is listed as a source in our nsswitch configuration it would also be included.
				</p>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-client-config-options"></a>19.4. Common NFS Mount Options</h2>
                </div>
              </div>
            </div>
            <a id="id2961555" class="indexterm"></a>
            <p>
			Beyond mounting a file system via NFS on a remote host, other options can be specified at the time of the mount to make it easier to use. These options can be used with manual <code class="command">mount</code> commands, <code class="filename">/etc/fstab</code> settings, and <code class="command">autofs</code>.
		</p>
            <p>
			The following are options commonly used for NFS mounts:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<code class="option">fsid=num</code> — Forces the file handle and file attributes settings on the wire to be <code class="command"><em class="replaceable"><code>num</code></em></code>, instead of a number derived from the major and minor number of the block device on the mounted file system. The value <code class="command">0</code> has special meaning when used with NFSv4. NFSv4 has a concept of a root of the overall exported file system. The export point exported with <code class="option">fsid=0</code> is used as this root.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">hard</code> or <code class="option">soft</code> — Specifies whether the program using a file via an NFS connection should stop and wait (<code class="option">hard</code>) for the server to come back online, if the host serving the exported file system is unavailable, or if it should report an error (<code class="option">soft</code>).
				</p>
                  <p>
					If <code class="option">hard</code> is specified, the user cannot terminate the process waiting for the NFS communication to resume unless the <code class="option">intr</code> option is also specified.
				</p>
                  <p>
					If <code class="option">soft</code> is specified, the user can set an additional <code class="option">timeo=<em class="replaceable"><code>&lt;value&gt;</code></em></code> option, where <code class="option"><em class="replaceable"><code>&lt;value&gt;</code></em></code> specifies the number of seconds to pass before the error is reported.
				</p>
                </li>
              </ul>
            </div>
            <p>
			</p>
            <div class="note">
              <h2>Note</h2>
              <p>
					Using soft mounts is not recommended as they can generate I/O errors in very congested networks or when using a very busy server.
				</p>
            </div>
            <p>
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<code class="option">intr</code> — Allows NFS requests to be interrupted if the server goes down or cannot be reached.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">nfsvers=2</code> or <code class="option">nfsvers=3</code> — Specifies which version of the NFS protocol to use. This is useful for hosts that run multiple NFS servers. If no version is specified, NFS uses the highest supported version by the kernel and <code class="command">mount</code> command. This option is not supported with NFSv4 and should not be used.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">noacl</code> — Turns off all ACL processing. This may be needed when interfacing with older versions of Red Hat Enterprise Linux, Red Hat Linux, or Solaris, since the most recent ACL technology is not compatible with older systems.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">nolock</code> — Disables file locking. This setting is occasionally required when connecting to older NFS servers.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">noexec</code> — Prevents execution of binaries on mounted file systems. This is useful if the system is mounting a non-Linux file system via NFS containing incompatible binaries.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">nosuid</code> — Disables set-user-identifier or set-group-identifier bits. This prevents remote users from gaining higher privileges by running a setuid program.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">port=num</code> — Specifies the numeric value of the NFS server port. If <code class="command"><em class="replaceable"><code>num</code></em></code> is <code class="command">0</code> (the default), then <code class="command">mount</code> queries the remote host's portmapper for the port number to use. If the remote host's NFS daemon is not registered with its portmapper, the standard NFS port number of TCP 2049 is used instead.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">rsize=num</code> and <code class="option">wsize=num</code> — These settings speed up NFS communication for reads (<code class="option">rsize</code>) and writes (<code class="option">wsize</code>) by setting a larger data block size, in bytes, to be transferred at one time. Be careful when changing these values; some older Linux kernels and network cards do not work well with larger block sizes. For NFSv2 or NFSv3, the default values for both parameters is set to 8192. For NFSv4, the default values for both parameters is set to 32768.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">sec=mode</code> — Specifies the type of security to utilize when authenticating an NFS connection.
				</p>
                  <p>
					<code class="option">sec=sys</code> is the default setting, which uses local UNIX UIDs and GIDs by means of AUTH_SYS to authenticate NFS operations.
				</p>
                  <p>
					<code class="option">sec=krb5</code> uses Kerberos V5 instead of local UNIX UIDs and GIDs to authenticate users.
				</p>
                  <p>
					<code class="option">sec=krb5i</code> uses Kerberos V5 for user authentication and performs integrity checking of NFS operations using secure checksums to prevent data tampering.
				</p>
                  <p>
					<code class="option">sec=krb5p</code> uses Kerberos V5 for user authentication, integrity checking, and encrypts NFS traffic to prevent traffic sniffing. This is the most secure setting, but it also has the most performance overhead involved.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">tcp</code> — Specifies for the NFS mount to use the TCP protocol.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">udp</code> — Specifies for the NFS mount to use the UDP protocol.
				</p>
                </li>
              </ul>
            </div>
            <p>
			Many more options are listed on the <code class="command">mount</code> and <code class="command">nfs</code> man pages.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-start"></a>19.5. Starting and Stopping NFS</h2>
                </div>
              </div>
            </div>
            <a id="id2880486" class="indexterm"></a>
            <a id="id2880499" class="indexterm"></a>
            <a id="id2880512" class="indexterm"></a>
            <a id="id2880526" class="indexterm"></a>
            <a id="id2880539" class="indexterm"></a>
            <a id="id2880553" class="indexterm"></a>
            <a id="id2880566" class="indexterm"></a>
            <p>
			To run an NFS server, the <code class="command">portmap</code> service must be running. To verify that <code class="command">portmap</code> is active, type the following command as root:
		</p>
            <pre class="screen"><code class="command">/sbin/service portmap status</code>
</pre>
            <p>
			If the <code class="command">portmap</code> service is running, then the <code class="command">nfs</code> service can be started. To start an NFS server, as root type:
		</p>
            <pre class="screen"><code class="command">/sbin/service nfs start</code>
</pre>
            <div class="note">
              <h2>Note</h2>
              <p>
				<code class="command">nfslock</code> also has to be started for both the NFS client and server to function properly. To start NFS locking as root type: <code class="command">/sbin/service nfslock start</code>. If NFS is set to start at boot, please ensure that <code class="command">nfslock</code> also starts by running <code class="command">chkconfig --list nfslock</code>. If <code class="command">nfslock</code> is not set to <code class="command">on</code>, this implies that you will need to manually run the <code class="command">/sbin/service nfslock start</code> each time the computer starts. To set <code class="command">nfslock</code> to automatically start on boot, type the following command in a terminal <code class="command">chkconfig nfslock on</code>.
			</p>
            </div>
            <p>
			To stop the server, as root, type:
		</p>
            <pre class="screen"><code class="command">/sbin/service nfs stop</code>
</pre>
            <p>
			The <code class="option">restart</code> option is a shorthand way of stopping and then starting NFS. This is the most efficient way to make configuration changes take effect after editing the configuration file for NFS.
		</p>
            <p>
			To restart the server, as root, type:
		</p>
            <pre class="screen"><code class="command">/sbin/service nfs restart</code>
</pre>
            <p>
			The <code class="option">condrestart</code> (<em class="firstterm">conditional restart</em>) option only starts <code class="command">nfs</code> if it is currently running. This option is useful for scripts, because it does not start the daemon if it is not running.
		</p>
            <p>
			To conditionally restart the server, as root, type:
		</p>
            <pre class="screen"><code class="command">/sbin/service nfs condrestart</code>
</pre>
            <p>
			To reload the NFS server configuration file without restarting the service, as root, type:
		</p>
            <pre class="screen"><code class="command">/sbin/service nfs reload</code>
</pre>
            <p>
			By default, the <code class="command">nfs</code> service does <span class="emphasis"><em>not</em></span> start automatically at boot time. To configure the NFS to start up at boot time, use an initscript utility, such as <code class="command">/sbin/chkconfig</code>, <span><strong class="application">/usr/sbin/ntsysv</strong></span>, or the <span><strong class="application">Services Configuration Tool</strong></span> program. Refer to <a href="#ch-services" title="Chapter 16. Controlling Access to Services">Chapter 16, <i>Controlling Access to Services</i></a> for more information regarding these tools.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-server-export"></a>19.6. NFS Server Configuration</h2>
                </div>
              </div>
            </div>
            <a id="id2943766" class="indexterm"></a>
            <p>
			There are three ways to configure an NFS server under Red Hat Enterprise Linux: using the <span><strong class="application">NFS Server Configuration Tool</strong></span> (<code class="command">system-config-nfs</code>), manually editing its configuration file (<code class="filename">/etc/exports</code>), or using the <code class="command">/usr/sbin/exportfs</code> command.
		</p>
            <p>
			To use the NFS Server Configuration Tool, you must be running X Windows, have root privileges, and have the system-config-nfs RPM package installed. To start the application, click on <span><strong class="guimenu">System</strong></span> =&gt; <span><strong class="guimenu">Administration</strong></span> =&gt; <span><strong class="guimenu">Server Settings</strong></span> =&gt; <span><strong class="guimenu">NFS</strong></span>. You can also type the command <code class="command">system-config-nfs</code> in a terminal. The NFS Server Configuration tool window is illustrated below.
		</p>
            <div class="figure">
              <a id="fig-system-config-nfs"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/system-config-nfs.png" alt="NFS Server Configuration Tool" />
                  <div class="longdesc">
                    <p>
						NFS Configuration Tool
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 19.1. <span>NFS Server Configuration Tool</span></h6>
            </div>
            <br class="figure-break" />
            <p>
			Based on certain firewall settings, you may need to configure the NFS daemon processes to use specific networking ports. The NFS server settings allows you to specify the ports for each process instead of using the random ports assigned by the portmapper. You can set the NFS Server settings by clicking on the <span><strong class="guibutton">Server Settings</strong></span> button. The figure below illustrates the NFS Server Settings window.
		</p>
            <div class="figure">
              <a id="fig-nfs-server-settings"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/nfs-server-settings.png" alt="NFS Server Settings" />
                  <div class="longdesc">
                    <p>
						NFS Server Settings
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 19.2. <span>NFS Server Settings</span></h6>
            </div>
            <br class="figure-break" />
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-export"></a>19.6.1. Exporting or Sharing NFS File Systems</h3>
                  </div>
                </div>
              </div>
              <a id="id2895970" class="indexterm"></a>
              <a id="id2895984" class="indexterm"></a>
              <a id="id2895993" class="indexterm"></a>
              <a id="id2896010" class="indexterm"></a>
              <p>
				Sharing or serving files from an NFS server is known as exporting the directories. The <span><strong class="application">NFS Server Configuration Tool</strong></span> can be used to configure a system as an NFS server.
			</p>
              <p>
				To add an NFS share, click the <span><strong class="guibutton">Add</strong></span> button. The dialog box shown in <a href="#fig-add-share" title="Figure 19.3. Add Share">Figure 19.3, “Add Share”</a> appears.
			</p>
              <p>
				The <span><strong class="guilabel">Basic</strong></span> tab requires the following information:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<span><strong class="guilabel">Directory</strong></span> — Specify the directory to share, such as <code class="filename">/tmp</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Host(s)</strong></span> — Specify the host(s) with which to share the directory. Refer to <a href="#s2-nfs-hostname-formats" title="19.6.3. Hostname Formats">Section 19.6.3, “Hostname Formats”</a> for an explanation of possible formats.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Basic permissions</strong></span> — Specify whether the directory should have read-only or read/write permissions.
					</p>
                  </li>
                </ul>
              </div>
              <div class="figure">
                <a id="fig-add-share"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/nfs-add.png" alt="Add Share" />
                    <div class="longdesc">
                      <p>
							Add NFS Share
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 19.3. Add Share</h6>
              </div>
              <br class="figure-break" />
              <p>
				The <span><strong class="guilabel">General Options</strong></span> tab allows the following options to be configured:
			</p>
              <div class="figure">
                <a id="fig-nfs-general-options"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/nfs-general-options.png" alt="NFS General Options" />
                    <div class="longdesc">
                      <p>
							General Options
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 19.4. NFS General Options</h6>
              </div>
              <br class="figure-break" />
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<span><strong class="guilabel">Allow connections from port 1024 and higher</strong></span> — Services started on port numbers less than 1024 must be started as root. Select this option to allow the NFS service to be started by a user other than root. This option corresponds to <code class="command">insecure</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Allow insecure file locking</strong></span> — Do not require a lock request. This option corresponds to <code class="command">insecure_locks</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Disable subtree checking</strong></span> — If a subdirectory of a file system is exported, but the entire file system is not exported, the server checks to see if the requested file is in the subdirectory exported. This check is called <em class="firstterm">subtree checking</em>. Select this option to disable subtree checking. If the entire file system is exported, selecting to disable subtree checking can increase the transfer rate. This option corresponds to <code class="command">no_subtree_check</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Sync write operations on request</strong></span> — Enabled by default, this option does not allow the server to reply to requests before the changes made by the request are written to the disk. This option corresponds to <code class="command">sync</code>. If this is not selected, the <code class="command">async</code> option is used.
					</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
								<span><strong class="guilabel">Force sync of write operations immediately</strong></span> — Do not delay writing to disk. This option corresponds to <code class="command">no_wdelay</code>.
							</p>
                        </li>
                      </ul>
                    </div>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Hide filesystems beneath</strong></span> turns the <code class="command">nohide</code> option on or off. When the <code class="command">nohide</code> option is off, nested directories are revealed. The clients can therefore navigate through a filesystem from the parent without noticing any changes.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Export only if mounted</strong></span> sets the <code class="command">mountpoint</code> option which allows a directory to be exported only if it has been mounted.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Optional Mount Point</strong></span> specifies the path to an optional mount point. Click on the <span><strong class="guibutton">Browse</strong></span> to navigate to the preferred mount point or type the path if known.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Set explicit Filesystem ID:</strong></span> sets the <code class="command">fsid=X</code> option. This is mainly used in a clustered setup. Using a consistent filesystem ID in all clusters avoids having stale NFS filehandles.
					</p>
                  </li>
                </ul>
              </div>
              <div class="figure">
                <a id="fig-nfs-user-access"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/nfs-user-access.png" alt="NFS User Access" />
                    <div class="longdesc">
                      <p>
							User Access
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 19.5. NFS User Access</h6>
              </div>
              <br class="figure-break" />
              <p>
				The <span><strong class="guilabel">User Access</strong></span> tab allows the following options to be configured:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<span><strong class="guilabel">Treat remote root user as local root</strong></span> — By default, the user and group IDs of the root user are both 0. Root squashing maps the user ID 0 and the group ID 0 to the user and group IDs of anonymous so that root on the client does not have root privileges on the NFS server. If this option is selected, root is not mapped to anonymous, and root on a client has root privileges to exported directories. Selecting this option can greatly decrease the security of the system. Do not select it unless it is absolutely necessary. This option corresponds to <code class="command">no_root_squash</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<span><strong class="guilabel">Treat all client users as anonymous users</strong></span> — If this option is selected, all user and group IDs are mapped to the anonymous user. This option corresponds to <code class="command">all_squash</code>.
					</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
								<span><strong class="guilabel">Specify local user ID for anonymous users</strong></span> — If <span><strong class="guilabel">Treat all client users as anonymous users</strong></span> is selected, this option lets you specify a user ID for the anonymous user. This option corresponds to <code class="command">anonuid</code>.
							</p>
                        </li>
                        <li>
                          <p>
								<span><strong class="guilabel">Specify local group ID for anonymous users</strong></span> — If <span><strong class="guilabel">Treat all client users as anonymous users</strong></span> is selected, this option lets you specify a group ID for the anonymous user. This option corresponds to <code class="command">anongid</code>.
							</p>
                        </li>
                      </ul>
                    </div>
                  </li>
                </ul>
              </div>
              <p>
				To edit an existing NFS share, select the share from the list, and click the <span><strong class="guibutton">Properties</strong></span> button. To delete an existing NFS share, select the share from the list, and click the <span><strong class="guibutton">Delete</strong></span> button.
			</p>
              <a id="id2942953" class="indexterm"></a>
              <a id="id2942966" class="indexterm"></a>
              <p>
				After clicking <span><strong class="guibutton">OK</strong></span> to add, edit, or delete an NFS share from the list, the changes take place immediately — the server daemon is restarted and the old configuration file is saved as <code class="filename">/etc/exports.bak</code>. The new configuration is written to <code class="filename">/etc/exports</code>.
			</p>
              <p>
				The <span><strong class="application">NFS Server Configuration Tool</strong></span> reads and writes directly to the <code class="filename">/etc/exports</code> configuration file. Thus, the file can be modified manually after using the tool, and the tool can be used after modifying the file manually (provided the file was modified with correct syntax).
			</p>
              <p>
				The next this section discusses manually editing <code class="filename">/etc/exports</code> and using the <code class="command">/usr/sbin/exportfs</code> command to export NFS file systems.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-command-line"></a>19.6.2. Command Line Configuration</h3>
                  </div>
                </div>
              </div>
              <a id="id2898000" class="indexterm"></a>
              <p>
				If you prefer editing configuration files using a text editor or if you do not have the X Window System installed, you can modify the configuration file directly.
			</p>
              <p>
				The <code class="filename">/etc/exports</code> file controls what directories the NFS server exports. Its format is as follows:
			</p>
              <pre class="screen"><code class="command"><em class="replaceable"><code>directory</code></em><em class="replaceable"><code>hostname</code></em>(<em class="replaceable"><code>options</code></em>)</code>
</pre>
              <p>
				The only option that needs to be specified is one of <code class="command">sync</code> or <code class="command">async</code> (<code class="command">sync</code> is recommended). If <code class="command">sync</code> is specified, the server does not reply to requests before the changes made by the request are written to the disk.
			</p>
              <p>
				For example,
			</p>
              <pre class="screen"><code class="command"><code class="filename">/misc/export</code> speedy.example.com(sync)</code>
</pre>
              <p>
				would allow users from <code class="filename">speedy.example.com</code> to mount <code class="filename">/misc/export</code> with the default read-only permissions, but,
			</p>
              <pre class="screen"><code class="command"><code class="filename">/misc/export</code> speedy.example.com(rw,sync)</code>
</pre>
              <p>
				would allow users from <code class="filename">speedy.example.com</code> to mount <code class="filename">/misc/export</code> with read/write privileges.
			</p>
              <p>
				Refer to <a href="#s2-nfs-hostname-formats" title="19.6.3. Hostname Formats">Section 19.6.3, “Hostname Formats”</a> for an explanation of possible hostname formats.
			</p>
              <div class="caution">
                <h2>Caution</h2>
                <p>
					Be careful with spaces in the <code class="filename">/etc/exports</code> file. If there are no spaces between the hostname and the options in parentheses, the options apply only to the hostname. If there is a space between the hostname and the options, the options apply to the rest of the world. For example, examine the following lines:
				</p>
                <pre class="screen"><code class="computeroutput">/misc/export speedy.example.com(rw,sync) /misc/export speedy.example.com (rw,sync)</code>
</pre>
                <p>
					The first line grants users from <code class="filename">speedy.example.com</code> read-write access and denies all other users. The second line grants users from <code class="filename">speedy.example.com</code> read-only access (the default) and allows the rest of the world read-write access.
				</p>
              </div>
              <p>
				Each time you change <code class="filename">/etc/exports</code>, you must inform the NFS daemon of the change, or reload the configuration file with the following command:
			</p>
              <pre class="screen"><code class="command">/sbin/service nfs reload</code>
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-hostname-formats"></a>19.6.3. Hostname Formats</h3>
                  </div>
                </div>
              </div>
              <a id="id2857216" class="indexterm"></a>
              <p>
				The host(s) can be in the following forms:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Single machine — A fully qualified domain name (that can be resolved by the server), hostname (that can be resolved by the server), or an IP address.
					</p>
                  </li>
                  <li>
                    <p>
						Series of machines specified with wildcards — Use the * or ? character to specify a string match. Wildcards are not to be used with IP addresses; however, they may accidentally work if reverse DNS lookups fail. When specifying wildcards in fully qualified domain names, dots (.) are not included in the wildcard. For example, <code class="computeroutput">*.example.com</code> includes one.example.com but does not include one.two.example.com.
					</p>
                  </li>
                  <li>
                    <p>
						IP networks — Use <em class="replaceable"><code>a.b.c.d/z</code></em>, where <em class="replaceable"><code>a.b.c.d</code></em> is the network and <em class="replaceable"><code>z</code></em> is the number of bits in the netmask (for example 192.168.0.0/24). Another acceptable format is <em class="replaceable"><code>a.b.c.d/netmask</code></em>, where <em class="replaceable"><code>a.b.c.d</code></em> is the network and <em class="replaceable"><code>netmask</code></em> is the netmask (for example, 192.168.100.8/255.255.255.0).
					</p>
                  </li>
                  <li>
                    <p>
						Netgroups — In the format <em class="replaceable"><code>@group-name</code></em>, where <em class="replaceable"><code>group-name</code></em> is the NIS netgroup name.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-server-config-exports"></a>19.7. The <code class="filename">/etc/exports</code> Configuration File</h2>
                </div>
              </div>
            </div>
            <a id="id2857331" class="indexterm"></a>
            <p>
			The <code class="filename">/etc/exports</code> file controls which file systems are exported to remote hosts and specifies options. Blank lines are ignored, comments can be made by starting a line with the hash mark (<code class="command">#</code>), and long lines can be wrapped with a backslash (<code class="command">\</code>). Each exported file system should be on its own individual line, and any lists of authorized hosts placed after an exported file system must be separated by space characters. Options for each of the hosts must be placed in parentheses directly after the host identifier, without any spaces separating the host and the first parenthesis. Valid host types are <code class="command">gss/krb5</code><code class="command">gss/krb5i</code> and <code class="command">gss/krb5p</code>.
		</p>
            <p>
			A line for an exported file system has the following structure:
		</p>
            <pre class="screen"><code class="command"><em class="replaceable"><code>&lt;export&gt;</code></em><em class="replaceable"><code>&lt;host1&gt;</code></em>(<em class="replaceable"><code>&lt;options&gt;</code></em>) <em class="replaceable"><code>&lt;hostN&gt;</code></em>(<em class="replaceable"><code>&lt;options&gt;</code></em>)...</code>
</pre>
            <p>
			In this structure, replace <em class="replaceable"><code>&lt;export&gt;</code></em> with the directory being exported, replace <em class="replaceable"><code>&lt;host1&gt;</code></em> with the host or network to which the export is being shared, and replace <em class="replaceable"><code>&lt;options&gt;</code></em> with the options for that host or network. Additional hosts can be specified in a space separated list.
		</p>
            <p>
			The following methods can be used to specify host names:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<span class="emphasis"><em>single host</em></span> — Where one particular host is specified with a fully qualified domain name, hostname, or IP address.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>wildcards</em></span> — Where a <code class="command">*</code> or <code class="command">?</code> character is used to take into account a grouping of fully qualified domain names that match a particular string of letters. Wildcards should not be used with IP addresses; however, it is possible for them to work accidentally if reverse DNS lookups fail.
				</p>
                  <p>
					Be careful when using wildcards with fully qualified domain names, as they tend to be more exact than expected. For example, the use of <code class="command">*.example.com</code> as a wildcard allows sales.example.com to access an exported file system, but not bob.sales.example.com. To match both possibilities both <code class="command">*.example.com</code> and <code class="command">*.*.example.com</code> must be specified.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>IP networks</em></span> — Allows the matching of hosts based on their IP addresses within a larger network. For example, <code class="command">192.168.0.0/28</code> allows the first 16 IP addresses, from 192.168.0.0 to 192.168.0.15, to access the exported file system, but not 192.168.0.16 and higher.
				</p>
                </li>
                <li>
                  <p>
					<span class="emphasis"><em>netgroups</em></span> — Permits an NIS netgroup name, written as <code class="command">@<em class="replaceable"><code>&lt;group-name&gt;</code></em></code>, to be used. This effectively puts the NIS server in charge of access control for this exported file system, where users can be added and removed from an NIS group without affecting <code class="filename">/etc/exports</code>.
				</p>
                </li>
              </ul>
            </div>
            <p>
			In its simplest form, the <code class="filename">/etc/exports</code> file only specifies the exported directory and the hosts permitted to access it, as in the following example:
		</p>
            <pre class="screen"><code class="command">/exported/directory bob.example.com</code>
</pre>
            <p>
			In the example, <code class="computeroutput">bob.example.com</code> can mount <code class="filename">/exported/directory/</code>. Because no options are specified in this example, the following default NFS options take effect:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<code class="option">ro</code> — Mounts of the exported file system are read-only. Remote hosts are not able to make changes to the data shared on the file system. To allow hosts to make changes to the file system, the read/write (<code class="option">rw</code>) option must be specified.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">wdelay</code> — Causes the NFS server to delay writing to the disk if it suspects another write request is imminent. This can improve performance by reducing the number of times the disk must be accessed by separate write commands, reducing write overhead. The <code class="option">no_wdelay</code> option turns off this feature, but is only available when using the <code class="option">sync</code> option.
				</p>
                </li>
                <li>
                  <p>
					<code class="option">root_squash</code> — Prevents root users connected remotely from having root privileges and assigns them the user ID for the user <code class="computeroutput">nfsnobody</code>. This effectively "squashes" the power of the remote root user to the lowest local user, preventing unauthorized alteration of files on the remote server. Alternatively, the <code class="option">no_root_squash</code> option turns off root squashing. To squash every remote user, including root, use the <code class="option">all_squash</code> option. To specify the user and group IDs to use with remote users from a particular host, use the <code class="option">anonuid</code> and <code class="option">anongid</code> options, respectively. In this case, a special user account can be created for remote NFS users to share and specify <code class="option">(anonuid=<em class="replaceable"><code>&lt;uid-value&gt;</code></em>,anongid=<em class="replaceable"><code>&lt;gid-value&gt;</code></em>)</code>, where <code class="option"><em class="replaceable"><code>&lt;uid-value&gt;</code></em></code> is the user ID number and <code class="option"><em class="replaceable"><code>&lt;gid-value&gt;</code></em></code> is the group ID number.
				</p>
                </li>
              </ul>
            </div>
            <div class="important">
              <h2>Important</h2>
              <p>
				By default, <em class="firstterm">access control lists</em> (<em class="firstterm">ACLs</em>) are supported by NFS under Red Hat Enterprise Linux. To disable this feature, specify the <code class="command">no_acl</code> option when exporting the file system.
			</p>
            </div>
            <p>
			Each default for every exported file system must be explicitly overridden. For example, if the <code class="option">rw</code> option is not specified, then the exported file system is shared as read-only. The following is a sample line from <code class="filename">/etc/exports</code> which overrides two default options:
		</p>
            <pre class="screen"><code class="command">/another/exported/directory 192.168.0.3(rw,sync)</code>
</pre>
            <p>
			In this example <code class="command">192.168.0.3</code> can mount <code class="filename">/another/exported/directory/</code> read/write and all transfers to disk are committed to the disk before the write request by the client is completed.
		</p>
            <p>
			Additionally, other options are available where no default value is specified. These include the ability to disable sub-tree checking, allow access from insecure ports, and allow insecure file locks (necessary for certain early NFS client implementations). Refer to the <code class="filename">exports</code> man page for details on these lesser used options.
		</p>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				The format of the <code class="filename">/etc/exports</code> file is very precise, particularly in regards to use of the space character. Remember to always separate exported file systems from hosts and hosts from one another with a space character. However, there should be no other space characters in the file except on comment lines.
			</p>
              <p>
				For example, the following two lines do not mean the same thing:
			</p>
              <pre class="screen"><code class="command">/home bob.example.com(rw) /home bob.example.com (rw)</code>
</pre>
              <p>
				The first line allows only users from <code class="filename">bob.example.com</code> read/write access to the <code class="filename">/home</code> directory. The second line allows users from <code class="filename">bob.example.com</code> to mount the directory as read-only (the default), while the rest of the world can mount it read/write.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-nfs-server-config-exportfs"></a>19.7.1. The <code class="command">exportfs</code> Command</h3>
                  </div>
                </div>
              </div>
              <a id="id2972870" class="indexterm"></a>
              <p>
				Every file system being exported to remote users via NFS, as well as the access level for those file systems, are listed in the <code class="filename">/etc/exports</code> file. When the <code class="command">nfs</code> service starts, the <code class="command">/usr/sbin/exportfs</code> command launches and reads this file, passes control to <code class="command">rpc.mountd</code> (if NFSv2 or NFSv3) for the actual mounting process, then to <code class="command">rpc.nfsd</code> where the file systems are then available to remote users.
			</p>
              <p>
				When issued manually, the <code class="command">/usr/sbin/exportfs</code> command allows the root user to selectively export or unexport directories without restarting the NFS service. When given the proper options, the <code class="command">/usr/sbin/exportfs</code> command writes the exported file systems to <code class="filename">/var/lib/nfs/xtab</code>. Since <code class="command">rpc.mountd</code> refers to the <code class="filename">xtab</code> file when deciding access privileges to a file system, changes to the list of exported file systems take effect immediately.
			</p>
              <p>
				The following is a list of commonly used options available for <code class="command">/usr/sbin/exportfs</code>:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="option">-r</code> — Causes all directories listed in <code class="filename">/etc/exports</code> to be exported by constructing a new export list in <code class="filename">/etc/lib/nfs/xtab</code>. This option effectively refreshes the export list with any changes that have been made to <code class="filename">/etc/exports</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">-a</code> — Causes all directories to be exported or unexported, depending on what other options are passed to <code class="command">/usr/sbin/exportfs</code>. If no other options are specified, <code class="command">/usr/sbin/exportfs</code> exports all file systems specified in <code class="filename">/etc/exports</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">-o <em class="replaceable"><code>file-systems</code></em></code> — Specifies directories to be exported that are not listed in <code class="filename">/etc/exports</code>. Replace <em class="replaceable"><code>file-systems</code></em> with additional file systems to be exported. These file systems must be formatted in the same way they are specified in <code class="filename">/etc/exports</code>. Refer to <a href="#s1-nfs-server-config-exports" title="19.7. The /etc/exports Configuration File">Section 19.7, “The <code class="filename">/etc/exports</code> Configuration File”</a> for more information on <code class="filename">/etc/exports</code> syntax. This option is often used to test an exported file system before adding it permanently to the list of file systems to be exported.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">-i</code> — Ignores <code class="filename">/etc/exports</code>; only options given from the command line are used to define exported file systems.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">-u</code> — Unexports all shared directories. The command <code class="command">/usr/sbin/exportfs -ua</code> suspends NFS file sharing while keeping all NFS daemons up. To re-enable NFS sharing, type <code class="command">exportfs -r</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="option">-v</code> — Verbose operation, where the file systems being exported or unexported are displayed in greater detail when the <code class="command">exportfs</code> command is executed.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If no options are passed to the <code class="command">/usr/sbin/exportfs</code> command, it displays a list of currently exported file systems.
			</p>
              <p>
				For more information about the <code class="command">/usr/sbin/exportfs</code> command, refer to the <code class="command">exportfs</code> man page.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-nfs-server-config-exportfs-nfsv4"></a>19.7.1.1. Using <code class="command">exportfs</code> with NFSv4</h4>
                    </div>
                  </div>
                </div>
                <a id="id2934548" class="indexterm"></a>
                <p>
					The <code class="command">exportfs</code> command is used in maintaining the NFS table of exported file systems. When typed in a terminal with no arguments, the <code class="command">exportfs</code> command shows all the exported directories.
				</p>
                <p>
					Since NFSv4 no longer utilizes the <code class="command">rpc.mountd</code> protocol as was used in NFSv2 and NFSv3, the mounting of file systems has changed.
				</p>
                <p>
					An NFSv4 client now has the ability to see all of the exports served by the NFSv4 server as a single file system, called the NFSv4 pseudo-file system. On Red Hat Enterprise Linux, the pseudo-file system is identified as a single, real file system, identified at export with the <code class="option">fsid=0</code> option.
				</p>
                <p>
					For example, the following commands could be executed on an NFSv4 server:
				</p>
                <p>
</p>
                <pre class="screen"><code class="computeroutput">mkdir /exports mkdir /exports/opt mkdir /exports/etc mount --bind /usr/local/opt /exports/opt mount --bind /usr/local/etc /exports/etc exportfs -o fsid=0,insecure,no_subtree_check gss/krb5p:/exports exportfs -o rw,nohide,insecure,no_subtree_check gss/krb5p:/exports/opt exportfs -o rw,nohide,insecure,no_subtree_check gss/krb5p:/exports/etc</code>
</pre>
                <p>
				</p>
                <p>
					In this example, clients are provided with multiple file systems to mount, by using the <code class="option">--bind</code> option which creates unbreakeable links.
				</p>
                <p>
					Because of the pseudo-file systems feature, NFS version 2, 3 and 4 export configurations are not always compatible. For example, given the following directory tree:
				</p>
                <pre class="screen"><code class="command"> /home /home/sam /home/john /home/joe</code>
</pre>
                <p>
					and the export:
				</p>
                <pre class="screen"><code class="command"> /home *(rw,fsid=0,sync)</code>
</pre>
                <p>
					Using NFS version 2,3 and 4 the following would work:
				</p>
                <pre class="screen"><code class="command"> mount server:/home /mnt/home ls /mnt/home/joe</code>
</pre>
                <p>
					Using v4 the following would work:
				</p>
                <pre class="screen"><code class="command"> mount -t nfs4 server:/ /mnt/home ls /mnt/home/joe</code>
</pre>
                <p>
					The difference being "<code class="command">server:/home</code>" and "<code class="command">server:/</code>". To make the exports configurations compatible for all version, one needs to export (read only) the root filesystem with an <code class="command">fsid=0</code>. The <code class="command">fsid=0</code> signals the NFS server that this export is the root.
				</p>
                <pre class="screen"><code class="command"> / *(ro,fsid=0) /home *(rw,sync,nohide)</code>
</pre>
                <p>
					Now with these exports, both "<code class="command">mount server:/home /mnt/home</code>" and "<code class="command">mount -t nfs server:/home /mnt/home</code>" will work as expected.
				</p>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-security"></a>19.8. Securing NFS</h2>
                </div>
              </div>
            </div>
            <a id="id2863819" class="indexterm"></a>
            <p>
			NFS is well suited for sharing entire file systems with a large number of known hosts in a transparent manner. However, with ease of use comes a variety of potential security problems.
		</p>
            <p>
			The following points should be considered when exporting NFS file systems on a server or mounting them on a client. Doing so minimizes NFS security risks and better protects data on the server.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-security-hosts"></a>19.8.1. Host Access</h3>
                  </div>
                </div>
              </div>
              <a id="id2863854" class="indexterm"></a>
              <p>
				Depending on which version of NFS you plan to implement, depends on your existing network environment, and your security concerns. The following sections explain the differences between implementing security measures with NFSv2, NFSv3, and NFSv4. If at all possible, use of NFSv4 is recommended over other versions of NFS.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-nfs-security-hosts-nonnfsv4"></a>19.8.1.1. Using NFSv2 or NFSv3</h4>
                    </div>
                  </div>
                </div>
                <a id="id2974655" class="indexterm"></a>
                <p>
					NFS controls who can mount an exported file system based on the host making the mount request, not the user that actually uses the file system. Hosts must be given explicit rights to mount the exported file system. Access control is not possible for users, other than through file and directory permissions. In other words, once a file system is exported via NFS, any user on any remote host connected to the NFS server can access the shared data. To limit the potential risks, administrators often allow read-only access or squash user permissions to a common user and group ID. Unfortunately, these solutions prevent the NFS share from being used in the way it was originally intended.
				</p>
                <p>
					Additionally, if an attacker gains control of the DNS server used by the system exporting the NFS file system, the system associated with a particular hostname or fully qualified domain name can be pointed to an unauthorized machine. At this point, the unauthorized machine <span class="emphasis"><em>is</em></span> the system permitted to mount the NFS share, since no username or password information is exchanged to provide additional security for the NFS mount.
				</p>
                <p>
					Wildcards should be used sparingly when exporting directories via NFS as it is possible for the scope of the wildcard to encompass more systems than intended.
				</p>
                <p>
					It is also possible to restrict access to the <code class="command">portmap</code> service via TCP wrappers. Access to ports used by <code class="command">portmap</code>, <code class="command">rpc.mountd</code>, and <code class="command">rpc.nfsd</code> can also be limited by creating firewall rules with <code class="command">iptables</code>.
				</p>
                <p>
					For more information on securing NFS and <code class="command">portmap</code>, refer to <a href="#ch-iptables" title="43.9. IPTables">Section 43.9, “IPTables”</a>.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-nfs-security-hosts-nfsv4"></a>19.8.1.2. Using NFSv4</h4>
                    </div>
                  </div>
                </div>
                <a id="id2974765" class="indexterm"></a>
                <p>
					The release of NFSv4 brought a revolution to authentication and security to NFS exports. NFSv4 mandates the implementation of the RPCSEC_GSS kernel module, the Kerberos version 5 GSS-API mechanism, SPKM-3, and LIPKEY. With NFSv4, the mandatory security mechanisms are oriented towards authenticating individual users, and not client machines as used in NFSv2 and NFSv3.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						It is assumed that a Kerberos ticket-granting server (KDC) is installed and configured correctly, prior to configuring an NFSv4 server. Kerberos is a network authentication system which allows clients and servers to authenticate to each other through use of symmetric encryption and a trusted third party, the KDC.
					</p>
                </div>
                <p>
					NFSv4 includes ACL support based on the Microsoft Windows NT model, not the POSIX model, because of its features and because it is widely deployed. NFSv2 and NFSv3 do not have support for native ACL attributes.
				</p>
                <p>
					Another important security feature of NFSv4 is its removal of the <code class="filename">rpc.mountd</code> daemon. The <code class="filename">rpc.mountd</code> daemon presented possible security holes because of the way it dealt with filehandlers.
				</p>
                <p>
					For more information on the RPCSEC_GSS framework, including how <code class="command">rpc.svcgssd</code> and <code class="command">rpc.gssd</code> inter operate, refer to <a href="http://www.citi.umich.edu/projects/nfsv4/gssd/">http://www.citi.umich.edu/projects/nfsv4/gssd/</a>.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-security-files"></a>19.8.2. File Permissions</h3>
                  </div>
                </div>
              </div>
              <a id="id2963642" class="indexterm"></a>
              <p>
				Once the NFS file system is mounted read/write by a remote host, the only protection each shared file has is its permissions. If two users that share the same user ID value mount the same NFS file system, they can modify each others files. Additionally, anyone logged in as root on the client system can use the <code class="command">su -</code> command to become a user who could access particular files via the NFS share.
			</p>
              <p>
				By default, access control lists (ACLs) are supported by NFS under Red Hat Enterprise Linux. It is not recommended that this feature be disabled.
			</p>
              <p>
				The default behavior when exporting a file system via NFS is to use <em class="firstterm">root squashing</em>. This sets the user ID of anyone accessing the NFS share as the root user on their local machine to a value of the server's <code class="computeroutput">nfsnobody</code> account. Never turn off root squashing.
			</p>
              <p>
				If exporting an NFS share as read-only, consider using the <code class="option">all_squash</code> option, which makes every user accessing the exported file system take the user ID of the <code class="computeroutput">nfsnobody</code> user.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s2-nfs-methodology-portmap"></a>19.9. NFS and <code class="command">portmap</code></h2>
                </div>
              </div>
            </div>
            <a id="id2963730" class="indexterm"></a>
            <a id="id2963747" class="indexterm"></a>
            <div class="note">
              <h2>Note</h2>
              <p>
				The following section only applies to NFSv2 or NFSv3 implementations that require the <code class="command">portmap</code> service for backward compatibility.
			</p>
            </div>
            <p>
			The <code class="command">portmapper</code> maps RPC services to the ports they are listening on. RPC processes notify <code class="command">portmap</code> when they start, registering the ports they are listening on and the RPC program numbers they expect to serve. The client system then contacts <code class="command">portmap</code> on the server with a particular RPC program number. The <code class="command">portmap</code> service redirects the client to the proper port number so it can communicate with the requested service.
		</p>
            <p>
			Because RPC-based services rely on <code class="command">portmap</code> to make all connections with incoming client requests, <code class="command">portmap</code> must be available before any of these services start.
		</p>
            <p>
			The <code class="command">portmap</code> service uses TCP wrappers for access control, and access control rules for <code class="command">portmap</code> affect <span class="emphasis"><em>all</em></span> RPC-based services. Alternatively, it is possible to specify access control rules for each of the NFS RPC daemons. The man pages for <code class="command">rpc.mountd</code> and <code class="command">rpc.statd</code> contain information regarding the precise syntax for these rules.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s3-nfs-methodology-portmap-rpcinfo"></a>19.9.1. Troubleshooting NFS and <code class="command">portmap</code></h3>
                  </div>
                </div>
              </div>
              <a id="id2872112" class="indexterm"></a>
              <a id="id2872132" class="indexterm"></a>
              <a id="id2872145" class="indexterm"></a>
              <p>
				Because <code class="command">portmap</code> provides coordination between RPC services and the port numbers used to communicate with them, it is useful to view the status of current RPC services using <code class="command">portmap</code> when troubleshooting. The <code class="command">rpcinfo</code> command shows each RPC-based service with port numbers, an RPC program number, a version number, and an IP protocol type (TCP or UDP).
			</p>
              <p>
				To make sure the proper NFS RPC-based services are enabled for <code class="command">portmap</code>, issue the following command as root:
			</p>
              <pre class="screen"><code class="command">rpcinfo -p</code>
</pre>
              <p>
				The following is sample output from this command:
			</p>
              <pre class="screen"><code class="computeroutput"> program vers proto port 100000 2 tcp 111 portmapper 100000 2 udp 111 portmapper 100021 1 udp 32774 nlockmgr 100021 3 udp 32774 nlockmgr 100021 4 udp 32774 nlockmgr 100021 1 tcp 34437 nlockmgr 100021 3 tcp 34437 nlockmgr 100021 4 tcp 34437 nlockmgr 100011 1 udp 819 rquotad 100011 2 udp 819 rquotad 100011 1 tcp 822 rquotad 100011 2 tcp 822 rquotad 100003 2 udp 2049 nfs 100003 3 udp 2049 nfs 100003 2 tcp 2049 nfs 100003 3 tcp 2049 nfs 100005 1 udp 836 mountd 100005 1 tcp 839 mountd 100005 2 udp 836 mountd 100005 2 tcp 839 mountd 100005 3 udp 836 mountd 100005 3 tcp 839 mountd</code>
</pre>
              <p>
				If one of the NFS services does not start up correctly, <code class="command">portmap</code> is unable to map RPC requests from clients for that service to the correct port. In many cases, if NFS is not present in <code class="command">rpcinfo</code> output, restarting NFS causes the service to correctly register with <code class="command">portmap</code> and begin working. For instructions on starting NFS, refer to <a href="#s1-nfs-start" title="19.5. Starting and Stopping NFS">Section 19.5, “Starting and Stopping NFS”</a>.
			</p>
              <p>
				Other useful options are available for the <code class="command">rpcinfo</code> command. Refer to the <code class="command">rpcinfo</code> man page for more information.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-tcp"></a>19.10. Using NFS over TCP</h2>
                </div>
              </div>
            </div>
            <a id="id2899115" class="indexterm"></a>
            <p>
			The default transport protocol for NFSv4 is TCP; however, the Red Hat Enterprise Linux 5 kernel includes support for NFS over UDP. To use NFS over UDP, include the <code class="option">-o udp</code> option to <code class="command">mount</code> when mounting the NFS-exported file system on the client system.
		</p>
            <p>
			There are three ways to configure an NFS file system export. On demand via the command line (client side), automatically via the <code class="filename">/etc/fstab</code> file (client side), and automatically via autofs configuration files, such as <code class="filename">/etc/auto.master</code> and <code class="filename">/etc/auto.misc</code> (server side with NIS).
		</p>
            <p>
			For example, on demand via the command line (client side):
		</p>
            <pre class="screen"><code class="command">mount -o udp shadowman.example.com:/misc/export /misc/local</code>
</pre>
            <p>
			When the NFS mount is specified in <code class="filename">/etc/fstab</code> (client side):
		</p>
            <pre class="screen"><code class="computeroutput">server:/usr/local/pub /pub nfs rsize=8192,wsize=8192,timeo=14,intr,udp</code>
</pre>
            <p>
			When the NFS mount is specified in an autofs configuration file for a NIS server, available for NIS enabled workstations:
		</p>
            <pre class="screen"><code class="computeroutput">myproject -rw,soft,intr,rsize=8192,wsize=8192,udp penguin.example.net:/proj52</code>
</pre>
            <p>
			Since the default is TCP, if the <code class="option">-o udp</code> option is not specified, the NFS-exported file system is accessed via TCP.
		</p>
            <p>
			The advantages of using TCP include the following:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Improved connection durability, thus less <code class="computeroutput">NFS stale file handles</code> messages.
				</p>
                </li>
                <li>
                  <p>
					Performance gain on heavily loaded networks because TCP acknowledges every packet, unlike UDP which only acknowledges completion.
				</p>
                </li>
                <li>
                  <p>
					TCP has better congestion control than UDP. On a very congested network, UDP packets are the first packets that are dropped. This means that if NFS is writing data (in 8K chunks) all of that 8K must be retransmitted over UDP. Because of TCP's reliability, only parts of that 8K data are transmitted at a time.
				</p>
                </li>
                <li>
                  <p>
					Error detection. When a TCP connection breaks (due to the server being unavailable) the client stops sending data and restarts the connection process once the server becomes available. With UDP, since it's connection-less, the client continues to pound the network with data until the server reestablishes a connection.
				</p>
                </li>
              </ul>
            </div>
            <p>
			The main disadvantage is that there is a very small performance hit due to the overhead associated with the TCP protocol.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-nfs-additional-resources"></a>19.11. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2955808" class="indexterm"></a>
            <p>
			Administering an NFS server can be a challenge. Many options, including quite a few not mentioned in this chapter, are available for exporting or mounting NFS shares. Consult the following sources for more information.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-installed-documentation"></a>19.11.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <a id="id2955837" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="filename">/usr/share/doc/nfs-utils-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/</code> — Replace <em class="replaceable"><code>&lt;version-number&gt;</code></em> with the version number of the NFS package installed. This directory contains a wealth of information about the NFS implementation for Linux, including a look at various NFS configurations and their impact on file transfer performance.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">man mount</code> — Contains a comprehensive look at mount options for both NFS server and client configurations.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">man fstab</code> — Gives details for the format of the <code class="filename">/etc/fstab</code> file used to mount file systems at boot-time.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">man nfs</code> — Provides details on NFS-specific file system export and mount options.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">man exports</code> — Shows common options used in the <code class="filename">/etc/exports</code> file when exporting NFS file systems.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-useful-websites"></a>19.11.2. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <a id="id2955963" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://nfs.sourceforge.net/">http://nfs.sourceforge.net/</a> — The home of the Linux NFS project and a great place for project status updates.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.citi.umich.edu/projects/nfsv4/linux/">http://www.citi.umich.edu/projects/nfsv4/linux/</a> — An NFSv4 for Linux 2.6 kernel resource.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.nfsv4.org/">http://www.nfsv4.org</a> — The home of NFS version 4 and all related standards.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.vanemery.com/Linux/NFSv4/NFSv4-no-rpcsec.html">http://www.vanemery.com/Linux/NFSv4/NFSv4-no-rpcsec.html</a> — Describes the details of NFSv4 with Fedora Core 2, which includes the 2.6 kernel.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://www.nluug.nl/events/sane2000/papers/pawlowski.pdf">http://www.nluug.nl/events/sane2000/papers/pawlowski.pdf</a> — An excellent whitepaper on the features and enhancements of the NFS Version 4 protocol.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://wiki.autofs.net">http://wiki.autofs.net</a> — The Autofs wiki, discussions, documentation and enhancements.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-nfs-related-books"></a>19.11.3. Related Books</h3>
                  </div>
                </div>
              </div>
              <a id="id2891671" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<em class="citetitle">Managing NFS and NIS</em> by Hal Stern, Mike Eisler, and Ricardo Labiaga; O'Reilly &amp; Associates — Makes an excellent reference guide for the many different NFS export and mount options available.
					</p>
                  </li>
                  <li>
                    <p>
						<em class="citetitle">NFS Illustrated</em> by Brent Callaghan; Addison-Wesley Publishing Company — Provides comparisons of NFS to other network file systems and shows, in detail, how NFS communication occurs.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-samba"></a>Chapter 20. Samba</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#samba-rgs-overview">20.1. Introduction to Samba</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-abilities">20.1.1. Samba Features</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-daemons">20.2. Samba Daemons and Related Services</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-services">20.2.1. Samba Daemons</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-connect-share">20.3. Connecting to a Samba Share</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-connect-share-cmdline">20.3.1. Command Line</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-samba-mounting">20.3.2. Mounting the Share</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-configuring">20.4. Configuring a Samba Server</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-configuring-gui">20.4.1. Graphical Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-configuring-cmdline">20.4.2. Command Line Configuration</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-encrypted-passwords">20.4.3. Encrypted Passwords</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-startstop">20.5. Starting and Stopping Samba</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-samba-servers">20.6. Samba Server Types and the <code class="command">smb.conf</code> File</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-standalone">20.6.1. Stand-alone Server</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-domain-member">20.6.2. Domain Member Server</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-domain-controller">20.6.3. Domain Controller</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-security-modes">20.7. Samba Security Modes</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-user-level">20.7.1. User-Level Security</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-share-level">20.7.2. Share-Level Security</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-account-info-dbs">20.8. Samba Account Information Databases</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-samba-network-browsing">20.9. Samba Network Browsing</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-domain-browsing">20.9.1. Domain Browsing</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-wins">20.9.2. WINS (Windows Internetworking Name Server)</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-cups">20.10. Samba with CUPS Printing Support</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-cups-smb.conf">20.10.1. Simple <code class="filename">smb.conf</code> Settings</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-samba-programs">20.11. Samba Distribution Programs</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-samba-resources">20.12. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-resources-installed">20.12.1. Installed Documentation</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-resources-published">20.12.2. Related Books</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-samba-resources-community">20.12.3. Useful Websites</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2903250" class="indexterm"></a>
          <a id="id2891491" class="indexterm"></a>
          <p>
		<em class="firstterm">Samba</em> is an open source implementation of the Server Message Block (SMB) protocol. It allows the networking of Microsoft <span class="trademark">Windows</span>®, Linux, UNIX, and other operating systems together, enabling access to Windows-based file and printer shares. Samba's use of SMB allows it to appear as a Windows server to Windows clients.
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="samba-rgs-overview"></a>20.1. Introduction to Samba</h2>
                </div>
              </div>
            </div>
            <a id="id2914800" class="indexterm"></a>
            <p>
			The third major release of Samba, version 3.0.0, introduced numerous improvements from prior versions, including:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					The ability to join an Active Directory domain by means of LDAP and Kerberos
				</p>
                </li>
                <li>
                  <p>
					Built in Unicode support for internationalization
				</p>
                </li>
                <li>
                  <p>
					Support for Microsoft Windows XP Professional client connections to Samba servers without needing local registry hacking
				</p>
                </li>
                <li>
                  <p>
					Two new documents developed by the Samba.org team, which include a 400+ page reference manual, and a 300+ page implementation and integration manual. For more information about these published titles, refer to <a href="#s2-samba-resources-published" title="20.12.2. Related Books">Section 20.12.2, “Related Books”</a>.
				</p>
                </li>
              </ul>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-abilities"></a>20.1.1. Samba Features</h3>
                  </div>
                </div>
              </div>
              <a id="id2924192" class="indexterm"></a>
              <p>
				Samba is a powerful and versatile server application. Even seasoned system administrators must know its abilities and limitations before attempting installation and configuration.
			</p>
              <p>
				What Samba can do:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Serve directory trees and printers to Linux, UNIX, and Windows clients
					</p>
                  </li>
                  <li>
                    <p>
						Assist in network browsing (with or without NetBIOS)
					</p>
                  </li>
                  <li>
                    <p>
						Authenticate Windows domain logins
					</p>
                  </li>
                  <li>
                    <p>
						Provide Windows Internet Name Service (WINS) name server resolution
					</p>
                  </li>
                  <li>
                    <p>
						Act as a Windows <span class="trademark">NT</span>®-style Primary Domain Controller (PDC)
					</p>
                  </li>
                  <li>
                    <p>
						Act as a Backup Domain Controller (BDC) for a Samba-based PDC
					</p>
                  </li>
                  <li>
                    <p>
						Act as an Active Directory domain member server
					</p>
                  </li>
                  <li>
                    <p>
						Join a Windows NT/2000/2003 PDC
					</p>
                  </li>
                </ul>
              </div>
              <p>
				What Samba cannot do:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Act as a BDC for a Windows PDC (and vice versa)
					</p>
                  </li>
                  <li>
                    <p>
						Act as an Active Directory domain controller
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-daemons"></a>20.2. Samba Daemons and Related Services</h2>
                </div>
              </div>
            </div>
            <a id="id2946376" class="indexterm"></a>
            <p>
			The following is a brief introduction to the individual Samba daemons and services.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-services"></a>20.2.1. Samba Daemons</h3>
                  </div>
                </div>
              </div>
              <a id="id2937427" class="indexterm"></a>
              <p>
				Samba is comprised of three daemons (<code class="command">smbd</code>, <code class="command">nmbd</code>, and <code class="command">winbindd</code>). Two services (<code class="command">smb</code> and <code class="command">windbind</code>) control how the daemons are started, stopped, and other service-related features. Each daemon is listed in detail, as well as which specific service has control over it.
			</p>
              <p class="formalpara">
                <a id="s3-samba-daemon-smbd"></a>
              </p>
              <h5 class="formalpara">
                <code class="command">smbd</code>
              </h5>
              <p class="formalpara"><a id="id2931529" class="indexterm"></a>
					The <code class="command">smbd</code> server daemon provides file sharing and printing services to Windows clients. In addition, it is responsible for user authentication, resource locking, and data sharing through the SMB protocol. The default ports on which the server listens for SMB traffic are TCP ports 139 and 445.
				</p>
              <p>
				The <code class="command">smbd</code> daemon is controlled by the <code class="command">smb</code> service.
			</p>
              <p class="formalpara">
                <a id="s3-samba-daemon-nmbd"></a>
              </p>
              <h5 class="formalpara">
                <code class="command">nmbd</code>
              </h5>
              <p class="formalpara"><a id="id2926660" class="indexterm"></a>
					The <code class="command">nmbd</code> server daemon understands and replies to NetBIOS name service requests such as those produced by SMB/CIFS in Windows-based systems. These systems include Windows 95/98/ME, Windows NT, Windows 2000, Windows XP, and LanManager clients. It also participates in the browsing protocols that make up the Windows <span><strong class="guilabel">Network Neighborhood</strong></span> view. The default port that the server listens to for NMB traffic is UDP port 137.
				</p>
              <p>
				The <code class="command">nmbd</code> daemon is controlled by the <code class="command">smb</code> service.
			</p>
              <p class="formalpara">
                <a id="s3-samba-daemon-winbindd"></a>
              </p>
              <h5 class="formalpara">
                <code class="command">winbindd</code>
              </h5>
              <p class="formalpara"><a id="id2904644" class="indexterm"></a>
					The <code class="command">winbind</code> service resolves user and group information on a server running Windows NT 2000 or Windows Server 2003. This makes Windows user / group information understandable by UNIX platforms. This is achieved by using Microsoft RPC calls, Pluggable Authentication Modules (PAM), and the Name Service Switch (NSS). This allows Windows NT domain users to appear and operate as UNIX users on a UNIX machine. Though bundled with the Samba distribution, the <code class="command">winbind</code> service is controlled separately from the <code class="command">smb</code> service.
				</p>
              <p>
				The <code class="command">winbindd</code> daemon is controlled by the <code class="command">winbind</code> service and does not require the <code class="command">smb</code> service to be started in order to operate. Winbindd is also used when Samba is an Active Directory member, and may also be used on a Samba domain controller (to implement nested groups and/or interdomain trust). Because <code class="command">winbind</code> is a client-side service used to connect to Windows NT-based servers, further discussion of <code class="command">winbind</code> is beyond the scope of this manual.
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					You may refer to <a href="#s1-samba-programs" title="20.11. Samba Distribution Programs">Section 20.11, “Samba Distribution Programs”</a> for a list of utilities included in the Samba distribution.
				</p>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-connect-share"></a>20.3. Connecting to a Samba Share</h2>
                </div>
              </div>
            </div>
            <a id="id2900077" class="indexterm"></a>
            <p>
			You can use <span><strong class="application">Nautilus</strong></span> to view available Samba shares on your network. Select <span><strong class="guimenu">Places</strong></span> (on the Panel) =&gt; <span><strong class="guimenuitem">Network Servers</strong></span> to view a list of Samba workgroups on your network. You can also type <strong class="userinput"><code>smb:</code></strong> in the <span><strong class="guilabel">File</strong></span> =&gt; <span><strong class="guilabel">Open Location</strong></span> bar of Nautilus to view the workgroups.
		</p>
            <p>
			As shown in <a href="#fig-samba-nautilus-workgroups" title="Figure 20.1. SMB Workgroups in Nautilus">Figure 20.1, “SMB Workgroups in Nautilus”</a>, an icon appears for each available SMB workgroup on the network.
		</p>
            <div class="figure">
              <a id="fig-samba-nautilus-workgroups"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/samba-nautilus.png" alt="SMB Workgroups in Nautilus" />
                  <div class="longdesc">
                    <p>
						SMB Workgroups in Nautilus
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 20.1. SMB Workgroups in Nautilus</h6>
            </div>
            <br class="figure-break" />
            <p>
			Double-click one of the workgroup icons to view a list of computers within the workgroup.
		</p>
            <div class="figure">
              <a id="fig-samba-nautilus-machines"></a>
              <div class="figure-contents">
                <div class="mediaobject">
                  <img src="images/samba-nautilus-machines.png" alt="SMB Machines in Nautilus" />
                  <div class="longdesc">
                    <p>
						SMB Machines in Nautilus
					</p>
                  </div>
                </div>
              </div>
              <h6>Figure 20.2. SMB Machines in Nautilus</h6>
            </div>
            <br class="figure-break" />
            <p>
			As you can see from <a href="#fig-samba-nautilus-machines" title="Figure 20.2. SMB Machines in Nautilus">Figure 20.2, “SMB Machines in Nautilus”</a>, there is an icon for each machine within the workgroup. Double-click on an icon to view the Samba shares on the machine. If a username and password combination is required, you are prompted for them.
		</p>
            <p>
			Alternately, you can also specify the Samba server and sharename in the <span><strong class="guilabel">Location:</strong></span> bar for <span><strong class="application">Nautilus</strong></span> using the following syntax (replace <em class="replaceable"><code>&lt;servername&gt;</code></em> and <em class="replaceable"><code>&lt;sharename&gt;</code></em> with the appropriate values):
		</p>
            <pre class="screen"><code class="command">smb://<em class="replaceable"><code>&lt;servername&gt;</code></em>/<em class="replaceable"><code>&lt;sharename&gt;</code></em></code>
</pre>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-connect-share-cmdline"></a>20.3.1. Command Line</h3>
                  </div>
                </div>
              </div>
              <a id="id2955130" class="indexterm"></a>
              <a id="id2955147" class="indexterm"></a>
              <a id="id2955164" class="indexterm"></a>
              <p>
				To query the network for Samba servers, use the <code class="command">findsmb</code> command. For each server found, it displays its IP address, NetBIOS name, workgroup name, operating system, and SMB server version.
			</p>
              <a id="id2955189" class="indexterm"></a>
              <a id="id2955206" class="indexterm"></a>
              <p>
				To connect to a Samba share from a shell prompt, type the following command:
			</p>
              <pre class="screen"><code class="command">smbclient //<em class="replaceable"><code>&lt;hostname&gt;</code></em>/<em class="replaceable"><code>&lt;sharename&gt;</code></em> -U <em class="replaceable"><code>&lt;username&gt;</code></em></code>
</pre>
              <p>
				Replace <em class="replaceable"><code>&lt;hostname&gt;</code></em> with the hostname or IP address of the Samba server you want to connect to, <em class="replaceable"><code>&lt;sharename&gt;</code></em> with the name of the shared directory you want to browse, and <em class="replaceable"><code>&lt;username&gt;</code></em> with the Samba username for the system. Enter the correct password or press <span><strong class="keycap">Enter</strong></span> if no password is required for the user.
			</p>
              <p>
				If you see the <code class="prompt">smb:\&gt;</code> prompt, you have successfully logged in. Once you are logged in, type <strong class="userinput"><code>help</code></strong> for a list of commands. If you wish to browse the contents of your home directory, replace <em class="replaceable"><code>sharename</code></em> with your username. If the <code class="command">-U</code> switch is not used, the username of the current user is passed to the Samba server.
			</p>
              <p>
				To exit <code class="command">smbclient</code>, type <strong class="userinput"><code>exit</code></strong> at the <code class="prompt">smb:\&gt;</code> prompt.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-samba-mounting"></a>20.3.2. Mounting the Share</h3>
                  </div>
                </div>
              </div>
              <a id="id2922914" class="indexterm"></a>
              <p>
				Sometimes it is useful to mount a Samba share to a directory so that the files in the directory can be treated as if they are part of the local file system.
			</p>
              <p>
				To mount a Samba share to a directory, create create a directory to mount it to (if it does not already exist), and execute the following command as root:
			</p>
              <pre class="screen"><code class="command">mount -t cifs -o <em class="replaceable"><code>&lt;username&gt;</code></em>,<em class="replaceable"><code>&lt;password&gt;</code></em> //<em class="replaceable"><code>&lt;servername&gt;</code></em>/<em class="replaceable"><code>&lt;sharename&gt;</code></em><em class="replaceable"><code>/mnt/point/</code></em></code>
</pre>
              <p>
				This command mounts <em class="replaceable"><code>&lt;sharename&gt;</code></em> from <em class="replaceable"><code>&lt;servername&gt;</code></em> in the local directory <em class="replaceable"><code>/mnt/point/</code></em>. For more information about mounting a samba share, refer to <code class="command">man mount.cifs</code>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-configuring"></a>20.4. Configuring a Samba Server</h2>
                </div>
              </div>
            </div>
            <a id="id2968885" class="indexterm"></a>
            <a id="id2968898" class="indexterm"></a>
            <p>
			The default configuration file (<code class="filename">/etc/samba/smb.conf</code>) allows users to view their home directories as a Samba share. It also shares all printers configured for the system as Samba shared printers. In other words, you can attach a printer to the system and print to it from the Windows machines on your network.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-configuring-gui"></a>20.4.1. Graphical Configuration</h3>
                  </div>
                </div>
              </div>
              <a id="id2968937" class="indexterm"></a>
              <p>
				To configure Samba using a graphical interface, use the <span><strong class="application">Samba Server Configuration Tool</strong></span>. For command line configuration, skip to <a href="#s2-samba-configuring-cmdline" title="20.4.2. Command Line Configuration">Section 20.4.2, “Command Line Configuration”</a>.
			</p>
              <p>
				The <span><strong class="application">Samba Server Configuration Tool</strong></span> is a graphical interface for managing Samba shares, users, and basic server settings. It modifies the configuration files in the <code class="filename">/etc/samba/</code> directory. Any changes to these files not made using the application are preserved.
			</p>
              <p>
				To use this application, you must be running the X Window System, have root privileges, and have the <code class="filename">system-config-samba</code> RPM package installed. To start the <span><strong class="application">Samba Server Configuration Tool</strong></span> from the desktop, go to the <span><strong class="guimenu">System</strong></span> (on the Panel) =&gt; <span><strong class="guimenuitem">Administration</strong></span> =&gt; <span><strong class="guimenuitem">Server Settings</strong></span> =&gt; <span><strong class="guimenuitem">Samba</strong></span> or type the command <code class="command">system-config-samba</code> at a shell prompt (for example, in an XTerm or a GNOME terminal).
			</p>
              <div class="figure">
                <a id="fig-s-c-samba"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/s-c-samba.png" alt="Samba Server Configuration Tool" />
                    <div class="longdesc">
                      <p>
							<span><strong class="application">Samba Server Configuration Tool</strong></span>
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 20.3. <span>Samba Server Configuration Tool</span></h6>
              </div>
              <br class="figure-break" />
              <div class="note">
                <h2>Note</h2>
                <p>
					The <span><strong class="application">Samba Server Configuration Tool</strong></span> does not display shared printers or the default stanza that allows users to view their own home directories on the Samba server.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-gui-server-settings"></a>20.4.1.1. Configuring Server Settings</h4>
                    </div>
                  </div>
                </div>
                <a id="id2969784" class="indexterm"></a>
                <p>
					The first step in configuring a Samba server is to configure the basic settings for the server and a few security options. After starting the application, select <span><strong class="guimenu">Preferences</strong></span> =&gt; <span><strong class="guimenuitem">Server Settings</strong></span> from the pulldown menu. The <span><strong class="guilabel">Basic</strong></span> tab is displayed as shown in <a href="#fig-samba-basic" title="Figure 20.4. Configuring Basic Server Settings">Figure 20.4, “Configuring Basic Server Settings”</a>.
				</p>
                <div class="figure">
                  <a id="fig-samba-basic"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/s-c-samba-basic.png" alt="Configuring Basic Server Settings" />
                      <div class="longdesc">
                        <p>
								Configuring Basic Server Settings
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 20.4. Configuring Basic Server Settings</h6>
                </div>
                <br class="figure-break" />
                <p>
					On the <span><strong class="guilabel">Basic</strong></span> tab, specify which workgroup the computer should be in as well as a brief description of the computer. They correspond to the <code class="command">workgroup</code> and <code class="command">server string</code> options in <code class="filename">smb.conf</code>.
				</p>
                <div class="figure">
                  <a id="fig-samba-security"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/s-c-samba-security.png" alt="Configuring Security Server Settings" />
                      <div class="longdesc">
                        <p>
								Configuring Security Server Settings
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 20.5. Configuring Security Server Settings</h6>
                </div>
                <br class="figure-break" />
                <p>
					The <span><strong class="guilabel">Security</strong></span> tab contains the following options:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guilabel">Authentication Mode</strong></span> — This corresponds to the <code class="command">security</code> option. Select one of the following types of authentication.
						</p>
                      <div class="itemizedlist">
                        <ul>
                          <li>
                            <p>
									<span><strong class="guilabel">ADS</strong></span> — The Samba server acts as a domain member in an Active Directory Domain (ADS) realm. For this option, Kerberos must be installed and configured on the server, and Samba must become a member of the ADS realm using the <code class="command">net</code> utility, which is part of the <code class="filename">samba-client</code> package. Refer to the <code class="command">net</code> man page for details. This option does not configure Samba to be an ADS Controller. Specify the realm of the Kerberos server in the <span><strong class="guilabel">Kerberos Realm</strong></span> field.
								</p>
                            <div class="note">
                              <h2>Note</h2>
                              <p>
										The <span><strong class="guilabel">Kerberos Realm</strong></span> field must be supplied in all uppercase letters, such as <code class="command">EXAMPLE.COM</code>.
									</p>
                              <p>
										Using a Samba server as a domain member in an ADS realm assumes proper configuration of Kerberos, including the <code class="filename">/etc/krb5.conf</code> file.
									</p>
                            </div>
                          </li>
                          <li>
                            <p>
									<span><strong class="guilabel">Domain</strong></span> — The Samba server relies on a Windows NT Primary or Backup Domain Controller to verify the user. The server passes the username and password to the Controller and waits for it to return. Specify the NetBIOS name of the Primary or Backup Domain Controller in the <span><strong class="guilabel">Authentication Server</strong></span> field.
								</p>
                            <p>
									The <span><strong class="guilabel">Encrypted Passwords</strong></span> option must be set to <span><strong class="guilabel">Yes</strong></span> if this is selected.
								</p>
                          </li>
                          <li>
                            <p>
									<span><strong class="guilabel">Server</strong></span> — The Samba server tries to verify the username and password combination by passing them to another Samba server. If it can not, the server tries to verify using the user authentication mode. Specify the NetBIOS name of the other Samba server in the <span><strong class="guilabel">Authentication Server</strong></span> field.
								</p>
                          </li>
                          <li>
                            <p>
									<span><strong class="guilabel">Share</strong></span> — Samba users do not have to enter a username and password combination on a per Samba server basis. They are not prompted for a username and password until they try to connect to a specific shared directory from a Samba server.
								</p>
                          </li>
                          <li>
                            <p>
									<span><strong class="guilabel">User</strong></span> — (Default) Samba users must provide a valid username and password on a per Samba server basis. Select this option if you want the <span><strong class="guilabel">Windows Username</strong></span> option to work. Refer to <a href="#s3-samba-gui-users" title="20.4.1.2. Managing Samba Users">Section 20.4.1.2, “Managing Samba Users”</a> for details.
								</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Encrypt Passwords</strong></span> — This option must be enabled if the clients are connecting from a system with Windows 98, Windows NT 4.0 with Service Pack 3, or other more recent versions of Microsoft Windows. The passwords are transfered between the server and the client in an encrypted format instead of as a plain-text word that can be intercepted. This corresponds to the <code class="command">encrypted passwords</code> option. Refer to <a href="#s2-samba-encrypted-passwords" title="20.4.3. Encrypted Passwords">Section 20.4.3, “Encrypted Passwords”</a> for more information about encrypted Samba passwords.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Guest Account</strong></span> — When users or guest users log into a Samba server, they must be mapped to a valid user on the server. Select one of the existing usernames on the system to be the guest Samba account. When guests log in to the Samba server, they have the same privileges as this user. This corresponds to the <code class="command">guest account</code> option.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					After clicking <span><strong class="guibutton">OK</strong></span>, the changes are written to the configuration file and the daemon is restarted; thus, the changes take effect immediately.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-gui-users"></a>20.4.1.2. Managing Samba Users</h4>
                    </div>
                  </div>
                </div>
                <a id="id2863951" class="indexterm"></a>
                <p>
					The <span><strong class="application">Samba Server Configuration Tool</strong></span> requires that an existing user account be active on the system acting as the Samba server before a Samba user can be added. The Samba user is associated with the existing user account.
				</p>
                <div class="figure">
                  <a id="fig-samba-users"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/s-c-samba-users.png" alt="Managing Samba Users" />
                      <div class="longdesc">
                        <p>
								Managing Samba Users
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 20.6. Managing Samba Users</h6>
                </div>
                <br class="figure-break" />
                <p>
					To add a Samba user, select <span><strong class="guimenu">Preferences</strong></span> =&gt; <span><strong class="guimenuitem">Samba Users</strong></span> from the pulldown menu, and click the <span><strong class="guibutton">Add User</strong></span> button. In the <span><strong class="guilabel">Create New Samba User</strong></span> window select a <span><strong class="guilabel">Unix Username</strong></span> from the list of existing users on the local system.
				</p>
                <p>
					If the user has a different username on a Windows machine and needs to log into the Samba server from the Windows machine, specify that Windows username in the <span><strong class="guilabel">Windows Username</strong></span> field. The <span><strong class="guilabel">Authentication Mode</strong></span> on the <span><strong class="guilabel">Security</strong></span> tab of the <span><strong class="guilabel">Server Settings</strong></span> preferences must be set to <span><strong class="guilabel">User</strong></span> for this option to work.
				</p>
                <p>
					Also, configure a <span><strong class="guilabel">Samba Password</strong></span> for the Samba User and confirm it by typing it again. Even if you opt to use encrypted passwords for Samba, it is recommended that the Samba passwords for all users are different from their system passwords.
				</p>
                <p>
					To edit an existing user, select the user from the list, and click <span><strong class="guibutton">Edit User</strong></span>. To delete an existing Samba user, select the user, and click the <span><strong class="guibutton">Delete User</strong></span> button. Deleting a Samba user does not delete the associated system user account.
				</p>
                <p>
					The users are modified immediately after clicking the <span><strong class="guibutton">OK</strong></span> button.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-gui-add-share"></a>20.4.1.3. Adding a Share</h4>
                    </div>
                  </div>
                </div>
                <a id="id2973670" class="indexterm"></a>
                <p>
					To create a Samba share, click the <span><strong class="guibutton">Add</strong></span> button from the main Samba configuration window.
				</p>
                <div class="figure">
                  <a id="fig-samba-add-share"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/s-c-samba-create-share.png" alt="Adding a Share" />
                      <div class="longdesc">
                        <p>
								Adding a Samba Share
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 20.7. Adding a Share</h6>
                </div>
                <br class="figure-break" />
                <p>
					The <span><strong class="guilabel">Basic</strong></span> tab configures the following options:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guilabel">Directory</strong></span> — The directory to share via Samba. The directory must exist before it can be entered here.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Share name</strong></span> — The actual name of the share that is seen from remote machines. By default, it is the same value as <span><strong class="guilabel">Directory</strong></span>, but can be configured.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Descriptions</strong></span> — A brief description of the share.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Writable</strong></span> — Enables users to read and write to the shared directory
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Visible</strong></span> — Grants read-only rights to users for the shared directory.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					On the <span><strong class="guilabel">Access</strong></span> tab, select whether to allow only specified users to access the share or whether to allow all Samba users to access the share. If you select to allow access to specific users, select the users from the list of available Samba users.
				</p>
                <p>
					The share is added immediately after clicking <span><strong class="guibutton">OK</strong></span>.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-configuring-cmdline"></a>20.4.2. Command Line Configuration</h3>
                  </div>
                </div>
              </div>
              <a id="id2973860" class="indexterm"></a>
              <p>
				Samba uses <code class="filename">/etc/samba/smb.conf</code> as its configuration file. If you change this configuration file, the changes do not take effect until you restart the Samba daemon with the command <code class="command">service smb restart</code>.
			</p>
              <p>
				To specify the Windows workgroup and a brief description of the Samba server, edit the following lines in your <code class="filename">smb.conf</code> file:
			</p>
              <pre class="screen">
workgroup = <em class="replaceable"><code>WORKGROUPNAME</code></em> 
server string = <em class="replaceable"><code>BRIEF COMMENT ABOUT SERVER</code></em>
</pre>
              <p>
				Replace <em class="replaceable"><code>WORKGROUPNAME</code></em> with the name of the Windows workgroup to which this machine should belong. The <em class="replaceable"><code>BRIEF COMMENT ABOUT SERVER</code></em> is optional and is used as the Windows comment about the Samba system.
			</p>
              <p>
				To create a Samba share directory on your Linux system, add the following section to your <code class="command">smb.conf</code> file (after modifying it to reflect your needs and your system):
			</p>
              <pre class="screen">
[<em class="replaceable"><code>sharename</code></em>] 
comment = <em class="replaceable"><code>Insert a comment here</code></em> 
path = <em class="replaceable"><code>/home/share/</code></em> 
valid users = <em class="replaceable"><code>tfox carole</code></em> 
public = no 
writable = yes 
printable = no 
create mask = 0765
</pre>
              <p>
				The above example allows the users <code class="command">tfox</code> and <code class="command">carole</code> to read and write to the directory <code class="filename">/home/share</code>, on the Samba server, from a Samba client.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-encrypted-passwords"></a>20.4.3. Encrypted Passwords</h3>
                  </div>
                </div>
              </div>
              <p>
				Encrypted passwords are enabled by default because it is more secure to do so. To create a user with an encrypted password, use the command <code class="command">smbpasswd -a <em class="replaceable"><code>&lt;username&gt;</code></em></code>.
			</p>
              <a id="id2886586" class="indexterm"></a>
              <a id="id2886600" class="indexterm"></a>
              <a id="id2886614" class="indexterm"></a>
              <a id="id2886627" class="indexterm"></a>
              <a id="id2886640" class="indexterm"></a>
              <a id="id2886653" class="indexterm"></a>
              <a id="id2886667" class="indexterm"></a>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-startstop"></a>20.5. Starting and Stopping Samba</h2>
                </div>
              </div>
            </div>
            <a id="id2896316" class="indexterm"></a>
            <a id="id2896333" class="indexterm"></a>
            <a id="id2896350" class="indexterm"></a>
            <a id="id2896367" class="indexterm"></a>
            <a id="id2896384" class="indexterm"></a>
            <p>
			To start a Samba server, type the following command in a shell prompt while logged in as root:
		</p>
            <pre class="screen"><code class="command">/sbin/service smb start</code>
</pre>
            <div class="important">
              <h2>Important</h2>
              <p>
				To set up a domain member server, you must first join the domain or Active Directory using the <code class="command">net join</code> command <span class="emphasis"><em>before</em></span> starting the <code class="command">smb</code> service.
			</p>
            </div>
            <p>
			To stop the server, type the following command in a shell prompt while logged in as root:
		</p>
            <pre class="screen"><code class="command">/sbin/service smb stop</code>
</pre>
            <p>
			The <code class="option">restart</code> option is a quick way of stopping and then starting Samba. This is the most reliable way to make configuration changes take effect after editing the configuration file for Samba. Note that the restart option starts the daemon even if it was not running originally.
		</p>
            <p>
			To restart the server, type the following command in a shell prompt while logged in as root:
		</p>
            <pre class="screen"><code class="command"> /sbin/service smb restart </code>
</pre>
            <p>
			The <code class="option">condrestart</code> (<em class="firstterm">conditional restart</em>) option only starts <code class="command">smb</code> on the condition that it is currently running. This option is useful for scripts, because it does not start the daemon if it is not running.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				When the <code class="command">smb.conf</code> file is changed, Samba automatically reloads it after a few minutes. Issuing a manual <code class="command">restart</code> or <code class="command">reload</code> is just as effective.
			</p>
            </div>
            <p>
			To conditionally restart the server, type the following command as root:
		</p>
            <pre class="screen"><code class="command"> /sbin/service smb condrestart </code>
</pre>
            <p>
			A manual reload of the <code class="command">smb.conf</code> file can be useful in case of a failed automatic reload by the <code class="command">smb</code> service. To ensure that the Samba server configuration file is reloaded without restarting the service, type the following command as root:
		</p>
            <pre class="screen"><code class="command"> /sbin/service smb reload </code>
</pre>
            <p>
			By default, the <code class="command">smb</code> service does <span class="emphasis"><em>not</em></span> start automatically at boot time. To configure Samba to start at boot time, use an initscript utility, such as <code class="command">/sbin/chkconfig</code>, <code class="command">/usr/sbin/ntsysv</code>, or the <span><strong class="application">Services Configuration Tool</strong></span> program. Refer to <a href="#ch-services" title="Chapter 16. Controlling Access to Services">Chapter 16, <i>Controlling Access to Services</i></a> for more information regarding these tools.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-servers"></a>20.6. Samba Server Types and the <code class="command">smb.conf</code> File</h2>
                </div>
              </div>
            </div>
            <a id="id2974157" class="indexterm"></a>
            <a id="id2974170" class="indexterm"></a>
            <p>
			Samba configuration is straightforward. All modifications to Samba are done in the <code class="filename">/etc/samba/smb.conf</code> configuration file. Although the default <code class="filename">smb.conf</code> file is well documented, it does not address complex topics such as LDAP, Active Directory, and the numerous domain controller implementations.
		</p>
            <p>
			The following sections describe the different ways a Samba server can be configured. Keep in mind your needs and the changes required to the <code class="filename">smb.conf</code> file for a successful configuration.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-standalone"></a>20.6.1. Stand-alone Server</h3>
                  </div>
                </div>
              </div>
              <a id="id2974225" class="indexterm"></a>
              <p>
				A stand-alone server can be a workgroup server or a member of a workgroup environment. A stand-alone server is not a domain controller and does not participate in a domain in any way. The following examples include several anonymous share-level security configurations and one user-level security configuration. For more information on share-level and user-level security modes, refer to <a href="#s1-samba-security-modes" title="20.7. Samba Security Modes">Section 20.7, “Samba Security Modes”</a>.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-standalone-anonreadonly"></a>20.6.1.1. Anonymous Read-Only</h4>
                    </div>
                  </div>
                </div>
                <a id="id2974265" class="indexterm"></a>
                <p>
					The following <code class="command">smb.conf</code> file shows a sample configuration needed to implement anonymous read-only file sharing. The <code class="command">security = share</code> parameter makes a share anonymous. Note, security levels for a single Samba server cannot be mixed. The <code class="command">security</code> directive is a global Samba parameter located in the <code class="command">[global]</code> configuration section of the <code class="command">smb.conf</code> file.
				</p>
                <pre class="screen">
[global] 
workgroup = DOCS 
netbios name = DOCS_SRV 
security = share  
[data] 
comment = Documentation Samba Server 
path = /export 
read only = Yes 
guest only = Yes
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-standalone-anonreadwrite"></a>20.6.1.2. Anonymous Read/Write</h4>
                    </div>
                  </div>
                </div>
                <a id="id2964286" class="indexterm"></a>
                <p>
					The following <code class="command">smb.conf</code> file shows a sample configuration needed to implement anonymous read/write file sharing. To enable anonymous read/write file sharing, set the <code class="command">read only</code> directive to <code class="command">no</code>. The <code class="command">force user</code> and <code class="command">force group</code> directives are also added to enforce the ownership of any newly placed files specified in the share.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						Although having an anonymous read/write server is possible, it is not recommended. Any files placed in the share space, regardless of user, are assigned the user/group combination as specified by a generic user (<code class="command">force user</code>) and group (<code class="command">force group</code>) in the <code class="filename">smb.conf</code> file.
					</p>
                </div>
                <pre class="screen">
[global] 
workgroup = DOCS 
netbios name = DOCS_SRV 
security = share  
[data] 
comment = Data 
path = /export 
force user = docsbot 
force group = users 
read only = No 
guest ok = Yes
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-standalone-anonprint"></a>20.6.1.3. Anonymous Print Server</h4>
                    </div>
                  </div>
                </div>
                <a id="id2964391" class="indexterm"></a>
                <p>
					The following <code class="command">smb.conf</code> file shows a sample configuration needed to implement an anonymous print server. Setting <code class="command">browseable</code> to <code class="command">no</code> as shown does not list the printer in Windows <span><strong class="guilabel">Network Neighborhood</strong></span>. Although hidden from browsing, configuring the printer explicitly is possible. By connecting to <code class="command">DOCS_SRV</code> using NetBIOS, the client can have access to the printer if the client is also part of the <code class="command">DOCS</code> workgroup. It is also assumed that the client has the correct local printer driver installed, as the <code class="command">use client driver</code> directive is set to <code class="command">Yes</code>. In this case, the Samba server has no responsibility for sharing printer drivers to the client.
				</p>
                <pre class="screen">
[global] 
workgroup = DOCS 
netbios name = DOCS_SRV 
security = share 
printcap name = cups 
disable spools= Yes 
show add printer wizard = No 
printing = cups  
[printers] 
comment = All Printers 
path = /var/spool/samba 
guest ok = Yes 
printable = Yes 
use client driver = Yes 
browseable = Yes
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-standalone-readwriteall"></a>20.6.1.4. Secure Read/Write File and Print Server</h4>
                    </div>
                  </div>
                </div>
                <a id="id3028800" class="indexterm"></a>
                <p>
					The following <code class="command">smb.conf</code> file shows a sample configuration needed to implement a secure read/write print server. Setting the <code class="command">security</code> directive to <code class="command">user</code> forces Samba to authenticate client connections. Notice the <code class="command">[homes]</code> share does not have a <code class="command">force user</code> or <code class="command">force group</code> directive as the <code class="command">[public]</code> share does. The <code class="command">[homes]</code> share uses the authenticated user details for any files created as opposed to the <code class="command">force user</code> and <code class="command">force group</code> in <code class="command">[public]</code>.
				</p>
                <pre class="screen">
[global] 
workgroup = DOCS 
netbios name = DOCS_SRV 
security = user 
printcap name = cups 
disable spools = Yes 
show add printer wizard = No 
printing = cups  
[homes] 
comment = Home Directories 
valid users = %S 
read only = No 
browseable = No  
[public] 
comment = Data 
path = /export 
force user = docsbot 
force group = users 
guest ok = Yes  
[printers] 
comment = All Printers 
path = /var/spool/samba 
printer admin = john, ed, @admins 
create mask = 0600 
guest ok = Yes 
printable = Yes 
use client driver = Yes 
browseable = Yes
</pre>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-domain-member"></a>20.6.2. Domain Member Server</h3>
                  </div>
                </div>
              </div>
              <a id="id3028917" class="indexterm"></a>
              <p>
				A domain member, while similar to a stand-alone server, is logged into a domain controller (either Windows or Samba) and is subject to the domain's security rules. An example of a domain member server would be a departmental server running Samba that has a machine account on the Primary Domain Controller (PDC). All of the department's clients still authenticate with the PDC, and desktop profiles and all network policy files are included. The difference is that the departmental server has the ability to control printer and network shares.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-domain-member-ads"></a>20.6.2.1. Active Directory Domain Member Server</h4>
                    </div>
                  </div>
                </div>
                <a id="id3028956" class="indexterm"></a>
                <p>
					The following <code class="command">smb.conf</code> file shows a sample configuration needed to implement an Active Directory domain member server. In this example, Samba authenticates users for services being run locally but is also a client of the Active Directory. Ensure that your kerberos <code class="command">realm</code> parameter is shown in all caps (for example <code class="command">realm = EXAMPLE.COM</code>). Since Windows 2000/2003 requires Kerberos for Active Directory authentication, the <code class="command">realm</code> directive is required. If Active Directory and Kerberos are running on different servers, the <code class="command">password server</code> directive may be required to help the distinction.
				</p>
                <pre class="screen">
[global] 
realm = EXAMPLE.COM 
security = ADS 
encrypt passwords = yes 
# Optional. Use only if Samba cannot determine the Kerberos server automatically. 
password server = kerberos.example.com
</pre>
                <p>
					In order to join a member server to an Active Directory domain, the following steps must be completed:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Configuration of the <code class="filename">smb.conf</code> file on the member server
						</p>
                    </li>
                    <li>
                      <p>
							Configuration of Kerberos, including the <code class="filename">/etc/krb5.conf</code> file, on the member server
						</p>
                    </li>
                    <li>
                      <p>
							Creation of the machine account on the Active Directory domain server
						</p>
                    </li>
                    <li>
                      <p>
							Association of the member server to the Active Directory domain
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					To create the machine account and join the Windows 2000/2003 Active Directory, Kerberos must first be initialized for the member server wishing to join the Active Directory domain. To create an administrative Kerberos ticket, type the following command as root on the member server:
				</p>
                <pre class="screen"><strong class="userinput"><code>kinit administrator@EXAMPLE.COM</code></strong>
</pre>
                <p>
					The <code class="command">kinit</code> command is a Kerberos initialization script that references the Active Directory administrator account and Kerberos realm. Since Active Directory requires Kerberos tickets, <code class="command">kinit</code> obtains and caches a Kerberos ticket-granting ticket for client/server authentication. For more information on Kerberos, the <code class="command">/etc/krb5.conf</code> file, and the <code class="command">kinit</code> command, refer to <a href="#ch-kerberos" title="43.6. Kerberos">Section 43.6, “Kerberos”</a>.
				</p>
                <p>
					To join an Active Directory server (windows1.example.com), type the following command as root on the member server:
				</p>
                <pre class="screen"><strong class="userinput"><code>net ads join -S windows1.example.com -U administrator%password</code></strong>
</pre>
                <p>
					Since the machine <code class="command">windows1</code> was automatically found in the corresponding Kerberos realm (the <code class="command">kinit</code> command succeeded), the <code class="command">net</code> command connects to the Active Directory server using its required administrator account and password. This creates the appropriate machine account on the Active Directory and grants permissions to the Samba domain member server to join the domain.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						Since <code class="command">security = ads</code> and not <code class="command">security = user</code> is used, a local password backend such as <code class="filename">smbpasswd</code> is not needed. Older clients that do not support <code class="command">security = ads</code> are authenticated as if <code class="command">security = domain</code> had been set. This change does not affect functionality and allows local users not previously in the domain.
					</p>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-domain-member-nt4"></a>20.6.2.2. Windows NT4-based Domain Member Server</h4>
                    </div>
                  </div>
                </div>
                <a id="id2965660" class="indexterm"></a>
                <p>
					The following <code class="command">smb.conf</code> file shows a sample configuration needed to implement a Windows NT4-based domain member server. Becoming a member server of an NT4-based domain is similar to connecting to an Active Directory. The main difference is NT4-based domains do not use Kerberos in their authentication method, making the <code class="command">smb.conf</code> file simpler. In this instance, the Samba member server functions as a pass through to the NT4-based domain server.
				</p>
                <pre class="screen">
[global] 
workgroup = DOCS 
netbios name = DOCS_SRV 
security = domain  
[homes] 
comment = Home Directories 
valid users = %S 
read only = No 
browseable = No  
[public] 
comment = Data 
path = /export 
force user = docsbot 
force group = users 
guest ok = Yes
</pre>
                <p>
					Having Samba as a domain member server can be useful in many situations. There are times where the Samba server can have other uses besides file and printer sharing. It may be beneficial to make Samba a domain member server in instances where Linux-only applications are required for use in the domain environment. Administrators appreciate keeping track of all machines in the domain, even if not Windows-based. In the event the Windows-based server hardware is deprecated, it is quite easy to modify the <code class="command">smb.conf</code> file to convert the server to a Samba-based PDC. If Windows NT-based servers are upgraded to Windows 2000/2003, the <code class="command">smb.conf</code> file is easily modifiable to incorporate the infrastructure change to Active Directory if needed.
				</p>
                <div class="important">
                  <h2>Important</h2>
                  <p>
						After configuring the <code class="command">smb.conf</code> file, join the domain <span class="emphasis"><em>before</em></span> starting Samba by typing the following command as root:
					</p>
                  <pre class="screen"><strong class="userinput"><code>net rpc join -U administrator%password</code></strong>
</pre>
                </div>
                <p>
					Note that the <code class="option">-S</code> option, which specifies the domain server hostname, does not need to be stated in the <code class="command">net rpc join</code> command. Samba uses the hostname specified by the <code class="command">workgroup</code> directive in the <code class="filename">smb.conf</code> file instead of it being stated explicitly.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-domain-controller"></a>20.6.3. Domain Controller</h3>
                  </div>
                </div>
              </div>
              <a id="id2965808" class="indexterm"></a>
              <p>
				A domain controller in Windows NT is functionally similar to a Network Information Service (NIS) server in a Linux environment. Domain controllers and NIS servers both host user/group information databases as well as related services. Domain controllers are mainly used for security, including the authentication of users accessing domain resources. The service that maintains the user/group database integrity is called the <em class="firstterm">Security Account Manager</em> (SAM). The SAM database is stored differently between Windows and Linux Samba-based systems, therefore SAM replication cannot be achieved and platforms cannot be mixed in a PDC/BDC environment.
			</p>
              <p>
				In a Samba environment, there can be only one PDC and zero or more BDCs.
			</p>
              <div class="important">
                <h2>Important</h2>
                <p>
					Samba cannot exist in a mixed Samba/Windows domain controller environment (Samba cannot be a BDC of a Windows PDC or vice versa). Alternatively, Samba PDCs and BDCs <span class="emphasis"><em>can</em></span> coexist.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-samba-pdc-tdbsam"></a>20.6.3.1. Primary Domain Controller (PDC) using <code class="command">tdbsam</code></h4>
                    </div>
                  </div>
                </div>
                <a id="id2965880" class="indexterm"></a>
                <p>
					The simplest and most common implementation of a Samba PDC uses the <code class="command">tdbsam</code> password database backend. Planned to replace the aging <code class="command">smbpasswd</code> backend, <code class="command">tdbsam</code> has numerous improvements that are explained in more detail in <a href="#s1-samba-account-info-dbs" title="20.8. Samba Account Information Databases">Section 20.8, “Samba Account Information Databases”</a>. The <code class="command">passdb backend</code> directive controls which backend is to be used for the PDC.
				</p>
                <pre class="screen">
[global] 
workgroup = DOCS 
netbios name = DOCS_SRV  
passdb backend = tdbsam 
security = user 
add user script = /usr/sbin/useradd -m %u 
delete user script = /usr/sbin/userdel -r %u 
add group script = /usr/sbin/groupadd %g  
delete group script = /usr/sbin/groupdel %g  
add user to group script = /usr/sbin/usermod -G %g %u 
add machine script = /usr/sbin/useradd -s /bin/false -d /dev/null  -g machines %u 
# The following specifies the default logon script  
# Per user logon scripts can be specified in the user 
# account using pdbedit logon script = logon.bat 
# This sets the default profile path. 
# Set per user paths with pdbedit 
logon drive = H: 
domain logons = Yes 
os level = 35 
preferred master = Yes 
domain master = Yes  
[homes] 
	comment = Home Directories 
	valid users = %S 
	read only = No  
[netlogon] 
	comment = Network Logon Service 
	path = /var/lib/samba/netlogon/scripts 
	browseable = No	 
	read only = No
# For profiles to work, create a user directory under the 
# path shown. <code class="command">mkdir -p /var/lib/samba/profiles/john</code> 
[Profiles] 
	comment = Roaming Profile Share 
	path = /var/lib/samba/profiles 
	read only = No 
	browseable = No 
	guest ok = Yes 
	profile acls = Yes  
# Other resource shares ... ...
</pre>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						If you need more than one domain controller or have more than 250 users, do <span class="emphasis"><em>not</em></span> use a <code class="command">tdbsam</code> authentication backend. LDAP is recommended in these cases.
					</p>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="samba-rgs-pdc-ads"></a>20.6.3.2. Primary Domain Controller (PDC) with Active Directory</h4>
                    </div>
                  </div>
                </div>
                <a id="id3021396" class="indexterm"></a>
                <p>
					Although it is possible for Samba to be a member of an Active Directory, it is not possible for Samba to operate as an Active Directory domain controller.
				</p>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-security-modes"></a>20.7. Samba Security Modes</h2>
                </div>
              </div>
            </div>
            <a id="id3021431" class="indexterm"></a>
            <p>
			There are only two types of security modes for Samba, <span class="emphasis"><em>share-level</em></span> and <span class="emphasis"><em>user-level</em></span>, which are collectively known as <span class="emphasis"><em><em class="firstterm">security levels</em></em></span>. Share-level security can only be implemented in one way, while user-level security can be implemented in one of four different ways. The different ways of implementing a security level are called <span class="emphasis"><em><em class="firstterm">security modes</em></em></span>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-user-level"></a>20.7.1. User-Level Security</h3>
                  </div>
                </div>
              </div>
              <a id="id3021478" class="indexterm"></a>
              <p>
				User-level security is the default setting for Samba. Even if the <code class="command">security = user</code> directive is not listed in the <code class="command">smb.conf</code> file, it is used by Samba. If the server accepts the client's username/password, the client can then mount multiple shares without specifying a password for each instance. Samba can also accept session-based username/password requests. The client maintains multiple authentication contexts by using a unique UID for each logon.
			</p>
              <p>
				In <code class="command">smb.conf</code>, the <code class="command">security = user</code> directive that sets user-level security is:
			</p>
              <pre class="screen">
[GLOBAL] 
... 
security = user 
...
</pre>
              <p>
				The following sections describe other implementations of user-level security.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-samba-domain-security-mode"></a>20.7.1.1. Domain Security Mode (User-Level Security)</h4>
                    </div>
                  </div>
                </div>
                <a id="id2882828" class="indexterm"></a>
                <p>
					In domain security mode, the Samba server has a machine account (domain security trust account) and causes all authentication requests to be passed through to the domain controllers. The Samba server is made into a domain member server by using the following directives in <code class="command">smb.conf</code>:
				</p>
                <pre class="screen">
[GLOBAL] 
... 
security = domain 
workgroup = MARKETING 
...
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-samba-ads-security-mode"></a>20.7.1.2. Active Directory Security Mode (User-Level Security)</h4>
                    </div>
                  </div>
                </div>
                <a id="id2882877" class="indexterm"></a>
                <p>
					If you have an Active Directory environment, it is possible to join the domain as a native Active Directory member. Even if a security policy restricts the use of NT-compatible authentication protocols, the Samba server can join an ADS using Kerberos. Samba in Active Directory member mode can accept Kerberos tickets.
				</p>
                <p>
					In <code class="command">smb.conf</code>, the following directives make Samba an Active Directory member server:
				</p>
                <pre class="screen">
[GLOBAL] 
... 
security = ADS 
realm = EXAMPLE.COM 
password server = kerberos.example.com  
...
</pre>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-samba-server-security-mode"></a>20.7.1.3. Server Security Mode (User-Level Security)</h4>
                    </div>
                  </div>
                </div>
                <a id="id2882932" class="indexterm"></a>
                <p>
					Server security mode was previously used when Samba was not capable of acting as a domain member server.
				</p>
                <div class="note">
                  <h2>Note</h2>
                  <p>
						It is highly recommended to <span class="emphasis"><em>not</em></span> use this mode since there are numerous security drawbacks.
					</p>
                </div>
                <p>
					In <code class="filename">smb.conf</code>, the following directives enable Samba to operate in server security mode:
				</p>
                <pre class="screen">
[GLOBAL] 
... 
encrypt passwords = Yes 
security = server 
password server = "NetBIOS_of_Domain_Controller" 
...
</pre>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-share-level"></a>20.7.2. Share-Level Security</h3>
                  </div>
                </div>
              </div>
              <a id="id2882999" class="indexterm"></a>
              <p>
				With share-level security, the server accepts only a password without an explicit username from the client. The server expects a password for each share, independent of the username. There have been recent reports that Microsoft Windows clients have compatibility issues with share-level security servers. Samba developers strongly discourage use of share-level security.
			</p>
              <p>
				In <code class="filename">smb.conf</code>, the <code class="command">security = share</code> directive that sets share-level security is:
			</p>
              <pre class="screen">
[GLOBAL] 
... 
security = share 
...
</pre>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-account-info-dbs"></a>20.8. Samba Account Information Databases</h2>
                </div>
              </div>
            </div>
            <a id="id2963197" class="indexterm"></a>
            <p>
			The latest release of Samba offers many new features including new password database backends not previously available. Samba version 3.0.0 fully supports all databases used in previous versions of Samba. However, although supported, many backends may not be suitable for production use.
		</p>
            <p>
			The following is a list different backends you can use with Samba. Other backends not listed here may also be available.
		</p>
            <a id="id2963224" class="indexterm"></a>
            <a id="id2963238" class="indexterm"></a>
            <a id="id2963255" class="indexterm"></a>
            <a id="id2963276" class="indexterm"></a>
            <a id="id2963296" class="indexterm"></a>
            <a id="id2963309" class="indexterm"></a>
            <a id="id2963329" class="indexterm"></a>
            <a id="id2963350" class="indexterm"></a>
            <a id="id2963370" class="indexterm"></a>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">Plain Text</span>
                </dt>
                <dd>
                  <p>
						Plain text backends are nothing more than the <code class="command">/etc/passwd</code> type backends. With a plain text backend, all usernames and passwords are sent unencrypted between the client and the Samba server. This method is very unsecure and is not recommended for use by any means. It is possible that different Windows clients connecting to the Samba server with plain text passwords cannot support such an authentication method.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">smbpasswd</code>
                  </span>
                </dt>
                <dd>
                  <p>
						A popular backend used in previous Samba packages, the <code class="command">smbpasswd</code> backend utilizes a plain ASCII text layout that includes the MS Windows LanMan and NT account, and encrypted password information. The <code class="command">smbpasswd</code> backend lacks the storage of the Windows NT/2000/2003 SAM extended controls. The <code class="command">smbpasswd</code> backend is not recommended because it does not scale well or hold any Windows information, such as RIDs for NT-based groups. The <code class="command">tdbsam</code> backend solves these issues for use in a smaller database (250 users), but is still not an enterprise-class solution.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">ldapsam_compat</code>
                  </span>
                </dt>
                <dd>
                  <p>
						The <code class="command">ldapsam_compat</code> backend allows continued OpenLDAP support for use with upgraded versions of Samba. This option normally used when migrating to Samba 3.0.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">tdbsam</code>
                  </span>
                </dt>
                <dd>
                  <p>
						The <code class="command">tdbsam</code> backend provides an ideal database backend for local servers, servers that do not need built-in database replication, and servers that do not require the scalability or complexity of LDAP. The <code class="command">tdbsam</code> backend includes all of the <code class="command">smbpasswd</code> database information as well as the previously-excluded SAM information. The inclusion of the extended SAM data allows Samba to implement the same account and system access controls as seen with Windows NT/2000/2003-based systems.
					</p>
                  <p>
						The <code class="command">tdbsam</code> backend is recommended for 250 users at most. Larger organizations should require Active Directory or LDAP integration due to scalability and possible network infrastructure concerns.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">ldapsam</code>
                  </span>
                </dt>
                <dd>
                  <p>
						The <code class="command">ldapsam</code> backend provides an optimal distributed account installation method for Samba. LDAP is optimal because of its ability to replicate its database to any number of servers using the OpenLDAP <code class="command">slurpd</code> daemon. LDAP databases are light-weight and scalable, and as such are preferred by large enterprises.
					</p>
                  <p>
						If you are upgrading from a previous version of Samba to 3.0, note that the <code class="filename">/usr/share/doc/samba-<em class="replaceable"><code>&lt;version&gt;</code></em>/LDAP/samba.schema</code> has changed. This file contains the <em class="firstterm">attribute syntax definitions</em> and <em class="firstterm">objectclass definitions</em> that the <code class="command">ldapsam</code> backend will need in order to function properly.
					</p>
                  <p>
						As such, if you are using the <code class="command">ldapsam</code> backend for your Samba server, you will need to configure <code class="command">slapd</code> to include this schema file. Refer to <a href="#s1-ldap-files-schemas" title="25.5. The /etc/openldap/schema/ Directory">Section 25.5, “The <code class="filename">/etc/openldap/schema/</code> Directory”</a> for directions on how to do this.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							You will need to have the <code class="filename">openldap-server</code> package installed if you want to use the <code class="command">ldapsam</code> backend.
						</p>
                  </div>
                </dd>
                <dt>
                  <span class="term">
                    <code class="command">mysqlsam</code>
                  </span>
                </dt>
                <dd>
                  <p>
						The <code class="command">mysqlsam</code> backend uses a MySQL-based database backend. This is useful for sites that already implement MySQL. At present, <code class="command">mysqlsam</code> is now packed in a module separate from Samba, and as such is not officially supported by Samba.
					</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-network-browsing"></a>20.9. Samba Network Browsing</h2>
                </div>
              </div>
            </div>
            <a id="id2971531" class="indexterm"></a>
            <a id="id2971545" class="indexterm"></a>
            <p>
			<em class="firstterm">Network browsing</em> enables Windows and Samba servers to appear in the Windows <span><strong class="guilabel">Network Neighborhood</strong></span>. Inside the <span><strong class="guilabel">Network Neighborhood</strong></span>, icons are represented as servers and if opened, the server's shares and printers that are available are displayed.
		</p>
            <p>
			Network browsing capabilities require NetBIOS over TCP/IP. NetBIOS-based networking uses broadcast (UDP) messaging to accomplish browse list management. Without NetBIOS and WINS as the primary method for TCP/IP hostname resolution, other methods such as static files (<code class="filename">/etc/hosts</code>) or DNS, must be used.
		</p>
            <p>
			A domain master browser collates the browse lists from local master browsers on all subnets so that browsing can occur between workgroups and subnets. Also, the domain master browser should preferably be the local master browser for its own subnet.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-domain-browsing"></a>20.9.1. Domain Browsing</h3>
                  </div>
                </div>
              </div>
              <a id="id2971610" class="indexterm"></a>
              <p>
				By default, a Windows server PDC for a domain is also the domain master browser for that domain. A Samba server must <span class="emphasis"><em>not</em></span> be set up as a domain master server in this type of situation
			</p>
              <p>
				For subnets that do not include the Windows server PDC, a Samba server can be implemented as a local master browser. Configuring the <code class="filename">smb.conf</code> for a local master browser (or no browsing at all) in a domain controller environment is the same as workgroup configuration.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-wins"></a>20.9.2. WINS (Windows Internetworking Name Server)</h3>
                  </div>
                </div>
              </div>
              <a id="id2971663" class="indexterm"></a>
              <a id="id2971676" class="indexterm"></a>
              <p>
				Either a Samba server or a Windows NT server can function as a WINS server. When a WINS server is used with NetBIOS enabled, UDP unicasts can be routed which allows name resolution across networks. Without a WINS server, the UDP broadcast is limited to the local subnet and therefore cannot be routed to other subnets, workgroups, or domains. If WINS replication is necessary, do not use Samba as your primary WINS server, as Samba does not currently support WINS replication.
			</p>
              <p>
				In a mixed NT/2000/2003 server and Samba environment, it is recommended that you use the Microsoft WINS capabilities. In a Samba-only environment, it is recommended that you use <span class="emphasis"><em>only one</em></span> Samba server for WINS.
			</p>
              <p>
				The following is an example of the <code class="filename">smb.conf</code> file in which the Samba server is serving as a WINS server:
			</p>
              <pre class="screen">
[global] 
wins support = Yes
</pre>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					All servers (including Samba) should connect to a WINS server to resolve NetBIOS names. Without WINS, browsing only occurs on the local subnet. Furthermore, even if a domain-wide list is somehow obtained, hosts cannot be resolved for the client without WINS.
				</p>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-cups"></a>20.10. Samba with CUPS Printing Support</h2>
                </div>
              </div>
            </div>
            <a id="id2959206" class="indexterm"></a>
            <p>
			Samba allows client machines to share printers connected to the Samba server. In addition, Samba also allows client machines to send documents built in Linux to Windows printer shares. Although there are other printing systems that function with Red Hat Enterprise Linux, CUPS (Common UNIX Print System) is the recommended printing system due to its close integration with Samba.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-cups-smb.conf"></a>20.10.1. Simple <code class="filename">smb.conf</code> Settings</h3>
                  </div>
                </div>
              </div>
              <a id="id2959243" class="indexterm"></a>
              <p>
				The following example shows a very basic <code class="filename">smb.conf</code> configuration for CUPS support:
			</p>
              <pre class="screen">
[global] 
load printers = Yes 
printing = cups 
printcap name = cups  
[printers] 
comment = All Printers 
path = /var/spool/samba/print 
printer = IBMInfoP 
browseable = No 
public = Yes 
guest ok = Yes 
writable = No 
printable = Yes 
printer admin = @ntadmins  
[print$] 
comment = Printer Drivers Share 
path = /var/lib/samba/drivers 
write list = ed, john 
printer admin = ed, john
</pre>
              <p>
				Other printing configurations are also possible. To add additional security and privacy for printing confidential documents, users can have their own print spooler not located in a public path. If a job fails, other users would not have access to the file.
			</p>
              <p>
				The <code class="command">print$</code> share contains printer drivers for clients to access if not available locally. The <code class="command">print$</code> share is optional and may not be required depending on the organization.
			</p>
              <p>
				Setting <code class="command">browseable</code> to <code class="command">Yes</code> enables the printer to be viewed in the Windows Network Neighborhood, provided the Samba server is set up correctly in the domain/workgroup.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-programs"></a>20.11. Samba Distribution Programs</h2>
                </div>
              </div>
            </div>
            <a id="id2959340" class="indexterm"></a>
            <p class="formalpara">
              <a id="s2-samba-programs-findsmb"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">findsmb</code>
            </h5>
            <p class="formalpara"><a id="id2959364" class="indexterm"></a><a id="id2959385" class="indexterm"></a>
				<code class="command">findsmb <em class="replaceable"><code>&lt;subnet_broadcast_address&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">findsmb</code> program is a Perl script which reports information about SMB-aware systems on a specific subnet. If no subnet is specified the local subnet is used. Items displayed include IP address, NetBIOS name, workgroup or domain name, operating system, and version.
		</p>
            <p>
			The following example shows the output of executing <code class="command">findsmb</code> as any valid user on a system:
		</p>
            <pre class="screen"><strong class="userinput"><code>findsmb</code></strong>   
IP ADDR       NETBIOS NAME  WORKGROUP/OS/VERSION 
------------------------------------------------------------------ 
10.1.59.25    VERVE         [MYGROUP] [Unix] [Samba 3.0.0-15] 
10.1.59.26    STATION22     [MYGROUP] [Unix] [Samba 3.0.2-7.FC1] 
10.1.56.45    TREK         +[WORKGROUP] [Windows 5.0] [Windows 2000 LAN Manager] 
10.1.57.94    PIXEL         [MYGROUP] [Unix] [Samba 3.0.0-15] 
10.1.57.137   MOBILE001     [WORKGROUP] [Windows 5.0] [Windows 2000 LAN Manager] 
10.1.57.141   JAWS         +[KWIKIMART] [Unix] [Samba 2.2.7a-security-rollup-fix] 
10.1.56.159   FRED         +[MYGROUP] [Unix] [Samba 3.0.0-14.3E] 
10.1.59.192   LEGION       *[MYGROUP] [Unix] [Samba 2.2.7-security-rollup-fix] 
10.1.56.205   NANCYN       +[MYGROUP] [Unix] [Samba 2.2.7a-security-rollup-fix]
</pre>
            <p class="formalpara">
              <a id="s2-samba-programs-net"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">net</code>
            </h5>
            <p class="formalpara"><a id="id3025097" class="indexterm"></a><a id="id3025117" class="indexterm"></a>
				<code class="command">net <em class="replaceable"><code>&lt;protocol&gt; &lt;function&gt; &lt;misc_options&gt; &lt;target_options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">net</code> utility is similar to the <code class="command">net</code> utility used for Windows and MS-DOS. The first argument is used to specify the protocol to use when executing a command. The <code class="command"><em class="replaceable"><code>&lt;protocol&gt;</code></em></code> option can be <code class="command">ads</code>, <code class="command">rap</code>, or <code class="command">rpc</code> for specifying the type of server connection. Active Directory uses <code class="command">ads</code>, Win9x/NT3 uses <code class="command">rap</code>, and Windows NT4/2000/2003 uses <code class="command">rpc</code>. If the protocol is omitted, <code class="command">net</code> automatically tries to determine it.
		</p>
            <p>
			The following example displays a list the available shares for a host named <code class="command">wakko</code>:
		</p>
            <pre class="screen"><strong class="userinput"><code>net -l share -S wakko</code></strong> 
Password:   

Enumerating shared resources (exports) on remote server:     

Share name   Type     Description 
----------   ----     ----------- 
data         Disk     Wakko data share 
tmp          Disk     Wakko tmp share 
IPC$         IPC      IPC Service (Samba Server) 
ADMIN$       IPC      IPC Service (Samba Server)
</pre>
            <p>
			The following example displays a list of Samba users for a host named <code class="command">wakko</code>:
		</p>
            <pre class="screen"><strong class="userinput"><code>net -l user -S wakko</code></strong> 
root password:   
User name             Comment 
----------------------------- 
andriusb              Documentation 
joe                   Marketing 
lisa                  Sales
</pre>
            <p class="formalpara">
              <a id="s2-samba-programs-nmblookup"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">nmblookup</code>
            </h5>
            <p class="formalpara"><a id="id2983024" class="indexterm"></a><a id="id2983044" class="indexterm"></a>
				<code class="command">nmblookup <em class="replaceable"><code>&lt;options&gt; &lt;netbios_name&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">nmblookup</code> program resolves NetBIOS names into IP addresses. The program broadcasts its query on the local subnet until the target machine replies.
		</p>
            <p>
			Here is an example:
		</p>
            <pre class="screen"><strong class="userinput"><code>nmblookup trek</code></strong> 
querying trek on 10.1.59.255 
10.1.56.45 trek&lt;00&gt;
</pre>
            <p class="formalpara">
              <a id="s2-samba-programs-pdbedit"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">pdbedit</code>
            </h5>
            <p class="formalpara"><a id="id2983110" class="indexterm"></a><a id="id2983131" class="indexterm"></a>
				<code class="command">pdbedit <em class="replaceable"><code>&lt;options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">pdbedit</code> program manages accounts located in the SAM database. All backends are supported including <code class="filename">smbpasswd</code>, LDAP, NIS+, and the <code class="filename">tdb</code> database library.
		</p>
            <p>
			The following are examples of adding, deleting, and listing users:
		</p>
            <pre class="screen"><strong class="userinput"><code>pdbedit -a kristin</code></strong> 
new password: 
retype new password: 
Unix username:        kristin 
NT username: 
Account Flags:        [U          ] 
User SID:             S-1-5-21-1210235352-3804200048-1474496110-2012 
Primary Group SID:    S-1-5-21-1210235352-3804200048-1474496110-2077 
Full Name: Home Directory:       \\wakko\kristin 
HomeDir Drive: 
Logon Script: 
Profile Path:         \\wakko\kristin\profile 
Domain:               WAKKO 
Account desc: 
Workstations: Munged 
dial: 
Logon time:           0 
Logoff time:          Mon, 18 Jan 2038 22:14:07 GMT 
Kickoff time:         Mon, 18 Jan 2038 22:14:07 GMT 
Password last set:    Thu, 29 Jan 2004 08:29:28 
GMT Password can change:  Thu, 29 Jan 2004 08:29:28 GMT 
Password must change: Mon, 18 Jan 2038 22:14:07 GMT  <strong class="userinput"><code>pdbedit -v -L kristin</code></strong> 
Unix username:        kristin 
NT username: 
Account Flags:        [U          ] 
User SID:             S-1-5-21-1210235352-3804200048-1474496110-2012 
Primary Group SID:    S-1-5-21-1210235352-3804200048-1474496110-2077 
Full Name: 
Home Directory:       \\wakko\kristin 
HomeDir Drive: 
Logon Script: 
Profile Path:         \\wakko\kristin\profile 
Domain:               WAKKO 
Account desc: 
Workstations: Munged 
dial: 
Logon time:           0 
Logoff time:          Mon, 18 Jan 2038 22:14:07 GMT 
Kickoff time:         Mon, 18 Jan 2038 22:14:07 GMT 
Password last set:    Thu, 29 Jan 2004 08:29:28 GMT 
Password can change:  Thu, 29 Jan 2004 08:29:28 GMT 
Password must change: Mon, 18 Jan 2038 22:14:07 GMT  <strong class="userinput"><code>pdbedit -L</code></strong> 
andriusb:505: 
joe:503: 
lisa:504: 
kristin:506:  <strong class="userinput"><code>pdbedit -x joe</code></strong>  <strong class="userinput"><code>pdbedit -L</code></strong> 

andriusb:505: lisa:504: kristin:506:
</pre>
            <p class="formalpara">
              <a id="s2-samba-programs-rpcclient"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">rpcclient</code>
            </h5>
            <p class="formalpara"><a id="id2984958" class="indexterm"></a><a id="id2984978" class="indexterm"></a>
				<code class="command">rpcclient <em class="replaceable"><code>&lt;server&gt; &lt;options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">rpcclient</code> program issues administrative commands using Microsoft RPCs, which provide access to the Windows administration graphical user interfaces (GUIs) for systems management. This is most often used by advanced users that understand the full complexity of Microsoft RPCs.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-smbcacls"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">smbcacls</code>
            </h5>
            <p class="formalpara"><a id="id2985032" class="indexterm"></a><a id="id2985053" class="indexterm"></a>
				<code class="command">smbcacls <em class="replaceable"><code>&lt;//server/share&gt; &lt;filename&gt; &lt;options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">smbcacls</code> program modifies Windows ACLs on files and directories shared by the Samba server.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-smbclient"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">smbclient</code>
            </h5>
            <p class="formalpara"><a id="id2985103" class="indexterm"></a><a id="id2985123" class="indexterm"></a>
				<code class="command">smbclient <em class="replaceable"><code>&lt;//server/share&gt; &lt;password&gt; &lt;options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">smbclient</code> program is a versatile UNIX client which provides functionality similar to <code class="command">ftp</code>.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-smbcontrol"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">smbcontrol</code>
            </h5>
            <p class="formalpara"><a id="id2985180" class="indexterm"></a><a id="id2985201" class="indexterm"></a>
				<code class="command">smbcontrol -i <em class="replaceable"><code>&lt;options&gt;</code></em></code>
			</p>
            <p>
			<code class="command">smbcontrol <em class="replaceable"><code>&lt;options&gt; &lt;destination&gt; &lt;messagetype&gt; &lt;parameters&gt;</code></em></code>
		</p>
            <p>
			The <code class="command">smbcontrol</code> program sends control messages to running <code class="command">smbd</code> or <code class="command">nmbd</code> daemons. Executing <code class="command">smbcontrol -i</code> runs commands interactively until a blank line or a 'q' is entered.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-smbpasswd"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">smbpasswd</code>
            </h5>
            <p class="formalpara"><a id="id2979702" class="indexterm"></a><a id="id2979722" class="indexterm"></a>
				<code class="command">smbpasswd <em class="replaceable"><code>&lt;options&gt; &lt;username&gt; &lt;password&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">smbpasswd</code> program manages encrypted passwords. This program can be run by a superuser to change any user's password as well as by an ordinary user to change their own Samba password.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-smbspool"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">smbspool</code>
            </h5>
            <p class="formalpara"><a id="id2979774" class="indexterm"></a><a id="id2979794" class="indexterm"></a>
				<code class="command">smbspool <em class="replaceable"><code>&lt;job&gt; &lt;user&gt; &lt;title&gt; &lt;copies&gt; &lt;options&gt; &lt;filename&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">smbspool</code> program is a CUPS-compatible printing interface to Samba. Although designed for use with CUPS printers, <code class="command">smbspool</code> can work with non-CUPS printers as well.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-smbstatus"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">smbstatus</code>
            </h5>
            <p class="formalpara"><a id="id2979852" class="indexterm"></a><a id="id2979873" class="indexterm"></a>
				<code class="command">smbstatus <em class="replaceable"><code>&lt;options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">smbstatus</code> program displays the status of current connections to a Samba server.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-smbtar"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">smbtar</code>
            </h5>
            <p class="formalpara"><a id="id2978913" class="indexterm"></a><a id="id2978934" class="indexterm"></a>
				<code class="command">smbtar <em class="replaceable"><code>&lt;options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">smbtar</code> program performs backup and restores of Windows-based share files and directories to a local tape archive. Though similar to the <code class="command">tar</code> command, the two are not compatible.
		</p>
            <p class="formalpara">
              <a id="s2-samba-programs-testparm"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">testparm</code>
            </h5>
            <p class="formalpara"><a id="id2978991" class="indexterm"></a><a id="id2979012" class="indexterm"></a>
				<code class="command">testparm <em class="replaceable"><code>&lt;options&gt; &lt;filename&gt; &lt;hostname IP_address&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">testparm</code> program checks the syntax of the <code class="filename">smb.conf</code> file. If your <code class="filename">smb.conf</code> file is in the default location (<code class="filename">/etc/samba/smb.conf</code>) you do not need to specify the location. Specifying the hostname and IP address to the <code class="command">testparm</code> program verifies that the <code class="filename">hosts.allow</code> and <code class="filename">host.deny</code> files are configured correctly. The <code class="command">testparm</code> program also displays a summary of your <code class="filename">smb.conf</code> file and the server's role (stand-alone, domain, etc.) after testing. This is convenient when debugging as it excludes comments and concisely presents information for experienced administrators to read.
		</p>
            <p>
			For example:
		</p>
            <pre class="screen"><strong class="userinput"><code>testparm</code></strong> 
Load smb config files from /etc/samba/smb.conf 
Processing section "[homes]" 
Processing section "[printers]" 
Processing section "[tmp]" 
Processing section "[html]" 
Loaded services file OK. 
Server role: ROLE_STANDALONE 
Press enter to see a dump of your service definitions <strong class="userinput"><code>&lt;enter&gt;</code></strong> 
# Global parameters 
[global]
	workgroup = MYGROUP         
	server string = Samba Server         
	security = SHARE         
	log file = /var/log/samba/%m.log         
	max log size = 50         
	socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192         
	dns proxy = No   
[homes]         
	comment = Home Directories         
	read only = No         
	browseable = No   
[printers]         
	comment = All Printers         
	path = /var/spool/samba         
	printable = Yes         
	browseable = No   
[tmp]         
	comment = Wakko tmp         
	path = /tmp         
	guest only = Yes   
[html]         
	comment = Wakko www         
	path = /var/www/html         
	force user = andriusb         
	force group = users         
	read only = No         
	guest only = Yes
</pre>
            <p class="formalpara">
              <a id="s2-samba-programs-wbinfo"></a>
            </p>
            <h5 class="formalpara">
              <code class="filename">wbinfo</code>
            </h5>
            <p class="formalpara"><a id="id2965284" class="indexterm"></a><a id="id2965305" class="indexterm"></a>
				<code class="command">wbinfo <em class="replaceable"><code>&lt;options&gt;</code></em></code>
			</p>
            <p>
			The <code class="command">wbinfo</code> program displays information from the <code class="command">winbindd</code> daemon. The <code class="command">winbindd</code> daemon must be running for <code class="command">wbinfo</code> to work.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-samba-resources"></a>20.12. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2965371" class="indexterm"></a>
            <p>
			The following sections give you the means to explore Samba in greater detail.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-resources-installed"></a>20.12.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <a id="id2965397" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="filename">/usr/share/doc/samba-&lt;<em class="replaceable"><code>version-number</code></em>&gt;/</code> — All additional files included with the Samba distribution. This includes all helper scripts, sample configuration files, and documentation.
					</p>
                    <p>
						This directory also contains online versions of <em class="citetitle">The Official Samba-3 HOWTO-Collection</em> and <em class="citetitle">Samba-3 by Example</em>, both of which are cited below.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-resources-published"></a>20.12.2. Related Books</h3>
                  </div>
                </div>
              </div>
              <a id="id2965460" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<em class="citetitle">The Official Samba-3 HOWTO-Collection</em> by John H. Terpstra and Jelmer R. Vernooij; Prentice Hall — The official Samba-3 documentation as issued by the Samba development team. This is more of a reference guide than a step-by-step guide.
					</p>
                  </li>
                  <li>
                    <p>
						<em class="citetitle">Samba-3 by Example</em> by John H. Terpstra; Prentice Hall — This is another official release issued by the Samba development team which discusses detailed examples of OpenLDAP, DNS, DHCP, and printing configuration files. This has step-by-step related information that helps in real-world implementations.
					</p>
                  </li>
                  <li>
                    <p>
						<em class="citetitle">Using Samba, 2nd Edition</em> by Jay T's, Robert Eckstein, and David Collier-Brown; O'Reilly — A good resource for novice to advanced users, which includes comprehensive reference material.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-samba-resources-community"></a>20.12.3. Useful Websites</h3>
                  </div>
                </div>
              </div>
              <a id="id2975228" class="indexterm"></a>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<a href="http://www.samba.org/">http://www.samba.org/</a> — Homepage for the Samba distribution and all official documentation created by the Samba development team. Many resources are available in HTML and PDF formats, while others are only available for purchase. Although many of these links are not Red Hat Enterprise Linux specific, some concepts may apply.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://us1.samba.org/samba/archives.html">http://samba.org/samba/archives.html </a> — Active email lists for the Samba community. Enabling digest mode is recommended due to high levels of list activity.
					</p>
                  </li>
                  <li>
                    <p>
						Samba newsgroups — Samba threaded newsgroups, such as gmane.org, that use the NNTP protocol are also available. This an alternative to receiving mailing list emails.
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://samba.idealx.org/">http://samba.idealx.org/</a> — Idealx.org distributes installation and configuration scripts for integration of Samba and OpenLDAP. These are highly recommended for assisting in managing LDAP related resources. The scripts can be found at <code class="command">/usr/share/doc/samba-<em class="replaceable"><code>version_number</code></em>/LDAP/smbldap-tools</code> or can be downloaded from the Idealx website.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-dhcp"></a>Chapter 21. Dynamic Host Configuration Protocol (DHCP)</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-dhcp-why">21.1. Why Use DHCP?</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-dhcp-configuring-server">21.2. Configuring a DHCP Server</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#config-file">21.2.1. Configuration File</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#lease-database">21.2.2. Lease Database</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#id2953977">21.2.3. Starting and Stopping the Server</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#dhcp-relay-agent">21.2.4. DHCP Relay Agent</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-dhcp-configuring-client">21.3. Configuring a DHCP Client</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-dhcp-additional-resources">21.4. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-dhcp-installed-docs">21.4.1. Installed Documentation</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2963146" class="indexterm"></a>
          <a id="id2928211" class="indexterm"></a>
          <p>
		Dynamic Host Configuration Protocol (<acronym class="acronym">DHCP</acronym>) is a network protocol that automatically assigns TCP/IP information to client machines. Each DHCP client connects to the centrally located DHCP server, which returns that client's network configuration (including the IP address, gateway, and DNS servers).
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-dhcp-why"></a>21.1. Why Use DHCP?</h2>
                </div>
              </div>
            </div>
            <a id="id2786741" class="indexterm"></a>
            <p>
			DHCP is useful for automatic configuration of client network interfaces. When configuring the client system, the administrator chooses DHCP instead of specifying an IP address, netmask, gateway, or DNS servers. The client retrieves this information from the DHCP server. DHCP is also useful if an administrator wants to change the IP addresses of a large number of systems. Instead of reconfiguring all the systems, he can just edit one DHCP configuration file on the server for the new set of IP addresses. If the DNS servers for an organization changes, the changes are made on the DHCP server, not on the DHCP clients. When the administrator restarts the network or reboots the clients, the changes will go into effect.
		</p>
            <p>
			If an organization has a functional DHCP server properly connected to a network, laptops and other mobile computer users can move these devices from office to office.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-dhcp-configuring-server"></a>21.2. Configuring a DHCP Server</h2>
                </div>
              </div>
            </div>
            <a id="id2874070" class="indexterm"></a>
            <p>
			To configure a DHCP server, you must create the <code class="filename">dhcpd.conf</code> configuration file in the <code class="filename">/etc/</code> directory. A sample file can be found at <code class="filename">/usr/share/doc/dhcp-&lt;<em class="replaceable"><code>version</code></em>&gt;/dhcpd.conf.sample</code>.
		</p>
            <p>
			DHCP also uses the file <code class="filename">/var/lib/dhcpd/dhcpd.leases</code> to store the client lease database. Refer to <a href="#lease-database" title="21.2.2. Lease Database">Section 21.2.2, “Lease Database”</a> for more information.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="config-file"></a>21.2.1. Configuration File</h3>
                  </div>
                </div>
              </div>
              <a id="id2927150" class="indexterm"></a>
              <a id="id2970192" class="indexterm"></a>
              <p>
				The first step in configuring a DHCP server is to create the configuration file that stores the network information for the clients. Use this file to declare options and global options for client systems.
			</p>
              <p>
				The configuration file can contain extra tabs or blank lines for easier formatting. Keywords are case-insensitive and lines beginning with a hash mark (#) are considered comments.
			</p>
              <p>
				Two DNS update schemes are currently implemented — the ad-hoc DNS update mode and the interim DHCP-DNS interaction draft update mode. If and when these two are accepted as part of the Internet Engineering Task Force (IETF) standards process, there will be a third mode — the standard DNS update method. You must configure the DNS server for compatibility with these schemes. Version 3.0b2pl11 and previous versions used the ad-hoc mode; however, it has been deprecated. To keep the same behavior, add the following line to the top of the configuration file:
			</p>
              <pre class="screen"><code class="computeroutput">ddns-update-style ad-hoc;</code>
</pre>
              <p>
				To use the recommended mode, add the following line to the top of the configuration file:
			</p>
              <pre class="screen"><code class="computeroutput">ddns-update-style interim;</code>
</pre>
              <p>
				Refer to the <code class="filename">dhcpd.conf</code> man page for details about the different modes.
			</p>
              <p>
				There are two types of statements in the configuration file:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Parameters — State how to perform a task, whether to perform a task, or what network configuration options to send to the client.
					</p>
                  </li>
                  <li>
                    <p>
						Declarations — Describe the topology of the network, describe the clients, provide addresses for the clients, or apply a group of parameters to a group of declarations.
					</p>
                  </li>
                </ul>
              </div>
              <a id="id2882577" class="indexterm"></a>
              <p>
				The parameters that start with the keyword option are reffered to as <em class="firstterm">options</em>. These options control DHCP options; whereas, parameters configure values that are not optional or control how the DHCP server behaves.
			</p>
              <a id="id2928414" class="indexterm"></a>
              <p>
				Parameters (including options) declared before a section enclosed in curly brackets ({ }) are considered global parameters. Global parameters apply to all the sections below it.
			</p>
              <div class="important">
                <h2>Important</h2>
                <p>
					If the configuration file is changed, the changes do not take effect until the DHCP daemon is restarted with the command <code class="command">service dhcpd restart</code>.
				</p>
              </div>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					Instead of changing a DHCP configuration file and restarting the service each time, using the <code class="command">omshell</code> command provides an interactive way to connect to, query, and change the configuration of a DHCP server. By using <code class="command">omshell</code>, all changes can be made while the server is running. For more information on <code class="command">omshell</code>, refer to the <code class="command">omshell</code> man page.
				</p>
              </div>
              <p>
				In <a href="#subnet" title="Example 21.1. Subnet Declaration">Example 21.1, “Subnet Declaration”</a>, the <code class="filename">routers</code>, <code class="filename">subnet-mask</code>, <code class="filename">domain-name</code>, <code class="filename">domain-name-servers</code>, and <code class="filename">time-offset</code> options are used for any <code class="filename">host</code> statements declared below it.
			</p>
              <a id="id2886107" class="indexterm"></a>
              <p>
				Additionally, a <code class="filename">subnet</code> can be declared, a <code class="filename">subnet</code> declaration must be included for every subnet in the network. If it is not, the DHCP server fails to start.
			</p>
              <p>
				In this example, there are global options for every DHCP client in the subnet and a <code class="filename">range</code> declared. Clients are assigned an IP address within the <code class="filename">range</code>.
			</p>
              <div class="example">
                <a id="subnet"></a>
                <div class="example-contents">
                  <pre class="screen">
subnet 192.168.1.0 netmask 255.255.255.0 {
        option routers                  192.168.1.254;
        option subnet-mask              255.255.255.0;

        option domain-name              "example.com";
        option domain-name-servers       192.168.1.1;

        option time-offset              -18000;     # Eastern Standard Time

	range 192.168.1.10 192.168.1.100;
}
</pre>
                </div>
                <h6>Example 21.1. Subnet Declaration</h6>
              </div>
              <br class="example-break" />
              <a id="id2873739" class="indexterm"></a>
              <p>
				All subnets that share the same physical network should be declared within a <code class="filename">shared-network</code> declaration as shown in <a href="#shared-network" title="Example 21.2. Shared-network Declaration">Example 21.2, “Shared-network Declaration”</a>. Parameters within the <code class="filename">shared-network</code>, but outside the enclosed <code class="filename">subnet</code> declarations, are considered to be global parameters. The name of the <code class="filename">shared-network</code> must be a descriptive title for the network, such as using the title 'test-lab' to describe all the subnets in a test lab environment.
			</p>
              <div class="example">
                <a id="shared-network"></a>
                <div class="example-contents">
                  <pre class="screen">
shared-network name {
    option domain-name              "test.redhat.com";
    option domain-name-servers      ns1.redhat.com, ns2.redhat.com;
    option routers                  192.168.0.254;
    more parameters for EXAMPLE shared-network
    subnet 192.168.1.0 netmask 255.255.252.0 {
        parameters for subnet
        range 192.168.1.1 192.168.1.254;
    }
    subnet 192.168.2.0 netmask 255.255.252.0 {
        parameters for subnet
        range 192.168.2.1 192.168.2.254;
    }
}
</pre>
                </div>
                <h6>Example 21.2. Shared-network Declaration</h6>
              </div>
              <br class="example-break" />
              <a id="id2885683" class="indexterm"></a>
              <p>
				As demonstrated in <a href="#group" title="Example 21.3. Group Declaration">Example 21.3, “Group Declaration”</a>, the <code class="filename">group</code> declaration is used to apply global parameters to a group of declarations. For example, shared networks, subnets, and hosts can be grouped.
			</p>
              <div class="example">
                <a id="group"></a>
                <div class="example-contents">
                  <pre class="screen">
group {
   option routers                  192.168.1.254;
   option subnet-mask              255.255.255.0;

   option domain-name              "example.com";
   option domain-name-servers       192.168.1.1;

   option time-offset              -18000;     # Eastern Standard Time

   host apex {
      option host-name "apex.example.com";
      hardware ethernet 00:A0:78:8E:9E:AA; 
      fixed-address 192.168.1.4;
   }

   host raleigh {
      option host-name "raleigh.example.com";
      hardware ethernet 00:A1:DD:74:C3:F2;
      fixed-address 192.168.1.6;
   }
}
</pre>
                </div>
                <h6>Example 21.3. Group Declaration</h6>
              </div>
              <br class="example-break" />
              <p>
				To configure a DHCP server that leases a dynamic IP address to a system within a subnet, modify <a href="#dynamic-ip" title="Example 21.4. Range Parameter">Example 21.4, “Range Parameter”</a> with your values. It declares a default lease time, maximum lease time, and network configuration values for the clients. This example assigns IP addresses in the <code class="filename">range</code> 192.168.1.10 and 192.168.1.100 to client systems.
			</p>
              <div class="example">
                <a id="dynamic-ip"></a>
                <div class="example-contents">
                  <pre class="screen">
default-lease-time 600;
max-lease-time 7200;
option subnet-mask 255.255.255.0;
option broadcast-address 192.168.1.255;
option routers 192.168.1.254;
option domain-name-servers 192.168.1.1, 192.168.1.2;
option domain-name "example.com";

subnet 192.168.1.0 netmask 255.255.255.0 {
   range 192.168.1.10 192.168.1.100;
}
</pre>
                </div>
                <h6>Example 21.4. Range Parameter</h6>
              </div>
              <br class="example-break" />
              <p>
				To assign an IP address to a client based on the MAC address of the network interface card, use the <code class="filename">hardware ethernet</code> parameter within a <code class="filename">host</code> declaration. As demonstrated in <a href="#static-ip" title="Example 21.5. Static IP Address using DHCP">Example 21.5, “Static IP Address using DHCP”</a>, the <code class="filename">host apex</code> declaration specifies that the network interface card with the MAC address 00:A0:78:8E:9E:AA always receives the IP address 192.168.1.4.
			</p>
              <p>
				Note that the optional parameter <code class="filename">host-name</code> can also be used to assign a host name to the client.
			</p>
              <div class="example">
                <a id="static-ip"></a>
                <div class="example-contents">
                  <pre class="screen">
host apex {
   option host-name "apex.example.com";
   hardware ethernet 00:A0:78:8E:9E:AA; 
   fixed-address 192.168.1.4;
}
</pre>
                </div>
                <h6>Example 21.5. Static IP Address using DHCP</h6>
              </div>
              <br class="example-break" />
              <div class="tip">
                <h2>Tip</h2>
                <p>
					The sample configuration file provided can be used as a starting point and custom configuration options can be added to it. To copy it to the proper location, use the following command: 
</p>
                <pre class="screen"><code class="command">cp /usr/share/doc/dhcp-<em class="replaceable"><code>&lt;version-number&gt;</code></em>/dhcpd.conf.sample /etc/dhcpd.conf</code>
</pre>
                <p>
					 (where <em class="replaceable"><code>&lt;version-number&gt;</code></em> is the DHCP version number).
				</p>
              </div>
              <p>
				For a complete list of option statements and what they do, refer to the <code class="filename">dhcp-options</code> man page.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="lease-database"></a>21.2.2. Lease Database</h3>
                  </div>
                </div>
              </div>
              <p>
				On the DHCP server, the file <code class="filename">/var/lib/dhcpd/dhcpd.leases</code> stores the DHCP client lease database. Do not change this file. DHCP lease information for each recently assigned IP address is automatically stored in the lease database. The information includes the length of the lease, to whom the IP address has been assigned, the start and end dates for the lease, and the MAC address of the network interface card that was used to retrieve the lease.
			</p>
              <p>
				All times in the lease database are in Coordinated Universal Time (UTC), not local time.
			</p>
              <p>
				The lease database is recreated from time to time so that it is not too large. First, all known leases are saved in a temporary lease database. The <code class="filename">dhcpd.leases</code> file is renamed <code class="filename">dhcpd.leases~</code> and the temporary lease database is written to <code class="filename">dhcpd.leases</code>.
			</p>
              <p>
				The DHCP daemon could be killed or the system could crash after the lease database has been renamed to the backup file but before the new file has been written. If this happens, the <code class="filename">dhcpd.leases</code> file does not exist, but it is required to start the service. Do not create a new lease file. If you do, all old leases are lost which causes many problems. The correct solution is to rename the <code class="filename">dhcpd.leases~</code> backup file to <code class="filename">dhcpd.leases</code> and then start the daemon.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="id2953977"></a>21.2.3. Starting and Stopping the Server</h3>
                  </div>
                </div>
              </div>
              <a id="id2953983" class="indexterm"></a>
              <a id="id2953997" class="indexterm"></a>
              <a id="id2954010" class="indexterm"></a>
              <a id="id2880892" class="indexterm"></a>
              <div class="important">
                <h2>Important</h2>
                <p>
					When the DHCP server is started for the first time, it fails unless the <code class="filename">dhcpd.leases</code> file exists. Use the command <code class="command">touch /var/lib/dhcpd/dhcpd.leases</code> to create the file if it does not exist.
				</p>
                <p>
					If the same server is also running BIND as a DNS server, this step is not necessary, as starting the <code class="command">named</code> service automatically checks for a <code class="filename">dhcpd.leases</code> file.
				</p>
              </div>
              <p>
				To start the DHCP service, use the command <code class="command">/sbin/service dhcpd start</code>. To stop the DHCP server, use the command <code class="command">/sbin/service dhcpd stop</code>.
			</p>
              <p>
				By default, the DHCP service does not start at boot time. To configure the daemon to start automatically at boot time, refer to <a href="#ch-services" title="Chapter 16. Controlling Access to Services">Chapter 16, <i>Controlling Access to Services</i></a>.
			</p>
              <a id="id2928248" class="indexterm"></a>
              <a id="id2911056" class="indexterm"></a>
              <p>
				If more than one network interface is attached to the system, but the DHCP server should only be started on one of the interfaces, configure the DHCP server to start only on that device. In <code class="filename">/etc/sysconfig/dhcpd</code>, add the name of the interface to the list of <code class="command">DHCPDARGS</code>:
			</p>
              <pre class="screen">
# Command line options here 
DHCPDARGS=eth0
</pre>
              <p>
				This is useful for a firewall machine with two network cards. One network card can be configured as a DHCP client to retrieve an IP address to the Internet. The other network card can be used as a DHCP server for the internal network behind the firewall. Specifying only the network card connected to the internal network makes the system more secure because users can not connect to the daemon via the Internet.
			</p>
              <p>
				Other command line options that can be specified in <code class="filename">/etc/sysconfig/dhcpd</code> include:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">-p <em class="replaceable"><code>&lt;portnum&gt;</code></em></code> — Specifies the UDP port number on which <code class="command">dhcpd</code> should listen. The default is port 67. The DHCP server transmits responses to the DHCP clients at a port number one greater than the UDP port specified. For example, if the default port 67 is used, the server listens on port 67 for requests and responses to the client on port 68. If a port is specified here and the DHCP relay agent is used, the same port on which the DHCP relay agent should listen must be specified. Refer to <a href="#dhcp-relay-agent" title="21.2.4. DHCP Relay Agent">Section 21.2.4, “DHCP Relay Agent”</a> for details.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-f</code> — Runs the daemon as a foreground process. This is mostly used for debugging.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-d</code> — Logs the DHCP server daemon to the standard error descriptor. This is mostly used for debugging. If this is not specified, the log is written to <code class="filename">/var/log/messages</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-cf <em class="replaceable"><code>&lt;filename&gt;</code></em></code> — Specifies the location of the configuration file. The default location is <code class="filename">/etc/dhcpd.conf</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-lf <em class="replaceable"><code>&lt;filename&gt;</code></em></code> — Specifies the location of the lease database file. If a lease database file already exists, it is very important that the same file be used every time the DHCP server is started. It is strongly recommended that this option only be used for debugging purposes on non-production machines. The default location is <code class="filename">/var/lib/dhcpd/dhcpd.leases</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">-q</code> — Do not print the entire copyright message when starting the daemon.
					</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="dhcp-relay-agent"></a>21.2.4. DHCP Relay Agent</h3>
                  </div>
                </div>
              </div>
              <a id="id2970924" class="indexterm"></a>
              <a id="id2970937" class="indexterm"></a>
              <a id="id2970954" class="indexterm"></a>
              <p>
				The DHCP Relay Agent (<code class="command">dhcrelay</code>) allows for the relay of DHCP and BOOTP requests from a subnet with no DHCP server on it to one or more DHCP servers on other subnets.
			</p>
              <p>
				When a DHCP client requests information, the DHCP Relay Agent forwards the request to the list of DHCP servers specified when the DHCP Relay Agent is started. When a DHCP server returns a reply, the reply is broadcast or unicast on the network that sent the original request.
			</p>
              <p>
				The DHCP Relay Agent listens for DHCP requests on all interfaces unless the interfaces are specified in <code class="filename">/etc/sysconfig/dhcrelay</code> with the <code class="computeroutput">INTERFACES</code> directive.
			</p>
              <p>
				To start the DHCP Relay Agent, use the command <code class="command">service dhcrelay start</code>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-dhcp-configuring-client"></a>21.3. Configuring a DHCP Client</h2>
                </div>
              </div>
            </div>
            <a id="id2884791" class="indexterm"></a>
            <a id="id2970975" class="indexterm"></a>
            <p>
			The first step for configuring a DHCP client is to make sure the kernel recognizes the network interface card. Most cards are recognized during the installation process and the system is configured to use the correct kernel module for the card. If a card is added after installation, <span><strong class="application">Kudzu</strong></span><sup>[<a id="id2960871" href="#ftn.id2960871">9</a>]</sup> will recognize it and prompt you for the proper kernel module (Be sure to check the Hardware Compatibility List at <a href="http://hardware.redhat.com/hcl/">http://hardware.redhat.com/hcl/</a>). If either the installation program or kudzu does not recognize the network card, you can load the correct kernel module (refer to <a href="#ch-modules" title="Chapter 41. General Parameters and Modules">Chapter 41, <i>General Parameters and Modules</i></a> for details).
		</p>
            <p>
			To configure a DHCP client manually, modify the <code class="filename">/etc/sysconfig/network</code> file to enable networking and the configuration file for each network device in the <code class="filename">/etc/sysconfig/network-scripts</code> directory. In this directory, each device should have a configuration file named <code class="filename">ifcfg-eth0</code>, where <code class="filename">eth0</code> is the network device name.
		</p>
            <p>
			The <code class="filename">/etc/sysconfig/network</code> file should contain the following line:
		</p>
            <pre class="screen"><code class="computeroutput">NETWORKING=yes</code>
</pre>
            <p>
			The <code class="computeroutput">NETWORKING</code> variable must be set to <code class="computeroutput">yes</code> if you want networking to start at boot time.
		</p>
            <p>
			The <code class="filename">/etc/sysconfig/network-scripts/ifcfg-eth0</code> file should contain the following lines:
		</p>
            <pre class="screen">
DEVICE=eth0
BOOTPROTO=dhcp
ONBOOT=yes
</pre>
            <p>
			A configuration file is needed for each device to be configured to use DHCP.
		</p>
            <p>
			Other options for the network script includes:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<code class="command">DHCP_HOSTNAME</code> — Only use this option if the DHCP server requires the client to specify a hostname before receiving an IP address. (The DHCP server daemon in Red Hat Enterprise Linux does not support this feature.)
				</p>
                </li>
                <li>
                  <p>
					<code class="command">PEERDNS=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>, where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
				</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
							<code class="command">yes</code> — Modify <code class="filename">/etc/resolv.conf</code> with information from the server. If using DHCP, then <code class="command">yes</code> is the default.
						</p>
                      </li>
                      <li>
                        <p>
							<code class="command">no</code> — Do not modify <code class="filename">/etc/resolv.conf</code>.
						</p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <p>
					<code class="command">SRCADDR=<em class="replaceable"><code>&lt;address&gt;</code></em></code>, where <code class="command"><em class="replaceable"><code>&lt;address&gt;</code></em></code> is the specified source IP address for outgoing packets.
				</p>
                </li>
                <li>
                  <p>
					<code class="command">USERCTL=<em class="replaceable"><code>&lt;answer&gt;</code></em></code>, where <code class="command"><em class="replaceable"><code>&lt;answer&gt;</code></em></code> is one of the following:
				</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
							<code class="command">yes</code> — Non-root users are allowed to control this device.
						</p>
                      </li>
                      <li>
                        <p>
							<code class="command">no</code> — Non-root users are not allowed to control this device.
						</p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
            <p>
			If you prefer using a graphical interface, refer to <a href="#ch-network-config" title="Chapter 15. Network Configuration">Chapter 15, <i>Network Configuration</i></a> for instructions on using the <span><strong class="application">Network Administration Tool</strong></span> to configure a network interface to use DHCP.
		</p>
            <div class="tip">
              <h2>Tip</h2>
              <p>
				For advanced configurations of client DHCP options such as protocol timing, lease requirements and requests, dynamic DNS support, aliases, as well as a wide variety of values to override, prepend, or append to client-side configurations, refer to the <code class="command">dhclient</code> and <code class="command">dhclient.conf</code> man pages.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-dhcp-additional-resources"></a>21.4. Additional Resources</h2>
                </div>
              </div>
            </div>
            <a id="id2948377" class="indexterm"></a>
            <p>
			For additional configuration options, refer to the following resources.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-dhcp-installed-docs"></a>21.4.1. Installed Documentation</h3>
                  </div>
                </div>
              </div>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">dhcpd</code> man page — Describes how the DHCP daemon works.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">dhcpd.conf</code> man page — Explains how to configure the DHCP configuration file; includes some examples.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">dhcpd.leases</code> man page — Explains how to configure the DHCP leases file; includes some examples.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">dhcp-options</code> man page — Explains the syntax for declaring DHCP options in <code class="filename">dhcpd.conf</code>; includes some examples.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">dhcrelay</code> man page — Explains the DHCP Relay Agent and its configuration options.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="filename">/usr/share/doc/dhcp-&lt;<em class="replaceable"><code>version</code></em>&gt;/</code> — Contains sample files, README files, and release notes for current versions of the DHCP service.
					</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footnotes">
            <br />
            <hr width="100" align="left" />
            <div class="footnote">
              <p><sup>[<a id="ftn.id2960871" href="#id2960871">9</a>] </sup>
				<span><strong class="application">Kudzu</strong></span> is a hardware probing tool run at system boot time to determine what hardware has been added or removed from the system.
			</p>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="ch-httpd"></a>Chapter 22. Apache HTTP Server</h2>
              </div>
            </div>
          </div>
          <div class="toc">
            <dl>
              <dt>
                <span class="section">
                  <a href="#s1-httpd-v2">22.1. Apache HTTP Server 2.2</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-httpd-v2-features">22.1.1. Features of Apache HTTP Server 2.2</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-httpd-mig">22.2. Migrating Apache HTTP Server Configuration Files</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s1-httpd-v22-mig">22.2.1. Migrating Apache HTTP Server 2.0 Configuration Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s3-httpd-v2-mig">22.2.2. Migrating Apache HTTP Server 1.3 Configuration Files to 2.0</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-apache-startstop">22.3. Starting and Stopping <code class="command">httpd</code></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-apache-config-ui">22.4. Apache HTTP Server Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-httpd-basic-settings">22.4.1. Basic Settings</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-httpd-default-settings">22.4.2. Default Settings</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-apache-config">22.5. Configuration Directives in <code class="filename">httpd.conf</code></a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-apache-tips">22.5.1. General Configuration Tips</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-apache-sslcommands">22.5.2. Configuration Directives for SSL</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-apache-mpm-containers">22.5.3. MPM Specific Server-Pool Directives</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-apache-addmods">22.6. Adding Modules</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#s1-apache-virtualhosts">22.7. Virtual Hosts</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-apache-settingupvhosts">22.7.1. Setting Up Virtual Hosts</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-httpd-secure-server">22.8. Apache HTTP Secure Server Configuration</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-secureserver-optionalpackages">22.8.1. An Overview of Security-Related Packages</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-secureserver-overview-certs">22.8.2. An Overview of Certificates and Security</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-secureserver-oldcert">22.8.3. Using Pre-Existing Keys and Certificates</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-secureserver-certs">22.8.4. Types of Certificates</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s2-secureserver-generatingkey">22.8.5. Generating a Key</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#s1-use-new-key">22.8.6. How to configure the server to use the new key</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#s1-apache-additional-resources">22.9. Additional Resources</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#s2-apache-additional-resources-web">22.9.1. Useful Websites</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </div>
          <a id="id2953938" class="indexterm"></a>
          <a id="id2903006" class="indexterm"></a>
          <p>
		The Apache HTTP Server is a robust, commercial-grade open source Web server developed by the Apache Software Foundation (<a href="http://www.apache.org/">http://www.apache.org/</a>). Red Hat Enterprise Linux includes the Apache HTTP Server 2.2 as well as a number of server modules designed to enhance its functionality.
	</p>
          <p>
		The default configuration file installed with the Apache HTTP Server works without alteration for most situations. This chapter outlines many of the directives found within its configuration file (<code class="filename">/etc/httpd/conf/httpd.conf</code>) to aid those who require a custom configuration or need to convert a configuration file from the older Apache HTTP Server 1.3 format.
	</p>
          <div class="warning">
            <h2>Warning</h2>
            <p>
			If using the graphical <span><strong class="application">HTTP Configuration Tool</strong></span> (<span class="emphasis"><em>system-config-httpd </em></span>), <span class="emphasis"><em>do not</em></span> hand edit the Apache HTTP Server's configuration file as the <span><strong class="application">HTTP Configuration Tool</strong></span> regenerates this file whenever it is used.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-httpd-v2"></a>22.1. Apache HTTP Server 2.2</h2>
                </div>
              </div>
            </div>
            <p>
			There are important differences between the Apache HTTP Server 2.2 and version 2.0 (version 2.0 shipped with Red Hat Enterprise Linux 4 and earlier). This section reviews some of the features of Apache HTTP Server 2.2 and outlines important changes. If you are upgrading from version 1.3, you should also read the instructions on migrating from version 1.3 to version 2.0. For instructions on migrating a version 1.3 configuration file to the 2.0 format, refer to <a href="#s3-httpd-v2-mig" title="22.2.2. Migrating Apache HTTP Server 1.3 Configuration Files to 2.0">Section 22.2.2, “Migrating Apache HTTP Server 1.3 Configuration Files to 2.0”</a>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-httpd-v2-features"></a>22.1.1. Features of Apache HTTP Server 2.2</h3>
                  </div>
                </div>
              </div>
              <a id="id2941946" class="indexterm"></a>
              <p>
				Apache HTTP Server 2.2 features the following improvements over version 2.0 :
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Improved caching modules (mod_cache, mod_disk_cache, mod_mem_cache).
					</p>
                  </li>
                  <li>
                    <p>
						A new structure for authentication and authorization support, replacing the authentication modules provided in previous versions.
					</p>
                  </li>
                  <li>
                    <p>
						Support for proxy load balancing (mod_proxy_balancer)
					</p>
                  </li>
                  <li>
                    <p>
						support for handling large files (namely, greater than 2GB) on 32-bit platforms
					</p>
                  </li>
                </ul>
              </div>
              <p>
				The following changes have been made to the default httpd configuration:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						The mod_cern_meta and mod_asis modules are no longer loaded by default.
					</p>
                  </li>
                  <li>
                    <p>
						The mod_ext_filter module is now loaded by default.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If upgrading from a previous release of Red Hat Enterprise Linux, the httpd configuration will need to be updated for httpd 2.2. For more information, refer to http://httpd.apache.org/docs/2.2/upgrading.html
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-httpd-mig"></a>22.2. Migrating Apache HTTP Server Configuration Files</h2>
                </div>
              </div>
            </div>
            <a id="id2907418" class="indexterm"></a>
            <a id="id2950655" class="indexterm"></a>
            <a id="id2961955" class="indexterm"></a>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-httpd-v22-mig"></a>22.2.1. Migrating Apache HTTP Server 2.0 Configuration Files</h3>
                  </div>
                </div>
              </div>
              <a id="id2926496" class="indexterm"></a>
              <p>
				This section outlines migration from version 2.0 to 2.2. If you are migrating from version 1.3, please refer to <a href="#s3-httpd-v2-mig" title="22.2.2. Migrating Apache HTTP Server 1.3 Configuration Files to 2.0">Section 22.2.2, “Migrating Apache HTTP Server 1.3 Configuration Files to 2.0”</a>.
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Configuration files and startup scripts from version 2.0 need minor adjustments particularly in module names which may have changed. Third party modules which worked in version 2.0 can also work in version 2.2 but need to be recompiled before you load them. Key modules that need to be noted are authentication and authorization modules. For each of the modules which has been renamed the <a href="http://httpd.apache.org/docs/2.2/mod/mod_so.html#loadmodule"><code class="command">LoadModule</code></a> line will need to be updated.
					</p>
                  </li>
                  <li>
                    <p>
						The <code class="command">mod_userdir</code> module will only act on requests if you provide a <code class="command">UserDir</code> directive indicating a directory name. If you wish to maintain the procedures used in version 2.0, add the directive <code class="command">UserDir public_html</code> in your configuration file.
					</p>
                  </li>
                  <li>
                    <p>
						To enable SSL, edit the <code class="filename">httpd.conf</code> file adding the necessary <code class="command">mod_ssl</code> directives. Use <code class="command">apachectl start</code> as <code class="command">apachectl startssl</code> is unavailable in version 2.2. You can view an example of SSL configuration for httpd in <code class="filename">conf/extra/httpd-ssl.conf</code>.
					</p>
                  </li>
                  <li>
                    <p>
						To test your configuration it is advisable to use <code class="command">service httpd configtest</code> which will detect configuration errors.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				More information on upgrading from version 2.0 to 2.2 can be found on <a href="http://httpd.apache.org/docs/2.2/upgrading.html">http://httpd.apache.org/docs/2.2/upgrading.html</a>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s3-httpd-v2-mig"></a>22.2.2. Migrating Apache HTTP Server 1.3 Configuration Files to 2.0</h3>
                  </div>
                </div>
              </div>
              <a id="id2853440" class="indexterm"></a>
              <a id="id2893817" class="indexterm"></a>
              <a id="id2886935" class="indexterm"></a>
              <p>
				This section details migrating an Apache HTTP Server 1.3 configuration file to be utilized by Apache HTTP Server 2.0.
			</p>
              <p>
				If upgrading to Red Hat Enterprise Linux 5 from Red Hat Enterprise Linux 2.1, note that the new stock configuration file for the Apache HTTP Server 2.0 package is installed as <code class="filename">/etc/httpd/conf/httpd.conf.rpmnew</code> and the original version 1.3 <code class="filename">httpd.conf</code> is left untouched. It is entirely up to you whether to use the new configuration file and migrate the old settings to it, or use the existing file as a base and modify it to suit; however, some parts of the file have changed more than others and a mixed approach is generally the best. The stock configuration files for both version 1.3 and 2.0 are divided into three sections.
			</p>
              <p>
				If the <code class="filename">/etc/httpd/conf/httpd.conf</code> file is a modified version of the newly installed default and a saved a copy of the original configuration file is available, it may be easiest to invoke the <code class="command">diff</code> command, as in the following example (logged in as root):
			</p>
              <pre class="screen"><code class="command">diff -u httpd.conf.orig httpd.conf | less</code>
</pre>
              <p>
				This command highlights any modifications made. If a copy of the original file is not available, extract it from an RPM package using the <code class="command">rpm2cpio</code> and <code class="command">cpio</code> commands, as in the following example:
			</p>
              <pre class="screen"><code class="command">rpm2cpio apache-<em class="replaceable"><code>&lt;version-number&gt;</code></em>.i386.rpm | cpio -i --make</code>
</pre>
              <p>
				In the above command, replace <em class="replaceable"><code>&lt;version-number&gt;</code></em> with the version number for the <code class="filename">apache</code> package.
			</p>
              <p>
				Finally, it is useful to know that the Apache HTTP Server has a testing mode to check for configuration errors. To use access it, type the following command:
			</p>
              <pre class="screen"><code class="command">apachectl configtest</code>
</pre>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-httpd-mig-global"></a>22.2.2.1. Global Environment Configuration</h4>
                    </div>
                  </div>
                </div>
                <p>
					The global environment section of the configuration file contains directives which affect the overall operation of the Apache HTTP Server, such as the number of concurrent requests it can handle and the locations of the various files. This section requires a large number of changes and should be based on the Apache HTTP Server 2.0 configuration file, while migrating the old settings into it.
				</p>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-port"></a>22.2.2.1.1. Interface and Port Binding</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2937351" class="indexterm"></a>
                  <p>
						The <code class="command">BindAddress</code> and <code class="command">Port</code> directives no longer exist; their functionality is now provided by a more flexible <code class="command">Listen</code> directive.
					</p>
                  <p>
						If <code class="command">Port 80</code> was set in the 1.3 version configuration file, change it to <code class="command">Listen 80</code> in the 2.0 configuration file. If <code class="command">Port</code> was set to some value <span class="emphasis"><em>other than 80</em></span>, then append the port number to the contents of the <code class="command">ServerName</code> directive.
					</p>
                  <p>
						For example, the following is a sample Apache HTTP Server 1.3 directive:
					</p>
                  <pre class="screen"><code class="command">Port 123 ServerName www.example.com</code>
</pre>
                  <p>
						To migrate this setting to Apache HTTP Server 2.0, use the following structure:
					</p>
                  <pre class="screen"><code class="command"><strong class="userinput"><code>Listen</code></strong> 123 ServerName www.example.com:<strong class="userinput"><code>123</code></strong></code>
</pre>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mpm_common.html#listen"><code class="command">http://httpd.apache.org/docs-2.0/mod/mpm_common.html#listen</code></a>
							</p>
                      </li>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/core.html#servername"><code class="command">http://httpd.apache.org/docs-2.0/mod/core.html#servername</code></a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-pool"></a>22.2.2.1.2. Server-Pool Size Regulation</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2961396" class="indexterm"></a>
                  <a id="id2961416" class="indexterm"></a>
                  <a id="id2961436" class="indexterm"></a>
                  <a id="id2961460" class="indexterm"></a>
                  <p>
						When the Apache HTTP Server accepts requests, it dispatches child processes or threads to handle them. This group of child processes or threads is known as a <em class="firstterm">server-pool</em>. Under Apache HTTP Server 2.0, the responsibility for creating and maintaining these server-pools has been abstracted to a group of modules called <em class="firstterm">Multi-Processing Modules</em> (<em class="firstterm">MPMs</em>). Unlike other modules, only one module from the MPM group can be loaded by the Apache HTTP Server. There are three MPM modules that ship with 2.0: <code class="command">prefork</code>, <code class="command">worker</code>, and <code class="command">perchild</code>. Currently only the <code class="command">prefork</code> and <code class="command">worker</code> MPMs are available, although the <code class="command">perchild</code> MPM may be available at a later date.
					</p>
                  <p>
						The original Apache HTTP Server 1.3 behavior has been moved into the <code class="command">prefork</code> MPM. The <code class="command">prefork</code> MPM accepts the same directives as Apache HTTP Server 1.3, so the following directives may be migrated directly:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<code class="command">StartServers</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">MinSpareServers</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">MaxSpareServers</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">MaxClients</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">MaxRequestsPerChild</code>
							</p>
                      </li>
                    </ul>
                  </div>
                  <p>
						The <code class="command">worker</code> MPM implements a multi-process, multi-threaded server providing greater scalability. When using this MPM, requests are handled by threads, conserving system resources and allowing large numbers of requests to be served efficiently. Although some of the directives accepted by the <code class="command">worker</code> MPM are the same as those accepted by the <code class="command">prefork</code> MPM, the values for those directives should not be transfered directly from an Apache HTTP Server 1.3 installation. It is best to instead use the default values as a guide, then experiment to determine what values work best.
					</p>
                  <div class="important">
                    <h2>Important</h2>
                    <p>
							To use the <code class="command">worker</code> MPM, create the file <code class="filename">/etc/sysconfig/httpd</code> and add the following directive:
						</p>
                    <pre class="screen"><code class="command">HTTPD=/usr/sbin/httpd.worker</code>
</pre>
                  </div>
                  <p>
						For more on the topic of MPMs, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mpm.html">http://httpd.apache.org/docs-2.0/mpm.html</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-dso"></a>22.2.2.1.3. Dynamic Shared Object (DSO) Support</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2860571" class="indexterm"></a>
                  <p>
						There are many changes required here, and it is highly recommended that anyone trying to modify an Apache HTTP Server 1.3 configuration to suit version 2.0 (as opposed to migrating the changes into the version 2.0 configuration) copy this section from the stock Apache HTTP Server 2.0 configuration file.
					</p>
                  <p>
						Those who do not want to copy the section from the stock Apache HTTP Server 2.0 configuration should note the following:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								The <code class="command">AddModule</code> and <code class="command">ClearModuleList</code> directives no longer exist. These directives where used to ensure that modules could be enabled in the correct order. The Apache HTTP Server 2.0 API allows modules to specify their ordering, eliminating the need for these two directives.
							</p>
                      </li>
                      <li>
                        <p>
								The order of the <code class="command">LoadModule</code> lines are no longer relevant in most cases.
							</p>
                      </li>
                      <li>
                        <p>
								Many modules have been added, removed, renamed, split up, or incorporated into others.
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">LoadModule</code> lines for modules packaged in their own RPMs (<code class="filename">mod_ssl</code>, <code class="filename">php</code>, <code class="filename">mod_perl</code>, and the like) are no longer necessary as they can be found in their relevant files within the <code class="filename">/etc/httpd/conf.d/</code> directory.
							</p>
                      </li>
                      <li>
                        <p>
								The various <code class="command">HAVE_XXX</code> definitions are no longer defined.
							</p>
                      </li>
                    </ul>
                  </div>
                  <div class="important">
                    <h2>Important</h2>
                    <p>
							If modifying the original file, note that it is of paramount importance that the <code class="filename">httpd.conf</code> contains the following directive:
						</p>
                    <pre class="screen"><code class="command">Include conf.d/*.conf</code>
</pre>
                    <p>
							Omission of this directive results in the failure of all modules packaged in their own RPMs (such as <code class="filename">mod_perl</code>, <code class="filename">php</code>, and <code class="filename">mod_ssl</code>).
						</p>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-other"></a>22.2.2.1.4. Other Global Environment Changes</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2888628" class="indexterm"></a>
                  <p>
						The following directives have been removed from Apache HTTP Server 2.0's configuration:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<span class="emphasis"><em><code class="command">ServerType</code></em></span> — The Apache HTTP Server can only be run as <code class="command">ServerType standalone</code> making this directive irrelevant.
							</p>
                      </li>
                      <li>
                        <p>
								<span class="emphasis"><em><code class="command">AccessConfig</code></em></span> and <span class="emphasis"><em><code class="command">ResourceConfig</code></em></span> — These directives have been removed as they mirror the functionality of the <code class="command">Include</code> directive. If the <code class="command">AccessConfig</code> and <code class="command">ResourceConfig</code> directives are set, replace them with <code class="command">Include</code> directives.
							</p>
                        <p>
								To ensure that the files are read in the order implied by the older directives, the <code class="command">Include</code> directives should be placed at the end of the <code class="filename">httpd.conf</code>, with the one corresponding to <code class="command">ResourceConfig</code> preceding the one corresponding to <code class="command">AccessConfig</code>. If using the default values, include them explicitly as <code class="filename">conf/srm.conf</code> and <code class="filename">conf/access.conf</code> files.
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-httpd-v2-mig-main"></a>22.2.2.2. Main Server Configuration</h4>
                    </div>
                  </div>
                </div>
                <p>
					The main server configuration section of the configuration file sets up the main server, which responds to any requests that are not handled by a virtual host defined within a <code class="command">&lt;VirtualHost&gt;</code> container. Values here also provide defaults for any <code class="command">&lt;VirtualHost&gt;</code> containers defined.
				</p>
                <p>
					The directives used in this section have changed little between Apache HTTP Server 1.3 and version 2.0. If the main server configuration is heavily customized, it may be easier to modify the existing configuration file to suit Apache HTTP Server 2.0. Users with only lightly customized main server sections should migrate their changes into the default 2.0 configuration.
				</p>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-mig-main-map"></a>22.2.2.2.1. <code class="command">UserDir</code> Mapping</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3028512" class="indexterm"></a>
                  <p>
						The <code class="command">UserDir</code> directive is used to enable URLs such as <code class="filename">http://example.com/~bob/</code> to map to a subdirectory within the home directory of the user <code class="command">bob</code>, such as <code class="filename">/home/bob/public_html/</code>. A side-effect of this feature allows a potential attacker to determine whether a given username is present on the system. For this reason, the default configuration for Apache HTTP Server 2.0 disables this directive.
					</p>
                  <p>
						To enable <code class="command">UserDir</code> mapping, change the directive in <code class="filename">httpd.conf</code> from:
					</p>
                  <pre class="screen"><code class="command">UserDir disable</code>
</pre>
                  <p>
						to the following:
					</p>
                  <pre class="screen"><code class="command">UserDir <strong class="userinput"><code>public_html</code></strong></code>
</pre>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_userdir.html#userdir">http://httpd.apache.org/docs-2.0/mod/mod_userdir.html#userdir</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-mig-main-log"></a>22.2.2.2.2. Logging</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3028646" class="indexterm"></a>
                  <p>
						The following logging directives have been removed:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<code class="command">AgentLog</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">RefererLog</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="command">RefererIgnore</code>
							</p>
                      </li>
                    </ul>
                  </div>
                  <p>
						However, agent and referrer logs are still available using the <code class="command">CustomLog</code> and <code class="command">LogFormat</code> directives.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_log_config.html#customlog">http://httpd.apache.org/docs-2.0/mod/mod_log_config.html#customlog</a>
							</p>
                      </li>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_log_config.html#logformat">http://httpd.apache.org/docs-2.0/mod/mod_log_config.html#logformat</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-mig-main-dirindex"></a>22.2.2.2.3. Directory Indexing</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3029756" class="indexterm"></a>
                  <p>
						The deprecated <code class="command">FancyIndexing</code> directive has now been removed. The same functionality is available through the <code class="command">FancyIndexing</code><span class="emphasis"><em>option</em></span> within the <code class="command">IndexOptions</code> directive.
					</p>
                  <p>
						The <code class="command">VersionSort</code> option to the <code class="command">IndexOptions</code> directive causes files containing version numbers to be sorted in a more natural way. For example, <code class="filename">httpd-2.0.6.tar</code> appears before <code class="filename">httpd-2.0.36.tar</code> in a directory index page.
					</p>
                  <p>
						The defaults for the <code class="command">ReadmeName</code> and <code class="command">HeaderName</code> directives have changed from <code class="filename">README</code> and <code class="filename">HEADER</code> to <code class="filename">README.html</code> and <code class="filename">HEADER.html</code>.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_autoindex.html#indexoptions">http://httpd.apache.org/docs-2.0/mod/mod_autoindex.html#indexoptions</a>
							</p>
                      </li>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_autoindex.html#readmename">http://httpd.apache.org/docs-2.0/mod/mod_autoindex.html#readmename</a>
							</p>
                      </li>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_autoindex.html#headername">http://httpd.apache.org/docs-2.0/mod/mod_autoindex.html#headername</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-mig-main-cont"></a>22.2.2.2.4. Content Negotiation</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3029933" class="indexterm"></a>
                  <p>
						The <code class="command">CacheNegotiatedDocs</code> directive now takes the argument <code class="option">on</code> or <code class="option">off</code>. Existing instances of <code class="command">CacheNegotiatedDocs</code> should be replaced with <code class="command">CacheNegotiatedDocs on</code>.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_negotiation.html#cachenegotiateddocs">http://httpd.apache.org/docs-2.0/mod/mod_negotiation.html#cachenegotiateddocs</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-mig-main-error"></a>22.2.2.2.5. Error Documents</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3030014" class="indexterm"></a>
                  <p>
						To use a hard-coded message with the <code class="command">ErrorDocument</code> directive, the message should be enclosed in a pair of double quotation marks <code class="command">"</code>, rather than just preceded by a double quotation mark as required in Apache HTTP Server 1.3.
					</p>
                  <p>
						For example, the following is a sample Apache HTTP Server 1.3 directive:
					</p>
                  <pre class="screen"><code class="command">ErrorDocument 404 "The document was not found</code>
</pre>
                  <p>
						To migrate an <code class="command">ErrorDocument</code> setting to Apache HTTP Server 2.0, use the following structure:
					</p>
                  <pre class="screen"><code class="command">ErrorDocument 404 "The document was not found"</code>
</pre>
                  <p>
						Note the trailing double quote in the previous <code class="command">ErrorDocument</code> directive example.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/core.html#errordocument">http://httpd.apache.org/docs-2.0/mod/core.html#errordocument</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-httpd-v2-mig-virtual"></a>22.2.2.3. Virtual Host Configuration</h4>
                    </div>
                  </div>
                </div>
                <a id="id3030135" class="indexterm"></a>
                <p>
					The contents of all <code class="command">&lt;VirtualHost&gt;</code> containers should be migrated in the same way as the main server section as described in <a href="#s2-httpd-v2-mig-main" title="22.2.2.2. Main Server Configuration">Section 22.2.2.2, “Main Server Configuration”</a>.
				</p>
                <div class="important">
                  <h2>Important</h2>
                  <p>
						Note that SSL/TLS virtual host configuration has been moved out of the main server configuration file and into <code class="filename">/etc/httpd/conf.d/ssl.conf</code>.
					</p>
                </div>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<a href="http://httpd.apache.org/docs-2.0/vhosts/">http://httpd.apache.org/docs-2.0/vhosts/</a>
						</p>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s2-httpd-v2-mig-mod"></a>22.2.2.4. Modules and Apache HTTP Server 2.0</h4>
                    </div>
                  </div>
                </div>
                <a id="id3026001" class="indexterm"></a>
                <p>
					In Apache HTTP Server 2.0, the module system has been changed to allow modules to be chained together or combined in new and interesting ways. <em class="firstterm">Common Gateway Interface</em> (<em class="firstterm">CGI</em>) scripts, for example, can generate server-parsed HTML documents which can then be processed by <code class="filename">mod_include</code>. This opens up a tremendous number of possibilities with regards to how modules can be combined to achieve a specific goal.
				</p>
                <p>
					The way this works is that each request is served by exactly one <em class="firstterm">handler</em> module followed by zero or more <em class="firstterm">filter</em> modules.
				</p>
                <p>
					Under Apache HTTP Server 1.3, for example, a Perl script would be handled in its entirety by the Perl module (<code class="filename">mod_perl</code>). Under Apache HTTP Server 2.0, the request is initially <span class="emphasis"><em>handled</em></span> by the core module — which serves static files — and is then <span class="emphasis"><em>filtered</em></span> by <code class="filename">mod_perl</code>.
				</p>
                <p>
					Exactly how to use this, and all other new features of Apache HTTP Server 2.0, is beyond the scope of this document; however, the change has ramifications if the <code class="command">PATH_INFO</code> directive is used for a document which is handled by a module that is now implemented as a filter, as each contains trailing path information after the true file name. The core module, which initially handles the request, does not by default understand <code class="command">PATH_INFO</code> and returns <code class="computeroutput">404 Not Found</code> errors for requests that contain such information. As an alternative, use the <code class="command">AcceptPathInfo</code> directive to coerce the core module into accepting requests with <code class="command">PATH_INFO</code>.
				</p>
                <p>
					The following is an example of this directive:
				</p>
                <pre class="screen"><code class="command">AcceptPathInfo on</code>
</pre>
                <p>
					For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<a href="http://httpd.apache.org/docs-2.0/mod/core.html#acceptpathinfo">http://httpd.apache.org/docs-2.0/mod/core.html#acceptpathinfo</a>
						</p>
                    </li>
                    <li>
                      <p>
							<a href="http://httpd.apache.org/docs-2.0/handler.html">http://httpd.apache.org/docs-2.0/handler.html</a>
						</p>
                    </li>
                    <li>
                      <p>
							<a href="http://httpd.apache.org/docs-2.0/filter.html">http://httpd.apache.org/docs-2.0/filter.html</a>
						</p>
                    </li>
                  </ul>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-suexec"></a>22.2.2.4.1. The <code class="filename">suexec</code> Module</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3026206" class="indexterm"></a>
                  <a id="id3026227" class="indexterm"></a>
                  <a id="id3026244" class="indexterm"></a>
                  <p>
						In Apache HTTP Server 2.0, the <code class="filename">mod_suexec</code> module uses the <code class="filename">SuexecUserGroup</code> directive, rather than the <code class="filename">User</code> and <code class="filename">Group</code> directives, which is used for configuring virtual hosts. The <code class="filename">User</code> and <code class="filename">Group</code> directives can still be used in general, but are deprecated for configuring virtual hosts.
					</p>
                  <p>
						For example, the following is a sample Apache HTTP Server 1.3 directive:
					</p>
                  <pre class="screen"><code class="command">&lt;VirtualHost vhost.example.com:80&gt; User someone Group somegroup &lt;/VirtualHost&gt;</code>
</pre>
                  <p>
						To migrate this setting to Apache HTTP Server 2.0, use the following structure:
					</p>
                  <pre class="screen"><code class="command">&lt;VirtualHost vhost.example.com:80&gt; SuexecUserGroup someone somegroup &lt;/VirtualHost&gt;</code>
</pre>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-ssl"></a>22.2.2.4.2. The <code class="filename">mod_ssl</code> Module</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3026353" class="indexterm"></a>
                  <p>
						The configuration for <code class="filename">mod_ssl</code> has been moved from the <code class="filename">httpd.conf</code> file into the <code class="filename">/etc/httpd/conf.d/ssl.conf</code> file. For this file to be loaded, and for <code class="filename">mod_ssl</code> to work, the statement <code class="command">Include conf.d/*.conf</code> must be in the <code class="filename">httpd.conf</code> file as described in <a href="#s3-httpd-v2-mig-dso" title="22.2.2.1.3. Dynamic Shared Object (DSO) Support">Section 22.2.2.1.3, “Dynamic Shared Object (DSO) Support”</a>.
					</p>
                  <p>
						<code class="command">ServerName</code> directives in SSL virtual hosts must explicitly specify the port number.
					</p>
                  <p>
						For example, the following is a sample Apache HTTP Server 1.3 directive:
					</p>
                  <pre class="screen"><code class="command">&lt;VirtualHost _default_:443&gt; # General setup for the virtual host ServerName ssl.example.name ... &lt;/VirtualHost&gt;</code>
</pre>
                  <p>
						To migrate this setting to Apache HTTP Server 2.0, use the following structure:
					</p>
                  <pre class="screen"><code class="command">&lt;VirtualHost _default_:443&gt; # General setup for the virtual host ServerName ssl.host.name<strong class="userinput"><code>:443</code></strong> ... &lt;/VirtualHost&gt;</code>
</pre>
                  <p>
						It is also important to note that both the <code class="command">SSLLog</code> and <code class="command">SSLLogLevel</code> directives have been removed. The <code class="filename">mod_ssl</code> module now obeys the <code class="command">ErrorLog</code> and <code class="command">LogLevel</code> directives. Refer to <a href="#s2-apache-errorlog" title="ErrorLog">ErrorLog</a> and <a href="#s2-apache-loglevel" title="LogLevel">LogLevel</a> for more information about these directives.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_ssl.html">http://httpd.apache.org/docs-2.0/mod/mod_ssl.html</a>
							</p>
                      </li>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/vhosts/">http://httpd.apache.org/docs-2.0/vhosts/</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-proxy"></a>22.2.2.4.3. The <code class="filename">mod_proxy</code> Module</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2987712" class="indexterm"></a>
                  <p>
						Proxy access control statements are now placed inside a <code class="command">&lt;Proxy&gt;</code> block rather than a <code class="command">&lt;Directory proxy:&gt;</code>.
					</p>
                  <p>
						The caching functionality of the old <code class="filename">mod_proxy</code> has been split out into the following three modules:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<code class="filename">mod_cache</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="filename">mod_disk_cache</code>
							</p>
                      </li>
                      <li>
                        <p>
								<code class="filename">mod_mem_cache</code>
							</p>
                      </li>
                    </ul>
                  </div>
                  <p>
						These generally use directives similar to the older versions of the <code class="filename">mod_proxy</code> module, but it is advisable to verify each directive before migrating any cache settings.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_proxy.html">http://httpd.apache.org/docs-2.0/mod/mod_proxy.html</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-include"></a>22.2.2.4.4. The <code class="filename">mod_include</code> Module</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2987857" class="indexterm"></a>
                  <p>
						The <code class="filename">mod_include</code> module is now implemented as a filter and is therefore enabled differently. Refer to <a href="#s2-httpd-v2-mig-mod" title="22.2.2.4. Modules and Apache HTTP Server 2.0">Section 22.2.2.4, “Modules and Apache HTTP Server 2.0”</a> for more about filters.
					</p>
                  <p>
						For example, the following is a sample Apache HTTP Server 1.3 directive:
					</p>
                  <pre class="screen"><code class="command">AddType text/html .shtml AddHandler server-parsed .shtml</code>
</pre>
                  <p>
						To migrate this setting to Apache HTTP Server 2.0, use the following structure:
					</p>
                  <pre class="screen"><code class="command">AddType text/html .shtml <strong class="userinput"><code>AddOutputFilter INCLUDES</code></strong> .shtml</code>
</pre>
                  <p>
						Note that the <code class="command">Options +Includes</code> directive is still required for the <code class="command">&lt;Directory&gt;</code> container or in a <code class="filename">.htaccess</code> file.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_include.html">http://httpd.apache.org/docs-2.0/mod/mod_include.html</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-dbm"></a>22.2.2.4.5. The <code class="filename">mod_auth_dbm</code> and <code class="filename">mod_auth_db</code> Modules</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2988000" class="indexterm"></a>
                  <a id="id2988021" class="indexterm"></a>
                  <p>
						Apache HTTP Server 1.3 supported two authentication modules, <code class="filename">mod_auth_db</code> and <code class="filename">mod_auth_dbm</code>, which used Berkeley Databases and DBM databases respectively. These modules have been combined into a single module named <code class="filename">mod_auth_dbm</code> in Apache HTTP Server 2.0, which can access several different database formats. To migrate from <code class="filename">mod_auth_db</code>, configuration files should be adjusted by replacing <code class="command">AuthDBUserFile</code> and <code class="command">AuthDBGroupFile</code> with the <code class="filename">mod_auth_dbm</code> equivalents, <code class="command">AuthDBMUserFile</code> and <code class="command">AuthDBMGroupFile</code>. Also, the directive <code class="command">AuthDBMType DB</code> must be added to indicate the type of database file in use.
					</p>
                  <p>
						The following example shows a sample <code class="filename">mod_auth_db</code> configuration for Apache HTTP Server 1.3:
					</p>
                  <pre class="screen"><code class="command">&lt;Location /private/&gt; AuthType Basic AuthName "My Private Files" AuthDBUserFile /var/www/authdb require valid-user &lt;/Location&gt;</code>

</pre>
                  <p>
						To migrate this setting to version 2.0 of Apache HTTP Server, use the following structure:
					</p>
                  <pre class="screen"><code class="command">&lt;Location /private/&gt; AuthType Basic AuthName "My Private Files" <strong class="userinput"><code>AuthDBMUserFile</code></strong> /var/www/authdb <strong class="userinput"><code>AuthDBMType DB</code></strong> require valid-user &lt;/Location&gt;</code>
</pre>
                  <p>
						Note that the <code class="command">AuthDBMUserFile</code> directive can also be used in <code class="filename">.htaccess</code> files.
					</p>
                  <p>
						The <code class="command">dbmmanage</code> Perl script, used to manipulate username and password databases, has been replaced by <code class="command">htdbm</code> in Apache HTTP Server 2.0. The <code class="command">htdbm</code> program offers equivalent functionality and, like <code class="filename">mod_auth_dbm</code>, can operate a variety of database formats; the <code class="option">-T</code> option can be used on the command line to specify the format to use.
					</p>
                  <p>
						<a href="#table-htdbm" title="Table 22.1. Migrating from dbmmanage to htdbm">Table 22.1, “Migrating from <code class="command">dbmmanage</code> to <code class="command">htdbm</code>”</a> shows how to migrate from a DBM-format database to <code class="command">htdbm</code> format using <code class="command">dbmmanage</code>.
					</p>
                  <div class="table">
                    <a id="table-htdbm"></a>
                    <div class="table-contents">
                      <table summary="Migrating from dbmmanage to htdbm" border="1">
                        <colgroup>
                          <col />
                          <col />
                          <col />
                        </colgroup>
                        <thead>
                          <tr>
                            <th>
										Action
									</th>
                            <th>
										dbmmanage command (1.3)
									</th>
                            <th>
										Equivalent htdbm command (2.0)
									</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
										Add user to database (using given password)
									</td>
                            <td>
										<code class="command">dbmmanage authdb add username password</code>
									</td>
                            <td>
										<code class="command">htdbm -b -TDB authdb username password</code>
									</td>
                          </tr>
                          <tr>
                            <td>
										Add user to database (prompts for password)
									</td>
                            <td>
										<code class="command">dbmmanage authdb adduser username</code>
									</td>
                            <td>
										<code class="command">htdbm -TDB authdb username</code>
									</td>
                          </tr>
                          <tr>
                            <td>
										Remove user from database
									</td>
                            <td>
										<code class="command">dbmmanage authdb delete username</code>
									</td>
                            <td>
										<code class="command">htdbm -x -TDB authdb username</code>
									</td>
                          </tr>
                          <tr>
                            <td>
										List users in database
									</td>
                            <td>
										<code class="command">dbmmanage authdb view</code>
									</td>
                            <td>
										<code class="command">htdbm -l -TDB authdb</code>
									</td>
                          </tr>
                          <tr>
                            <td>
										Verify a password
									</td>
                            <td>
										<code class="command">dbmmanage authdb check username</code>
									</td>
                            <td>
										<code class="command">htdbm -v -TDB authdb username</code>
									</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <h6>Table 22.1. Migrating from <code class="command">dbmmanage</code> to <code class="command">htdbm</code></h6>
                  </div>
                  <br class="table-break" />
                  <p>
						The <code class="option">-m</code> and <code class="option">-s</code> options work with both <code class="command">dbmmanage</code> and <code class="command">htdbm</code>, enabling the use of the MD5 or SHA1 algorithms for hashing passwords, respectively.
					</p>
                  <p>
						When creating a new database with <code class="command">htdbm</code>, the <code class="command">-c</code> option must be used.
					</p>
                  <p>
						For more on this topic, refer to the following documentation on the Apache Software Foundation's website:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://httpd.apache.org/docs-2.0/mod/mod_auth_dbm.html">http://httpd.apache.org/docs-2.0/mod/mod_auth_dbm.html</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-perl"></a>22.2.2.4.6. The <code class="filename">mod_perl</code> Module</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3013450" class="indexterm"></a>
                  <p>
						The configuration for <code class="filename">mod_perl</code> has been moved from <code class="filename">httpd.conf</code> into the file <code class="filename">/etc/httpd/conf.d/perl.conf</code>. For this file to be loaded, and hence for <code class="filename">mod_perl</code> to work, the statement <code class="command">Include conf.d/*.conf</code> must be included in <code class="filename">httpd.conf</code> as described in <a href="#s3-httpd-v2-mig-dso" title="22.2.2.1.3. Dynamic Shared Object (DSO) Support">Section 22.2.2.1.3, “Dynamic Shared Object (DSO) Support”</a>.
					</p>
                  <p>
						Occurrences of <code class="command">Apache::</code> in <code class="filename">httpd.conf</code> must be replaced with <code class="command">ModPerl::</code>. Additionally, the manner in which handlers are registered has been changed.
					</p>
                  <p>
						This is a sample Apache HTTP Server 1.3 <code class="filename">mod_perl</code> configuration:
					</p>
                  <pre class="screen"><code class="command">&lt;Directory /var/www/perl&gt; SetHandler perl-script PerlHandler Apache::Registry Options +ExecCGI &lt;/Directory&gt;</code>
</pre>
                  <p>
						This is the equivalent <code class="filename">mod_perl</code> for Apache HTTP Server 2.0:
					</p>
                  <pre class="screen"><code class="command">&lt;Directory /var/www/perl&gt; SetHandler perl-script <strong class="userinput"><code>PerlResponseHandler ModPerl::Registry</code></strong> Options +ExecCGI &lt;/Directory&gt;</code>
</pre>
                  <p>
						Most modules for <code class="filename">mod_perl</code> 1.x should work without modification with <code class="filename">mod_perl</code> 2.x. XS modules require recompilation and may require minor Makefile modifications.
					</p>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-python"></a>22.2.2.4.7. The <code class="filename">mod_python</code> Module</h5>
                      </div>
                    </div>
                  </div>
                  <p>
						Configuration for <code class="filename">mod_python</code> has moved from <code class="filename">httpd.conf</code> to the <code class="filename">/etc/httpd/conf.d/python.conf</code> file. For this file to be loaded, and hence for <code class="filename">mod_python</code> to work, the statement <code class="command">Include conf.d/*.conf</code> must be in <code class="filename">httpd.conf</code> as described in <a href="#s3-httpd-v2-mig-dso" title="22.2.2.1.3. Dynamic Shared Object (DSO) Support">Section 22.2.2.1.3, “Dynamic Shared Object (DSO) Support”</a>.
					</p>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-php"></a>22.2.2.4.8. PHP</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id3013674" class="indexterm"></a>
                  <p>
						The configuration for PHP has been moved from <code class="filename">httpd.conf</code> into the file <code class="filename">/etc/httpd/conf.d/php.conf</code>. For this file to be loaded, the statement <code class="command">Include conf.d/*.conf</code> must be in <code class="filename">httpd.conf</code> as described in <a href="#s3-httpd-v2-mig-dso" title="22.2.2.1.3. Dynamic Shared Object (DSO) Support">Section 22.2.2.1.3, “Dynamic Shared Object (DSO) Support”</a>.
					</p>
                  <div class="note">
                    <h2>Note</h2>
                    <p>
							Any PHP configuration directives used in Apache HTTP Server 1.3 are now fully compatible, when migrating to Apache HTTP Server 2.0 on Red Hat Enterprise Linux 5.
						</p>
                  </div>
                  <p>
						In PHP version 4.2.0 and later the default set of predefined variables which are available in the global scope has changed. Individual input and server variables are, by default, no longer placed directly into the global scope. This change may cause scripts to break. Revert to the old behavior by setting <code class="command">register_globals</code> to <code class="command">On</code> in the file <code class="filename">/etc/php.ini</code>.
					</p>
                  <p>
						For more on this topic, refer to the following URL for details concerning the global scope changes:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								<a href="http://www.php.net/release_4_1_0.php">http://www.php.net/release_4_1_0.php</a>
							</p>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="section" lang="en-US" xml:lang="en-US">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h5 class="title"><a id="s3-httpd-v2-mig-mod-ldapz"></a>22.2.2.4.9. The <code class="filename">mod_authz_ldap</code> Module</h5>
                      </div>
                    </div>
                  </div>
                  <a id="id2989303" class="indexterm"></a>
                  <p>
						Red Hat Enterprise Linux ships with the <code class="filename">mod_authz_ldap</code> module for the Apache HTTP Server. This module uses the short form of the distinguished name for a subject and the issuer of the client SSL certificate to determine the distinguished name of the user within an LDAP directory. It is also capable of authorizing users based on attributes of that user's LDAP directory entry, determining access to assets based on the user and group privileges of the asset, and denying access for users with expired passwords. The <code class="filename">mod_ssl</code> module is required when using the <code class="filename">mod_authz_ldap</code> module.
					</p>
                  <div class="important">
                    <h2>Important</h2>
                    <p>
							The <code class="filename">mod_authz_ldap</code> module does not authenticate a user to an LDAP directory using an encrypted password hash. This functionality is provided by the experimental <code class="filename">mod_auth_ldap</code> module. Refer to the <code class="filename">mod_auth_ldap</code> module documentation online at <a href="http://httpd.apache.org/docs-2.0/mod/mod_auth_ldap.html">http://httpd.apache.org/docs-2.0/mod/mod_auth_ldap.html</a> for details on the status of this module.
						</p>
                  </div>
                  <p>
						The <code class="filename">/etc/httpd/conf.d/authz_ldap.conf</code> file configures the <code class="filename">mod_authz_ldap</code> module.
					</p>
                  <p>
						Refer to <code class="filename">/usr/share/doc/mod_authz_ldap-<em class="replaceable"><code>&lt;version&gt;</code></em>/index.html</code> (replacing <em class="replaceable"><code>&lt;version&gt;</code></em> with the version number of the package) or <a href="http://authzldap.othello.ch/">http://authzldap.othello.ch/</a> for more information on configuring the <code class="filename">mod_authz_ldap</code> third party module.
					</p>
                </div>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-apache-startstop"></a>22.3. Starting and Stopping <code class="command">httpd</code></h2>
                </div>
              </div>
            </div>
            <a id="id2989455" class="indexterm"></a>
            <a id="id2989468" class="indexterm"></a>
            <a id="id2989482" class="indexterm"></a>
            <a id="id2989495" class="indexterm"></a>
            <p>
			After installing the <code class="filename">httpd</code> package, review the Apache HTTP Server's documentation available online at <a href="http://httpd.apache.org/docs/2.2/">http://httpd.apache.org/docs/2.2/</a>.
		</p>
            <p>
			The <code class="filename">httpd</code> RPM installs the <code class="filename">/etc/init.d/httpd</code> script, which can be accessed using the <code class="command">/sbin/service</code> command.
		</p>
            <p>
			Starting <code class="command">httpd</code> using the <code class="command">apachectl</code> control script sets the environmental variables in <code class="filename">/etc/sysconfig/httpd</code> and starts <code class="command">httpd</code>. You can also set the environment variables using the init script.
		</p>
            <p>
			To start the server using the <code class="command">apachectl</code> control script as root type:
		</p>
            <pre class="screen"><code class="command">apachectl start</code>
</pre>
            <p>
			You can also start <code class="command">httpd</code> using <code class="command">/sbin/service httpd start</code>. This starts <code class="command">httpd</code> but does not set the environment variables. If you are using the default <code class="command">Listen</code> directive in <code class="command">httpd.conf</code>, which is port 80, you will need to have root privileges to start the apache server.
		</p>
            <p>
			To stop the server, as root type:
		</p>
            <pre class="screen"><code class="command">apachectl stop</code>
</pre>
            <p>
			You can also stop <code class="command">httpd</code> using <code class="command">/sbin/service httpd stop</code>. The <code class="option">restart</code> option is a shorthand way of stopping and then starting the Apache HTTP Server.
		</p>
            <p>
			You can restart the server as root by typing:
		</p>
            <pre class="screen"><code class="command">apachectl restart</code> 
or:<code class="command">/sbin/service httpd restart</code>
</pre>
            <p>
			Apache will display a message on the console or in the <code class="filename">ErrorLog</code> if it encounters an error while starting.
		</p>
            <p>
			By default, the <code class="command">httpd</code> service does <span class="emphasis"><em>not</em></span> start automatically at boot time. If you would wish to have Apache startup at boot time, you will need to add a call to <code class="command">apachectl</code> in your startup files within the <code class="filename">rc.N</code> directory. A typical file used is <code class="filename">rc.local</code>. As this starts Apache as root, it is recommended to properly configure your security and authentication before adding this call.
		</p>
            <p>
			You can also configure the <code class="command">httpd</code> service to start up at boot time, using an initscript utility, such as <code class="command">/sbin/chkconfig</code>, <span><strong class="application">/usr/sbin/ntsysv</strong></span>, or the <span><strong class="application">Services Configuration Tool</strong></span> program.
		</p>
            <p>
			You can also display the status of your httpd server by typing:
		</p>
            <pre class="screen"><code class="command">apachectl status</code>
</pre>
            <p>
			The status module <code class="command">mod_status</code> however needs to be enabled in your <code class="filename">httpd.conf</code> configuration file for this to work. For more details on <code class="command">mod_status</code> can be found on <a href="http://httpd.apache.org/docs/2.2/mod/mod_status.html">http://httpd.apache.org/docs/2.2/mod/mod_status.html</a>.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				If running the Apache HTTP Server as a secure server, the secure server's password is required after the machine boots when using an encrypted private SSL key.
			</p>
              <p>
				You can find more information on <a href="http://httpd.apache.org/docs/2.2/ssl">http://httpd.apache.org/docs/2.2/ssl</a>
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-apache-config-ui"></a>22.4. Apache HTTP Server Configuration</h2>
                </div>
              </div>
            </div>
            <a id="id2989845" class="indexterm"></a>
            <a id="id2975663" class="indexterm"></a>
            <p>
			The <span><strong class="application">HTTP Configuration Tool</strong></span> allows you to configure the <code class="filename">/etc/httpd/conf/httpd.conf</code> configuration file for the Apache HTTP Server. It does not use the old <code class="filename">srm.conf</code> or <code class="filename">access.conf</code> configuration files; leave them empty. Through the graphical interface, you can configure directives such as virtual hosts, logging attributes, and maximum number of connections. To start the HTTD Configuration Tool, click on <code class="filename">System =&gt; Administration =&gt; Server Settings =&gt; HTTP</code>.
		</p>
            <a id="id2975717" class="indexterm"></a>
            <p>
			Only modules provided with Red Hat Enterprise Linux can be configured with the <span><strong class="application">HTTP Configuration Tool</strong></span>. If additional modules are installed, they can not be configured using this tool.
		</p>
            <div class="caution">
              <h2>Caution</h2>
              <a id="id2975752" class="indexterm"></a>
              <p>
				Do not edit the <code class="filename">/etc/httpd/conf/httpd.conf</code> configuration file by hand if you wish to use this tool. The <span><strong class="application">HTTP Configuration Tool</strong></span> generates this file after you save your changes and exit the program. If you want to add additional modules or configuration options that are not available in <span><strong class="application">HTTP Configuration Tool</strong></span>, you cannot use this tool.
			</p>
            </div>
            <p>
			The general steps for configuring the Apache HTTP Server using the <span><strong class="application">HTTP Configuration Tool</strong></span> are as follows:
		</p>
            <div class="orderedlist">
              <ol>
                <li>
                  <p>
					Configure the basic settings under the <span><strong class="guilabel">Main</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Click on the <span><strong class="guilabel">Virtual Hosts</strong></span> tab and configure the default settings.
				</p>
                </li>
                <li>
                  <p>
					Under the <span><strong class="guilabel">Virtual Hosts</strong></span> tab, configure the Default Virtual Host.
				</p>
                </li>
                <li>
                  <p>
					To serve more than one URL or virtual host, add any additional virtual hosts.
				</p>
                </li>
                <li>
                  <p>
					Configure the server settings under the <span><strong class="guilabel">Server</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Configure the connections settings under the <span><strong class="guilabel">Performance Tuning</strong></span> tab.
				</p>
                </li>
                <li>
                  <p>
					Copy all necessary files to the <code class="filename">DocumentRoot</code> and <code class="filename">cgi-bin</code> directories.
				</p>
                </li>
                <li>
                  <p>
					Exit the application and select to save your settings.
				</p>
                </li>
              </ol>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-httpd-basic-settings"></a>22.4.1. Basic Settings</h3>
                  </div>
                </div>
              </div>
              <p>
				Use the <span><strong class="guilabel">Main</strong></span> tab to configure the basic server settings.
			</p>
              <div class="figure">
                <a id="httpd-main"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/httpd-main.png" alt="Basic Settings" />
                    <div class="longdesc">
                      <p>
							Basic Settings
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 22.1. Basic Settings</h6>
              </div>
              <br class="figure-break" />
              <a id="id2975971" class="indexterm"></a>
              <p>
				Enter a fully qualified domain name that you have the right to use in the <span><strong class="guilabel">Server Name</strong></span> text area. This option corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#servername"><code class="command">ServerName</code></a> directive in <code class="filename">httpd.conf</code>. The <code class="command">ServerName</code> directive sets the hostname of the Web server. It is used when creating redirection URLs. If you do not define a server name, the Web server attempts to resolve it from the IP address of the system. The server name does not have to be the domain name resolved from the IP address of the server. For example, you might set the server name to www.example.com while the server's real DNS name is foo.example.com.
			</p>
              <a id="id2976028" class="indexterm"></a>
              <p>
				Enter the email address of the person who maintains the Web server in the <span><strong class="guilabel">Webmaster email address</strong></span> text area. This option corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#serveradmin"><code class="command">ServerAdmin</code></a> directive in <code class="filename">httpd.conf</code>. If you configure the server's error pages to contain an email address, this email address is used so that users can report a problem to the server's administrator. The default value is root@localhost.
			</p>
              <a id="id2976076" class="indexterm"></a>
              <p>
				Use the <span><strong class="guilabel">Available Addresses</strong></span> area to define the ports on which the server accepts incoming requests. This option corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/mpm_common.html#listen"><code class="command">Listen</code></a> directive in <code class="filename">httpd.conf</code>. By default, Red Hat configures the Apache HTTP Server to listen to port 80 for non-secure Web communications.
			</p>
              <p>
				Click the <span><strong class="guibutton">Add</strong></span> button to define additional ports on which to accept requests. A window as shown in <a href="#httpd-listen" title="Figure 22.2. Available Addresses">Figure 22.2, “Available Addresses”</a> appears. Either choose the <span><strong class="guilabel">Listen to all addresses</strong></span> option to listen to all IP addresses on the defined port or specify a particular IP address over which the server accepts connections in the <span><strong class="guilabel">Address</strong></span> field. Only specify one IP address per port number. To specify more than one IP address with the same port number, create an entry for each IP address. If at all possible, use an IP address instead of a domain name to prevent a DNS lookup failure. Refer to <a href="http://httpd.apache.org/docs/2.2/dns-caveats.html">http://httpd.apache.org/docs/2.2/dns-caveats.html</a> for more information about <em class="citetitle">Issues Regarding DNS and Apache</em>.
			</p>
              <p>
				Entering an asterisk (*) in the <span><strong class="guilabel">Address</strong></span> field is the same as choosing <span><strong class="guilabel">Listen to all addresses</strong></span>. Clicking the <span><strong class="guibutton">Edit</strong></span> button in the <span><strong class="guilabel">Available Addresses</strong></span> frame shows the same window as the <span><strong class="guibutton">Add</strong></span> button except with the fields populated for the selected entry. To delete an entry, select it and click the <span><strong class="guibutton">Delete</strong></span> button.
			</p>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					If you set the server to listen to a port under 1024, you must be root to start it. For port 1024 and above, <code class="command">httpd</code> can be started as a regular user.
				</p>
              </div>
              <div class="figure">
                <a id="httpd-listen"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/httpd-listen.png" alt="Available Addresses" />
                    <div class="longdesc">
                      <p>
							Available Addresses
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 22.2. Available Addresses</h6>
              </div>
              <br class="figure-break" />
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-httpd-default-settings"></a>22.4.2. Default Settings</h3>
                  </div>
                </div>
              </div>
              <p>
				After defining the <span><strong class="guilabel">Server Name</strong></span>, <span><strong class="guilabel">Webmaster email address</strong></span>, and <span><strong class="guilabel">Available Addresses</strong></span>, click the <span><strong class="guilabel">Virtual Hosts</strong></span> tab. The figure below illustrates the <span><strong class="guilabel">Virtual Hosts</strong></span> tab.
			</p>
              <div class="figure">
                <a id="httpd-virtual-hosts"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/httpd-virtualhosts.png" alt="Virtual Hosts Tab" />
                    <div class="longdesc">
                      <p>
							Virtual Hosts Tab
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 22.3. Virtual Hosts Tab</h6>
              </div>
              <br class="figure-break" />
              <p>
				Clicking on <span><strong class="guilabel">Edit</strong></span> will display the <span><strong class="guilabel">Virtual Host Properties</strong></span> window from which you can set your preferred settings. To add new settings, click on the <span><strong class="guilabel">Add</strong></span> button which will also display the <span><strong class="guilabel">Virtual Host Properties</strong></span> window. Clicking on the <span><strong class="guilabel">Edit Default Settings</strong></span> button, displays the <span><strong class="guilabel">Virtual Host Properties</strong></span> window without the <span><strong class="guilabel">General Options</strong></span> tab.
			</p>
              <p>
				In the <span><strong class="guilabel">General Options</strong></span> tab, you can change the hostname, the document root directory and also set the webmaster's email address. In the Host information, you can set the Virtual Host's IP Address and Host Name. The figure below illustrates the <span><strong class="guilabel">General Options</strong></span> tab.
			</p>
              <div class="figure">
                <a id="httpd-general-options"></a>
                <div class="figure-contents">
                  <div class="mediaobject">
                    <img src="images/httpd-general-options.png" alt="General Options" />
                    <div class="longdesc">
                      <p>
							General Options
						</p>
                    </div>
                  </div>
                </div>
                <h6>Figure 22.4. General Options</h6>
              </div>
              <br class="figure-break" />
              <p>
				If you add a virtual host, the settings you configure for the virtual host take precedence for that virtual host. For a directive not defined within the virtual host settings, the default value is used.
			</p>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-httpd-site-config"></a>22.4.2.1. Site Configuration</h4>
                    </div>
                  </div>
                </div>
                <p>
					The figure below illustrates the <span><strong class="guibutton">Page Options</strong></span>tab from which you can configure the <span><strong class="guilabel">Directory Page Search List</strong></span> and <span><strong class="guilabel">Error Pages</strong></span>. If you are unsure of these settings, do not modify them.
				</p>
                <div class="figure">
                  <a id="httpd-site-config-screen"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/httpd-siteconfig.png" alt="Site Configuration" />
                      <div class="longdesc">
                        <p>
								Site Configuration
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 22.5. Site Configuration</h6>
                </div>
                <br class="figure-break" />
                <a id="id2892935" class="indexterm"></a>
                <p>
					The entries listed in the <span><strong class="guilabel">Directory Page Search List</strong></span> define the <a href="http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryindex"><code class="command">DirectoryIndex</code></a> directive. The <code class="command">DirectoryIndex</code> is the default page served by the server when a user requests an index of a directory by specifying a forward slash (/) at the end of the directory name.
				</p>
                <p>
					For example, when a user requests the page <code class="command">http://www.example.com/this_directory/</code>, they are going to get either the <code class="command">DirectoryIndex</code> page, if it exists, or a server-generated directory list. The server tries to find one of the files listed in the <code class="command">DirectoryIndex</code> directive and returns the first one it finds. 
					<a id="id2893006" class="indexterm"></a>
					 If it does not find any of these files and if <code class="command">Options Indexes</code> is set for that directory, the server generates and returns a list, in HTML format, of the subdirectories and files in the directory.
				</p>
                <a id="id2893033" class="indexterm"></a>
                <p>
					Use the <span><strong class="guilabel">Error Code</strong></span> section to configure Apache HTTP Server to redirect the client to a local or external URL in the event of a problem or error. This option corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#errordocument"><code class="command">ErrorDocument</code></a> directive. If a problem or error occurs when a client tries to connect to the Apache HTTP Server, the default action is to display the short error message shown in the <span><strong class="guilabel">Error Code</strong></span> column. To override this default configuration, select the error code and click the <span><strong class="guilabel">Edit</strong></span> button. Choose <span><strong class="guimenuitem">Default</strong></span> to display the default short error message. Choose <span><strong class="guimenuitem">URL</strong></span> to redirect the client to an external URL and enter a complete URL, including the <code class="command">http://</code>, in the <span><strong class="guilabel">Location</strong></span> field. Choose <span><strong class="guimenuitem">File</strong></span> to redirect the client to an internal URL and enter a file location under the document root for the Web server. The location must begin the a slash (/) and be relative to the Document Root.
				</p>
                <p>
					For example, to redirect a 404 Not Found error code to a webpage that you created in a file called <code class="filename">404.html</code>, copy <code class="filename">404.html</code> to <code class="filename"><em class="replaceable"><code>DocumentRoot</code></em>/../error/404.html</code>. In this case, <em class="replaceable"><code>DocumentRoot</code></em> is the Document Root directory that you have defined (the default is <code class="filename">/var/www/html/</code>). If the Document Root is left as the default location, the file should be copied to <code class="filename">/var/www/error/404.html</code>. Then, choose <span><strong class="guimenuitem">File</strong></span> as the Behavior for <span><strong class="guilabel">404 - Not Found</strong></span> error code and enter <code class="filename">/error/404.html</code> as the <span><strong class="guimenuitem">Location</strong></span>.
				</p>
                <p>
					From the <span><strong class="guilabel">Default Error Page Footer</strong></span> menu, you can choose one of the following options:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guilabel">Show footer with email address</strong></span> — Display the default footer at the bottom of all error pages along with the email address of the website maintainer specified by the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#serveradmin"><code class="command">ServerAdmin</code></a> directive.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Show footer</strong></span> — Display just the default footer at the bottom of error pages.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">No footer</strong></span> — Do not display a footer at the bottom of error pages.
						</p>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-httpd-ssl-variables"></a>22.4.2.2. SSL Support</h4>
                    </div>
                  </div>
                </div>
                <p>
					The <code class="command">mod_ssl</code> enables encryption of the HTTP protocol over SSL. SSL (Secure Sockets Layer) protocol is used for communication and encryption over TCP/IP networks. The SSL tab enables you to configure SSL for your server. To configure SSL you need to provide the path to your:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Certificate file - equivalent to using the <code class="command">SSLCertificateFile</code> directive which points the path to the PEM (Privacy Enhanced Mail)-encoded server certificate file.
						</p>
                    </li>
                    <li>
                      <p>
							Key file - equivalent to using the <code class="command">SSLCertificateKeyFile</code> directive which points the path to the PEM-encoded server private key file.
						</p>
                    </li>
                    <li>
                      <p>
							Certificate chain file - equivalent to using the <code class="command">SSLCertificateChainFile</code> directive which points the path to the certificate file containing all the server's chain of certificates.
						</p>
                    </li>
                    <li>
                      <p>
							Certificate authority file - is an encrypted file used to confirm the authenticity or identity of parties communicating with the server.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					You can find out more about configuration directives for SSL on <a href="http://httpd.apache.org/docs/2.2/mod/directives.html#S"> http://httpd.apache.org/docs/2.2/mod/directives.html#S</a>. You also need to determine which SSL options to enable. These are equivalent to using the <code class="command">SSLOptions</code> with the following options:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							FakeBasicAuth - enables standard authentication methods used by Apache. This means that the Client X509 certificate's Subject Distinguished Name (DN) is translated into a basic HTTP username.
						</p>
                    </li>
                    <li>
                      <p>
							ExportCertData - creates CGI environment variables in <code class="command">SSL_SERVER_CERT</code>, <code class="command">SSL_CLIENT_CERT</code> and <code class="command">SSL_CLIENT_CERT_CHAIN_n</code> where n is a number 0,1,2,3,4... These files are used for more certificate checks by CGI scripts.
						</p>
                    </li>
                    <li>
                      <p>
							CompatEnvVars - enables backward compatibility for Apache SSL by adding CGI environment variables.
						</p>
                    </li>
                    <li>
                      <p>
							StrictRequire - enables strict access which forces denial of access whenever the <code class="command">SSLRequireSSL</code> and <code class="command">SSLRequire</code> directives indicate access is forbiden.
						</p>
                    </li>
                    <li>
                      <p>
							OptRenegotiate - enables avoidance of unnecessary handshakes by <code class="command">mod_ssl</code> which also performs safe parameter checks. It is recommended to enable OptRenegotiate on a per directory basis.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					More information on the above SSL options can be found on <a href="http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#ssloptions"> http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#ssloptions</a>. The figure below illustrates the SSL tab and the options discussed above.
				</p>
                <div class="figure">
                  <a id="httpd-virtualhosts-ssl"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/httpd-virtualhosts-ssl.png" alt="SSL" />
                      <div class="longdesc">
                        <p>
								SSL
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 22.6. SSL</h6>
                </div>
                <br class="figure-break" />
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-httpd-logging"></a>22.4.2.3. Logging</h4>
                    </div>
                  </div>
                </div>
                <a id="id3030370" class="indexterm"></a>
                <a id="id3030387" class="indexterm"></a>
                <p>
					Use the <span><strong class="guilabel">Logging</strong></span> tab to configure options for specific transfer and error logs.
				</p>
                <p>
					By default, the server writes the transfer log to the <code class="filename">/var/log/httpd/access_log</code> file and the error log to the <code class="filename">/var/log/httpd/error_log</code> file.
				</p>
                <p>
					The transfer log contains a list of all attempts to access the Web server. It records the IP address of the client that is attempting to connect, the date and time of the attempt, and the file on the Web server that it is trying to retrieve. Enter the name of the path and file in which to store this information. If the path and file name do not start with a slash (/), the path is relative to the server root directory as configured. This option corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#transferlog"><code class="command">TransferLog</code></a> directive.
				</p>
                <div class="figure">
                  <a id="httpd-logging-screen"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/httpd-logging.png" alt="Logging" />
                      <div class="longdesc">
                        <p>
								Logging
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 22.7. Logging</h6>
                </div>
                <br class="figure-break" />
                <a id="id3030486" class="indexterm"></a>
                <a id="id3030503" class="indexterm"></a>
                <p>
					You can configure a custom log format by checking <span><strong class="guilabel">Use custom logging facilities</strong></span> and entering a custom log string in the <span><strong class="guilabel">Custom Log String</strong></span> field. This configures the <a href="http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#logformat"><code class="command">LogFormat</code></a> directive. Refer to <a href="http://httpd.apache.org/docs-2.0/mod/mod_log_config.html#formats"> http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#logformat</a> for details on the format of this directive.
				</p>
                <a id="id3030556" class="indexterm"></a>
                <p>
					The error log contains a list of any server errors that occur. Enter the name of the path and file in which to store this information. If the path and file name do not start with a slash (/), the path is relative to the server root directory as configured. This option corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#errorlog"><code class="command">ErrorLog</code></a> directive.
				</p>
                <a id="id3030592" class="indexterm"></a>
                <p>
					Use the <span><strong class="guilabel">Log Level</strong></span> menu to set the verbosity of the error messages in the error logs. It can be set (from least verbose to most verbose) to emerg, alert, crit, error, warn, notice, info or debug. This option corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#loglevel"><code class="command">LogLevel</code></a> directive.
				</p>
                <a id="id3030632" class="indexterm"></a>
                <p>
					The value chosen with the <span><strong class="guilabel">Reverse DNS Lookup</strong></span> menu defines the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#hostnamelookups"><code class="command">HostnameLookups</code></a> directive. Choosing <span><strong class="guilabel">No Reverse Lookup</strong></span> sets the value to off. Choosing <span><strong class="guilabel">Reverse Lookup</strong></span> sets the value to on. Choosing <span><strong class="guilabel">Double Reverse Lookup</strong></span> sets the value to double.
				</p>
                <p>
					If you choose <span><strong class="guilabel">Reverse Lookup</strong></span>, your server automatically resolves the IP address for each connection which requests a document from your Web server. Resolving the IP address means that your server makes one or more connections to the DNS in order to find out the hostname that corresponds to a particular IP address.
				</p>
                <p>
					If you choose <span><strong class="guilabel">Double Reverse Lookup</strong></span>, your server performs a double-reverse DNS. In other words, after a reverse lookup is performed, a forward lookup is performed on the result. At least one of the IP addresses in the forward lookup must match the address from the first reverse lookup.
				</p>
                <p>
					Generally, you should leave this option set to <span><strong class="guilabel">No Reverse Lookup</strong></span>, because the DNS requests add a load to your server and may slow it down. If your server is busy, the effects of trying to perform these reverse lookups or double reverse lookups may be quite noticeable.
				</p>
                <p>
					Reverse lookups and double reverse lookups are also an issue for the Internet as a whole. Each individual connection made to look up each hostname adds up. Therefore, for your own Web server's benefit, as well as for the Internet's benefit, you should leave this option set to <span><strong class="guilabel">No Reverse Lookup</strong></span>.
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-httpd-environment-variables"></a>22.4.2.4. Environment Variables</h4>
                    </div>
                  </div>
                </div>
                <p>
					Use the <span><strong class="guilabel">Environment</strong></span> tab to configure options for specific variables to set, pass, or unset for CGI scripts.
				</p>
                <p>
					Sometimes it is necessary to modify environment variables for CGI scripts or server-side include (SSI) pages. The Apache HTTP Server can use the <code class="command">mod_env</code> module to configure the environment variables which are passed to CGI scripts and SSI pages. Use the <span><strong class="guilabel">Environment Variables</strong></span> page to configure the directives for this module.
				</p>
                <p>
					Use the <span><strong class="guilabel">Set for CGI Scripts</strong></span> section to set an environment variable that is passed to CGI scripts and SSI pages. For example, to set the environment variable <code class="filename">MAXNUM</code> to <code class="filename">50</code>, click the <span><strong class="guibutton">Add</strong></span> button inside the <span><strong class="guilabel">Set for CGI Script</strong></span> section, as shown in <a href="#httpd-environment-variables-screen" title="Figure 22.8. Environment Variables">Figure 22.8, “Environment Variables”</a>, and type <strong class="userinput"><code>MAXNUM</code></strong> in the <span><strong class="guilabel">Environment Variable</strong></span> text field and <strong class="userinput"><code>50</code></strong> in the <span><strong class="guilabel">Value to set</strong></span> text field. Click <span><strong class="guibutton">OK</strong></span> to add it to the list. The <span><strong class="guilabel">Set for CGI Scripts</strong></span> section configures the <a href="http://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv"><code class="command">SetEnv</code></a> directive.
				</p>
                <p>
					Use the <span><strong class="guilabel">Pass to CGI Scripts</strong></span> section to pass the value of an environment variable when the server is first started to CGI scripts. To see this environment variable, type the command <code class="command">env</code> at a shell prompt. Click the <span><strong class="guibutton">Add</strong></span> button inside the <span><strong class="guilabel">Pass to CGI Scripts</strong></span> section and enter the name of the environment variable in the resulting dialog box. Click <span><strong class="guibutton">OK</strong></span> to add it to the list. The <span><strong class="guilabel">Pass to CGI Scripts</strong></span> section configures the <a href="http://httpd.apache.org/docs/2.2/mod/mod_env.html#passenv"><code class="command">PassEnv</code></a> directive.
				</p>
                <div class="figure">
                  <a id="httpd-environment-variables-screen"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/httpd-environment.png" alt="Environment Variables" />
                      <div class="longdesc">
                        <p>
								Environment Variables
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 22.8. Environment Variables</h6>
                </div>
                <br class="figure-break" />
                <p>
					To remove an environment variable so that the value is not passed to CGI scripts and SSI pages, use the <span><strong class="guilabel">Unset for CGI Scripts</strong></span> section. Click <span><strong class="guibutton">Add</strong></span> in the <span><strong class="guilabel">Unset for CGI Scripts</strong></span> section, and enter the name of the environment variable to unset. Click <span><strong class="guibutton">OK</strong></span> to add it to the list. This corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/mod_env.html#unsetenv"><code class="command">UnsetEnv</code></a> directive.
				</p>
                <p>
					To edit any of these environment values, select it from the list and click the corresponding <span><strong class="guibutton">Edit</strong></span> button. To delete any entry from the list, select it and click the corresponding <span><strong class="guibutton">Delete</strong></span> button.
				</p>
                <p>
					To learn more about environment variables in the Apache HTTP Server, refer to the following: <a href="http://httpd.apache.org/docs/2.2/env.html">http://httpd.apache.org/docs/2.2/env.html</a>
				</p>
              </div>
              <div class="section" lang="en-US" xml:lang="en-US">
                <div class="titlepage">
                  <div>
                    <div>
                      <h4 class="title"><a id="s3-httpd-directories"></a>22.4.2.5. Directories</h4>
                    </div>
                  </div>
                </div>
                <p>
					Use the <span><strong class="guilabel">Directories</strong></span> page in the <span><strong class="guilabel">Performance</strong></span> tab to configure options for specific directories. This corresponds to the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#directory"><code class="command">&lt;Directory&gt;</code></a> directive.
				</p>
                <div class="figure">
                  <a id="httpd-directories-screen"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/httpd-directories.png" alt="Directories" />
                      <div class="longdesc">
                        <p>
								Directories
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 22.9. Directories</h6>
                </div>
                <br class="figure-break" />
                <p>
					Click the <span><strong class="guibutton">Edit</strong></span> button in the top right-hand corner to configure the <span><strong class="guilabel">Default Directory Options</strong></span> for all directories that are not specified in the <span><strong class="guilabel">Directory</strong></span> list below it. The options that you choose are listed as the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#options"><code class="command">Options</code></a> directive within the <a href="http://httpd.apache.org/docs/2.2/mod/core.html#directory"><code class="command">&lt;Directory&gt;</code></a> directive. You can configure the following options:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							<span><strong class="guilabel">ExecCGI</strong></span> — Allow execution of CGI scripts. CGI scripts are not executed if this option is not chosen.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">FollowSymLinks</strong></span> — Allow symbolic links to be followed.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Includes</strong></span> — Allow server-side includes.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">IncludesNOEXEC</strong></span> — Allow server-side includes, but disable the <code class="command">#exec</code> and <code class="command">#include</code> commands in CGI scripts.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Indexes</strong></span> — Display a formatted list of the directory's contents, if no <code class="command">DirectoryIndex</code> (such as <code class="filename">index.html</code>) exists in the requested directory.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">Multiview</strong></span> — Support content-negotiated multiviews; this option is disabled by default.
						</p>
                    </li>
                    <li>
                      <p>
							<span><strong class="guilabel">SymLinksIfOwnerMatch</strong></span> — Only follow symbolic links if the target file or directory has the same owner as the link.
						</p>
                    </li>
                  </ul>
                </div>
                <p>
					To specify options for specific directories, click the <span><strong class="guibutton">Add</strong></span> button beside the <span><strong class="guilabel">Directory</strong></span> list box. A window as shown in <a href="#httpd-directories-add" title="Figure 22.10. Directory Settings">Figure 22.10, “Directory Settings”</a> appears. Enter the directory to configure in the <span><strong class="guilabel">Directory</strong></span> text field at the bottom of the window. Select the options in the right-hand list and configure the <a href="http://httpd.apache.org/docs-2.0/mod/mod_access.html#order"><code class="command">Order</code></a> directive with the left-hand side options. The <code class="command">Order</code> directive controls the order in which allow and deny directives are evaluated. In the <span><strong class="guilabel">Allow hosts from</strong></span> and <span><strong class="guilabel">Deny hosts from</strong></span> text field, you can specify one of the following:
				</p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
							Allow all hosts — Type <strong class="userinput"><code>all</code></strong> to allow access to all hosts.
						</p>
                    </li>
                    <li>
                      <p>
							Partial domain name — Allow all hosts whose names match or end with the specified string.
						</p>
                    </li>
                    <li>
                      <p>
							Full IP address — Allow access to a specific IP address.
						</p>
                    </li>
                    <li>
                      <p>
							A subnet — Such as <strong class="userinput"><code>192.168.1.0/255.255.255.0</code></strong>
						</p>
                    </li>
                    <li>
                      <p>
							A network CIDR specification — such as <strong class="userinput"><code>10.3.0.0/16</code></strong>
						</p>
                    </li>
                  </ul>
                </div>
                <div class="figure">
                  <a id="httpd-directories-add"></a>
                  <div class="figure-contents">
                    <div class="mediaobject">
                      <img src="images/httpd-directories-add.png" alt="Directory Settings" />
                      <div class="longdesc">
                        <p>
								Directory Settings
							</p>
                      </div>
                    </div>
                  </div>
                  <h6>Figure 22.10. Directory Settings</h6>
                </div>
                <br class="figure-break" />
                <p>
					If you check the <span><strong class="guilabel">Let .htaccess files override directory options</strong></span>, the configuration directives in the <code class="filename">.htaccess</code> file take precedence.
				</p>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-apache-config"></a>22.5. Configuration Directives in <code class="filename">httpd.conf</code></h2>
                </div>
              </div>
            </div>
            <a id="id3023529" class="indexterm"></a>
            <a id="id3023542" class="indexterm"></a>
            <a id="id3023556" class="indexterm"></a>
            <a id="id3023569" class="indexterm"></a>
            <a id="id3030976" class="indexterm"></a>
            <p>
			The Apache HTTP Server configuration file is <code class="filename">/etc/httpd/conf/httpd.conf</code>. The <code class="filename">httpd.conf</code> file is well-commented and mostly self-explanatory. The default configuration works for most situations; however, it is a good idea to become familiar some of the more important configuration options.
		</p>
            <div class="warning">
              <h2>Warning</h2>
              <p>
				With the release of Apache HTTP Server 2.2, many configuration options have changed. If migrating from version 1.3 to 2.2, please firstly read <a href="#s3-httpd-v2-mig" title="22.2.2. Migrating Apache HTTP Server 1.3 Configuration Files to 2.0">Section 22.2.2, “Migrating Apache HTTP Server 1.3 Configuration Files to 2.0”</a>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-apache-tips"></a>22.5.1. General Configuration Tips</h3>
                  </div>
                </div>
              </div>
              <p>
				If configuring the Apache HTTP Server, edit <code class="filename">/etc/httpd/conf/httpd.conf</code> and then either reload, restart, or stop and start the <code class="command">httpd</code> process as outlined in <a href="#s1-apache-startstop" title="22.3. Starting and Stopping httpd">Section 22.3, “Starting and Stopping <code class="command">httpd</code>”</a>.
			</p>
              <p>
				Before editing <code class="filename">httpd.conf</code>, make a copy the original file. Creating a backup makes it easier to recover from mistakes made while editing the configuration file.
			</p>
              <p>
				If a mistake is made and the Web server does not work correctly, first review recently edited passages in <code class="filename">httpd.conf</code> to verify there are no typos.
			</p>
              <p>
				Next look in the Web server's error log, <code class="filename">/var/log/httpd/error_log</code>. The error log may not be easy to interpret, depending on your level of expertise. However, the last entries in the error log should provide useful information.
			</p>
              <p>
				The following subsections contain a list of short descriptions for many of the directives included in <code class="filename">httpd.conf</code>. These descriptions are not exhaustive. For more information, refer to the Apache documentation online at <a href="http://httpd.apache.org/docs/2.2/">http://httpd.apache.org/docs/2.2/</a>.
			</p>
              <p>
				For more information about <code class="filename">mod_ssl</code> directives, refer to the documentation online at <a href="http://httpd.apache.org/docs/2.2/mod/mod_ssl.html">http://httpd.apache.org/docs/2.2/mod/mod_ssl.html</a>.
			</p>
              <a id="id3031135" class="indexterm"></a>
              <a id="id3031152" class="indexterm"></a>
              <p class="formalpara">
                <a id="s2-apache-accessfilename"></a>
              </p>
              <h5 class="formalpara">AccessFileName</h5>
              <p class="formalpara"><a id="id3031171" class="indexterm"></a><a id="id3031188" class="indexterm"></a>
					<code class="command">AccessFileName</code> names the file which the server should use for access control information in each directory. The default is <code class="filename">.htaccess</code>.
				</p>
              <p>
				Immediately after the <code class="command">AccessFileName</code> directive, a set of <code class="command">Files</code> tags apply access control to any file beginning with a <code class="filename">.ht</code>. These directives deny Web access to any <code class="filename">.htaccess</code> files (or other files which begin with <code class="filename">.ht</code>) for security reasons.
			</p>
              <p class="formalpara">
                <a id="s2-apache-action"></a>
              </p>
              <h5 class="formalpara">Action</h5>
              <p class="formalpara"><a id="id3031269" class="indexterm"></a><a id="id3031286" class="indexterm"></a>
					<code class="command">Action</code> specifies a MIME content type and CGI script pair, so that when a file of that media type is requested, a particular CGI script is executed.
				</p>
              <p class="formalpara">
                <a id="s2-apache-adddescription"></a>
              </p>
              <h5 class="formalpara">AddDescription</h5>
              <p class="formalpara"><a id="id3031324" class="indexterm"></a><a id="id3031342" class="indexterm"></a>
					When using <code class="command">FancyIndexing</code> as an <code class="command">IndexOptions</code> parameter, the <code class="command">AddDescription</code> directive can be used to display user-specified descriptions for certain files or file types in a server generated directory listing. The <code class="command">AddDescription</code> directive supports listing specific files, wildcard expressions, or file extensions.
				</p>
              <p class="formalpara">
                <a id="s2-apache-addencoding"></a>
              </p>
              <h5 class="formalpara">AddEncoding</h5>
              <p class="formalpara"><a id="id3031400" class="indexterm"></a><a id="id3031418" class="indexterm"></a>
					<code class="command">AddEncoding</code> names file name extensions which should specify a particular encoding type. <code class="command">AddEncoding</code> can also be used to instruct some browsers to uncompress certain files as they are downloaded.
				</p>
              <p class="formalpara">
                <a id="s2-apache-addhandler"></a>
              </p>
              <h5 class="formalpara">AddHandler</h5>
              <p class="formalpara"><a id="id3031463" class="indexterm"></a><a id="id3031480" class="indexterm"></a><a id="id3031497" class="indexterm"></a>
					<code class="command">AddHandler</code> maps file extensions to specific handlers. For example, the <code class="command">cgi-script</code> handler can be matched with the extension <code class="filename">.cgi</code> to automatically treat a file ending with <code class="filename">.cgi</code> as a CGI script. The following is a sample <code class="command">AddHandler</code> directive for the <code class="filename">.cgi</code> extension.
				</p>
              <pre class="screen"><code class="command">AddHandler cgi-script .cgi</code>
</pre>
              <p>
				This directive enables CGIs outside of the <code class="filename">cgi-bin</code> to function in any directory on the server which has the <code class="command">ExecCGI</code> option within the directories container. Refer to <a href="#s2-apache-directory" title="Directory">Directory</a> for more information about setting the <code class="command">ExecCGI</code> option for a directory.
			</p>
              <p>
				In addition to CGI scripts, the <code class="command">AddHandler</code> directive is used to process server-parsed HTML and image-map files.
			</p>
              <p class="formalpara">
                <a id="s2-apache-addicon"></a>
              </p>
              <h5 class="formalpara">AddIcon</h5>
              <p class="formalpara"><a id="id3031620" class="indexterm"></a><a id="id3031638" class="indexterm"></a>
					<code class="command">AddIcon</code> specifies which icon to show in server generated directory listings for files with certain extensions. For example, the Web server is set to show the icon <code class="filename">binary.gif</code> for files with <code class="filename">.bin</code> or <code class="filename">.exe</code> extensions.
				</p>
              <p class="formalpara">
                <a id="s2-apache-addiconbyencoding"></a>
              </p>
              <h5 class="formalpara">AddIconByEncoding</h5>
              <p class="formalpara"><a id="id3031694" class="indexterm"></a><a id="id3026548" class="indexterm"></a>
					This directive names icons which are displayed by files with MIME encoding in server generated directory listings. For example, by default, the Web server shows the <code class="filename">compressed.gif</code> icon next to MIME encoded x-compress and x-gzip files in server generated directory listings.
				</p>
              <p class="formalpara">
                <a id="s2-apache-addiconbytype"></a>
              </p>
              <h5 class="formalpara">AddIconByType</h5>
              <p class="formalpara"><a id="id3026589" class="indexterm"></a><a id="id3026607" class="indexterm"></a>
					This directive names icons which are displayed next to files with MIME types in server generated directory listings. For example, the server shows the icon <code class="filename">text.gif</code> next to files with a mime-type of <code class="computeroutput">text</code>, in server generated directory listings.
				</p>
              <p class="formalpara">
                <a id="s2-apache-addlanguage"></a>
              </p>
              <h5 class="formalpara">AddLanguage</h5>
              <p class="formalpara"><a id="id3026653" class="indexterm"></a><a id="id3026670" class="indexterm"></a>
					<code class="command">AddLanguage</code> associates file name extensions with specific languages. This directive is useful for Apache HTTP Servers which serve content in multiple languages based on the client Web browser's language settings.
				</p>
              <p class="formalpara">
                <a id="s2-apache-addtype"></a>
              </p>
              <h5 class="formalpara">AddType</h5>
              <p class="formalpara"><a id="id3026711" class="indexterm"></a><a id="id3026728" class="indexterm"></a><a id="id3026745" class="indexterm"></a><a id="id3026755" class="indexterm"></a>
					Use the <code class="command">AddType</code> directive to define or override a default MIME type and file extension pairs. The following example directive tells the Apache HTTP Server to recognize the <code class="command">.tgz</code> file extension:
				</p>
              <pre class="screen"><code class="command">AddType application/x-tar .tgz</code>
</pre>
              <p class="formalpara">
                <a id="s2-apache-alias"></a>
              </p>
              <h5 class="formalpara">Alias</h5>
              <p class="formalpara"><a id="id3026808" class="indexterm"></a><a id="id3026825" class="indexterm"></a>
					The <code class="command">Alias</code> setting allows directories outside the <code class="command">DocumentRoot</code> directory to be accessible. Any URL ending in the alias automatically resolves to the alias' path. By default, one alias for an <code class="filename">icons/</code> directory is already set up. An <code class="filename">icons/</code> directory can be accessed by the Web server, but the directory is not in the <code class="command"> DocumentRoot</code>.
				</p>
              <p class="formalpara">
                <a id="s2-apache-allow"></a>
              </p>
              <h5 class="formalpara">Allow</h5>
              <p class="formalpara"><a id="id3026891" class="indexterm"></a><a id="id3026908" class="indexterm"></a>
					<code class="command">Allow</code> specifies which client can access a given directory. The client can be <code class="command">all</code>, a domain name, an IP address, a partial IP address, a network/netmask pair, and so on. The <code class="command">DocumentRoot</code> directory is configured to <code class="command">Allow</code> requests from <code class="command">all</code>, meaning everyone has access.
				</p>
              <p class="formalpara">
                <a id="s2-apache-allowoverride"></a>
              </p>
              <h5 class="formalpara">AllowOverride</h5>
              <p class="formalpara"><a id="id3026972" class="indexterm"></a><a id="id3026989" class="indexterm"></a>
					The <code class="command">AllowOverride</code> directive sets whether any <code class="command">Options</code> can be overridden by the declarations in an <code class="filename">.htaccess</code> file. By default, both the root directory and the <code class="command">DocumentRoot</code> are set to allow no <code class="filename">.htaccess</code> overrides.
				</p>
              <p class="formalpara">
                <a id="s2-apache-browsermatch"></a>
              </p>
              <h5 class="formalpara">BrowserMatch</h5>
              <p class="formalpara"><a id="id3027051" class="indexterm"></a><a id="id3027069" class="indexterm"></a>
					The <code class="command">BrowserMatch</code> directive allows the server to define environment variables and take appropriate actions based on the User-Agent HTTP header field — which identifies the client's Web browser type. By default, the Web server uses <code class="command">BrowserMatch</code> to deny connections to specific browsers with known problems and also to disable keepalives and HTTP header flushes for browsers that are known to have problems with those actions.
				</p>
              <p class="formalpara">
                <a id="s2-apache-cachedirectives"></a>
              </p>
              <h5 class="formalpara">Cache Directives</h5>
              <p class="formalpara"><a id="id3027118" class="indexterm"></a><a id="id3027128" class="indexterm"></a><a id="id3027137" class="indexterm"></a>
					A number of commented cache directives are supplied by the default Apache HTTP Server configuration file. In most cases, uncommenting these lines by removing the hash mark (<code class="command">#</code>) from the beginning of the line is sufficient. The following, however, is a list of some of the more important cache-related directives.
				</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">CacheEnable</code> — Specifies whether the cache is a disk, memory, or file descriptor cache. By default <code class="command">CacheEnable</code> configures a disk cache for URLs at or below <code class="filename">/</code>.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">CacheRoot</code> — Specifies the name of the directory containing cached files. The default <code class="command">CacheRoot</code> is the <code class="filename">/var/httpd/proxy/</code> directory.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">CacheSize</code> — Specifies how much space the cache can use in kilobytes. The default <code class="command">CacheSize</code> is <code class="command">5</code> KB.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				The following is a list of some of the other common cache-related directives.
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<code class="command">CacheMaxExpire</code> — Specifies how long HTML documents are retained (without a reload from the originating Web server) in the cache. The default is <code class="command">24</code> hours (<code class="command">86400</code> seconds).
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">CacheLastModifiedFactor</code> — Specifies the creation of an expiry (expiration) date for a document which did not come from its originating server with its own expiry set. The default <code class="command">CacheLastModifiedFactor</code> is set to <code class="command">0.1</code>, meaning that the expiry date for such documents equals one-tenth of the amount of time since the document was last modified.
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">CacheDefaultExpire</code> — Specifies the expiry time in hours for a document that was received using a protocol that does not support expiry times. The default is set to <code class="command">1</code> hour (<code class="command">3600</code> seconds).
					</p>
                  </li>
                  <li>
                    <p>
						<code class="command">NoProxy</code> — Specifies a space-separated list of subnets, IP addresses, domains, or hosts whose content is not cached. This setting is most useful for Intranet sites.
					</p>
                  </li>
                </ul>
              </div>
              <p class="formalpara">
                <a id="s2-apache-cachenegotiateddocs"></a>
              </p>
              <h5 class="formalpara">CacheNegotiatedDocs</h5>
              <p class="formalpara"><a id="id2894635" class="indexterm"></a><a id="id2894651" class="indexterm"></a>
					By default, the Web server asks proxy servers not to cache any documents which were negotiated on the basis of content (that is, they may change over time or because of the input from the requester). If <code class="command">CacheNegotiatedDocs</code> is set to <code class="option">on</code>, this function is disabled and proxy servers are allowed to cache such documents.
				</p>
              <p class="formalpara">
                <a id="s2-apache-customlog"></a>
              </p>
              <h5 class="formalpara">CustomLog</h5>
              <p class="formalpara"><a id="id2894698" class="indexterm"></a><a id="id2894715" class="indexterm"></a><a id="id2894732" class="indexterm"></a>
					<code class="command">CustomLog</code> identifies the log file and the log file format. By default, the access log is recorded to the <code class="filename">/var/log/httpd/access_log</code> file while errors are recorded in the <code class="filename">/var/log/httpd/error_log</code> file.
				</p>
              <p>
				The default <code class="command">CustomLog</code> format is the <code class="option">combined</code> log file format, as illustrated here:
			</p>
              <pre class="screen"><code class="command"><em class="replaceable"><code>remotehost rfc931 user date "request" status bytes referrer user-agent</code></em></code>
</pre>
              <p class="formalpara">
                <a id="s2-apache-defaulticon"></a>
              </p>
              <h5 class="formalpara">DefaultIcon</h5>
              <p class="formalpara"><a id="id2894809" class="indexterm"></a><a id="id2894826" class="indexterm"></a>
					<code class="command">DefaultIcon</code> specifies the icon displayed in server generated directory listings for files which have no other icon specified. The <code class="filename">unknown.gif</code> image file is the default.
				</p>
              <p class="formalpara">
                <a id="s2-apache-defaulttype"></a>
              </p>
              <h5 class="formalpara">DefaultType</h5>
              <p class="formalpara"><a id="id2894870" class="indexterm"></a><a id="id2894888" class="indexterm"></a>
					<code class="command">DefaultType</code> sets a default content type for the Web server to use for documents whose MIME types cannot be determined. The default is <code class="command"> text/plain</code>.
				</p>
              <p class="formalpara">
                <a id="s2-apache-deny"></a>
              </p>
              <h5 class="formalpara">Deny</h5>
              <p class="formalpara"><a id="id2894933" class="indexterm"></a><a id="id2894950" class="indexterm"></a>
					<code class="command">Deny</code> works similar to <code class="command">Allow</code>, except it specifies who is denied access. The <code class="command">DocumentRoot</code> is not configured to <code class="command">Deny</code> requests from anyone by default.
				</p>
              <p class="formalpara">
                <a id="s2-apache-directory"></a>
              </p>
              <h5 class="formalpara">Directory</h5>
              <p class="formalpara"><a id="id2895007" class="indexterm"></a><a id="id2895024" class="indexterm"></a>
					<code class="command">&lt;Directory /path/to/directory&gt;</code> and <code class="command">&lt;/Directory&gt;</code> tags create a container used to enclose a group of configuration directives which apply only to a specific directory and its subdirectories. Any directive which is applicable to a directory may be used within <code class="command">Directory</code> tags.
				</p>
              <p>
				By default, very restrictive parameters are applied to the root directory (<code class="filename">/</code>), using the <code class="command">Options</code> (refer to <a href="#s2-apache-options" title="Options">Options</a>) and <code class="command">AllowOverride</code> (refer to <a href="#s2-apache-allowoverride" title="AllowOverride">AllowOverride</a>) directives. Under this configuration, any directory on the system which needs more permissive settings has to be explicitly given those settings.
			</p>
              <p>
				In the default configuration, another <code class="command">Directory</code> container is configured for the <code class="command">DocumentRoot</code> which assigns less rigid parameters to the directory tree so that the Apache HTTP Server can access the files residing there.
			</p>
              <a id="id2895121" class="indexterm"></a>
              <p>
				The <code class="command">Directory</code> container can be also be used to configure additional <code class="filename">cgi-bin</code> directories for server-side applications outside of the directory specified in the <code class="command">ScriptAlias</code> directive (refer to <a href="#s2-apache-scriptalias" title="ScriptAlias">ScriptAlias</a> for more information).
			</p>
              <p>
				To accomplish this, the <code class="command">Directory</code> container must set the <code class="command">ExecCGI</code> option for that directory.
			</p>
              <p>
				For example, if CGI scripts are located in <code class="command">/home/my_cgi_directory</code>, add the following <code class="command">Directory</code> container to the <code class="filename">httpd.conf</code> file:
			</p>
              <pre class="screen"><code class="command">&lt;Directory /home/my_cgi_directory&gt; Options +ExecCGI &lt;/Directory&gt;</code>
</pre>
              <p>
				Next, the <code class="command">AddHandler</code> directive must be uncommented to identify files with the <code class="filename">.cgi</code> extension as CGI scripts. Refer to <a href="#s2-apache-addhandler" title="AddHandler">AddHandler</a> for instructions on setting <code class="command">AddHandler</code>.
			</p>
              <p>
				For this to work, permissions for CGI scripts, and the entire path to the scripts, must be set to 0755.
			</p>
              <p class="formalpara">
                <a id="s2-apache-directoryindex"></a>
              </p>
              <h5 class="formalpara">DirectoryIndex</h5>
              <p class="formalpara"><a id="id2895259" class="indexterm"></a><a id="id2895276" class="indexterm"></a>
					The <code class="command">DirectoryIndex</code> is the default page served by the server when a user requests an index of a directory by specifying a forward slash (/) at the end of the directory name.
				</p>
              <p>
				When a user requests the page http://<em class="replaceable"><code>example</code></em>/<em class="replaceable"><code>this_directory</code></em>/, they get either the <code class="command">DirectoryIndex</code> page, if it exists, or a server-generated directory list. The default for <code class="command">DirectoryIndex</code> is <code class="filename">index.html</code> and the <code class="filename">index.html.var</code> type map. The server tries to find either of these files and returns the first one it finds. If it does not find one of these files and <code class="command">Options Indexes</code> is set for that directory, the server generates and returns a listing, in HTML format, of the subdirectories and files within the directory, unless the directory listing feature is turned off.
			</p>
              <p class="formalpara">
                <a id="s2-apache-documentroot"></a>
              </p>
              <h5 class="formalpara">DocumentRoot</h5>
              <p class="formalpara"><a id="id2895364" class="indexterm"></a><a id="id2895381" class="indexterm"></a>
					<code class="command">DocumentRoot</code> is the directory which contains most of the HTML files which are served in response to requests. The default <code class="command">DocumentRoot</code>, for both the non-secure and secure Web servers, is the <code class="filename">/var/www/html</code> directory. For example, the server might receive a request for the following document:
				</p>
              <pre class="screen"><code class="command">http://example.com/foo.html</code>
</pre>
              <p>
				The server looks for the following file in the default directory:
			</p>
              <pre class="screen"><code class="filename">/var/www/html/foo.html</code>
</pre>
              <p>
				To change the <code class="command">DocumentRoot</code> so that it is not shared by the secure and the non-secure Web servers, refer to <a href="#s1-apache-virtualhosts" title="22.7. Virtual Hosts">Section 22.7, “Virtual Hosts”</a>.
			</p>
              <p class="formalpara">
                <a id="s2-apache-errordocument"></a>
              </p>
              <h5 class="formalpara">ErrorDocument</h5>
              <p class="formalpara"><a id="id2900986" class="indexterm"></a><a id="id2901004" class="indexterm"></a>
					The <code class="command">ErrorDocument</code> directive associates an HTTP response code with a message or a URL to be sent back to the client. By default, the Web server outputs a simple and usually cryptic error message when an error occurs. The <code class="command">ErrorDocument</code> directive forces the Web server to instead output a customized message or page.
				</p>
              <div class="important">
                <h2>Important</h2>
                <p>
					To be valid, the message <span class="emphasis"><em>must</em></span> be enclosed in a pair of double quotes <code class="command">"</code>.
				</p>
              </div>
              <p class="formalpara">
                <a id="s2-apache-errorlog"></a>
              </p>
              <h5 class="formalpara">ErrorLog</h5>
              <p class="formalpara"><a id="id2901074" class="indexterm"></a><a id="id2901091" class="indexterm"></a>
					<code class="command">ErrorLog</code> specifies the file where server errors are logged. By default, this directive is set to <code class="filename">/var/log/httpd/error_log</code>.
				</p>
              <a id="id2901127" class="indexterm"></a>
              <p class="formalpara">
                <a id="s2-apache-extendedstatus"></a>
              </p>
              <h5 class="formalpara">ExtendedStatus</h5>
              <p class="formalpara"><a id="id2901148" class="indexterm"></a><a id="id2901166" class="indexterm"></a>
					The <code class="command">ExtendedStatus</code> directive controls whether Apache generates basic (<code class="command">off</code>) or detailed server status information (<code class="command">on</code>), when the <code class="command">server-status</code> handler is called. The <code class="command">server-status</code> handler is called using <code class="command">Location</code> tags. More information on calling <code class="command">server-status</code> is included in <a href="#s2-apache-location" title="Location">Location</a>.
				</p>
              <p class="formalpara">
                <a id="s2-apache-group"></a>
              </p>
              <h5 class="formalpara">Group</h5>
              <p class="formalpara"><a id="id2901246" class="indexterm"></a><a id="id2901263" class="indexterm"></a>
					Specifies the group name of the Apache HTTP Server processes.
				</p>
              <p>
				This directive has been deprecated for the configuration of virtual hosts.
			</p>
              <p>
				By default, <code class="command">Group</code> is set to <code class="command">apache</code>.
			</p>
              <p class="formalpara">
                <a id="s2-apache-headername"></a>
              </p>
              <h5 class="formalpara">HeaderName</h5>
              <p class="formalpara"><a id="id2901315" class="indexterm"></a><a id="id2901332" class="indexterm"></a>
					<code class="command">HeaderName</code> names the file which, if it exists in the directory, is prepended to the start of server generated directory listings. Like <code class="command">ReadmeName</code>, the server tries to include it as an HTML document if possible or in plain text if not.
				</p>
              <p class="formalpara">
                <a id="s2-apache-hostnamelookups"></a>
              </p>
              <h5 class="formalpara">HostnameLookups</h5>
              <p class="formalpara"><a id="id2901378" class="indexterm"></a><a id="id2901396" class="indexterm"></a><a id="id2901413" class="indexterm"></a>
					<code class="command">HostnameLookups</code> can be set to <code class="option">on</code>, <code class="option">off</code>, or <code class="option">double</code>. If <code class="command">HostnameLookups</code> is set to <code class="option">on</code>, the server automatically resolves the IP address for each connection. Resolving the IP address means that the server makes one or more connections to a DNS server, adding processing overhead. If <code class="command">HostnameLookups</code> is set to <code class="option">double</code>, the server performs a double-reverse DNS look up adding even more processing overhead.
				</p>
              <p>
				To conserve resources on the server, <code class="command">HostnameLookups</code> is set to <code class="option">off</code> by default.
			</p>
              <p>
				If hostnames are required in server log files, consider running one of the many log analyzer tools that perform the DNS lookups more efficiently and in bulk when rotating the Web server log files.
			</p>
              <p class="formalpara">
                <a id="s2-apache-ifdefine"></a>
              </p>
              <h5 class="formalpara">IfDefine</h5>
              <p class="formalpara"><a id="id2901508" class="indexterm"></a><a id="id2901526" class="indexterm"></a>
					The <code class="command">IfDefine</code> tags surround configuration directives that are applied if the "test" stated in the <code class="command">IfDefine</code> tag is true. The directives are ignored if the test is false.
				</p>
              <p>
				The test in the <code class="command">IfDefine</code> tags is a parameter name (for example, <code class="command">HAVE_PERL</code>). If the parameter is defined, meaning that it is provided as an argument to the server's start-up command, then the test is true. In this case, when the Web server is started, the test is true and the directives contained in the <code class="command">IfDefine</code> tags are applied.
			</p>
              <p class="formalpara">
                <a id="s2-apache-ifmodule"></a>
              </p>
              <h5 class="formalpara">IfModule</h5>
              <p class="formalpara"><a id="id2901596" class="indexterm"></a><a id="id2901614" class="indexterm"></a>
					<code class="command">&lt;IfModule&gt;</code> and <code class="command">&lt;/IfModule&gt;</code> tags create a conditional container which are only activated if the specified module is loaded. Directives within the <code class="command">IfModule</code> container are processed under one of two conditions. The directives are processed if the module contained within the starting <code class="command">&lt;IfModule&gt;</code> tag is loaded. Or, if an exclamation point <span><strong class="keycap">!</strong></span> appears before the module name, the directives are processed only if the module specified in the <code class="command">&lt;IfModule&gt;</code> tag is <span class="emphasis"><em>not</em></span> loaded.
				</p>
              <p>
				For more information about Apache HTTP Server modules, refer to <a href="#s1-apache-addmods" title="22.6. Adding Modules">Section 22.6, “Adding Modules”</a>.
			</p>
              <p class="formalpara">
                <a id="s2-apache-include"></a>
              </p>
              <h5 class="formalpara">Include</h5>
              <p class="formalpara"><a id="id2901700" class="indexterm"></a><a id="id2901718" class="indexterm"></a>
					<code class="command">Include</code> allows other configuration files to be included at runtime.
				</p>
              <p>
				The path to these configuration files can be absolute or relative to the <code class="command">ServerRoot</code>.
			</p>
              <div class="important">
                <h2>Important</h2>
                <p>
					For the server to use individually packaged modules, such as <code class="filename">mod_ssl</code>, <code class="filename">mod_perl</code>, and <code class="filename">php</code>, the following directive must be included in <code class="command">Section 1: Global Environment</code> of <code class="filename">httpd.conf</code>:
				</p>
                <pre class="screen"><code class="command">Include conf.d/*.conf</code>
</pre>
              </div>
              <p class="formalpara">
                <a id="s2-apache-indexignore"></a>
              </p>
              <h5 class="formalpara">IndexIgnore</h5>
              <p class="formalpara"><a id="id3033134" class="indexterm"></a><a id="id3033151" class="indexterm"></a>
					<code class="command">IndexIgnore</code> lists file extensions, partial file names, wildcard expressions, or full file names. The Web server does not include any files which match any of those parameters in server generated directory listings.
				</p>
              <p class="formalpara">
                <a id="s2-apache-indexoptions"></a>
              </p>
              <h5 class="formalpara">IndexOptions</h5>
              <p class="formalpara"><a id="id3033191" class="indexterm"></a><a id="id3033208" class="indexterm"></a>
					<code class="command">IndexOptions</code> controls the appearance of server generated directing listings, by adding icons, file descriptions, and so on. If <code class="command">Options Indexes</code> is set (refer to <a href="#s2-apache-options" title="Options">Options</a>), the Web server generates a directory listing when the Web server receives an HTTP request for a directory without an index.
				</p>
              <p>
				First, the Web server looks in the requested directory for a file matching the names listed in the <code class="command">DirectoryIndex</code> directive (usually, <code class="filename">index.html</code>). If an <code class="filename">index.html</code> file is not found, Apache HTTP Server creates an HTML directory listing of the requested directory. The appearance of this directory listing is controlled, in part, by the <code class="command">IndexOptions</code> directive.
			</p>
              <p>
				The default configuration turns on <code class="command">FancyIndexing</code>. This means that a user can re-sort a directory listing by clicking on column headers. Another click on the same header switches from ascending to descending order. <code class="command">FancyIndexing</code> also shows different icons for different files, based upon file extensions.
			</p>
              <p>
				The <code class="command">AddDescription</code> option, when used in conjunction with <code class="command">FancyIndexing</code>, presents a short description for the file in server generated directory listings.
			</p>
              <p>
				<code class="command">IndexOptions</code> has a number of other parameters which can be set to control the appearance of server generated directories. The <code class="command">IconHeight</code> and <code class="command">IconWidth</code> parameters require the server to include HTML <code class="command">HEIGHT</code> and <code class="command">WIDTH</code> tags for the icons in server generated webpages. The <code class="command">IconsAreLinks</code> parameter combines the graphical icon with the HTML link anchor, which contains the URL link target.
			</p>
              <p class="formalpara">
                <a id="s2-apache-keepalive"></a>
              </p>
              <h5 class="formalpara">KeepAlive</h5>
              <p class="formalpara"><a id="id3033375" class="indexterm"></a><a id="id3033392" class="indexterm"></a><a id="id3033413" class="indexterm"></a><a id="id3033438" class="indexterm"></a>
					<code class="command">KeepAlive</code> sets whether the server allows more than one request per connection and can be used to prevent any one client from consuming too much of the server's resources.
				</p>
              <p>
				By default <code class="command">Keepalive</code> is set to <code class="command">off</code>. If <code class="command">Keepalive</code> is set to <code class="command">on</code> and the server becomes very busy, the server can quickly spawn the maximum number of child processes. In this situation, the server slows down significantly. If <code class="command">Keepalive</code> is enabled, it is a good idea to set the the <code class="command">KeepAliveTimeout</code> low (refer to <a href="#s2-apache-keepalivetimeout" title="KeepAliveTimeout">KeepAliveTimeout</a> for more information about the <code class="command">KeepAliveTimeout</code> directive) and monitor the <code class="filename">/var/log/httpd/error_log</code> log file on the server. This log reports when the server is running out of child processes.
			</p>
              <p class="formalpara">
                <a id="s2-apache-keepalivetimeout"></a>
              </p>
              <h5 class="formalpara">KeepAliveTimeout</h5>
              <p class="formalpara"><a id="id3033538" class="indexterm"></a><a id="id3033556" class="indexterm"></a>
					<code class="command">KeepAliveTimeout</code> sets the number of seconds the server waits after a request has been served before it closes the connection. Once the server receives a request, the <code class="command">Timeout</code> directive applies instead. The <code class="command">KeepAliveTimeout</code> directive is set to 15 seconds by default.
				</p>
              <p class="formalpara">
                <a id="s2-apache-languagepriority"></a>
              </p>
              <h5 class="formalpara">LanguagePriority</h5>
              <p class="formalpara"><a id="id3033608" class="indexterm"></a><a id="id3033626" class="indexterm"></a>
					<code class="command">LanguagePriority</code> sets precedence for different languages in case the client Web browser has no language preference set.
				</p>
              <p class="formalpara">
                <a id="s2-apache-listen"></a>
              </p>
              <h5 class="formalpara">Listen</h5>
              <p class="formalpara"><a id="id3033665" class="indexterm"></a><a id="id3033682" class="indexterm"></a>
					The <code class="command">Listen</code> command identifies the ports on which the Web server accepts incoming requests. By default, the Apache HTTP Server is set to listen to port 80 for non-secure Web communications and (in the <code class="filename">/etc/httpd/conf.d/ssl.conf</code> file which defines any secure servers) to port 443 for secure Web communications.
				</p>
              <p>
				If the Apache HTTP Server is configured to listen to a port under 1024, only the root user can start it. For port 1024 and above, <code class="command">httpd</code> can be started as a regular user.
			</p>
              <p>
				The <code class="command">Listen</code> directive can also be used to specify particular IP addresses over which the server accepts connections.
			</p>
              <p class="formalpara">
                <a id="s2-apache-loadmodule"></a>
              </p>
              <h5 class="formalpara">LoadModule</h5>
              <p class="formalpara"><a id="id3033753" class="indexterm"></a><a id="id3033770" class="indexterm"></a>
					<code class="command">LoadModule</code> is used to load Dynamic Shared Object (DSO) modules. More information on the Apache HTTP Server's DSO support, including instructions for using the <code class="command">LoadModule</code> directive, can be found in <a href="#s1-apache-addmods" title="22.6. Adding Modules">Section 22.6, “Adding Modules”</a>. Note, the load order of the modules is <span class="emphasis"><em>no longer important</em></span> with Apache HTTP Server 2.0. Refer to <a href="#s3-httpd-v2-mig-dso" title="22.2.2.1.3. Dynamic Shared Object (DSO) Support">Section 22.2.2.1.3, “Dynamic Shared Object (DSO) Support”</a> for more information about Apache HTTP Server 2.0 DSO support.
				</p>
              <p class="formalpara">
                <a id="s2-apache-location"></a>
              </p>
              <h5 class="formalpara">Location</h5>
              <p class="formalpara"><a id="id3033832" class="indexterm"></a><a id="id3033849" class="indexterm"></a><a id="id3033866" class="indexterm"></a>
					The <code class="command">&lt;Location&gt;</code> and <code class="command">&lt;/Location&gt;</code> tags create a container in which access control based on URL can be specified.
				</p>
              <p>
				For instance, to allow people connecting from within the server's domain to see status reports, use the following directives:
			</p>
              <pre class="screen"><code class="command">&lt;Location /server-status&gt; SetHandler server-status Order deny,allow Deny from all Allow from <em class="replaceable"><code>&lt;.example.com&gt;</code></em> &lt;/Location&gt;</code>
</pre>
              <p>
				Replace <em class="replaceable"><code>&lt;.example.com&gt;</code></em> with the second-level domain name for the Web server.
			</p>
              <p>
				To provide server configuration reports (including installed modules and configuration directives) to requests from inside the domain, use the following directives:
			</p>
              <pre class="screen"><code class="command">&lt;Location /server-info&gt; SetHandler server-info Order deny,allow Deny from all Allow from <em class="replaceable"><code>&lt;.example.com&gt;</code></em> &lt;/Location&gt;</code>
</pre>
              <p>
				Again, replace <em class="replaceable"><code>&lt;.example.com&gt;</code></em> with the second-level domain name for the Web server.
			</p>
              <p class="formalpara">
                <a id="s2-apache-logformat"></a>
              </p>
              <h5 class="formalpara">LogFormat</h5>
              <p class="formalpara"><a id="id2976955" class="indexterm"></a><a id="id2976972" class="indexterm"></a><a id="id2976993" class="indexterm"></a><a id="id2977010" class="indexterm"></a>
					The <code class="command">LogFormat</code> directive configures the format of the various Web server log files. The actual <code class="command">LogFormat</code> used depends on the settings given in the <code class="command">CustomLog</code> directive (refer to <a href="#s2-apache-customlog" title="CustomLog">CustomLog</a>).
				</p>
              <p>
				The following are the format options if the <code class="command">CustomLog</code> directive is set to <code class="command">combined</code>:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term"><code class="command">%h</code> (remote host's IP address or hostname) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the remote IP address of the requesting client. If <code class="command">HostnameLookups</code> is set to <code class="option">on</code>, the client hostname is recorded unless it is not available from DNS.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%l</code> (rfc931) </span>
                  </dt>
                  <dd>
                    <p>
							Not used. A hyphen <span><strong class="keycap">-</strong></span> appears in the log file for this field.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%u</code> (authenticated user) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the username of the user recorded if authentication was required. Usually, this is not used, so a hyphen <span><strong class="keycap">-</strong></span> appears in the log file for this field.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%t</code> (date) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the date and time of the request.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%r</code> (request string) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the request string exactly as it came from the browser or client.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%s</code> (status) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the HTTP status code which was returned to the client host.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%b</code> (bytes) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the size of the document.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%\"%{Referer}i\"</code> (referrer) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the URL of the webpage which referred the client host to Web server.
						</p>
                  </dd>
                  <dt>
                    <span class="term"><code class="command">%\"%{User-Agent}i\"</code> (user-agent) </span>
                  </dt>
                  <dd>
                    <p>
							Lists the type of Web browser making the request.
						</p>
                  </dd>
                </dl>
              </div>
              <p class="formalpara">
                <a id="s2-apache-loglevel"></a>
              </p>
              <h5 class="formalpara">LogLevel</h5>
              <p class="formalpara"><a id="id2977296" class="indexterm"></a><a id="id2977314" class="indexterm"></a>
					<code class="command">LogLevel</code> sets how verbose the error messages in the error logs are. <code class="command">LogLevel</code> can be set (from least verbose to most verbose) to <code class="command">emerg</code>, <code class="command">alert</code>, <code class="command">crit</code>, <code class="command">error</code>, <code class="command">warn</code>, <code class="command">notice</code>, <code class="command">info</code>, or <code class="command">debug</code>. The default <code class="command">LogLevel</code> is <code class="command">warn</code>.
				</p>
              <p class="formalpara">
                <a id="s2-apache-maxkeepaliverequests"></a>
              </p>
              <h5 class="formalpara">MaxKeepAliveRequests</h5>
              <p class="formalpara"><a id="id2977419" class="indexterm"></a><a id="id2977435" class="indexterm"></a>
					This directive sets the maximum number of requests allowed per persistent connection. The Apache Project recommends a high setting, which improves the server's performance. <code class="command">MaxKeepAliveRequests</code> is set to <code class="command">100</code> by default, which should be appropriate for most situations.
				</p>
              <p class="formalpara">
                <a id="s2-apache-namevirtualhost"></a>
              </p>
              <h5 class="formalpara">NameVirtualHost</h5>
              <p class="formalpara"><a id="id2977481" class="indexterm"></a><a id="id2977498" class="indexterm"></a>
					The <code class="command">NameVirtualHost</code> directive associates an IP address and port number, if necessary, for any name-based virtual hosts. Name-based virtual hosting allows one Apache HTTP Server to serve different domains without using multiple IP addresses.
				</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					Name-based virtual hosts <span class="emphasis"><em>only</em></span> work with non-secure HTTP connections. If using virtual hosts with a secure server, use IP address-based virtual hosts instead.
				</p>
              </div>
              <p>
				To enable name-based virtual hosting, uncomment the <code class="command">NameVirtualHost</code> configuration directive and add the correct IP address. Then add additional <code class="command">VirtualHost</code> containers for each virtual host as is necessary for your configuration.
			</p>
              <p class="formalpara">
                <a id="s2-apache-options"></a>
              </p>
              <h5 class="formalpara">Options</h5>
              <p class="formalpara"><a id="id2977576" class="indexterm"></a><a id="id2977594" class="indexterm"></a><a id="id2977611" class="indexterm"></a><a id="id2977627" class="indexterm"></a>
					The <code class="command">Options</code> directive controls which server features are available in a particular directory. For example, under the restrictive parameters specified for the root directory, <code class="command">Options</code> is only set to the <code class="command">FollowSymLinks</code> directive. No features are enabled, except that the server is allowed to follow symbolic links in the root directory.
				</p>
              <p>
				By default, in the <code class="command">DocumentRoot</code> directory, <code class="command">Options</code> is set to include <code class="command">Indexes</code> and <code class="command">FollowSymLinks</code>. <code class="command">Indexes</code> permits the server to generate a directory listing for a directory if no <code class="command">DirectoryIndex</code> (for example, <code class="filename">index.html</code>) is specified. <code class="command">FollowSymLinks</code> allows the server to follow symbolic links in that directory.
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					<code class="command">Options</code> statements from the main server configuration section need to be replicated to each <code class="command">VirtualHost</code> container individually. Refer to <a href="#s2-apache-virtualhost" title="VirtualHost">VirtualHost</a> for more information.
				</p>
              </div>
              <p class="formalpara">
                <a id="s2-apache-order"></a>
              </p>
              <h5 class="formalpara">Order</h5>
              <p class="formalpara"><a id="id2977757" class="indexterm"></a><a id="id2977774" class="indexterm"></a>
					The <code class="command">Order</code> directive controls the order in which <code class="command">allow</code> and <code class="command">deny</code> directives are evaluated. The server is configured to evaluate the <code class="command">Allow</code> directives before the <code class="command">Deny</code> directives for the <code class="command">DocumentRoot</code> directory.
				</p>
              <p class="formalpara">
                <a id="s2-apache-pidfile"></a>
              </p>
              <h5 class="formalpara">PidFile</h5>
              <p class="formalpara"><a id="id2981539" class="indexterm"></a><a id="id2981555" class="indexterm"></a>
					<code class="command">PidFile</code> names the file where the server records its process ID (PID). By default the PID is listed in <code class="filename">/var/run/httpd.pid</code>.
				</p>
              <p class="formalpara">
                <a id="s2-apache-proxy"></a>
              </p>
              <h5 class="formalpara">Proxy</h5>
              <p class="formalpara"><a id="id2981600" class="indexterm"></a><a id="id2981617" class="indexterm"></a>
					<code class="command">&lt;Proxy *&gt;</code> and <code class="command">&lt;/Proxy&gt;</code> tags create a container which encloses a group of configuration directives meant to apply only to the proxy server. Many directives which are allowed within a <code class="command">&lt;Directory&gt;</code> container may also be used within <code class="command">&lt;Proxy&gt;</code> container.
				</p>
              <p class="formalpara">
                <a id="s2-apache-proxyrequests"></a>
              </p>
              <h5 class="formalpara">ProxyRequests</h5>
              <p class="formalpara"><a id="id2981674" class="indexterm"></a><a id="id2981692" class="indexterm"></a><a id="id2981709" class="indexterm"></a>
					To configure the Apache HTTP Server to function as a proxy server, remove the hash mark (<code class="command">#</code>) from the beginning of the <code class="command">&lt;IfModule mod_proxy.c&gt;</code> line, the ProxyRequests, and each line in the <code class="command">&lt;Proxy&gt;</code> stanza. Set the <code class="command">ProxyRequests</code> directive to <code class="command">On</code>, and set which domains are allowed access to the server in the <code class="command">Allow from</code> directive of the <code class="command">&lt;Proxy&gt;</code> stanza.
				</p>
              <p class="formalpara">
                <a id="s2-apache-readmename"></a>
              </p>
              <h5 class="formalpara">ReadmeName</h5>
              <p class="formalpara"><a id="id2981778" class="indexterm"></a><a id="id2981795" class="indexterm"></a>
					<code class="command">ReadmeName</code> names the file which, if it exists in the directory, is appended to the end of server generated directory listings. The Web server first tries to include the file as an HTML document and then tries to include it as plain text. By default, <code class="command">ReadmeName</code> is set to <code class="filename">README.html</code>.
				</p>
              <p class="formalpara">
                <a id="s2-apache-redirect"></a>
              </p>
              <h5 class="formalpara">Redirect</h5>
              <p class="formalpara"><a id="id2981849" class="indexterm"></a><a id="id2981866" class="indexterm"></a>
					When a webpage is moved, <code class="command">Redirect</code> can be used to map the file location to a new URL. The format is as follows:
				</p>
              <pre class="screen"><code class="command">Redirect /<em class="replaceable"><code>&lt;old-path&gt;</code></em>/<em class="replaceable"><code>&lt;file-name&gt;</code></em> http://<em class="replaceable"><code>&lt;current-domain&gt;</code></em>/<em class="replaceable"><code>&lt;current-path&gt;</code></em>/<em class="replaceable"><code>&lt;file-name&gt;</code></em></code>
</pre>
              <p>
				In this example, replace <em class="replaceable"><code>&lt;old-path&gt;</code></em> with the old path information for <em class="replaceable"><code>&lt;file-name&gt;</code></em> and <em class="replaceable"><code>&lt;current-domain&gt;</code></em> and <em class="replaceable"><code>&lt;current-path&gt;</code></em> with the current domain and path information for <em class="replaceable"><code>&lt;file-name&gt;</code></em>.
			</p>
              <p>
				In this example, any requests for <em class="replaceable"><code>&lt;file-name&gt;</code></em> at the old location is automatically redirected to the new location.
			</p>
              <p>
				For more advanced redirection techniques, use the <code class="command">mod_rewrite</code> module included with the Apache HTTP Server. For more information about configuring the <code class="command">mod_rewrite</code> module, refer to the Apache Software Foundation documentation online at <a href="http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html"> http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html</a>.
			</p>
              <p class="formalpara">
                <a id="s2-apache-scriptalias"></a>
              </p>
              <h5 class="formalpara">ScriptAlias</h5>
              <p class="formalpara"><a id="id2981992" class="indexterm"></a><a id="id2982009" class="indexterm"></a>
					The <code class="command">ScriptAlias</code> directive defines where CGI scripts are located. Generally, it is not good practice to leave CGI scripts within the <code class="command">DocumentRoot</code>, where they can potentially be viewed as text documents. For this reason, a special directory outside of the <code class="command">DocumentRoot</code> directory containing server-side executables and scripts is designated by the <code class="command">ScriptAlias</code> directive. This directory is known as a <code class="filename">cgi-bin</code> and is set to <code class="filename">/var/www/cgi-bin/</code> by default.
				</p>
              <p>
				It is possible to establish directories for storing executables outside of the <code class="filename">cgi-bin/</code> directory. For instructions on doing so, refer to <a href="#s2-apache-addhandler" title="AddHandler">AddHandler</a> and <a href="#s2-apache-directory" title="Directory">Directory</a>.
			</p>
              <p class="formalpara">
                <a id="s2-apache-serveradmin"></a>
              </p>
              <h5 class="formalpara">ServerAdmin</h5>
              <p class="formalpara"><a id="id2982102" class="indexterm"></a><a id="id2982119" class="indexterm"></a><a id="id2982136" class="indexterm"></a>
					Sets the <code class="command">ServerAdmin</code> directive to the email address of the Web server administrator. This email address shows up in error messages on server-generated Web pages, so users can report a problem by sending email to the server administrator.
				</p>
              <p>
				By default, <code class="command">ServerAdmin</code> is set to <code class="command">root@localhost</code>.
			</p>
              <p>
				A common way to set up <code class="command">ServerAdmin</code> is to set it to <code class="command">webmaster@example.com</code>. Once set, alias <code class="command">webmaster</code> to the person responsible for the Web server in <code class="filename">/etc/aliases</code> and run <code class="command">/usr/bin/newaliases</code>.
			</p>
              <p class="formalpara">
                <a id="s2-apache-servername"></a>
              </p>
              <h5 class="formalpara">ServerName</h5>
              <p class="formalpara"><a id="id2982224" class="indexterm"></a><a id="id2982241" class="indexterm"></a>
					<code class="command">ServerName</code> specifies a hostname and port number (matching the <code class="command">Listen</code> directive) for the server. The <code class="command">ServerName</code> does not need to match the machine's actual hostname. For example, the Web server may be <code class="computeroutput">www.example.com</code>, but the server's hostname is actually <code class="computeroutput">foo.example.com</code>. The value specified in <code class="command">ServerName</code> must be a valid Domain Name Service (DNS) name that can be resolved by the system — do not make something up.
				</p>
              <p>
				The following is a sample <code class="command">ServerName</code> directive:
			</p>
              <pre class="screen"><code class="command">ServerName www.example.com:80</code>
</pre>
              <p>
				When specifying a <code class="command">ServerName</code>, be sure the IP address and server name pair are included in the <code class="filename">/etc/hosts</code> file.
			</p>
              <p class="formalpara">
                <a id="s2-apache-serverroot"></a>
              </p>
              <h5 class="formalpara">ServerRoot</h5>
              <p class="formalpara"><a id="id2982350" class="indexterm"></a><a id="id2982368" class="indexterm"></a>
					The <code class="command">ServerRoot</code> directive specifies the top-level directory containing website content. By default, <code class="command">ServerRoot</code> is set to <code class="filename">"/etc/httpd"</code> for both secure and non-secure servers.
				</p>
              <p class="formalpara">
                <a id="s2-apache-serversignature"></a>
              </p>
              <h5 class="formalpara">ServerSignature</h5>
              <p class="formalpara"><a id="id2982418" class="indexterm"></a><a id="id2983902" class="indexterm"></a>
					The <code class="command">ServerSignature</code> directive adds a line containing the Apache HTTP Server server version and the <code class="command">ServerName</code> to any server-generated documents, such as error messages sent back to clients. <code class="command">ServerSignature</code> is set to <code class="command">on</code> by default.
				</p>
              <p>
				<code class="command">ServerSignature</code> can be set to <code class="command">EMail</code> which adds a <code class="command">mailto:ServerAdmin</code> HTML tag to the signature line of auto-generated responses. <code class="command">ServerSignature</code> can also be set to <code class="command">Off</code> to stop Apache from sending out its version number and module information. Please also check the <code class="command">ServerTokens</code> settings.
			</p>
              <p class="formalpara">
                <a id="s2-apache-servertoken"></a>
              </p>
              <h5 class="formalpara">ServerTokens</h5>
              <p class="formalpara"><a id="id2984002" class="indexterm"></a><a id="id2984019" class="indexterm"></a>
					The <code class="command">ServerTokens</code> directive determines if the Server response header field sent back to clients should include details of the Operating System type and information about compiled-in modules. By default, <code class="command">ServerTokens</code> is set to <code class="command">Full</code> which sends information about the Operating System type and compiled-in modules. Setting the <code class="command">ServerTokens</code> to <code class="command">Prod</code> sends the product name only and is recommended as many hackers check information in the Server header when scanning for vulnerabilities. You can also set the <code class="command">ServerTokens</code> to <code class="command">Min</code> (minimal) or to <code class="command">OS</code> (operating system).
				</p>
              <p class="formalpara">
                <a id="s2-apache-suexecusergroup"></a>
              </p>
              <h5 class="formalpara">SuexecUserGroup</h5>
              <p class="formalpara"><a id="id2984105" class="indexterm"></a><a id="id2984126" class="indexterm"></a><a id="id2984144" class="indexterm"></a>
					The <code class="command">SuexecUserGroup</code> directive, which originates from the <code class="command">mod_suexec</code> module, allows the specification of user and group execution privileges for CGI programs. Non-CGI requests are still processed with the user and group specified in the <code class="command">User</code> and <code class="command">Group</code> directives.
				</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					From version 2.0, the <code class="command">SuexecUserGroup</code> directive replaced the Apache HTTP Server 1.3 configuration of using the <code class="command">User</code> and <code class="command">Group</code> directives inside the configuration of <code class="command">VirtualHosts</code> sections.
				</p>
              </div>
              <p class="formalpara">
                <a id="s2-apache-timeout"></a>
              </p>
              <h5 class="formalpara">Timeout</h5>
              <p class="formalpara"><a id="id2984240" class="indexterm"></a><a id="id2984258" class="indexterm"></a>
					<code class="command">Timeout</code> defines, in seconds, the amount of time that the server waits for receipts and transmissions during communications. <code class="command">Timeout</code> is set to <code class="command">300</code> seconds by default, which is appropriate for most situations.
				</p>
              <p class="formalpara">
                <a id="s2-apache-typesconfig"></a>
              </p>
              <h5 class="formalpara">TypesConfig</h5>
              <p class="formalpara"><a id="id2984309" class="indexterm"></a><a id="id2984326" class="indexterm"></a>
					<code class="command">TypesConfig</code> names the file which sets the default list of MIME type mappings (file name extensions to content types). The default <code class="command"> TypesConfig</code> file is <code class="filename">/etc/mime.types</code>. Instead of editing <code class="filename">/etc/mime.types</code>, the recommended way to add MIME type mappings is to use the <code class="command"> AddType</code> directive.
				</p>
              <p>
				For more information about <code class="command">AddType</code>, refer to <a href="#s2-apache-addtype" title="AddType">AddType</a>.
			</p>
              <p class="formalpara">
                <a id="s2-apache-usecanonicalname"></a>
              </p>
              <h5 class="formalpara">UseCanonicalName</h5>
              <p class="formalpara"><a id="id2984404" class="indexterm"></a><a id="id2984422" class="indexterm"></a>
					When set to <code class="option">on</code>, this directive configures the Apache HTTP Server to reference itself using the value specified in the <code class="command">ServerName</code> and <code class="command">Port</code> directives. When <code class="command">UseCanonicalName</code> is set to <code class="option">off</code>, the server instead uses the value used by the requesting client when referring to itself.
				</p>
              <p>
				<code class="command">UseCanonicalName</code> is set to <code class="option">off</code> by default.
			</p>
              <p class="formalpara">
                <a id="s2-apache-user"></a>
              </p>
              <h5 class="formalpara">User</h5>
              <p class="formalpara"><a id="id2984496" class="indexterm"></a><a id="id2984513" class="indexterm"></a>
					The <code class="command">User</code> directive sets the username of the server process and determines what files the server is allowed to access. Any files inaccessible to this user are also inaccessible to clients connecting to the Apache HTTP Server.
				</p>
              <p>
				By default <code class="command">User</code> is set to <code class="command">apache</code>.
			</p>
              <p>
				This directive has been deprecated for the configuration of virtual hosts.
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					For security reasons, the Apache HTTP Server does not run as the root user.
				</p>
              </div>
              <p class="formalpara">
                <a id="s2-apache-userdir"></a>
              </p>
              <h5 class="formalpara">UserDir</h5>
              <p class="formalpara"><a id="id2984587" class="indexterm"></a><a id="id2984604" class="indexterm"></a><a id="id2984622" class="indexterm"></a><a id="id2984636" class="indexterm"></a>
					<code class="command">UserDir</code> is the subdirectory within each user's home directory where they should place personal HTML files which are served by the Web server. This directive is set to <code class="option"> disable</code> by default.
				</p>
              <p>
				The name for the subdirectory is set to <code class="filename">public_html</code> in the default configuration. For example, the server might receive the following request:
			</p>
              <pre class="screen"><code class="command">http://<em class="replaceable"><code>example.com</code></em>/~<em class="replaceable"><code>username</code></em>/foo.html</code>
</pre>
              <p>
				The server would look for the file:
			</p>
              <pre class="screen"><code class="filename">/home/username/public_html/foo.html</code>
</pre>
              <p>
				In the above example, <code class="filename">/home/username/</code> is the user's home directory (note that the default path to users' home directories may vary).
			</p>
              <p>
				Make sure that the permissions on the users' home directories are set correctly. Users' home directories must be set to 0711. The read (r) and execute (x) bits must be set on the users' <code class="filename">public_html</code> directories (0755 also works). Files that are served in a users' <code class="filename">public_html</code> directories must be set to at least 0644.
			</p>
              <p class="formalpara">
                <a id="s2-apache-virtualhost"></a>
              </p>
              <h5 class="formalpara">VirtualHost</h5>
              <p class="formalpara"><a id="id2984752" class="indexterm"></a><a id="id2984769" class="indexterm"></a>
					<code class="command">&lt;VirtualHost&gt;</code> and <code class="command">&lt;/VirtualHost&gt;</code> tags create a container outlining the characteristics of a virtual host. The <code class="command">VirtualHost</code> container accepts most configuration directives.
				</p>
              <p>
				A commented <code class="command">VirtualHost</code> container is provided in <code class="filename">httpd.conf</code>, which illustrates the minimum set of configuration directives necessary for each virtual host. Refer to <a href="#s1-apache-virtualhosts" title="22.7. Virtual Hosts">Section 22.7, “Virtual Hosts”</a> for more information about virtual hosts.
			</p>
              <div class="note">
                <h2>Note</h2>
                <p>
					The default SSL virtual host container now resides in the file <code class="filename">/etc/httpd/conf.d/ssl.conf</code>.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-apache-sslcommands"></a>22.5.2. Configuration Directives for SSL</h3>
                  </div>
                </div>
              </div>
              <a id="id2984862" class="indexterm"></a>
              <a id="id2984872" class="indexterm"></a>
              <p>
				The directives in <code class="filename">/etc/httpd/conf.d/ssl.conf</code> file can be configured to enable secure Web communications using SSL and TLS.
			</p>
              <p class="formalpara">
                <a id="s3-apache-setenvif"></a>
              </p>
              <h5 class="formalpara">SetEnvIf</h5>
              <p class="formalpara"><a id="id2984905" class="indexterm"></a><a id="id2984922" class="indexterm"></a>
					<code class="command">SetEnvIf</code> sets environment variables based on the headers of incoming connections. It is <span class="emphasis"><em>not</em></span> solely an SSL directive, though it is present in the supplied <code class="filename">/etc/httpd/conf.d/ssl.conf</code> file. It's purpose in this context is to disable HTTP keepalive and to allow SSL to close the connection without a closing notification from the client browser. This setting is necessary for certain browsers that do not reliably shut down the SSL connection.
				</p>
              <p>
				For more information on other directives within the SSL configuration file, refer to the following URLs:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						http://localhost/manual/mod/mod_ssl.html
					</p>
                  </li>
                  <li>
                    <p>
						<a href="http://httpd.apache.org/docs/2.2/mod/mod_ssl.html">http://httpd.apache.org/docs/2.2/mod/mod_ssl.html</a>
					</p>
                  </li>
                </ul>
              </div>
              <div class="note">
                <h2>Note</h2>
                <p>
					In most cases, SSL directives are configured appropriately during the installation of Red Hat Enterprise Linux. Be careful when altering Apache HTTP Secure Server directives, misconfiguration can lead to security vulnerabilities.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-apache-mpm-containers"></a>22.5.3. MPM Specific Server-Pool Directives</h3>
                  </div>
                </div>
              </div>
              <a id="id2986660" class="indexterm"></a>
              <p>
				As explained in <a href="#s3-httpd-v2-mig-pool" title="22.2.2.1.2. Server-Pool Size Regulation">Section 22.2.2.1.2, “Server-Pool Size Regulation”</a>, the responsibility for managing characteristics of the server-pool falls to a module group called MPMs under Apache HTTP Server 2.0. The characteristics of the server-pool differ depending upon which MPM is used. For this reason, an <code class="command">IfModule</code> container is necessary to define the server-pool for the MPM in use.
			</p>
              <p>
				By default, Apache HTTP Server 2.0 defines the server-pool for both the <code class="command">prefork</code> and <code class="command">worker</code> MPMs.
			</p>
              <p>
				The following section list directives found within the MPM-specific server-pool containers.
			</p>
              <p class="formalpara">
                <a id="s3-apache-maxclients"></a>
              </p>
              <h5 class="formalpara">MaxClients</h5>
              <p class="formalpara"><a id="id2986725" class="indexterm"></a><a id="id2986743" class="indexterm"></a>
					<code class="command">MaxClients</code> sets a limit on the total number of server processes, or simultaneously connected clients, that can run at one time. The main purpose of this directive is to keep a runaway Apache HTTP Server from crashing the operating system. For busy servers this value should be set to a high value. The server's default is set to 150 regardless of the MPM in use. However, it is not recommended that the value for <code class="command">MaxClients</code> exceeds <code class="command">256</code> when using the <code class="command">prefork</code> MPM.
				</p>
              <p class="formalpara">
                <a id="s3-apache-maxrequestsperchild"></a>
              </p>
              <h5 class="formalpara">MaxRequestsPerChild</h5>
              <p class="formalpara"><a id="id2986806" class="indexterm"></a><a id="id2986822" class="indexterm"></a>
					<code class="command">MaxRequestsPerChild</code> sets the total number of requests each child server process serves before the child dies. The main reason for setting <code class="command">MaxRequestsPerChild</code> is to avoid long-lived process induced memory leaks. The default <code class="command">MaxRequestsPerChild</code> for the <code class="command">prefork</code> MPM is <code class="command">4000</code> and for the <code class="command">worker</code> MPM is <code class="command">0</code>.
				</p>
              <p class="formalpara">
                <a id="s3-apache-minmaxspareservers"></a>
              </p>
              <h5 class="formalpara">MinSpareServers and MaxSpareServers</h5>
              <p class="formalpara"><a id="id2986900" class="indexterm"></a><a id="id2986917" class="indexterm"></a><a id="id2986935" class="indexterm"></a><a id="id2986952" class="indexterm"></a>
					These values are only used with the <code class="command">prefork</code> MPM. They adjust how the Apache HTTP Server dynamically adapts to the perceived load by maintaining an appropriate number of spare server processes based on the number of incoming requests. The server checks the number of servers waiting for a request and kills some if there are more than <code class="command">MaxSpareServers</code> or creates some if the number of servers is less than <code class="command">MinSpareServers</code>.
				</p>
              <p>
				The default <code class="command">MinSpareServers</code> value is <code class="command">5</code>; the default <code class="command">MaxSpareServers</code> value is <code class="command">20</code>. These default settings should be appropriate for most situations. Be careful not to increase the <code class="command">MinSpareServers</code> to a large number as doing so creates a heavy processing load on the server even when traffic is light.
			</p>
              <p class="formalpara">
                <a id="s3-apache-minmaxsparethreads"></a>
              </p>
              <h5 class="formalpara">MinSpareThreads and MaxSpareThreads</h5>
              <p class="formalpara"><a id="id2987046" class="indexterm"></a><a id="id2987064" class="indexterm"></a><a id="id2987081" class="indexterm"></a><a id="id2987098" class="indexterm"></a>
					These values are only used with the <code class="command">worker</code> MPM. They adjust how the Apache HTTP Server dynamically adapts to the perceived load by maintaining an appropriate number of spare server threads based on the number of incoming requests. The server checks the number of server threads waiting for a request and kills some if there are more than <code class="command">MaxSpareThreads</code> or creates some if the number of servers is less than <code class="command">MinSpareThreads</code>.
				</p>
              <p>
				The default <code class="command">MinSpareThreads</code> value is <code class="command">25</code>; the default <code class="command">MaxSpareThreads</code> value is <code class="command">75</code>. These default settings should be appropriate for most situations. The value for <code class="command">MaxSpareThreads</code> must be greater than or equal to the sum of <code class="command">MinSpareThreads</code> and <code class="command">ThreadsPerChild</code>, else the Apache HTTP Server automatically corrects it.
			</p>
              <p class="formalpara">
                <a id="s3-apache-startservers"></a>
              </p>
              <h5 class="formalpara">StartServers</h5>
              <p class="formalpara"><a id="id2987203" class="indexterm"></a><a id="id2987220" class="indexterm"></a>
					The <code class="command">StartServers</code> directive sets how many server processes are created upon startup. Since the Web server dynamically kills and creates server processes based on traffic load, it is not necessary to change this parameter. The Web server is set to start <code class="command">8</code> server processes at startup for the <code class="command">prefork</code> MPM and <code class="command">2</code> for the <code class="command">worker</code> MPM.
				</p>
              <p class="formalpara">
                <a id="s3-apache-threadsperchild"></a>
              </p>
              <h5 class="formalpara">ThreadsPerChild</h5>
              <p class="formalpara"><a id="id2987285" class="indexterm"></a><a id="id2987303" class="indexterm"></a>
					This value is only used with the <code class="command">worker</code> MPM. It sets the number of threads within each child process. The default value for this directive is <code class="command">25</code>.
				</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-apache-addmods"></a>22.6. Adding Modules</h2>
                </div>
              </div>
            </div>
            <a id="id2987351" class="indexterm"></a>
            <a id="id2987368" class="indexterm"></a>
            <a id="id2987382" class="indexterm"></a>
            <a id="id2987395" class="indexterm"></a>
            <a id="id2987405" class="indexterm"></a>
            <p>
			The Apache HTTP Server is distributed with a number of modules. More information about Apache HTTP modules can be found on <a href="http://httpd.apache.org/docs/2.2/mod/">http://httpd.apache.org/docs/2.2/mod/</a>.
		</p>
            <p>
			The Apache HTTP Server supports <em class="firstterm">Dynamically Shared Objects</em> (<em class="firstterm">DSO</em>s), or modules, which can easily be loaded at runtime as necessary.
		</p>
            <p>
			The Apache Project provides complete DSO documentation online at <a href="http://httpd.apache.org/docs/2.2/dso.html">http://httpd.apache.org/docs/2.2/dso.html</a>. Or, if the <code class="filename">http-manual</code> package is installed, documentation about DSOs can be found online at <a href="http://localhost/manual/mod/">http://localhost/manual/mod/</a>.
		</p>
            <p>
			For the Apache HTTP Server to use a DSO, it must be specified in a <code class="command">LoadModule</code> directive within <code class="filename">/etc/httpd/conf/httpd.conf</code>. If the module is provided by a separate package, the line must appear within the modules configuration file in the <code class="filename">/etc/httpd/conf.d/</code> directory. Refer to <a href="#s2-apache-loadmodule" title="LoadModule">LoadModule</a> for more information.
		</p>
            <p>
			If adding or deleting modules from <code class="filename">http.conf</code>, Apache HTTP Server must be reloaded or restarted, as referred to in <a href="#s1-apache-startstop" title="22.3. Starting and Stopping httpd">Section 22.3, “Starting and Stopping <code class="command">httpd</code>”</a>.
		</p>
            <p>
			If creating a new module, first install the <code class="filename">httpd-devel</code> package which contains the include files, the header files, as well as the <em class="firstterm">APache eXtenSion</em> (<code class="command">/usr/sbin/apxs</code>) application, which uses the include files and the header files to compile DSOs.
		</p>
            <p>
			After writing a module, use <code class="command">/usr/sbin/apxs</code> to compile the module sources outside the Apache source tree. For more information about using the <code class="command">/usr/sbin/apxs</code> command, refer to the the Apache documentation online at <a href="http://httpd.apache.org/docs/2.2/dso.html">http://httpd.apache.org/docs/2.2/dso.html</a> as well as the <code class="command">apxs</code> man page.
		</p>
            <p>
			Once compiled, put the module in the <code class="filename">/usr/lib/httpd/modules/</code> directory. For RHEL platforms using default-64-bit userspace (x86_64, ia64, ?) this path will be <code class="filename">/usr/lib64/httpd/modules/</code>. Then add a <code class="command">LoadModule</code> line to the <code class="filename">httpd.conf</code>, using the following structure:
		</p>
            <pre class="screen"><code class="command">LoadModule <em class="replaceable"><code>&lt;module-name&gt; &lt;path/to/module.so&gt;</code></em></code>
</pre>
            <p>
			Where <em class="replaceable"><code>&lt;module-name&gt;</code></em> is the name of the module and <em class="replaceable"><code>&lt;path/to/module.so&gt;</code></em> is the path to the DSO.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-apache-virtualhosts"></a>22.7. Virtual Hosts</h2>
                </div>
              </div>
            </div>
            <a id="id2987637" class="indexterm"></a>
            <a id="id2987651" class="indexterm"></a>
            <a id="id2985476" class="indexterm"></a>
            <a id="id2985490" class="indexterm"></a>
            <a id="id2985503" class="indexterm"></a>
            <a id="id2985520" class="indexterm"></a>
            <p>
			The Apache HTTP Server's built in virtual hosting allows the server to provide different information based on which IP address, hostname, or port is being requested. A complete guide to using virtual hosts is available online at <a href="http://httpd.apache.org/docs/2.2/vhosts/">http://httpd.apache.org/docs/2.2/vhosts/</a>.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-apache-settingupvhosts"></a>22.7.1. Setting Up Virtual Hosts</h3>
                  </div>
                </div>
              </div>
              <p>
				To create a name-based virtual host, it is best to use the virtual host container provided in <code class="filename">httpd.conf</code> as an example.
			</p>
              <p>
				The virtual host example read as follows:
			</p>
              <pre class="screen"><code class="command">#NameVirtualHost *:80 # #&lt;VirtualHost *:80&gt; # ServerAdmin webmaster@dummy-host.example.com # DocumentRoot /www/docs/dummy-host.example.com # ServerName dummy-host.example.com # ErrorLog logs/dummy-host.example.com-error_log # CustomLog logs/dummy-host.example.com-access_log common #&lt;/VirtualHost&gt;</code>
</pre>
              <p>
				To activate name-based virtual hosting, uncomment the <code class="command">NameVirtualHost</code> line by removing the hash mark (<code class="command">#</code>) and replace the asterisk (<code class="command">*</code>) with the IP address assigned to the machine.
			</p>
              <p>
				Next, configure a virtual host by uncommenting and customizing the <code class="command">&lt;VirtualHost&gt;</code> container.
			</p>
              <p>
				On the <code class="command">&lt;VirtualHost&gt;</code> line, change the asterisk (<code class="command">*</code>) to the server's IP address. Change the <code class="command">ServerName</code> to a <span class="emphasis"><em>valid</em></span> DNS name assigned to the machine, and configure the other directives as necessary.
			</p>
              <p>
				The <code class="command">&lt;VirtualHost&gt;</code> container is highly customizable and accepts almost every directive available within the main server configuration.
			</p>
              <a id="id2985663" class="indexterm"></a>
              <div class="tip">
                <h2>Tip</h2>
                <p>
					If configuring a virtual host to listen on a non-default port, that port must be added to the <code class="command">Listen</code> directive in the global settings section of <code class="filename">/etc/httpd/conf/httpd.conf</code> file.
				</p>
              </div>
              <p>
				To activate a newly created virtual host, the Apache HTTP Server must be reloaded or restarted. Refer to <a href="#s1-apache-startstop" title="22.3. Starting and Stopping httpd">Section 22.3, “Starting and Stopping <code class="command">httpd</code>”</a> for further instructions.
			</p>
              <p>
				Comprehensive information about creating and configuring both name-based and IP address-based virtual hosts is provided online at <a href="http://httpd.apache.org/docs/2.2/vhosts/">http://httpd.apache.org/docs/2.2/vhosts/</a>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="s1-httpd-secure-server"></a>22.8. Apache HTTP Secure Server Configuration</h2>
                </div>
              </div>
            </div>
            <a id="id2985741" class="indexterm"></a>
            <p>
			This section provides basic information on the Apache HTTP Server with the <code class="filename">mod_ssl</code> security module enabled to use the OpenSSL library and toolkit. The combination of these three components are referred to in this section as the secure Web server or just as the secure server.
		</p>
            <p>
			The <code class="filename">mod_ssl</code> module is a security module for the Apache HTTP Server. The <code class="filename">mod_ssl</code> module uses the tools provided by the OpenSSL Project to add a very important feature to the Apache HTTP Server — the ability to encrypt communications. In contrast, regular HTTP communications between a browser and a Web server are sent in plain text, which could be intercepted and read by someone along the route between the browser and the server.
		</p>
            <p>
			This section is not meant to be complete and exclusive documentation for any of these programs. When possible, this guide points to appropriate places where you can find more in-depth documentation on particular subjects.
		</p>
            <p>
			This section shows you how to install these programs. You can also learn the steps necessary to generate a private key and a certificate request, how to generate your own self-signed certificate, and how to install a certificate to use with your secure server.
		</p>
            <p>
			The <code class="filename">mod_ssl</code> configuration file is located at <code class="filename">/etc/httpd/conf.d/ssl.conf</code>. For this file to be loaded, and hence for <code class="filename">mod_ssl</code> to work, you must have the statement <code class="computeroutput">Include conf.d/*.conf</code> in the <code class="filename">/etc/httpd/conf/httpd.conf</code> file. This statement is included by default in the default Apache HTTP Server configuration file.
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-secureserver-optionalpackages"></a>22.8.1. An Overview of Security-Related Packages</h3>
                  </div>
                </div>
              </div>
              <a id="id2985854" class="indexterm"></a>
              <p>
				To enable the secure server, you must have the following packages installed at a minimum:
			</p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">
                      <code class="filename">httpd</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							The <code class="filename">httpd</code> package contains the <code class="command">httpd</code> daemon and related utilities, configuration files, icons, Apache HTTP Server modules, man pages, and other files used by the Apache HTTP Server.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">mod_ssl</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							The <code class="filename">mod_ssl</code> package includes the <code class="filename">mod_ssl</code> module, which provides strong cryptography for the Apache HTTP Server via the Secure Sockets Layer (SSL) and Transport Layer Security (TLS) protocols.
						</p>
                  </dd>
                  <dt>
                    <span class="term">
                      <code class="filename">openssl</code>
                    </span>
                  </dt>
                  <dd>
                    <p>
							The <code class="filename">openssl</code> package contains the OpenSSL toolkit. The OpenSSL toolkit implements the SSL and TLS protocols, and also includes a general purpose cryptography library.
						</p>
                  </dd>
                </dl>
              </div>
              <p>
				Additionally, other software packages provide certain security functionalities (but are not required by the secure server to function):
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-secureserver-overview-certs"></a>22.8.2. An Overview of Certificates and Security</h3>
                  </div>
                </div>
              </div>
              <a id="id2985986" class="indexterm"></a>
              <a id="id2985999" class="indexterm"></a>
              <a id="id2986012" class="indexterm"></a>
              <a id="id2986026" class="indexterm"></a>
              <p>
				Your secure server provides security using a combination of the Secure Sockets Layer (SSL) protocol and (in most cases) a digital certificate from a Certificate Authority (CA). SSL handles the encrypted communications as well as the mutual authentication between browsers and your secure server. The CA-approved digital certificate provides authentication for your secure server (the CA puts its reputation behind its certification of your organization's identity). When your browser is communicating using SSL encryption, the <code class="computeroutput">https://</code> prefix is used at the beginning of the Uniform Resource Locator (URL) in the navigation bar.
			</p>
              <p>
				Encryption depends upon the use of keys (think of them as secret encoder/decoder rings in data format). In conventional or symmetric cryptography, both ends of the transaction have the same key, which they use to decode each other's transmissions. In public or asymmetric cryptography, two keys co-exist: a public key and a private key. A person or an organization keeps their private key a secret and publishes their public key. Data encoded with the public key can only be decoded with the private key; data encoded with the private key can only be decoded with the public key.
			</p>
              <p>
				To set up your secure server, use public cryptography to create a public and private key pair. In most cases, you send your certificate request (including your public key), proof of your company's identity, and payment to a CA. The CA verifies the certificate request and your identity, and then sends back a certificate for your secure server.
			</p>
              <p>
				A secure server uses a certificate to identify itself to Web browsers. You can generate your own certificate (called a "self-signed" certificate), or you can get a certificate from a CA. A certificate from a reputable CA guarantees that a website is associated with a particular company or organization.
			</p>
              <p>
				Alternatively, you can create your own self-signed certificate. Note, however, that self-signed certificates should not be used in most production environments. Self-signed certificates are not automatically accepted by a user's browser — users are prompted by the browser to accept the certificate and create the secure connection. Refer to <a href="#s2-secureserver-certs" title="22.8.4. Types of Certificates">Section 22.8.4, “Types of Certificates”</a> for more information on the differences between self-signed and CA-signed certificates.
			</p>
              <p>
				Once you have a self-signed certificate or a signed certificate from the CA of your choice, you must install it on your secure server.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s1-secureserver-oldcert"></a>22.8.3. Using Pre-Existing Keys and Certificates</h3>
                  </div>
                </div>
              </div>
              <a id="id2986126" class="indexterm"></a>
              <p>
				If you already have an existing key and certificate (for example, if you are installing the secure server to replace another company's secure server product), you can probably use your existing key and certificate with the secure server. The following two situations provide instances where you are not able to use your existing key and certificate:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						<span class="emphasis"><em>If you are changing your IP address or domain name</em></span> — Certificates are issued for a particular IP address and domain name pair. You must get a new certificate if you are changing your IP address or domain name.
					</p>
                  </li>
                  <li>
                    <p>
						<a id="id2986175" class="indexterm"></a>
						<span class="emphasis"><em>If you have a certificate from VeriSign and you are changing your server software</em></span> — VeriSign is a widely used CA. If you already have a VeriSign certificate for another purpose, you may have been considering using your existing VeriSign certificate with your new secure server. However, you are not be allowed to because VeriSign issues certificates for one specific server software and IP address/domain name combination.
					</p>
                    <p>
						If you change either of those parameters (for example, if you previously used a different secure server product), the VeriSign certificate you obtained to use with the previous configuration will not work with the new configuration. You must obtain a new certificate.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If you have an existing key and certificate that you can use, you do not have to generate a new key and obtain a new certificate. However, you may need to move and rename the files which contain your key and certificate.
			</p>
              <p>
				Move your existing key file to:
			</p>
              <pre class="screen"><code class="filename">/etc/pki/tls/private/server.key</code>
</pre>
              <p>
				Move your existing certificate file to:
			</p>
              <pre class="screen"><code class="filename">/etc/pki/tls/certs/server.crt</code>
</pre>
              <p>
				<a id="id2986252" class="indexterm"></a>
				<a id="id2986265" class="indexterm"></a>
				 If you are upgrading from the Red Hat Secure Web Server, your old key (<code class="filename">httpsd.key</code>) and certificate (<code class="filename">httpsd.crt</code>) are located in <code class="filename">/etc/httpd/conf/</code>. Move and rename your key and certificate so that the secure server can use them. Use the following two commands to move and rename your key and certificate files:
			</p>
              <pre class="screen"><code class="command">mv /etc/httpd/conf/httpsd.key /etc/pki/tls/private/server.key mv /etc/httpd/conf/httpsd.crt /etc/pki/tls/certs/server.crt</code>
</pre>
              <p>
				Then, start your secure server with the command:
			</p>
              <pre class="screen"><code class="command">/sbin/service httpd start</code>
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h3 class="title"><a id="s2-secureserver-certs"></a>22.8.4. Types of Certificates</h3>
                  </div>
                </div>
              </div>
              <a id="id2986343" class="indexterm"></a>
              <p>
				If you installed your secure server from the RPM package provided by Red Hat, a randomly generated private key and a test certificate are generated and put into the appropriate directories. Before you begin using your secure server, however, you must generate your own key and obtain a certificate which correctly identifies your server.
			</p>
              <p>
				You need a key and a certificate to operate your secure server — which means that you can either generate a self-signed certificate or purchase a CA-signed certificate from a CA. What are the differences between the two?
			</p>
              <p>
				A CA-signed certificate provides two important capabilities for your server:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
						Browsers (usually) automatically recognize the certificate and allow a secure connection to be made, without prompting the user.
					</p>
                  </li>
                  <li>
                    <p>
						When a CA issues a signed certificate, they are guaranteeing the identity of the organization that is providing the webpages to the browser.
					</p>
                  </li>
                </ul>
              </div>
              <p>
				If your secure server is being accessed by the public at large, your secure server needs a certificate signed by a CA so that people who visit your website know that the website is owned by the organization who claims to own it. Before signing a certificate, a CA verifies that the organization requesting the certificate was actually who they claimed to be.
			</p>
              <p>
				Most Web browsers that support SSL have a list of CAs whose certificates they automatically accept. If a browser encounters a certificate whose authorizing CA is not in the list, the browser asks the user to either accept or decline the connection.
			</p>
              <p>
				You can generate a self-signed certificate for your secure server, but be aware that a self-signed certificate does not provide the same functionality as a CA-signed certificate. A self-signed certificate is not automatically recognized by most Web browsers and does not provide any guarantee concerning the identity of the organization that is providing the website. A CA-signed certificate provides both of these important capabilities for a secure server. If your secure server is to be used in a production environment, a CA-signed certificate is recommended.
			</p>
              <p>
				The process of getting a certificate from a CA is fairly easy. A quick overview is as follows:
			</p>
              <div class="orderedlist">
                <ol>
                  <li>
                    <p>
						Create an encryption private and public key pair.
					</p>
                  </li>
                  <li>
                    <p>
						Create a certificate request based on the public key. The certificate request contains information about your server and the company hosting it.
					</p>
                  </li>
                  <li>
                    <p>
						<a id="id2986472" class="indexterm"></a>
						<a id="id2986489" class="indexterm"></a>
						<a id="id2986503" class="indexterm"></a>
						 Send the certificate request, along wi
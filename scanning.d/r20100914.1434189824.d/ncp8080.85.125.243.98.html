HTTP/1.0 200 Ok
Server: httpd
Date: Tue, 14 Sep 2010 20:46:11 GMT
Cache-Control: no-cache
Pragma: no-cache
Expires: 0
Content-Type: text/html
Connection: close

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=iso-8859-1" />
		<link rel="icon" href="images/favicon.ico" type="image/x-icon" />
		<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
		<script type="text/javascript" src="common.js"></script>
		<script type="text/javascript" src="lang_pack/english.js"></script>
		<script type="text/javascript" src="lang_pack/language.js"></script>
		<link type="text/css" rel="stylesheet" href="style/elegant/style.css" />
		<!--[if IE]><link type="text/css" rel="stylesheet" href="style/elegant/style_ie.css" /><![endif]-->
		<script type="text/javascript" src="js/prototype.js"></script>
		<script type="text/javascript" src="js/effects.js"></script>
		<script type="text/javascript" src="js/window.js"></script>
		<script type="text/javascript" src="js/window_effects.js"></script>
		<link type="text/css" rel="stylesheet" href="style/pwc/default.css" />
		<link type="text/css" rel="stylesheet" href="style/pwc/ddwrt.css" />
		<title>WRT54GL - Info</title>

<script type="text/javascript">
//<![CDATA[
function setWirelessTable() {
var table = document.getElementById("wireless_table");
var val = arguments;
cleanTable(table);
if(!val.length) {
var cell = table.insertRow(-1).insertCell(-1);
cell.colSpan = 8;
cell.align = "center";
cell.innerHTML = "- " + share.none + " -";
return;
}
for(var i = 0; i < val.length; i = i + 7) {
var row = table.insertRow(-1);

var mac = val[i];
if ("1" != "1") {
var cellmac = row.insertCell(-1);
cellmac.title = share.oui;
cellmac.style.cursor = "pointer";
cellmac.style.textDecoration = "underline";
eval("addEvent(cellmac, 'click', function() { getOUIFromMAC('" + mac + "') })");
cellmac.innerHTML = mac;
} else {
row.insertCell(-1).innerHTML = mac;		
}
row.insertCell(-1).innerHTML = val[i + 1];
row.insertCell(-1).innerHTML = val[i + 2];
row.insertCell(-1).innerHTML = val[i + 3];
row.insertCell(-1).innerHTML = val[i + 4];		
row.insertCell(-1).innerHTML = val[i + 5];		
row.insertCell(-1).innerHTML = val[i + 6];		
setMeterBar(row.insertCell(-1), (val[i + 4] == "0" ? 0 : parseInt(val[i + 4]) * 1.24 + 116), "");
}
}
function setWDSTable() {
var table = document.getElementById("wds_table");
var val = arguments;
cleanTable(table);
if(!val.length) {
setElementVisible("wds", false);
return;
}
for(var i = 0; i < val.length; i = i + 5) {
var row = table.insertRow(-1);

var mac = val[i];
if ("1" != "1") {
var cellmac = row.insertCell(-1);
cellmac.title = share.oui;
cellmac.style.cursor = "pointer";
cellmac.style.textDecoration = "underline";
eval("addEvent(cellmac, 'click', function() { getOUIFromMAC('" + mac + "') })");
cellmac.innerHTML = mac;
} else {
row.insertCell(-1).innerHTML = mac;		
}

row.insertCell(-1).innerHTML = val[i + 1];
row.insertCell(-1).innerHTML = val[i + 2];
row.insertCell(-1).innerHTML = val[i + 3];
row.insertCell(-1).innerHTML = val[i + 4];
setMeterBar(row.insertCell(-1), (val[i + 2] == "0" ? 0 : parseInt(val[i + 2]) * 1.24 + 116), "");
}
setElementVisible("wds", true);
}
function setDHCPTable() {
var table = document.getElementById("dhcp_leases_table");
var val = arguments;
cleanTable(table);
if(!val.length) {
var cell = table.insertRow(-1).insertCell(-1);
cell.colSpan = 4;
cell.align = "center";
cell.innerHTML = "- " + share.none + " -";
return;
}
for(var i = 0; i < val.length; i = i + 5) {

var row = table.insertRow(-1);
row.insertCell(-1).innerHTML = val[i];
row.insertCell(-1).innerHTML = val[i + 1];

var mac = val[i + 2];
if ("1" != "1") {
var cellmac = row.insertCell(-1);
cellmac.title = share.oui;
cellmac.style.cursor = "pointer";
cellmac.style.textDecoration = "underline";
eval("addEvent(cellmac, 'click', function() { getOUIFromMAC('" + mac + "') })");
cellmac.innerHTML = mac;
} else {
row.insertCell(-1).innerHTML = mac;		
}
row.insertCell(-1).innerHTML = val[i + 3];
}
}
function setPacketInfo(val) {
var packet = val.replace(/[A-Za-z=]/g, "").split(";");
setElementContent("packet_rx", packet[0] + " OK, " + (packet[1] > 0 ? packet[1] + " " + share.errs : share.none2 + " " + share.err) );
setElementContent("packet_tx", packet[2] + " OK, " + (packet[3] > 0 ? packet[3] + " " + share.errs : share.none2 + " " + share.err) );
}
function setMemoryValues(val) {
var mem = val.replace(/'/g, "").split(",");
var memTotal = parseInt(mem[19]) / 1024;
var memSystem = Math.pow(2, Math.ceil(Math.log(memTotal) / Math.LN2));
var memFree = parseInt(mem[22]) / 1024;
var memUsed = memTotal - memFree;
var memBuffer = parseInt(mem[28]) / 1024;
var memCached = parseInt(mem[31]) / 1024;
var memActive = parseInt(mem[37]) / 1024;
var memInactive = parseInt(mem[40]) / 1024;
setElementContent("mem_total", memTotal.toFixed(1) + " MB / " + memSystem.toFixed(1) + " MB");
setElementContent("mem_free", memFree.toFixed(1) + " MB / " + memTotal.toFixed(1) + " MB");
setElementContent("mem_used", memUsed.toFixed(1) + " MB / " + memTotal.toFixed(1) + " MB");
setElementContent("mem_buffer", memBuffer.toFixed(1) + " MB / " + memUsed.toFixed(1) + " MB");
setElementContent("mem_cached", memCached.toFixed(1) + " MB / " + memUsed.toFixed(1) + " MB");
setElementContent("mem_active", memActive.toFixed(1) + " MB / " + memUsed.toFixed(1) + " MB");
setElementContent("mem_inactive", memInactive.toFixed(1) + " MB / " + memUsed.toFixed(1) + " MB");
//	setElementContent("mem_hidden", "32 MB / 32 MB");
}
var update;
addEvent(window, "load", function() {
setPacketInfo("SWRXgoodPacket=54679;SWRXerrorPacket=0;SWTXgoodPacket=4660220;SWTXerrorPacket=111;");
setMemoryValues(",'total:','used:','free:','shared:','buffers:','cached:','Mem:','13361152','9302016','4059136','0','1175552','3399680','Swap:','0','0','0','MemTotal:','13048','kB','MemFree:','3964','kB','MemShared:','0','kB','Buffers:','1148','kB','Cached:','3320','kB','SwapCached:','0','kB','Active:','2824','kB','Inactive:','1668','kB','HighTotal:','0','kB','HighFree:','0','kB','LowTotal:','13048','kB','LowFree:','3964','kB','SwapTotal:','0','kB','SwapFree:','0','kB'");
	setWirelessTable();
	setWDSTable();
setDHCPTable();
setElementVisible("dhcp", "static" == "dhcp");
update = new StatusUpdate("Info.live.htm", 3);
update.onUpdate("packet_info", function(u) {
setPacketInfo(u.packet_info);
});
update.onUpdate("mem_info", function(u) {
setMemoryValues(u.mem_info);
});
update.onUpdate("active_wireless", function(u) {
eval('setWirelessTable(' + u.active_wireless + ')');
});
update.onUpdate("active_wds", function(u) {
eval('setWDSTable(' + u.active_wds + ')');
});
update.onUpdate("dhcp_leases", function(u) {
eval('setDHCPTable(' + u.dhcp_leases + ')');
});
update.onUpdate("lan_proto", function(u) {
setElementVisible("dhcp", u.lan_proto == "dhcp");
});
update.start();
});
addEvent(window, "unload", function() {
update.stop();
});
function refresh(F)
{F.submit()